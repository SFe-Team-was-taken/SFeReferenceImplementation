var os=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')});var R=class extends Uint8Array{currentIndex;constructor(e){super(e),this.currentIndex=0}};function ue(o){let e=o.reduce((i,s)=>i+s.length,0),t=new R(e),n=0;for(let i of o)t.set(i,n),n+=i.length;return t}function qt(o){o=Math.floor(o);let e=Math.floor(o/60),t=Math.round(o-e*60);return{minutes:e,seconds:t,time:`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}}function Yo(o){return o.trim().replaceAll(".mid","").replaceAll(".kar","").replaceAll(".rmi","").replaceAll("_"," ").trim()}var B={warn:"color: orange;",unrecognized:"color: red;",info:"color: aqua;",recognized:"color: lime",value:"color: yellow; background-color: black;"};var tt=class{constructor(e,t,n){this.ticks=e,this.messageStatusByte=t,this.messageData=n}};var N={noteOff:128,noteOn:144,polyPressure:160,controllerChange:176,programChange:192,channelPressure:208,pitchBend:224,systemExclusive:240,timecode:241,songPosition:242,songSelect:243,tuneRequest:246,clock:248,start:250,continue:251,stop:252,activeSensing:254,reset:255,sequenceNumber:0,text:1,copyright:2,trackName:3,instrumentName:4,lyric:5,marker:6,cuePoint:7,programName:8,midiChannelPrefix:32,midiPort:33,endOfTrack:47,setTempo:81,smpteOffset:84,timeSignature:88,keySignature:89,sequenceSpecific:127};function ns(o){let e=o&240,t=o&15,n=-1,i=o;return e>=128&&e<=224&&(n=t,i=e),{status:i,channel:n}}var T={bankSelect:0,modulationWheel:1,breathController:2,footController:4,portamentoTime:5,dataEntryMsb:6,mainVolume:7,balance:8,pan:10,expressionController:11,effectControl1:12,effectControl2:13,generalPurposeController1:16,generalPurposeController2:17,generalPurposeController3:18,generalPurposeController4:19,lsbForControl0BankSelect:32,lsbForControl1ModulationWheel:33,lsbForControl2BreathController:34,lsbForControl4FootController:36,lsbForControl5PortamentoTime:37,lsbForControl6DataEntry:38,lsbForControl7MainVolume:39,lsbForControl8Balance:40,lsbForControl10Pan:42,lsbForControl11ExpressionController:43,lsbForControl12EffectControl1:44,lsbForControl13EffectControl2:45,sustainPedal:64,portamentoOnOff:65,sostenutoPedal:66,softPedal:67,legatoFootswitch:68,hold2Pedal:69,soundVariation:70,timbreHarmonicContent:71,releaseTime:72,attackTime:73,brightness:74,soundController6:75,soundController7:76,soundController8:77,soundController9:78,soundController10:79,generalPurposeController5:80,generalPurposeController6:81,generalPurposeController7:82,generalPurposeController8:83,portamentoControl:84,reverbDepth:91,tremoloDepth:92,chorusDepth:93,detuneDepth:94,phaserDepth:95,dataIncrement:96,dataDecrement:97,NRPNLsb:98,NRPNMsb:99,RPNLsb:100,RPNMsb:101,allSoundOff:120,resetAllControllers:121,localControlOnOff:122,allNotesOff:123,omniModeOff:124,omniModeOn:125,monoModeOn:126,polyModeOn:127};var Jo=class{constructor(){this.events={noteoff:{},noteon:{},pitchwheel:{},controllerchange:{},programchange:{},channelpressure:{},polypressure:{},drumchange:{},stopall:{},newchannel:{},mutechannel:{},presetlistchange:{},allcontrollerreset:{},soundfonterror:{},synthdisplay:{}},this.timeDelay=0}addEvent(e,t,n){this.events[e][t]=n}removeEvent(e,t){delete this.events[e][t]}callEvent(e,t){this.events[e]&&(this.timeDelay>0?setTimeout(()=>{Object.values(this.events[e]).forEach(n=>{try{n(t)}catch(i){console.error(`Error while executing an event callback for ${e}:`,i)}})},this.timeDelay*1e3):Object.values(this.events[e]).forEach(n=>{try{n(t)}catch(i){console.error(`Error while executing an event callback for ${e}:`,i)}}))}};var ot={nodesAmount:4,defaultDelay:.03,delayVariation:.01,stereoDifference:.02,oscillatorFrequency:.2,oscillatorFrequencyVariation:.05,oscillatorGain:.003},Co=class{constructor(e,t=ot){let n=e.context;this.input=n.createChannelSplitter(2);let i=n.createChannelMerger(2),s=[],A=[],a=t.oscillatorFrequency,r=t.defaultDelay;for(let l=0;l<t.nodesAmount;l++)this.createChorusNode(a,r-t.stereoDifference,s,0,i,0,n,t),this.createChorusNode(a,r+t.stereoDifference,A,1,i,1,n,t),a+=t.oscillatorFrequencyVariation,r+=t.delayVariation;i.connect(e),this.merger=i,this.chorusLeft=s,this.chorusRight=A}delete(){this.input.disconnect(),delete this.input,this.merger.disconnect(),delete this.merger;for(let e of this.chorusLeft)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain;for(let e of this.chorusRight)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain}createChorusNode(e,t,n,i,s,A,a,r){let l=a.createOscillator();l.type="sine",l.frequency.value=e;let u=a.createGain();u.gain.value=r.oscillatorGain;let c=a.createDelay();c.delayTime.value=t,l.connect(u),u.connect(c.delayTime),l.start(a.currentTime),this.input.connect(c,i),c.connect(s,0,A),n.push({oscillator:l,oscillatorGain:u,delay:c})}};function is(o,e=void 0){let t=o.createConvolver();if(e)t.buffer=e;else{let n=new URL("impulse_response_2.flac",import.meta.url);fetch(n).then(async i=>{let s=await i.arrayBuffer();t.buffer=await o.decodeAudioData(s)})}return t}var le={noteOff:0,noteOn:1,ccChange:2,programChange:3,channelPressure:4,polyPressure:5,killNote:6,ccReset:7,setChannelVibrato:8,soundFontManager:9,stopAll:10,killNotes:11,muteChannel:12,addNewChannel:13,customcCcChange:14,debugMessage:15,systemExclusive:16,setMasterParameter:17,setDrums:18,pitchWheel:19,transpose:20,highPerformanceMode:21,lockController:22,sequencerSpecific:23,requestSynthesizerSnapshot:24,setLogLevel:25,keyModifierManager:26,setEffectsGain:27,destroyWorklet:28},Eo={mainVolume:0,masterPan:1,voicesCap:2,interpolationType:3},Re=-1,_t={channelProperties:0,eventCall:1,reportedCurrentTime:2,sequencerSpecific:3,synthesizerSnapshot:4,ready:5,soundfontError:6,identify:7};var Oa=!1,Va=!0,$n=!1;function x(...o){Oa&&console.info(...o)}function Z(...o){Va&&console.warn(...o)}function qe(...o){$n&&console.group(...o)}function Be(...o){$n&&console.groupCollapsed(...o)}function X(){$n&&console.groupEnd()}var ss={chorusEnabled:!0,chorusConfig:ot,reverbEnabled:!0,reverbImpulseResponse:void 0,audioNodeCreators:void 0};var fo={reloadSoundFont:0,addNewSoundFont:2,deleteSoundFont:3,rearrangeSoundFonts:4};var Ko=class{constructor(e){this.soundfontList=[{id:"main",bankOffset:0}],this._port=e.worklet.port,this.synth=e}_sendToWorklet(e,t){this._port.postMessage({messageType:le.soundFontManager,messageData:[e,t]})}async addNewSoundFont(e,t,n=0){if(this.soundfontList.find(i=>i.id===t)!==void 0)throw new Error("Cannot overwrite the existing soundfont. Use soundfontManager.delete(id) instead.");this._sendToWorklet(fo.addNewSoundFont,[e,t,n]),await new Promise(i=>this.synth.resolveWhenReady=i),this.soundfontList.push({id:t,bankOffset:n})}deleteSoundFont(e){if(this.soundfontList.length===0){Z("1 soundfont left. Aborting!");return}if(this.soundfontList.findIndex(t=>t.id===e)===-1){Z(`No soundfont with id of "${e}" found. Aborting!`);return}this._sendToWorklet(fo.deleteSoundFont,e)}rearrangeSoundFonts(e){this._sendToWorklet(fo.rearrangeSoundFonts,e),this.soundfontList.sort((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))}async reloadManager(e){this._sendToWorklet(fo.reloadSoundFont,e),await new Promise(t=>this.synth.resolveWhenReady=t)}};var h={INVALID:-1,startAddrsOffset:0,endAddrOffset:1,startloopAddrsOffset:2,endloopAddrsOffset:3,startAddrsCoarseOffset:4,modLfoToPitch:5,vibLfoToPitch:6,modEnvToPitch:7,initialFilterFc:8,initialFilterQ:9,modLfoToFilterFc:10,modEnvToFilterFc:11,endAddrsCoarseOffset:12,modLfoToVolume:13,unused1:14,chorusEffectsSend:15,reverbEffectsSend:16,pan:17,unused2:18,unused3:19,unused4:20,delayModLFO:21,freqModLFO:22,delayVibLFO:23,freqVibLFO:24,delayModEnv:25,attackModEnv:26,holdModEnv:27,decayModEnv:28,sustainModEnv:29,releaseModEnv:30,keyNumToModEnvHold:31,keyNumToModEnvDecay:32,delayVolEnv:33,attackVolEnv:34,holdVolEnv:35,decayVolEnv:36,sustainVolEnv:37,releaseVolEnv:38,keyNumToVolEnvHold:39,keyNumToVolEnvDecay:40,instrument:41,reserved1:42,keyRange:43,velRange:44,startloopAddrsCoarseOffset:45,keyNum:46,velocity:47,initialAttenuation:48,reserved2:49,endloopAddrsCoarseOffset:50,coarseTune:51,fineTune:52,sampleID:53,sampleModes:54,reserved3:55,scaleTuning:56,exclusiveClass:57,overridingRootKey:58,unused5:59,endOper:60},z=[];z[h.startAddrsOffset]={min:0,max:32768,def:0};z[h.endAddrOffset]={min:-32768,max:32768,def:0};z[h.startloopAddrsOffset]={min:-32768,max:32768,def:0};z[h.endloopAddrsOffset]={min:-32768,max:32768,def:0};z[h.startAddrsCoarseOffset]={min:0,max:32768,def:0};z[h.modLfoToPitch]={min:-12e3,max:12e3,def:0};z[h.vibLfoToPitch]={min:-12e3,max:12e3,def:0};z[h.modEnvToPitch]={min:-12e3,max:12e3,def:0};z[h.initialFilterFc]={min:1500,max:13500,def:13500};z[h.initialFilterQ]={min:0,max:960,def:0};z[h.modLfoToFilterFc]={min:-12e3,max:12e3,def:0};z[h.modEnvToFilterFc]={min:-12e3,max:12e3,def:0};z[h.endAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[h.modLfoToVolume]={min:-960,max:960,def:0};z[h.chorusEffectsSend]={min:0,max:1e3,def:0};z[h.reverbEffectsSend]={min:0,max:1e3,def:0};z[h.pan]={min:-500,max:500,def:0};z[h.delayModLFO]={min:-12e3,max:5e3,def:-12e3};z[h.freqModLFO]={min:-16e3,max:4500,def:0};z[h.delayVibLFO]={min:-12e3,max:5e3,def:-12e3};z[h.freqVibLFO]={min:-16e3,max:4500,def:0};z[h.delayModEnv]={min:-32768,max:5e3,def:-32768};z[h.attackModEnv]={min:-32768,max:8e3,def:-32768};z[h.holdModEnv]={min:-12e3,max:5e3,def:-12e3};z[h.decayModEnv]={min:-12e3,max:8e3,def:-12e3};z[h.sustainModEnv]={min:0,max:1e3,def:0};z[h.releaseModEnv]={min:-7200,max:8e3,def:-12e3};z[h.keyNumToModEnvHold]={min:-1200,max:1200,def:0};z[h.keyNumToModEnvDecay]={min:-1200,max:1200,def:0};z[h.delayVolEnv]={min:-12e3,max:5e3,def:-12e3};z[h.attackVolEnv]={min:-12e3,max:8e3,def:-12e3};z[h.holdVolEnv]={min:-12e3,max:5e3,def:-12e3};z[h.decayVolEnv]={min:-12e3,max:8e3,def:-12e3};z[h.sustainVolEnv]={min:0,max:1440,def:0};z[h.releaseVolEnv]={min:-7200,max:8e3,def:-12e3};z[h.keyNumToVolEnvHold]={min:-1200,max:1200,def:0};z[h.keyNumToVolEnvDecay]={min:-1200,max:1200,def:0};z[h.startloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[h.keyNum]={min:-1,max:127,def:-1};z[h.velocity]={min:-1,max:127,def:-1};z[h.initialAttenuation]={min:-250,max:1440,def:0};z[h.endloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[h.coarseTune]={min:-120,max:120,def:0};z[h.fineTune]={min:-12700,max:12700,def:0};z[h.scaleTuning]={min:0,max:1200,def:100};z[h.exclusiveClass]={min:0,max:99999,def:0};z[h.overridingRootKey]={min:-1,max:127,def:-1};z[h.sampleModes]={min:0,max:3,def:0};var U=class{generatorType=h.INVALID;generatorValue=0;constructor(e=h.INVALID,t=0,n=!0){if(this.generatorType=e,t===void 0)throw new Error("No value provided.");if(this.generatorValue=Math.round(t),n){let i=z[e];i!==void 0&&(this.generatorValue=Math.max(i.min,Math.min(i.max,this.generatorValue)))}}};var de={noController:0,noteOnVelocity:2,noteOnKeyNum:3,polyPressure:10,channelPressure:13,pitchWheel:14,pitchWheelRange:16,link:127},De={linear:0,concave:1,convex:2,switch:3},j=class o{currentValue=0;constructor(e){this.sourceEnum=e.srcEnum,this.modulatorDestination=e.dest,this.secondarySourceEnum=e.secSrcEnum,this.transformAmount=e.amt,this.transformType=e.transform,this.modulatorDestination>58&&(this.modulatorDestination=h.INVALID),this.sourcePolarity=this.sourceEnum>>9&1,this.sourceDirection=this.sourceEnum>>8&1,this.sourceUsesCC=this.sourceEnum>>7&1,this.sourceIndex=this.sourceEnum&127,this.sourceCurveType=this.sourceEnum>>10&3,this.secSrcPolarity=this.secondarySourceEnum>>9&1,this.secSrcDirection=this.secondarySourceEnum>>8&1,this.secSrcUsesCC=this.secondarySourceEnum>>7&1,this.secSrcIndex=this.secondarySourceEnum&127,this.secSrcCurveType=this.secondarySourceEnum>>10&3,this.isEffectModulator=(this.sourceEnum===219||this.sourceEnum===221)&&this.secondarySourceEnum===0&&(this.modulatorDestination===h.reverbEffectsSend||this.modulatorDestination===h.chorusEffectsSend)}static copy(e){return new o({srcEnum:e.sourceEnum,secSrcEnum:e.secondarySourceEnum,transform:e.transformType,amt:e.transformAmount,dest:e.modulatorDestination})}static isIdentical(e,t,n=!1){return e.sourceEnum===t.sourceEnum&&e.modulatorDestination===t.modulatorDestination&&e.secondarySourceEnum===t.secondarySourceEnum&&e.transformType===t.transformType&&(!n||e.transformAmount===t.transformAmount)}sumTransform(e){return new o({srcEnum:this.sourceEnum,secSrcEnum:this.secondarySourceEnum,dest:this.modulatorDestination,transform:this.transformType,amt:this.transformAmount+e.transformAmount})}debugString(){function e(i,s){return Object.keys(i).find(A=>i[A]===s)}let t=e(De,this.sourceCurveType);t+=this.sourcePolarity===0?" unipolar ":" bipolar ",t+=this.sourceDirection===0?"forwards ":"backwards ",this.sourceUsesCC?t+=e(T,this.sourceIndex):t+=e(de,this.sourceIndex);let n=e(De,this.secSrcCurveType);return n+=this.secSrcPolarity===0?" unipolar ":" bipolar ",n+=this.secSrcCurveType===0?"forwards ":"backwards ",this.secSrcUsesCC?n+=e(T,this.secSrcIndex):n+=e(de,this.secSrcIndex),`Modulator:
        Source: ${t}
        Secondary source: ${n}
        Destination: ${e(h,this.modulatorDestination)}
        Trasform amount: ${this.transformAmount}
        Transform type: ${this.transformType}
        

`}},ei=960,ti=De.concave;function nt(o,e,t,n,i){return o<<10|e<<9|t<<8|n<<7|i}var Ya=[new j({srcEnum:nt(ti,0,1,0,de.noteOnVelocity),dest:h.initialAttenuation,amt:ei,secSrcEnum:0,transform:0}),new j({srcEnum:129,dest:h.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new j({srcEnum:nt(ti,0,1,1,T.mainVolume),dest:h.initialAttenuation,amt:ei,secSrcEnum:0,transform:0}),new j({srcEnum:13,dest:h.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new j({srcEnum:526,dest:h.fineTune,amt:12700,secSrcEnum:16,transform:0}),new j({srcEnum:650,dest:h.pan,amt:500,secSrcEnum:0,transform:0}),new j({srcEnum:nt(ti,0,1,1,T.expressionController),dest:h.initialAttenuation,amt:ei,secSrcEnum:0,transform:0}),new j({srcEnum:219,dest:h.reverbEffectsSend,amt:200,secSrcEnum:0,transform:0}),new j({srcEnum:221,dest:h.chorusEffectsSend,amt:200,secSrcEnum:0,transform:0})],Ja=[new j({srcEnum:nt(De.linear,0,0,0,de.polyPressure),dest:h.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new j({srcEnum:nt(De.linear,0,0,1,T.tremoloDepth),dest:h.modLfoToVolume,amt:24,secSrcEnum:0,transform:0}),new j({srcEnum:nt(De.linear,1,0,1,T.releaseTime),dest:h.releaseVolEnv,amt:1200,secSrcEnum:0,transform:0}),new j({srcEnum:nt(De.linear,1,0,1,T.brightness),dest:h.initialFilterFc,amt:6e3,secSrcEnum:0,transform:0}),new j({srcEnum:nt(De.linear,1,0,1,T.timbreHarmonicContent),dest:h.initialFilterQ,amt:250,secSrcEnum:0,transform:0})],zo=Ya.concat(Ja);var St=128,Wo=147,Zo=new Int16Array(Wo).fill(0),Me=(o,e)=>Zo[o]=e<<7;Me(T.mainVolume,100);Me(T.balance,64);Me(T.expressionController,127);Me(T.pan,64);Me(T.timbreHarmonicContent,64);Me(T.releaseTime,64);Me(T.attackTime,64);Me(T.brightness,64);Me(T.soundController6,64);Me(T.soundController7,64);Me(T.soundController8,64);Me(T.soundController9,64);Me(T.generalPurposeController6,64);Me(T.generalPurposeController8,64);Me(T.portamentoControl,64);Me(St+de.pitchWheel,64);Me(St+de.pitchWheelRange,2);var _e={channelTuning:0,channelTransposeFine:1,modulationMultiplier:2,masterTuning:3,channelTuningSemitones:4},oi=Object.keys(_e).length,ni=new Float32Array(oi);ni[_e.modulationMultiplier]=1;var jo={Idle:0,RPCoarse:1,RPFine:2,NRPCoarse:3,NRPFine:4,DataCoarse:5,DataFine:6};function As(){this.channelOctaveTuning.fill(0),this.keyCentTuning.fill(0);for(let e=0;e<Zo.length;e++){if(this.lockedControllers[e])return;let t=Zo[e];this.midiControllers[e]!==t&&e<127&&this.synth.callEvent("controllerchange",{channel:this.channelNumber,controllerNumber:e,controllerValue:t>>7}),this.midiControllers[e]=t}this.channelVibrato={rate:0,depth:0,delay:0},this.holdPedal=!1,this.randomPan=!1;let o=this.customControllers[_e.channelTransposeFine];this.customControllers.set(ni),this.customControllers[_e.channelTransposeFine]=o,this.resetParameters()}function rs(){this.NRPCoarse=0,this.NRPFine=0,this.RPValue=0,this.dataEntryState=jo.Idle}var ii=new Float32Array(30001);for(let o=0;o<ii.length;o++){let e=-15e3+o;ii[o]=Math.pow(2,e/1200)}function it(o){return o<=-32767?0:ii[o- -15e3]}var Xo=-2e4,as=16500,si=new Float32Array(as-Xo+1);for(let o=0;o<si.length;o++){let e=Xo+o;si[o]=440*Math.pow(2,(e-6900)/1200)}function Bo(o){return o<Xo||o>as?440*Math.pow(2,(o-6900)/1200):si[~~o-Xo]}var ri=-1660,Ka=1600,Ai=new Float32Array((Ka-ri)*100+1);for(let o=0;o<Ai.length;o++){let e=(ri*100+o)/100;Ai[o]=Math.pow(10,-e/20)}function Xe(o){return Ai[Math.floor((o-ri)*100)]}var Ke=100,ai=90,za=15e-6,Qo=class o{currentSampleTime=0;sampleRate;currentAttenuationDb=Ke;state=0;releaseStartDb=Ke;releaseStartTimeSamples=0;currentReleaseGain=1;attackDuration=0;decayDuration=0;releaseDuration=0;attenuation=0;attenuationTargetGain=0;attenuationTarget=0;sustainDbRelative=0;delayEnd=0;attackEnd=0;holdEnd=0;decayEnd=0;constructor(e,t){this.sampleRate=e,this.canEndOnSilentSustain=t/10>=ai}static startRelease(e){e.volumeEnvelope.releaseStartTimeSamples=e.volumeEnvelope.currentSampleTime,e.volumeEnvelope.currentReleaseGain=Xe(e.volumeEnvelope.currentAttenuationDb),o.recalculate(e)}static recalculate(e){let t=e.volumeEnvelope,n=l=>Math.max(0,Math.floor(it(l)*t.sampleRate));t.attenuationTarget=Math.max(0,Math.min(e.modulatedGenerators[h.initialAttenuation],1440))/10,t.attenuationTargetGain=Xe(t.attenuationTarget),t.sustainDbRelative=Math.min(Ke,e.modulatedGenerators[h.sustainVolEnv]/10);let i=Math.min(Ke,t.sustainDbRelative);t.attackDuration=n(e.modulatedGenerators[h.attackVolEnv]);let s=e.modulatedGenerators[h.decayVolEnv],A=(60-e.targetKey)*e.modulatedGenerators[h.keyNumToVolEnvDecay],a=i/Ke;t.decayDuration=n(s+A)*a,t.releaseDuration=n(e.modulatedGenerators[h.releaseVolEnv]),t.delayEnd=n(e.modulatedGenerators[h.delayVolEnv]),t.attackEnd=t.attackDuration+t.delayEnd;let r=(60-e.targetKey)*e.modulatedGenerators[h.keyNumToVolEnvHold];if(t.holdEnd=n(e.modulatedGenerators[h.holdVolEnv]+r)+t.attackEnd,t.decayEnd=t.decayDuration+t.holdEnd,t.state===0&&t.attackEnd===0&&(t.state=2),e.isInRelease){let l=Math.max(0,Math.min(Ke,t.sustainDbRelative)),u=l/Ke;switch(t.decayDuration=n(s+A)*u,t.state){case 0:t.releaseStartDb=Ke;break;case 1:let g=1-(t.attackEnd-t.releaseStartTimeSamples)/t.attackDuration;t.releaseStartDb=20*Math.log10(g)*-1;break;case 2:t.releaseStartDb=0;break;case 3:t.releaseStartDb=(1-(t.decayEnd-t.releaseStartTimeSamples)/t.decayDuration)*l;break;case 4:t.releaseStartDb=l;break}t.releaseStartDb=Math.max(0,Math.min(t.releaseStartDb,Ke)),t.releaseStartDb>=ai&&(e.finished=!0),t.currentReleaseGain=Xe(t.releaseStartDb);let c=(Ke-t.releaseStartDb)/Ke;t.releaseDuration*=c}}static apply(e,t,n,i){let s=e.volumeEnvelope,A=n/10,a=i;if(e.isInRelease){let l=s.currentSampleTime-s.releaseStartTimeSamples;if(l>=s.releaseDuration){for(let c=0;c<t.length;c++)t[c]=0;e.finished=!0;return}let u=Ke-s.releaseStartDb;for(let c=0;c<t.length;c++){s.attenuation+=(s.attenuationTargetGain-s.attenuation)*a;let g=l/s.releaseDuration*u+s.releaseStartDb;s.currentReleaseGain=s.attenuation*Xe(g+A),t[c]*=s.currentReleaseGain,s.currentSampleTime++,l++}s.currentReleaseGain<=za&&(e.finished=!0);return}let r=0;switch(s.state){case 0:for(;s.currentSampleTime<s.delayEnd;)if(s.currentAttenuationDb=Ke,t[r]=0,s.currentSampleTime++,++r>=t.length)return;s.state++;case 1:for(;s.currentSampleTime<s.attackEnd;){s.attenuation+=(s.attenuationTargetGain-s.attenuation)*a;let l=1-(s.attackEnd-s.currentSampleTime)/s.attackDuration;if(t[r]*=l*s.attenuation*Xe(A),s.currentAttenuationDb=0,s.currentSampleTime++,++r>=t.length)return}s.state++;case 2:for(;s.currentSampleTime<s.holdEnd;)if(s.attenuation+=(s.attenuationTargetGain-s.attenuation)*a,t[r]*=s.attenuation*Xe(A),s.currentAttenuationDb=0,s.currentSampleTime++,++r>=t.length)return;s.state++;case 3:for(;s.currentSampleTime<s.decayEnd;)if(s.attenuation+=(s.attenuationTargetGain-s.attenuation)*a,s.currentAttenuationDb=(1-(s.decayEnd-s.currentSampleTime)/s.decayDuration)*s.sustainDbRelative,t[r]*=s.attenuation*Xe(s.currentAttenuationDb+A),s.currentSampleTime++,++r>=t.length)return;s.state++;case 4:for(s.canEndOnSilentSustain&&s.sustainDbRelative>=ai&&(e.finished=!0);;)if(s.attenuation+=(s.attenuationTargetGain-s.attenuation)*a,t[r]*=s.attenuation*Xe(s.sustainDbRelative+A),s.currentAttenuationDb=s.sustainDbRelative,s.currentSampleTime++,++r>=t.length)return}}};var pt=16384,Ct=new Float32Array(pt+1),Ht=new Float32Array(pt+1);Ct[0]=0;Ct[Ct.length-1]=1;Ht[0]=0;Ht[Ht.length-1]=1;for(let o=1;o<pt-1;o++){let e=-.4166666666666667*Math.log(o/(Ct.length-1))/Math.LN10;Ht[o]=1-e,Ct[Ct.length-1-o]=e}function ls(o,e,t,n){switch(o&&(t=1-t),e){case De.linear:return n?t*2-1:t;case De.switch:return t=t>.5?1:0,n?t*2-1:t;case De.concave:return n?(t=t*2-1,t<0?-Ct[~~(t*-pt)]:Ct[~~(t*pt)]):Ct[~~(t*pt)];case De.convex:return n?(t=t*2-1,t<0?-Ht[~~(t*-pt)]:Ht[~~(t*pt)]):Ht[~~(t*pt)]}}var li=1,ci=new Float32Array(1e3);for(let o=0;o<ci.length;o++)ci[o]=ls(0,De.convex,o/1e3,0);var yo=class o{attackDuration=0;decayDuration=0;holdDuration=0;releaseDuration=0;sustainLevel=0;delayEnd=0;attackEnd=0;holdEnd=0;decayEnd=0;releaseStartLevel=0;currentValue=0;static startRelease(e){o.recalculate(e)}static recalculate(e){let t=e.modulationEnvelope;e.isInRelease&&(t.releaseStartLevel=o.getValue(e,e.releaseStartTime,!0)),t.sustainLevel=1-e.modulatedGenerators[h.sustainModEnv]/1e3,t.attackDuration=it(e.modulatedGenerators[h.attackModEnv]);let n=(60-e.midiNote)*e.modulatedGenerators[h.keyNumToModEnvDecay],i=it(e.modulatedGenerators[h.decayModEnv]+n);t.decayDuration=i*(1-t.sustainLevel);let s=(60-e.midiNote)*e.modulatedGenerators[h.keyNumToModEnvHold];t.holdDuration=it(s+e.modulatedGenerators[h.holdModEnv]);let A=it(e.modulatedGenerators[h.releaseModEnv]);t.releaseDuration=A*t.releaseStartLevel,t.delayEnd=e.startTime+it(e.modulatedGenerators[h.delayModEnv]),t.attackEnd=t.delayEnd+t.attackDuration,t.holdEnd=t.attackEnd+t.holdDuration,t.decayEnd=t.holdEnd+t.decayDuration}static getValue(e,t,n=!1){let i=e.modulationEnvelope;return e.isInRelease&&!n?i.releaseStartLevel===0?0:Math.max(0,(1-(t-e.releaseStartTime)/i.releaseDuration)*i.releaseStartLevel):(t<i.delayEnd?i.currentValue=0:t<i.attackEnd?i.currentValue=ci[~~((1-(i.attackEnd-t)/i.attackDuration)*1e3)]:t<i.holdEnd?i.currentValue=li:t<i.decayEnd?i.currentValue=(1-(i.decayEnd-t)/i.decayDuration)*(i.sustainLevel-li)+li:i.currentValue=i.sustainLevel,i.currentValue)}};function $o(o,e,t){if(t<o)return 0;let n=(t-o)/(1/e)+.25;return Math.abs(n-~~(n+.5))*4-1}var en={linear:0,nearestNeighbor:1,fourthOrder:2},to=class{static getSampleLinear(e,t){let n=e.sample,i=n.cursor,s=n.sampleData;if(n.isLooping){let A=n.loopEnd-n.loopStart;for(let a=0;a<t.length;a++){for(;i>=n.loopEnd;)i-=A;let r=~~i,l=r+1;for(;l>=n.loopEnd;)l-=A;let u=i-r,c=s[l],g=s[r];t[a]=g+(c-g)*u,i+=n.playbackStep*e.currentTuningCalculated}}else{if(n.loopingMode===2&&!e.isInRelease)return;for(let A=0;A<t.length;A++){let a=~~i,r=a+1;if(r>=n.end){e.finished=!0;return}let l=i-a,u=s[r],c=s[a];t[A]=c+(u-c)*l,i+=n.playbackStep*e.currentTuningCalculated}}e.sample.cursor=i}static getSampleNearest(e,t){let n=e.sample,i=n.cursor,s=n.loopEnd-n.loopStart,A=n.sampleData;if(e.sample.isLooping)for(let a=0;a<t.length;a++){for(;i>=n.loopEnd;)i-=s;let r=~~i+1;for(;r>=n.loopEnd;)r-=s;t[a]=A[r],i+=n.playbackStep*e.currentTuningCalculated}else{if(n.loopingMode===2&&!e.isInRelease)return;for(let a=0;a<t.length;a++){let r=~~i+1;if(r>=n.end){e.finished=!0;return}t[a]=A[r],i+=n.playbackStep*e.currentTuningCalculated}}n.cursor=i}static getSampleCubic(e,t){let n=e.sample,i=n.cursor,s=n.sampleData;if(n.isLooping){let A=n.loopEnd-n.loopStart;for(let a=0;a<t.length;a++){for(;i>=n.loopEnd;)i-=A;let r=~~i,l=r+1,u=l+1,c=u+1,g=i-r;l>=n.loopEnd&&(l-=A),u>=n.loopEnd&&(u-=A),c>=n.loopEnd&&(c-=A);let d=s[r],p=s[l],E=s[u],f=s[c],w=.5*(E-d),y=d-2.5*p+2*E-.5*f,S=.5*(f-d)+1.5*(p-E);t[a]=((S*g+y)*g+w)*g+p,i+=n.playbackStep*e.currentTuningCalculated}}else{if(n.loopingMode===2&&!e.isInRelease)return;for(let A=0;A<t.length;A++){let a=~~i,r=a+1,l=r+1,u=l+1,c=i-a;if(r>=n.end||l>=n.end||u>=n.end){e.finished=!0;return}let g=s[a],d=s[r],p=s[l],E=s[u],f=.5*(p-g),w=g-2.5*d+2*p-.5*E,y=.5*(E-g)+1.5*(d-p);t[A]=((y*c+w)*c+f)*c+d,i+=n.playbackStep*e.currentTuningCalculated}}e.sample.cursor=i}};var tn=class o{static cachedCoefficients=[];a0=0;a1=0;a2=0;a3=0;a4=0;x1=0;x2=0;y1=0;y2=0;reasonanceCb=0;cutoffCents=13501;static apply(e,t,n,i){if(i&&n>13499&&e.filter.reasonanceCb===0)return;let s=e.filter;(s.cutoffCents!==n||s.reasonanceCb!==e.modulatedGenerators[h.initialFilterQ])&&(s.cutoffCents=n,s.reasonanceCb=e.modulatedGenerators[h.initialFilterQ],o.calculateCoefficients(s));for(let A=0;A<t.length;A++){let a=t[A],r=s.a0*a+s.a1*s.x1+s.a2*s.x2-s.a3*s.y1-s.a4*s.y2;s.x2=s.x1,s.x1=a,s.y2=s.y1,s.y1=r,t[A]=r}}static calculateCoefficients(e){let t=~~e.cutoffCents,n=e.reasonanceCb;if(o.cachedCoefficients?.[n]?.[t]===void 0){let s=Bo(t);s=Math.min(s,.45*sampleRate);let A=n/10,a=Xe(-1*(A-3.01)),r=1/Math.sqrt(Xe(-A)),l=2*Math.PI*s/sampleRate,u=Math.cos(l),c=Math.sin(l)/(2*a),g=(1-u)*r,d=g/2,p=d,E=1+c,f=-2*u,w=1-c,y={};y.a0=d/E,y.a1=g/E,y.a2=p/E,y.a3=f/E,y.a4=w/E,o.cachedCoefficients[n]===void 0&&(o.cachedCoefficients[n]=[]),o.cachedCoefficients[n][t]=y}let i=o.cachedCoefficients[n][t];e.a0=i.a0,e.a1=i.a1,e.a2=i.a2,e.a3=i.a3,e.a4=i.a4}};function cs(o,e,t,n,i,s,A){if(o.isInRelease||currentTime>=o.releaseStartTime&&(o.isInRelease=!0,Qo.startRelease(o),yo.startRelease(o),o.sample.loopingMode===3&&(o.sample.isLooping=!1)),o.modulatedGenerators[h.initialAttenuation]>2500)return o.isInRelease&&(o.finished=!0),o.finished;let a=o.targetKey,r=o.modulatedGenerators[h.fineTune]+this.customControllers[_e.channelTuning]+this.customControllers[_e.channelTransposeFine]+this.customControllers[_e.masterTuning]+this.channelOctaveTuning[o.midiNote%12]+this.keyCentTuning[o.midiNote],l=o.modulatedGenerators[h.coarseTune]+this.customControllers[_e.channelTuningSemitones],u=this.synth.tunings[this.preset.program]?.[o.realKey];if(u?.midiNote>=0&&(a=u.midiNote,r+=u.centTuning),o.portamentoFromKey>-1){let v=Math.min((currentTime-o.startTime)/o.portamentoDuration,1),F=a-o.portamentoFromKey;l-=F*(1-v)}r+=(a-o.sample.rootKey)*o.modulatedGenerators[h.scaleTuning];let c=o.modulatedGenerators[h.vibLfoToPitch];if(c!==0){let v=o.startTime+it(o.modulatedGenerators[h.delayVibLFO]),F=Bo(o.modulatedGenerators[h.freqVibLFO]),K=$o(v,F,currentTime);r+=K*(c*this.customControllers[_e.modulationMultiplier])}let g=o.modulatedGenerators[h.initialFilterFc],d=g,p=o.modulatedGenerators[h.modLfoToPitch],E=o.modulatedGenerators[h.modLfoToVolume],f=o.modulatedGenerators[h.modLfoToFilterFc],w=0;if(p+f+E!==0){let v=o.startTime+it(o.modulatedGenerators[h.delayModLFO]),F=Bo(o.modulatedGenerators[h.freqModLFO]),K=$o(v,F,currentTime);r+=K*(p*this.customControllers[_e.modulationMultiplier]),w=-K*E,d+=K*f}if(this.channelVibrato.depth>0){let v=$o(o.startTime+this.channelVibrato.delay,this.channelVibrato.rate,currentTime);v&&(r+=v*this.channelVibrato.depth)}let y=o.modulatedGenerators[h.modEnvToPitch],S=o.modulatedGenerators[h.modEnvToFilterFc],D=yo.getValue(o,currentTime);d+=D*S,r+=D*y;let k=~~(r+l*100);k!==o.currentTuningCents&&(o.currentTuningCents=k,o.currentTuningCalculated=Math.pow(2,k/1200));let I=new Float32Array(e.length);switch(this.synth.interpolationType){case en.fourthOrder:to.getSampleCubic(o,I);break;case en.linear:default:to.getSampleLinear(o,I);break;case en.nearestNeighbor:to.getSampleNearest(o,I);break}return tn.apply(o,I,d,g>13499),Qo.apply(o,I,w,this.synth.volumeEnvelopeSmoothingFactor),this.panVoice(o,I,e,t,n,i,s,A),o.finished}var Wa=4600,Za=2e3,gs=Math.PI/2,on=-500,ds=500,gi=ds-on,hs=new Float32Array(gi+1),Is=new Float32Array(gi+1);for(let o=on;o<=ds;o++){let e=(o-on)/gi,t=o-on;hs[t]=Math.cos(gs*e),Is[t]=Math.sin(gs*e)}function us(o,e,t,n,i,s,A,a){if(isNaN(e[0]))return;let r;if(o.overridePan)r=o.overridePan;else{let d=Math.max(-500,Math.min(500,o.modulatedGenerators[h.pan]));o.currentPan+=(d-o.currentPan)*this.synth.panSmoothingFactor,r=o.currentPan}let l=this.synth.currentGain,u=~~(r+500),c=hs[u]*l*this.synth.panLeft,g=Is[u]*l*this.synth.panRight;if(!this.synth.oneOutputMode){let d=this.synth.reverbGain*o.modulatedGenerators[h.reverbEffectsSend]/Wa*l,p=this.synth.chorusGain*o.modulatedGenerators[h.chorusEffectsSend]/Za;if(d>0){for(let E=0;E<e.length;E++)i[E]+=d*e[E];s.set(i)}if(p>0){let E=c*p,f=g*p;for(let w=0;w<e.length;w++)A[w]+=E*e[w],a[w]+=f*e[w]}}if(c>0)for(let d=0;d<e.length;d++)t[d]+=c*e[d];if(g>0)for(let d=0;d<e.length;d++)n[d]+=g*e[d]}var oo=class{midiControllers=new Int16Array(Wo);lockedControllers=Array(Wo).fill(!1);customControllers=new Float32Array(oi);channelTransposeKeyShift=0;channelOctaveTuning=new Int8Array(12);keyCentTuning=new Int16Array(128);holdPedal=!1;drumChannel=!1;velocityOverride=0;randomPan=!1;dataEntryState=jo.Idle;NRPCoarse=0;NRPFine=0;RPValue=0;bank=0;preset=void 0;lockPreset=!1;presetUsesOverride=!1;lockGSNRPNParams=!1;channelVibrato={delay:0,depth:0,rate:0};isMuted=!1;voices=[];sustainedVoices=[];cachedVoices=[];channelNumber;synth;constructor(e,t,n){this.synth=e,this.preset=t,this.channelNumber=n;for(let i=0;i<128;i++)this.cachedVoices.push([])}renderAudio(e,t,n,i,s,A){this.voices=this.voices.filter(a=>!this.renderVoice(a,e,t,n,i,s,A))}};oo.prototype.renderVoice=cs;oo.prototype.panVoice=us;oo.prototype.resetControllers=As;oo.prototype.resetParameters=rs;var ms={velocityOverride:128};var nn=class{velocity=-1;patch={bank:-1,program:-1};constructor(e=-1,t=-1,n=-1){this.velocity=e,this.patch={bank:t,program:n}}},sn={addMapping:0,deleteMapping:1,clearMappings:2};var An=class{constructor(e){this.synth=e,this._keyModifiers=[]}_sendToWorklet(e,t){this.synth.post({messageType:le.keyModifierManager,messageData:[e,t]})}addModifier(e,t,n){let i=n?.velocity??-1,s=n?.patch?.program??-1,A=n?.patch?.bank??-1,a=new nn(i,A,s);this._keyModifiers[e]===void 0&&(this._keyModifiers[e]=[]),this._keyModifiers[e][t]=a,this._sendToWorklet(sn.addMapping,[e,t,a])}getModifier(e,t){return this._keyModifiers?.[e]?.[t]}deleteModifier(e,t){this._sendToWorklet(sn.deleteMapping,[e,t]),this._keyModifiers[e]?.[t]!==void 0&&(this._keyModifiers[e][t]=void 0)}clearModifiers(){this._sendToWorklet(sn.clearMappings,void 0),this._keyModifiers=[]}};var ja="spessasynth-worklet-system",di=350,He=9,Xa=16;var no=class{constructor(e,t,n=!0,i=void 0,s=ss){x("%cInitializing SpessaSynth synthesizer...",B.info),this.context=e.context,this.targetNode=e;let A=i?.oneOutput===!0;this.eventHandler=new Jo,this._voiceCap=di,this._destroyed=!1,this._outputsAmount=Xa,this.channelsAmount=this._outputsAmount,this.resolveWhenReady=void 0,this.isReady=new Promise(l=>this.resolveWhenReady=l),this.channelProperties=[];for(let l=0;l<this.channelsAmount;l++)this.addNewChannel(!1);this.channelProperties[He].isDrum=!0,this._voicesAmount=0,this._highPerformanceMode=!1;let a=Array(this._outputsAmount+2).fill(2),r=this._outputsAmount+2;A&&(r=1,a=[32]),i?.snapshot?.effectsConfig!==void 0?(this.effectsConfig=i.snapshot.effectsConfig,delete i.snapshot.effectsConfig):this.effectsConfig=s;try{let l=s?.audioNodeCreators?.worklet;l||(l=(u,c,g)=>new AudioWorkletNode(u,c,g)),this.worklet=l(this.context,ja,{outputChannelCount:a,numberOfOutputs:r,processorOptions:{midiChannels:this._outputsAmount,soundfont:t,enableEventSystem:n,startRenderingData:i}})}catch(l){throw console.error(l),new Error("Could not create the audioWorklet. Did you forget to addModule()?")}if(this.worklet.port.onmessage=l=>this.handleMessage(l.data),this.soundfontManager=new Ko(this),this.keyModifierManager=new An(this),this._snapshotCallback=void 0,this.sequencerCallbackFunction=void 0,A)this.worklet.connect(e,0);else{let l=this.effectsConfig?.reverbEnabled??!0,u=this.effectsConfig?.chorusEnabled??!0;l&&(this.reverbProcessor=is(this.context,this.effectsConfig.reverbImpulseResponse),this.reverbProcessor.connect(e),this.worklet.connect(this.reverbProcessor,0)),u&&(this.chorusProcessor=new Co(e,this.effectsConfig.chorusConfig),this.worklet.connect(this.chorusProcessor.input,1));for(let c=2;c<this.channelsAmount+2;c++)this.worklet.connect(e,c)}this.eventHandler.addEvent("newchannel","synth-new-channel",()=>{this.channelsAmount++})}get voiceCap(){return this._voiceCap}set voiceCap(e){this._setMasterParam(Eo.voicesCap,e),this._voiceCap=e}get highPerformanceMode(){return this._highPerformanceMode}set highPerformanceMode(e){this._highPerformanceMode=e}get currentTime(){return this.context.currentTime}get voicesAmount(){return this._voicesAmount}setLogLevel(e,t,n,i){this.post({channelNumber:Re,messageType:le.setLogLevel,messageData:[e,t,n,i]})}_setMasterParam(e,t){this.post({channelNumber:Re,messageType:le.setMasterParameter,messageData:[e,t]})}setInterpolationType(e){this._setMasterParam(Eo.interpolationType,e)}handleMessage(e){let t=e.messageData;switch(e.messageType){case _t.channelProperties:this.channelProperties=t,this._voicesAmount=this.channelProperties.reduce((n,i)=>n+i.voicesAmount,0);break;case _t.eventCall:this.eventHandler.callEvent(t.eventName,t.eventData);break;case _t.sequencerSpecific:this.sequencerCallbackFunction&&this.sequencerCallbackFunction(t.messageType,t.messageData);break;case _t.synthesizerSnapshot:this._snapshotCallback&&this._snapshotCallback(t);break;case _t.ready:this.resolveWhenReady();break;case _t.soundfontError:Z(new Error(t)),this.eventHandler.callEvent("soundfonterror",t);break}}async getSynthesizerSnapshot(){return new Promise(e=>{this._snapshotCallback=t=>{this._snapshotCallback=void 0,t.effectsConfig=this.effectsConfig,e(t)},this.post({messageType:le.requestSynthesizerSnapshot,messageData:void 0,channelNumber:Re})})}addNewChannel(e=!0){this.channelProperties.push({voicesAmount:0,pitchBend:0,pitchBendRangeSemitones:0,isMuted:!1,isDrum:!1}),e&&this.post({channelNumber:0,messageType:le.addNewChannel,messageData:null})}setVibrato(e,t){this.post({channelNumber:e,messageType:le.setChannelVibrato,messageData:t})}connectIndividualOutputs(e){if(e.length!==this._outputsAmount)throw new Error(`input nodes amount differs from the system's outputs amount!
            Expected ${this._outputsAmount} got ${e.length}`);for(let t=0;t<this._outputsAmount;t++)this.worklet.connect(e[t],t+2)}disableGSNRPparams(){this.setVibrato(Re,{depth:0,rate:-1,delay:0})}debugMessage(){x(this),this.post({channelNumber:0,messageType:le.debugMessage,messageData:void 0})}noteOn(e,t,n,i=!1){this.post({channelNumber:e,messageType:le.noteOn,messageData:[t,n,i]})}noteOff(e,t,n=!1){n?this.post({channelNumber:e,messageType:le.killNote,messageData:t}):this.post({channelNumber:e,messageType:le.noteOff,messageData:t})}stopAll(e=!1){this.post({channelNumber:Re,messageType:le.stopAll,messageData:e?1:0})}controllerChange(e,t,n,i=!1){if(t>127||t<0)throw new Error(`Invalid controller number: ${t}`);n=Math.floor(n),t=Math.floor(t),this.post({channelNumber:e,messageType:le.ccChange,messageData:[t,n,i]})}resetControllers(){this.post({channelNumber:Re,messageType:le.ccReset,messageData:void 0})}channelPressure(e,t){this.post({channelNumber:e,messageType:le.channelPressure,messageData:t})}polyPressure(e,t,n){this.post({channelNumber:e,messageType:le.polyPressure,messageData:[t,n]})}post(e){if(this._destroyed)throw new Error("This synthesizer instance has been destroyed!");this.worklet.port.postMessage(e)}pitchWheel(e,t,n){this.post({channelNumber:e,messageType:le.pitchWheel,messageData:[t,n]})}transpose(e){this.transposeChannel(Re,e,!1)}transposeChannel(e,t,n=!1){this.post({channelNumber:e,messageType:le.transpose,messageData:[t,n]})}setMainVolume(e){this._setMasterParam(Eo.mainVolume,e)}setMasterPan(e){this._setMasterParam(Eo.masterPan,e)}setPitchBendRange(e,t){this.controllerChange(e,T.RPNMsb,0),this.controllerChange(e,T.dataEntryMsb,t),this.controllerChange(e,T.RPNMsb,127),this.controllerChange(e,T.RPNLsb,127),this.controllerChange(e,T.dataEntryMsb,0)}programChange(e,t,n=!1){this.post({channelNumber:e,messageType:le.programChange,messageData:[t,n]})}velocityOverride(e,t){this.post({channelNumber:e,messageType:le.ccChange,messageData:[ms.velocityOverride,t,!0]})}lockController(e,t,n){this.post({channelNumber:e,messageType:le.lockController,messageData:[t,n]})}muteChannel(e,t){this.post({channelNumber:e,messageType:le.muteChannel,messageData:t})}async reloadSoundFont(e){Z("reloadSoundFont is deprecated. Please use the soundfontManager property instead."),await this.soundfontManager.reloadManager(e)}systemExclusive(e,t=0){this.post({channelNumber:Re,messageType:le.systemExclusive,messageData:[Array.from(e),t]})}tuneKeys(e,t){if(t.length>127)throw new Error("Too many tunings. Maximum allowed is 127.");let n=[127,16,8,2,e,t.length];for(let i of t)if(n.push(i.sourceKey),i.targetPitch===-1)n.push(127,127,127);else{let s=Math.floor(i.targetPitch),A=Math.floor((i.targetPitch-s)/61e-6);n.push(s,A>>7&127,A&127)}n.push(247),this.systemExclusive(n)}setDrums(e,t){this.post({channelNumber:e,messageType:le.setDrums,messageData:t})}sendMessage(e,t=0){let n=ns(e[0]);switch(n.channel+=t,n.status){case N.noteOn:let i=e[2];i>0?this.noteOn(n.channel,e[1],i):this.noteOff(n.channel,e[1]);break;case N.noteOff:this.noteOff(n.channel,e[1]);break;case N.pitchBend:this.pitchWheel(n.channel,e[2],e[1]);break;case N.controllerChange:this.controllerChange(n.channel,e[1],e[2]);break;case N.programChange:this.programChange(n.channel,e[1]);break;case N.polyPressure:this.polyPressure(n.channel,e[0],e[1]);break;case N.channelPressure:this.channelPressure(n.channel,e[1]);break;case N.systemExclusive:this.systemExclusive(new R(e.slice(1)));break;case N.reset:this.stopAll(!0),this.resetControllers();break;default:break}}setReverbResponse(e){this.reverbProcessor.buffer=e,this.effectsConfig.reverbImpulseResponse=e}setChorusConfig(e){this.worklet.disconnect(this.chorusProcessor.input),this.chorusProcessor.delete(),delete this.chorusProcessor,this.chorusProcessor=new Co(this.targetNode,e),this.worklet.connect(this.chorusProcessor.input,1),this.effectsConfig.chorusConfig=e}setEffectsGain(e,t){this.post({messageType:le.setEffectsGain,messageData:[e,t]})}destroy(){this.reverbProcessor.disconnect(),this.chorusProcessor.delete(),this.post({messageType:le.destroyWorklet,messageData:void 0}),this.worklet.disconnect(),delete this.worklet,delete this.reverbProcessor,delete this.chorusProcessor,this._destroyed=!0}reverbateEverythingBecauseWhyNot(){for(let e=0;e<this.channelsAmount;e++)this.controllerChange(e,T.reverbDepth,127),this.lockController(e,T.reverbDepth,!0);return"That's the spirit!"}};function $a(){let o=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(o=!0)}(navigator.userAgent||navigator.vendor||window.opera),o}var Pe=$a();function ps(){let o=n=>{this.pressedKeys.delete(n),this.releaseNote(n,this.channel),this.synth.noteOff(this.channel,n)},e=(n,i)=>{let s;if(Pe)s=127;else{let a=this.keys[0].getBoundingClientRect();if(this.keyboard.classList.contains("sideways")){let r=i.clientX-a.left,l=a.width;s=Math.floor((l-r)/l*127)}else{let r=i.clientY-a.top,l=a.height;s=Math.floor(r/l*127)}}this.onNotePressed&&this.onNotePressed(n,s),this.synth.noteOn(this.channel,n,s,this.enableDebugging)},t=n=>{let i=n.touches?Array.from(n.touches):[n],s=new Set;i.forEach(A=>{let a=document.elementFromPoint(A.clientX,A.clientY),r=parseInt(a.id.replace("note",""));s.add(r),!(isNaN(r)||r<0||this.pressedKeys.has(r))&&(this.pressedKeys.add(r),e(r,A))}),this.pressedKeys.forEach(A=>{s.has(A)||o(A)})};Pe||(document.addEventListener("mousedown",n=>{this.mouseHeld=!0,t(n)}),document.addEventListener("mouseup",()=>{this.mouseHeld=!1,this.pressedKeys.forEach(n=>{o(n)})}),this.keyboard.onmousemove=n=>{this.mouseHeld&&t(n)},this.keyboard.onmouseleave=()=>{this.pressedKeys.forEach(n=>{o(n)})}),this.keyboard.ontouchstart=t.bind(this),this.keyboard.ontouchend=t.bind(this),this.keyboard.ontouchmove=t.bind(this)}var Cs=20,So=class{onNotePressed=void 0;constructor(e,t){this.mouseHeld=!1,this.pressedKeys=new Set,this.mode="light",this.enableDebugging=!1,this.sizeChangeAnimationId=-1,this.modeChangeAnimationId=-1,this._keyRange={min:0,max:127},this.synth=t,this.channel=0,this.channelColors=e,this._shown=!0,this._createKeyboard(),this.synth.eventHandler.addEvent("noteon","keyboard-note-on",n=>{this.pressNote(n.midiNote,n.channel,n.velocity)}),this.synth.eventHandler.addEvent("noteoff","keyboard-note-off",n=>{this.releaseNote(n.midiNote,n.channel)}),this.synth.eventHandler.addEvent("stopall","keyboard-stop-all",()=>{this.clearNotes()}),this.synth.eventHandler.addEvent("mutechannel","keyboard-mute-channel",n=>{if(n.isMuted)for(let i=0;i<128;i++)this.releaseNote(i,n.channel)})}get shown(){return this._shown}set shown(e){e===!0?this.keyboard.style.display="":this.keyboard.style.display="none",this._shown=e}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this.setKeyRange(e,!0)}setHoldPedal(e){e?(this.synth.controllerChange(this.channel,T.sustainPedal,127),this.keyboard.style.filter="brightness(0.5)"):(this.synth.controllerChange(this.channel,T.sustainPedal,0),this.keyboard.style.filter="")}_createKeyboard(){this.keyboard=document.getElementById("keyboard"),this.keyboard.innerHTML="",this.keys=[],this.keyColors=[];for(let e=this._keyRange.min;e<this._keyRange.max+1;e++){let t=this._createKey(e);this.keyColors.push([]),this.keyboard.appendChild(t),this.keys.push(t)}this._handlePointers(),this.mode==="dark"&&(this.mode="light",this.toggleMode(!1))}_createKey(e){function t(s){let A=s%12;return A===1||A===3||A===6||A===8||A===10}let n=document.createElement("div");if(n.classList.add("key"),n.id=`note${e}`,t(e))n.classList.add("sharp_key");else{n.classList.add("flat_key");let s=!1,A=!1;e>=0&&(s=t(e-1)),e<127&&(A=t(e+1)),A&&s?n.classList.add("between_sharps"):s?n.classList.add("left_sharp"):A&&n.classList.add("right_sharp")}return n}toggleMode(e=!0){if(this.mode==="light"?this.mode="dark":this.mode="light",!e){this.keys.forEach(n=>{n.classList.contains("flat_key")&&n.classList.toggle("flat_dark_key")});return}this.modeChangeAnimationId&&clearTimeout(this.modeChangeAnimationId),this.keyboard.classList.add("mode_transform"),document.body.scrollHeight<=window.innerHeight&&document.body.classList.add("no_scroll"),this.modeChangeAnimationId=setTimeout(()=>{this.keys.forEach(n=>{n.classList.contains("flat_key")&&n.classList.toggle("flat_dark_key")}),this.keyboard.classList.remove("mode_transform"),setTimeout(()=>document.body.classList.remove("no_scroll"),500)},500)}setKeyRange(e,t=!0){Math.abs(e.max-e.min)<12&&(e.min-=6,e.max=e.min+12);let i=900/(e.max-e.min+5),s=document.styleSheets[0].cssRules,A;for(let a of s)if(a.selectorText==="#keyboard .key"){A=a;break}if(A.style.setProperty("--pressed-transform-skew",`${8e-4/(i/7)}`),t){this.sizeChangeAnimationId&&clearTimeout(this.sizeChangeAnimationId);let a=getComputedStyle(this.keyboard),r=parseFloat(a.getPropertyValue("--current-min-height").replace(/[^\d.]+/g,"")),l=this.keyboard.getBoundingClientRect().height,u=i/r,c=l*u-l,g=(this._keyRange.min+this._keyRange.max)/2,d=(e.min+e.max)/2;this._keyRange=e;let p=this.keys.find(w=>w.classList.contains("sharp_key")).getBoundingClientRect().width,E=(g-d)*p,f=parseFloat(a.getPropertyValue("--key-border-radius").replace(/[^\d.]+/g,""));this.keyboard.style.marginTop=`${c}px`,this.keyboard.style.transition="",this.keyboard.style.transform=`scale(${u}) translateX(${E}px)`,this.keyboard.style.setProperty("--key-border-radius",`${f/u}vmin`),this.sizeChangeAnimationId=setTimeout(()=>{this.keyboard.style.setProperty("--current-min-height",`${i}`),this.keyboard.style.transition="none",this.keyboard.style.transform="",this.keyboard.style.marginTop="",this.keyboard.style.setProperty("--key-border-radius",""),this._createKeyboard(),setTimeout(()=>this.keyboard.style.transition="",75)},500)}else this.keyboard.style.setProperty("--current-min-height",`${i}`),this._keyRange=e,this._createKeyboard()}selectChannel(e){this.channel=e}pressNote(e,t,n){let i=this.keys[e-this._keyRange.min];if(i===void 0)return;i.classList.add("pressed");let s=i.classList.contains("sharp_key"),A=n/127,a=this.channelColors[t%16].match(/\d+(\.\d+)?/g).map(parseFloat),r;if(!s&&this.mode==="light"?r=`rgba(${a.slice(0,3).map(u=>255-(255-u)*A).join(", ")}, ${a[3]})`:r=`rgba(${a.slice(0,3).map(u=>u*A).join(", ")}, ${a[3]})`,i.style.background=r,this.mode==="dark"){let l=Cs*A;i.style.boxShadow=`${r} 0px 0px ${l}px ${l/5}px`}this.keyColors[e-this._keyRange.min].push(this.channelColors[t%16])}releaseNote(e,t){let n=e-this._keyRange.min,i=this.keys[n];if(i===void 0)return;t%=this.channelColors.length;let s=this.keyColors[n];if(!s)return;let A=this.channelColors[t];for(let r=0;r<s.length;r++)s[r]===A&&(s.splice(r,1),r--);let a=s[s.length-1]||"";i.style.background=a,this.mode==="dark"&&a!==""&&(i.style.boxShadow=`0px 0px ${Cs}px ${a}`),s.length<1&&(i.classList.remove("pressed"),i.style.background="",i.style.boxShadow="")}clearNotes(){this.keys.forEach((e,t)=>{e.classList.remove("pressed"),e.style.background="",e.style.boxShadow="",this.keyColors[t]=[]})}};So.prototype._handlePointers=ps;function Pt(o,e){let t=o.replace(/[^\d,]/g,"").split(",");return`rgb(${e(parseInt(t[0]))}, ${e(parseInt(t[1]))}, ${e(parseInt(t[2]))})`}var el="#000";function Es(o,e,t){o.forEach(n=>{if(n.pressedProgress===0)return;e.fillStyle=n.color;let i=n.pressedProgress*n.velocity;if(e.globalAlpha=.5*i,t){e.fillRect(n.xPos,n.yPos-n.height*i,n.width,n.height*(i*2+1)),e.globalAlpha=1;return}e.fillRect(n.xPos-n.width*i,n.yPos,n.width*(i*2+1),n.height),e.globalAlpha=1}),o.forEach(n=>{e.fillStyle=n.color,e.save(),e.translate(n.xPos,n.yPos),e.fillRect(0,0,n.width,n.height),e.restore(),e.strokeStyle=el,e.lineWidth=n.stroke,e.strokeRect(n.xPos,n.yPos,n.width,n.height)})}var hi=!1;function fs(o=!0,e=!1){let t=(this.seq===void 0||this?.seq?.paused===!0)&&this.synth.voicesAmount===0&&!e,n=!1;if(!this.renderBool||t)if(hi){o&&requestAnimationFrame(this.render.bind(this));return}else hi=!0,n=!0;else hi=!1;if(o&&this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderAnalysers&&!this.synth.highPerformanceMode&&this.renderWaveforms(n),this.renderNotes&&this.noteTimes){let A=this.computeNotePositions(this.synth.highPerformanceMode);this.synth.highPerformanceMode||Es(A,this.drawingContext,this.sideways)}let i=performance.now()-this.frameTimeStart;this.frameTimeStart=performance.now();let s=1e3/i;this.drawingContext.textBaseline="hanging",this.drawingContext.textAlign="end",this.drawingContext.font=`${io}px monospace`,this.drawingContext.fillStyle="white",this.drawingContext.strokeStyle="white",this.drawingContext.fillText(Math.round(s).toString()+" FPS",this.canvas.width,io*2+5),this.drawingContext.fillText(this.version,this.canvas.width,5),this.drawingContext.fillText(`${this.notesOnScreen} notes`,this.canvas.width,io+5),this.noteTimes&&(this.drawingContext.textAlign="start",this.drawingContext.fillText(this.seq.currentTempo+"BPM",0,5),this.drawingContext.fillText(this.currentTimeSignature,0,io+5)),this.showHoldPedal&&(this.drawingContext.font=`${io*3}px monospace`,this.drawingContext.textAlign="center",this.drawingContext.fillText(this.holdPedalIsDownText,this.canvas.width/2,this.canvas.height/4)),this.onRender&&this.onRender(),o&&requestAnimationFrame(this.render.bind(this))}function Bs(o=!1){this.notesOnScreen=0;let e=this.sideways?this.canvas.height:this.canvas.width,t=this.sideways?this.canvas.width:this.canvas.height,n=this.keyRange.max-this.keyRange.min,i=e/(n+1),s=i-Vt*2,A=this.noteFallingTimeMs/1e3,a=this.noteAfterTriggerTimeMs/1e3,r=this.seq.currentHighResolutionTime-this.timeOffset,l=r-a,u=A+a,c=l+u,g=ys/u,d=[];this.synth.channelProperties.forEach(E=>{if(this.showVisualPitch){let f=E.pitchBend-8192+this.visualPitchBendOffset;d.push(E.pitchBendRangeSemitones*(f/8192*i))}else d.push(0)});let p=[];return this.noteTimes.forEach((E,f)=>{if(E.renderStartIndex>=E.notes.length||!this.renderChannels[f])return;let w=E.renderStartIndex,y=E.notes,S=y[w],D=-1;for(;S.start<=c&&(w++,!(this.notesOnScreen>Ss));){let k=S.start+S.length;if(k>l&&S.length>0){let I=S.length/u*t-Vt*2;if(this.notesOnScreen<1e3||I>g){D===-1&&(D=w-1);let v=(S.start-l)/u*t,F;if(this._notesFall?F=t-I-v+Vt:F=v+Vt,S.midiNote<this.keyRange.min||S.midiNote>this.keyRange.max){if(w>=y.length)break;S=y[w];continue}let K=S.midiNote-this.keyRange.min,W=i*K+Vt,_,Y,ee,G;if(this.sideways?(_=F,Y=W,G=s,ee=I):(Y=F,_=W,ee=s,G=I),this.notesOnScreen++,o)this.drawingContext.fillStyle=this.plainColors[f],this.drawingContext.fillRect(_+Ot+Vt,Y+Ot,ee-Ot*2,G-Ot*2);else{let H;if(S.start>r||k<r)this.sideways?this.drawActiveNotes?H=this.sidewaysDarkerColors[f]:H=this.sidewaysChannelColors[f]:this.drawActiveNotes?H=this.darkerColors[f]:H=this.channelColors[f],p.push({xPos:_,yPos:Y,height:G,width:ee,stroke:Ot,pressedProgress:0,velocity:S.velocity,color:H});else{this.sideways?(this.showVisualPitch&&(Y+=d[f]),H=this.sidewaysChannelColors[f]):(this.showVisualPitch&&(_+=d[f]),H=this.channelColors[f]);let ne;this.drawActiveNotes?ne=1+(S.start-r)/(S.length*Qs):ne=0,p.push({xPos:_,yPos:Y,height:G,width:ee,stroke:Ot,pressedProgress:ne,velocity:S.velocity,color:H})}}}}if(w>=y.length)break;S=y[w]}D>-1&&(E.renderStartIndex=D)}),p.sort((E,f)=>f.height-E.height),p}function ws(o=!1){let e=this.canvas.width/4,t=this.canvas.height/4;this.channelAnalysers.forEach((n,i)=>{let s=i%4,A=Math.floor(i/4),a=()=>{let d=this.canvas.width/4,p=this.canvas.height/4,E=d*s,f=p*A+p/2;this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[i],this.drawingContext.beginPath(),this.drawingContext.moveTo(E,f),this.drawingContext.lineTo(E+d,f),this.drawingContext.stroke()};if(o){a();return}let r=new Float32Array(n.frequencyBinCount);if(n.getFloatTimeDomainData(r),!r.some(d=>d!==0)){a();return}let u=e*s,c=t*A+t/2,g=this.waveMultiplier*t;if(this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[i],this.drawingContext.beginPath(),this._stabilizeWaveforms){let d=r.length/4,p=e/d,E=Math.floor(d/2),f=r.length-E;for(let D=f;D>=1;D--)if(r[D-1]<0&&r[D]>=0){f=D;break}let w=u,y=f-E,S=f+E;for(let D=y;D<S;D++)this.drawingContext.lineTo(w,c+r[D]*g),w+=p}else{let d=e/r.length,p=u;for(let E=0;E<r.length;E++)this.drawingContext.lineTo(p,c+r[E]*g),p+=d}this.drawingContext.stroke(),i++})}function ks(o){for(let e of this.channelAnalysers)e.disconnect(),this.channelAnalysers.splice(0,1);this.channelAnalysers=[];for(let e=0;e<o.channelsAmount;e++){let t=new AnalyserNode(o.context,{fftSize:this._normalAnalyserFft,smoothingTimeConstant:.4});this.channelAnalysers.push(t)}o.eventHandler.addEvent("mutechannel","renderer-mute-channel",e=>{this.renderChannels[e.channel]=!e.isMuted}),this.updateFftSize()}function bs(){for(let o=0;o<this.channelAnalysers.length;o++){let e=this.synth.channelProperties[o].isDrum,t=e?this._drumAnalyserFft:this._normalAnalyserFft,n=e?4/2:4;this.channelAnalysers[o].fftSize=Math.min(32768,this._stabilizeWaveforms?t*n:t)}}function vs(o){o.connectIndividualOutputs(this.channelAnalysers),o.eventHandler.addEvent("drumchange","renderer-drum-change",()=>{setTimeout(this.updateFftSize.bind(this),100)})}function xs(){for(let o of this.channelAnalysers)o.disconnect();x("%cAnalysers disconnected!",B.recognized)}function Ms(o){this.seq=o,this.seq.addOnTimeChangeEvent(()=>this.resetIndexes(),"renderer-time-change"),this.seq.addOnSongChangeEvent(async e=>{if(this.calculateNoteTimes(await this.seq.getMIDI()),this.resetIndexes(),e.RMIDInfo?.IPIC!==void 0){let t=new Blob([e.RMIDInfo?.IPIC.buffer]),n=URL.createObjectURL(t),i=this.canvas.classList.contains("light_mode")?0:.9;this.canvas.style.background=`linear-gradient(rgba(0, 0, 0, ${i}), rgba(0, 0, 0, ${i})), center center / cover url("${n}")`}else this.canvas.style.background=""},"renderer-song-change"),this.seq.addOnMetaEvent(e=>{let[t,n]=e;t===N.timeSignature&&(this.currentTimeSignature=`${n[0]}/${Math.pow(2,n[1])}`)},"renderer-meta-event")}function Fs(){this.noteTimes&&this.noteTimes.forEach(o=>o.renderStartIndex=0)}function Yt(o,e){let t=0;for(let n=8*(e-1);n>=0;n-=8)t|=o[o.currentIndex++]<<n;return t>>>0}function wo(o,e){let t=new Array(e).fill(0);for(let n=e-1;n>=0;n--)t[n]=o&255,o>>=8;return t}var rn=.02;function Rs(o){function e(c){return c.messageData=new R(c.messageData.buffer),c.messageData.currentIndex=0,6e7/Yt(c.messageData,3)}let t=[],i=o.tracks.flat();i.sort((c,g)=>c.ticks-g.ticks);for(let c=0;c<16;c++)t.push({renderStartIndex:0,notes:[]});let s=0,A=60/(120*o.timeDivision),a=0,r=0,l=[];for(let c=0;c<16;c++)l.push([]);let u=(c,g)=>{let d=l[g].findIndex(E=>E.midiNote===c),p=l[g][d];if(p){let E=s-p.start;p.length=E<rn&&g===He?rn:E,l[g].splice(d,1)}r--};for(;a<i.length;){let c=i[a],g=c.messageStatusByte>>4,d=c.messageStatusByte&15;if(g===8)u(c.messageData[0],d);else if(g===9)if(c.messageData[1]===0)u(c.messageData[0],d);else{u(c.messageData[0],d);let p={midiNote:c.messageData[0],start:s,length:-1,velocity:c.messageData[1]/127};t[d].notes.push(p),l[d].push(p),r++}else c.messageStatusByte===81&&(A=60/(e(c)*o.timeDivision));if(++a>=i.length)break;s+=A*(i[a].ticks-c.ticks)}r>0&&l.forEach((c,g)=>{c.forEach(d=>{let p=s-d.start;d.length=p<rn&&g===He?rn:p})}),this.noteTimes=t,x("%cFinished loading note times and ready to render the sequence!",B.info)}var tl=1024,ol=4096,nl=2,il=2,an=.6,ln=.5,Ot=1,Vt=1,io=12,Qs=.6,ys=2,Ss=81572,Oe=class{onRender;constructor(e,t,n,i,s=""){this.noteFallingTimeMs=1e3,this.noteAfterTriggerTimeMs=0,this._keyRange={min:0,max:127},this.version="v"+s,this.visualPitchBendOffset=0,this.lineThickness=il,this._normalAnalyserFft=tl,this._drumAnalyserFft=ol,this.waveMultiplier=nl,this.holdPedalIsDownText="",i.bindObjectProperty(this,"holdPedalIsDownText","locale.synthesizerController.holdPedalDown"),this.showHoldPedal=!1,this._notesFall=!0,this.sideways=!1,this.currentTimeSignature="4/4",this._renderBool=!0,this.renderAnalysers=!0,this.renderNotes=!0,this.drawActiveNotes=!0,this.showVisualPitch=!0,this._stabilizeWaveforms=!0,this.renderChannels=Array(16).fill(!0),this.canvas=n,this.drawingContext=this.canvas.getContext("2d"),this.plainColors=e,this.computeColors(),this.synth=t,this.notesOnScreen=0,this.timeOffset=0,this.channelAnalysers=[],this.createChannelAnalysers(t),this.connectChannelAnalysers(t)}get stabilizeWaveforms(){return this._stabilizeWaveforms}set stabilizeWaveforms(e){this._stabilizeWaveforms=e,this.updateFftSize()}get direction(){return this._notesFall?"down":"up"}set direction(e){this._notesFall=e==="down"}get normalAnalyserFft(){return this._normalAnalyserFft}set normalAnalyserFft(e){this._normalAnalyserFft=e,this.updateFftSize()}get drumAnalyserFft(){return this._drumAnalyserFft}set drumAnalyserFft(e){this._drumAnalyserFft=e,this.updateFftSize()}get renderBool(){return this._renderBool}set renderBool(e){this._renderBool=e,e===!0?this.connectChannelAnalysers(this.synth):this.disconnectChannelAnalysers()}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this._keyRange=e}toggleDarkMode(){this.canvas.classList.toggle("light_mode")}computeColors(){this.channelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Pt(e,n=>n*ln)),t.addColorStop(1,e),t}),this.darkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Pt(e,n=>n*ln*an)),t.addColorStop(1,Pt(e,n=>n*an)),t}),this.sidewaysChannelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Pt(e,n=>n*ln)),t.addColorStop(1,e),t}),this.sidewaysDarkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Pt(e,n=>n*ln*an)),t.addColorStop(1,Pt(e,n=>n*an)),t})}};Oe.prototype.render=fs;Oe.prototype.computeNotePositions=Bs;Oe.prototype.createChannelAnalysers=ks;Oe.prototype.updateFftSize=bs;Oe.prototype.connectChannelAnalysers=vs;Oe.prototype.disconnectChannelAnalysers=xs;Oe.prototype.connectSequencer=Ms;Oe.prototype.calculateNoteTimes=Rs;Oe.prototype.resetIndexes=Fs;Oe.prototype.renderWaveforms=ws;function L(o,e){let t=0;for(let n=0;n<e;n++)t|=o[o.currentIndex++]<<n*8;return t>>>0}function xe(o,e,t){for(let n=0;n<t;n++)o[o.currentIndex++]=e>>n*8&255}function q(o,e){o[o.currentIndex++]=e&255,o[o.currentIndex++]=e>>8}function $(o,e){xe(o,e,4)}function wt(o,e){let t=e<<8|o;return t>32767?t-65536:t}function Ls(o){return o>127?o-256:o}function ce(o,e,t=void 0,n=!0){if(t){let i=o.slice(o.currentIndex,o.currentIndex+e);return o.currentIndex+=e,new TextDecoder(t.replace(/[^\x20-\x7E]/g,"")).decode(i.buffer)}else{let i=!1,s="";for(let A=0;A<e;A++){let a=o[o.currentIndex++];if(!i){if((a<32||a>127)&&a!==10){if(n){i=!0;continue}else if(a===0){i=!0;continue}}s+=String.fromCharCode(a)}}return s}}function Jt(o,e=0){let t=o.length;e>0&&(t=e);let n=new R(t);return Se(n,o,e),n}function dt(o){return Jt(o,o.length+1)}function Se(o,e,t=0){t>0&&e.length>t&&(e=e.slice(0,t));for(let n=0;n<e.length;n++)o[o.currentIndex++]=e.charCodeAt(n);if(t>e.length)for(let n=0;n<t-e.length;n++)o[o.currentIndex++]=0;return o}var ge=class{constructor(e,t,n){this.header=e,this.size=t,this.chunkData=n}};function Ae(o,e=!0,t=!1){let n=ce(o,4),i=L(o,4),s;return e&&(s=new R(o.buffer.slice(o.currentIndex,o.currentIndex+i))),(e||t)&&(o.currentIndex+=i),i%2!==0&&o[o.currentIndex]===0&&o.currentIndex++,new ge(n,i,s)}function Ie(o,e=void 0){let t=8+o.size;o.size%2!==0&&t++,e&&(t+=e.length);let n=new R(t);return e&&(n.set(e,n.currentIndex),n.currentIndex+=e.length),Se(n,o.header),$(n,t-8-(e?.length||0)),n.set(o.chunkData,n.currentIndex),n}function V(o,e,t=!1,n=!1){if(t){let l=new Uint8Array(e.length+1);l.set(e),e=l}let i=8,s=i+e.length,A=e.length;s%2!==0&&s++;let a=o;n&&(s+=4,A+=4,i+=4,a="LIST");let r=new R(s);return Se(r,a),$(r,A),n&&Se(r,o),r.set(e,i),r}function Ve(o,e){return o.find(t=>t.header!=="LIST"?!1:(t.chunkData.currentIndex=0,ce(t.chunkData,4)===e))}function cn(o){let e=[o&127];for(o>>=7;o>0;)e.unshift(o&127|128),o>>=7;return e}function gn(o){if(!o.tracks)throw new Error("MIDI has no tracks!");let e=[];for(let i of o.tracks){let s=[],A=0,a;for(let r of i){let l=r.ticks-A,u;r.messageStatusByte<=N.keySignature||r.messageStatusByte===N.sequenceSpecific?u=[255,r.messageStatusByte,...cn(r.messageData.length),...r.messageData]:r.messageStatusByte===N.systemExclusive?u=[240,...cn(r.messageData.length),...r.messageData]:(u=[],a!==r.messageStatusByte&&(a=r.messageStatusByte,u.push(r.messageStatusByte)),u.push(...r.messageData)),s.push(...cn(l)),s.push(...u),A+=l}e.push(new Uint8Array(s))}function t(i,s){for(let A=0;A<i.length;A++)s.push(i.charCodeAt(A))}let n=[];t("MThd",n),n.push(...wo(6,4)),n.push(0,o.format),n.push(...wo(o.tracksAmount,2)),n.push(...wo(o.timeDivision,2));for(let i of e)t("MTrk",n),n.push(...wo(i.length,4)),n.push(...i);return new Uint8Array(n)}function Ii(o){return new tt(o,N.systemExclusive,new R([65,16,66,18,64,0,127,0,65,247]))}function Kt(o,e,t,n){return new tt(n,N.controllerChange|o%16,new R([e,t]))}function sl(o,e){let t=16|[1,2,3,4,5,6,7,8,0,9,10,11,12,13,14,15][o%16],n=[65,16,66,18,64,t,21,1],s=128-(64+t+21+1)%128;return new tt(e,N.systemExclusive,new R([...n,s,247]))}function Al(o,e=[],t=[],n=[],i=[]){Be("%cApplying changes to the MIDI file...",B.info);let s=new Set;e.forEach(S=>{s.add(S.channel)});let A="gs",a=!1,r=Array(o.tracks.length).fill(0),l=o.tracks.length;function u(){let S=0,D=1/0;return o.tracks.forEach((k,I)=>{r[I]>=k.length||k[r[I]].ticks<D&&(S=I,D=k[r[I]].ticks)}),S}let c=o.midiPorts.slice(),g={},d=0;function p(S,D){o.usedChannelsOnTrack[S].size!==0&&(d===0&&(d+=16,g[D]=0),g[D]===void 0&&(g[D]=d,d+=16),c[S]=D)}o.midiPorts.forEach((S,D)=>{p(D,S)});let E=d,f=Array(E).fill(!0),w=Array(E).fill(0),y=Array(E).fill(0);for(i.forEach(S=>{let D=Math.trunc(S.keyShift),k=S.keyShift-D;w[S.channel]=D,y[S.channel]=k});l>0;){let S=u(),D=o.tracks[S];if(r[S]>=D.length){l--;continue}let k=r[S]++,I=D[k],v=()=>{D.splice(k,1),r[S]--},F=(ee,G=0)=>{D.splice(k+G,0,ee),r[S]++},K=g[c[S]]||0;if(I.messageStatusByte===N.midiPort){p(S,I.messageData[0]);continue}if(I.messageStatusByte<=N.sequenceSpecific&&I.messageStatusByte>=N.sequenceNumber)continue;let W=I.messageStatusByte&240,_=I.messageStatusByte&15,Y=_+K;if(n.indexOf(Y)!==-1){v();continue}switch(W){case N.noteOn:if(f[Y]){f[Y]=!1,t.filter(ne=>ne.channel===Y).forEach(ne=>{let we=Kt(_,ne.controllerNumber,ne.controllerValue,I.ticks);F(we)});let H=y[Y];if(H!==0){let ne=H*64+64,we=Kt(_,T.RPNMsb,0,I.ticks),Ce=Kt(_,T.RPNLsb,1,I.ticks),at=Kt(Y,T.dataEntryMsb,ne,I.ticks),Ne=Kt(_,T.lsbForControl6DataEntry,0,I.ticks);F(Ne),F(at),F(Ce),F(we)}if(s.has(Y)){let ne=e.find(lt=>lt.channel===Y),we=ne.bank,Ce=ne.program;x(`%cSetting %c${ne.channel}%c to %c${we}:${Ce}%c. Track num: %c${S}`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized);let at=new tt(I.ticks,N.programChange|_,new R([Ce]));if(F(at),!ne.isDrum&&A==="xg"){let lt=Kt(_,T.lsbForControl0BankSelect,we,I.ticks);F(lt)}let Ne=Kt(_,T.bankSelect,we,I.ticks);F(Ne),ne.isDrum&&(A==="gs"&&_!==He?(x(`%cAdding GS Drum change on track %c${S}`,B.recognized,B.value),F(sl(_,I.ticks))):A==="xg"&&(x(`%cAdding XG Drum change on track %c${S}`,B.recognized,B.value),we=127))}}I.messageData[0]+=w[Y];break;case N.noteOff:I.messageData[0]+=w[Y];break;case N.programChange:if(s.has(Y)){v();continue}break;case N.controllerChange:let ee=I.messageData[0];if(t.find(H=>H.channel===Y&&ee===H.controllerNumber)!==void 0){v();continue}if((ee===T.bankSelect||ee===T.lsbForControl0BankSelect)&&s.has(Y)){v();continue}break;case N.systemExclusive:if(I.messageData[0]===67&&I.messageData[2]===76&&I.messageData[5]===126&&I.messageData[6]===0)x("%cXG system on detected",B.info),A="xg",a=!0;else if(I.messageData[0]===67&&I.messageData[2]===76&&I.messageData[3]===8&&I.messageData[5]===3)s.has(I.messageData[4]+K)&&v();else if(I.messageData[0]===65&&I.messageData[2]===66&&I.messageData[6]===127){a=!0,x("%cGS on detected!",B.recognized);break}else I.messageData[0]===126&&I.messageData[2]===9&&(x("%cGM/2 on detected, removing!",B.info),v(),a=!1)}}if(!a){let S=0;o.tracks[0][0].messageStatusByte===N.trackName&&S++,o.tracks[0].splice(S,0,Ii(0)),x("%cGS on not detected. Adding it.",B.info)}X()}function Dt(o,e){let t=[],n=[],i=[],s=[];e.channelSnapshots.forEach((A,a)=>{if(A.isMuted){n.push(a);return}let r=A.channelTransposeKeyShift+A.customControllers[_e.channelTransposeFine]/100;r!==0&&t.push({channel:a,keyShift:r}),A.lockPreset&&i.push({channel:a,program:A.program,bank:A.bank,isDrum:A.drumChannel}),A.lockedControllers.forEach((l,u)=>{if(!l||u>127||u===T.bankSelect)return;let c=A.midiControllers[u]>>7;s.push({channel:a,controllerNumber:u,controllerValue:c})})}),Al(o,i,s,n,t)}var ye={name:"INAM",album:"IPRD",album2:"IALB",artist:"IART",genre:"IGNR",picture:"IPIC",copyright:"ICOP",creationDate:"ICRD",comment:"ICMT",engineer:"IENG",software:"ISFT",encoding:"IENC",midiEncoding:"MENC",bankOffset:"DBNK"},kt="utf-8",rl="Created using SpessaSynth";function dn(o,e,t,n=0,i="Shift_JIS",s={},A=!0){if(qe("%cWriting the RMIDI File...",B.info),x(`%cConfiguration: Bank offset: %c${n}%c, encoding: %c${i}`,B.info,B.value,B.info,B.value),x("metadata",s),x("Initial bank offset",e.bankOffset),A){let w=function(){let k=0,I=1/0;return e.tracks.forEach((v,F)=>{E[F]>=v.length||v[E[F]].ticks<I&&(k=F,I=v[E[F]].ticks)}),k},d="gm",p=[],E=Array(e.tracks.length).fill(0),f=e.tracks.length,y=Array(e.tracks.length).fill(0),S=16+e.midiPortChannelOffsets.reduce((k,I)=>I>k?I:k),D=[];for(let k=0;k<S;k++)D.push({program:0,drums:k%16===He,lastBank:void 0,hasBankSelect:!1});for(;f>0;){let k=w(),I=e.tracks[k];if(E[k]>=I.length){f--;continue}let v=I[E[k]];E[k]++;let F=e.midiPortChannelOffsets[y[k]];if(v.messageStatusByte===N.midiPort){y[k]=v.messageData[0];continue}let K=v.messageStatusByte&240;if(K!==N.controllerChange&&K!==N.programChange&&K!==N.systemExclusive)continue;if(K===N.systemExclusive){if(v.messageData[0]!==65||v.messageData[2]!==66||v.messageData[3]!==18||v.messageData[4]!==64||(v.messageData[5]&16)===0||v.messageData[6]!==21){v.messageData[0]===67&&v.messageData[2]===76&&v.messageData[5]===126&&v.messageData[6]===0?d="xg":v.messageData[0]===65&&v.messageData[2]===66&&v.messageData[6]===127?d="gs":v.messageData[0]===126&&v.messageData[2]===9&&(d="gm",p.push({tNum:k,e:v}));continue}let Y=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][v.messageData[5]&15]+F;D[Y].drums=!!(v.messageData[7]>0&&v.messageData[5]>>4);continue}let W=(v.messageStatusByte&15)+F,_=D[W];if(K===N.programChange){_.drums?t.presets.findIndex(G=>G.program===v.messageData[0]&&G.bank===128)===-1&&(v.messageData[0]=t.presets.find(G=>G.bank===128)?.program||0):t.presets.findIndex(G=>G.program===v.messageData[0]&&G.bank!==128)===-1&&(v.messageData[0]=t.presets.find(G=>G.bank!==128)?.program||0),_.program=v.messageData[0];let Y=Math.max(0,_.lastBank?.messageData[1]-e.bankOffset),ee=_.drums?128:Y;if(_.lastBank===void 0)continue;if(d==="xg"&&_.drums&&(D[W].lastBank.messageData[1]=127),t.presets.findIndex(G=>G.bank===ee&&G.program===v.messageData[0])===-1){let G=t.presets.find(H=>H.program===v.messageData[0])?.bank+n||n;_.lastBank.messageData[1]=G,x(`%cNo preset %c${ee}:${v.messageData[0]}%c. Changing bank to ${G}.`,B.info,B.recognized,B.info)}else{let H=(ee===128?d==="xg"?127:0:Y)+n;_.lastBank.messageData[1]=H,x(`%cPreset %c${ee}:${v.messageData[0]}%c exists. Changing bank to ${H}.`,B.info,B.recognized,B.info)}continue}v.messageData[0]===T.bankSelect&&(_.hasBankSelect=!0,d==="xg"&&(_.drums=v.messageData[1]===120||v.messageData[1]===126||v.messageData[1]===127),_.lastBank=v)}if(D.forEach((k,I)=>{if(k.hasBankSelect===!0)return;let v=I%16,F=N.programChange|v,K=Math.floor(I/16)*16,W=e.midiPortChannelOffsets.indexOf(K),_=e.tracks.find((H,ne)=>e.midiPorts[ne]===W&&e.usedChannelsOnTrack[ne].has(v));if(_===void 0)return;let Y=_.findIndex(H=>H.messageStatusByte===F);if(Y===-1){let H=_.findIndex(Ce=>Ce.messageStatusByte>128&&Ce.messageStatusByte<240&&(Ce.messageStatusByte&15)===v);if(H===-1)return;let ne=_[H].ticks,we=t.getPreset(0,0).program;_.splice(H,0,new tt(ne,N.programChange|v,new R([we]))),Y=H}x(`%cAdding bank select for %c${I}`,B.info,B.recognized);let ee=_[Y].ticks,G=t.getPreset(0,k.program)?.bank+n||n;_.splice(Y,0,new tt(ee,N.controllerChange|v,new R([T.bankSelect,G])))}),d!=="gs"&&d!=="xg"){for(let I of p)e.tracks[I.tNum].splice(e.tracks[I.tNum].indexOf(I.e),1);let k=0;e.tracks[0][0].messageStatusByte===N.trackName&&k++,e.tracks[0].splice(k,0,Ii(0))}}let a=new R(gn(e).buffer),r=[Jt("INFO")],l=new TextEncoder;if(r.push(V(ye.software,l.encode("SpessaSynth"),!0)),s.name!==void 0?(r.push(V(ye.name,l.encode(s.name),!0)),i=kt):r.push(V(ye.name,e.rawMidiName,!0)),s.creationDate!==void 0)i=kt,r.push(V(ye.creationDate,l.encode(s.creationDate),!0));else{let d=new Date().toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});r.push(V(ye.creationDate,dt(d),!0))}if(s.comment!==void 0&&(i=kt,r.push(V(ye.comment,l.encode(s.comment)))),s.engineer!==void 0&&r.push(V(ye.engineer,l.encode(s.engineer),!0)),s.album!==void 0&&(i=kt,r.push(V(ye.album,l.encode(s.album),!0)),r.push(V(ye.album2,l.encode(s.album),!0))),s.artist!==void 0&&(i=kt,r.push(V(ye.artist,l.encode(s.artist),!0))),s.genre!==void 0&&(i=kt,r.push(V(ye.genre,l.encode(s.genre),!0))),s.picture!==void 0&&r.push(V(ye.picture,new Uint8Array(s.picture))),s.copyright!==void 0)i=kt,r.push(V(ye.copyright,l.encode(s.copyright),!0));else{let d=e.copyright.length>0?e.copyright:rl;r.push(V(ye.copyright,dt(d)))}let u=new R(2);xe(u,n,2),r.push(V(ye.bankOffset,u)),s.midiEncoding!==void 0&&(r.push(V(ye.midiEncoding,l.encode(s.midiEncoding))),i=kt),r.push(V(ye.encoding,dt(i)));let c=ue(r),g=ue([Jt("RMID"),V("data",a),V("LIST",c),o]);return x("%cFinished!",B.info),X(),V("RIFF",g)}var Do=class{timeDivision=0;duration=0;tempoChanges=[{ticks:0,tempo:120}];copyright="";tracksAmount=0;lyrics=[];lyricsTicks=[];firstNoteOn=0;keyRange={min:0,max:127};lastVoiceEventTick=0;midiPorts=[0];midiPortChannelOffsets=[0];usedChannelsOnTrack=[];loop={start:0,end:0};midiName="";midiNameUsesFileName=!1;fileName="";rawMidiName=void 0;format=0;RMIDInfo={};bankOffset=0;isKaraokeFile=!1};var ko=class o extends Do{embeddedSoundFont=void 0;tracks=[];static copyFrom(e){let t=new o;return t.midiName=e.midiName,t.midiNameUsesFileName=e.midiNameUsesFileName,t.fileName=e.fileName,t.timeDivision=e.timeDivision,t.duration=e.duration,t.copyright=e.copyright,t.tracksAmount=e.tracksAmount,t.firstNoteOn=e.firstNoteOn,t.keyRange={...e.keyRange},t.lastVoiceEventTick=e.lastVoiceEventTick,t.loop={...e.loop},t.format=e.format,t.bankOffset=e.bankOffset,t.isKaraokeFile=e.isKaraokeFile,t.tempoChanges=[...e.tempoChanges],t.lyrics=e.lyrics.map(n=>new Uint8Array(n)),t.lyricsTicks=[...e.lyricsTicks],t.midiPorts=[...e.midiPorts],t.midiPortChannelOffsets=[...e.midiPortChannelOffsets],t.usedChannelsOnTrack=e.usedChannelsOnTrack.map(n=>new Set(n)),t.rawMidiName=e.rawMidiName?new Uint8Array(e.rawMidiName):void 0,t.embeddedSoundFont=e.embeddedSoundFont?e.embeddedSoundFont.slice():void 0,t.RMIDInfo={...e.RMIDInfo},t.tracks=e.tracks.map(n=>[...n]),t}flush(){let e=[];for(let i of this.tracks){i.sort((A,a)=>A.ticks-a.ticks);let s=i.find(A=>(A.messageStatusByte&240)===N.noteOn);s&&e.push(s.ticks)}this.firstNoteOn=Math.min(...e),this.lastVoiceEventTick=0,this.tempoChanges=[{ticks:0,tempo:120}],this.midiPorts=[],this.midiPortChannelOffsets=[];let t=0;this.usedChannelsOnTrack=this.tracks.map(()=>new Set),this.tracks.forEach((i,s)=>{this.midiPorts.push(-1),i.forEach(A=>{if(A.messageStatusByte>=128&&A.messageStatusByte<240&&A.ticks>this.lastVoiceEventTick&&(this.lastVoiceEventTick=A.ticks),A.messageStatusByte===N.setTempo)this.tempoChanges.push({ticks:A.ticks,tempo:6e7/Yt(A.messageData,3)});else if((A.messageStatusByte&240)===N.noteOn)this.usedChannelsOnTrack[s].add(A.messageData[0]);else if(A.messageStatusByte===N.midiPort){let a=A.messageData[0];this.midiPorts[s]=a,this.midiPortChannelOffsets[a]===void 0&&(this.midiPortChannelOffsets[a]=t,t+=16)}})}),this.loop={start:this.firstNoteOn,end:this.lastVoiceEventTick},this.tempoChanges.reverse(),this.duration=so(this.lastVoiceEventTick,this);let n=0;for(let i of this.midiPorts)if(i!==-1){n=i;break}this.midiPorts=this.midiPorts.map(i=>i===-1?n:i),this.midiPortChannelOffsets.length===0&&(this.midiPortChannelOffsets=[0])}};function so(o,e){let t=0;for(;o>0;){let n=e.tempoChanges.find(s=>s.ticks<o),i=o-n.ticks;t+=i*60/(n.tempo*e.timeDivision),o-=i}return t}var Fe={loadNewSongList:0,pause:1,stop:2,play:3,setTime:4,changeMIDIMessageSending:5,setPlaybackRate:6,setLoop:7,changeSong:8,getMIDI:9,setSkipToFirstNote:10,setPreservePlaybackState:11},ht={midiEvent:0,songChange:1,textEvent:2,timeChange:3,pause:4,getMIDI:5,midiError:6,metaEvent:7,loopCountChange:8};var Ts={duration:99999,firstNoteOn:0,loop:{start:0,end:123456},lastVoiceEventTick:123456,lyrics:[],copyright:"",midiPorts:[],midiPortChannelOffsets:[],tracksAmount:0,tempoChanges:[{ticks:0,tempo:120}],fileName:"NOT_LOADED.mid",midiName:"Loading...",rawMidiName:new Uint8Array([76,111,97,100,105,110,103,46,46,46]),usedChannelsOnTrack:[],timeDivision:0,keyRange:{min:0,max:127},isEmbedded:!1,RMIDInfo:{},bankOffset:0,midiNameUsesFileName:!1,format:0};var al={skipToFirstNoteOn:!0,autoPlay:!0,preservePlaybackState:!1},hn=class{onError;onTextEvent;midiData;onSongChange={};onTimeChange={};onSongEnded={};onTempoChange={};onMetaEvent={};currentTempo=120;songIndex=0;_getMIDIResolve=void 0;hasDummyData=!0;isFinished=!1;duration=0;pausedTime=void 0;constructor(e,t,n=al){this.ignoreEvents=!1,this.synth=t,this.highResTimeOffset=0,this.absoluteStartTime=this.synth.currentTime,this.synth.sequencerCallbackFunction=this._handleMessage.bind(this),this._skipToFirstNoteOn=n?.skipToFirstNoteOn??!0,this._preservePlaybackState=n?.preservePlaybackState??!1,this._skipToFirstNoteOn===!1&&this._sendMessage(Fe.setSkipToFirstNote,!1),this._preservePlaybackState===!0&&this._sendMessage(Fe.setPreservePlaybackState,!0),this.loadNewSongList(e,n?.autoPlay??!0),window.addEventListener("beforeunload",this.resetMIDIOut.bind(this))}_loop=!0;get loop(){return this._loop}set loop(e){this._sendMessage(Fe.setLoop,[e,this._loopsRemaining]),this._loop=e}_loopsRemaining=-1;get loopsRemaining(){return this._loopsRemaining}set loopsRemaining(e){this._loopsRemaining=e,this._sendMessage(Fe.setLoop,[this._loop,e])}_playbackRate=1;get playbackRate(){return this._playbackRate}set playbackRate(e){this._sendMessage(Fe.setPlaybackRate,e),this.highResTimeOffset*=e/this._playbackRate,this._playbackRate=e}get skipToFirstNoteOn(){return this._skipToFirstNoteOn}set skipToFirstNoteOn(e){this._skipToFirstNoteOn=e,this._sendMessage(Fe.setSkipToFirstNote,this._skipToFirstNoteOn)}get preservePlaybackState(){return this._preservePlaybackState}set preservePlaybackState(e){this._preservePlaybackState=e,this._sendMessage(Fe.setPreservePlaybackState,e)}get currentTime(){return this.pausedTime!==void 0?this.pausedTime:(this.synth.currentTime-this.absoluteStartTime)*this._playbackRate}set currentTime(e){this._preservePlaybackState||this.unpause(),this._sendMessage(Fe.setTime,e)}get currentHighResolutionTime(){if(this.pausedTime!==void 0)return this.pausedTime;let e=this.highResTimeOffset,t=this.absoluteStartTime,n=(performance.now()/1e3-t)*this._playbackRate,i=e+n,s=this.currentTime,A=.01*this._playbackRate,a=s-i;return this.highResTimeOffset+=a*A,i=this.highResTimeOffset+n,i}get paused(){return this.pausedTime!==void 0}addOnSongChangeEvent(e,t){this.onSongChange[t]=e}addOnSongEndedEvent(e,t){this.onSongEnded[t]=e}addOnTimeChangeEvent(e,t){this.onTimeChange[t]=e}addOnTempoChangeEvent(e,t){this.onTempoChange[t]=e}addOnMetaEvent(e,t){this.onMetaEvent[t]=e}resetMIDIOut(){if(this.MIDIout){for(let e=0;e<16;e++)this.MIDIout.send([N.controllerChange|e,120,0]),this.MIDIout.send([N.controllerChange|e,123,0]);this.MIDIout.send([N.reset])}}_sendMessage(e,t=void 0){this.synth.post({channelNumber:-1,messageType:le.sequencerSpecific,messageData:{messageType:e,messageData:t}})}nextSong(){this._sendMessage(Fe.changeSong,!0)}previousSong(){this._sendMessage(Fe.changeSong,!1)}_callEvents(e,t){for(let n in e){let i=e[n];try{i(t)}catch(s){Z(`Failed to execute callback for ${i[0]}:`,s)}}}_handleMessage(e,t){if(!this.ignoreEvents)switch(e){case ht.midiEvent:let n=t;if(this.MIDIout&&n[0]>=128){this.MIDIout.send(n);return}break;case ht.songChange:let i=t[0];this.songIndex=t[1],this.midiData=i,this.hasDummyData=!1,this.absoluteStartTime=0,this.duration=this.midiData.duration,this._callEvents(this.onSongChange,i),t[2]===!0&&this.unpause();break;case ht.textEvent:this.onTextEvent&&this.onTextEvent(...t);break;case ht.timeChange:let s=this.synth.currentTime-t;this._callEvents(this.onTimeChange,s),this._recalculateStartTime(s),this.paused&&this._preservePlaybackState?this.pausedTime=s:this.unpause();break;case ht.pause:this.pausedTime=this.currentTime,this.isFinished=t,this.isFinished&&this._callEvents(this.onSongEnded,void 0);break;case ht.midiError:if(this.onError)this.onError(t);else throw new Error("Sequencer error: "+t);return;case ht.getMIDI:this._getMIDIResolve&&this._getMIDIResolve(ko.copyFrom(t));break;case ht.metaEvent:if(t[0]===N.setTempo){let a=new R(t[1]),r=6e7/Yt(a,3);this.currentTempo=Math.round(r*100)/100,this.onTempoChange&&this._callEvents(this.onTempoChange,this.currentTempo)}this._callEvents(this.onMetaEvent,t);break;case ht.loopCountChange:this._loopsRemaining=t,this._loopsRemaining===0&&(this._loop=!1);break;default:break}}_recalculateStartTime(e){this.absoluteStartTime=this.synth.currentTime-e/this._playbackRate,this.highResTimeOffset=(this.synth.currentTime-performance.now()/1e3)*this._playbackRate}async getMIDI(){return new Promise(e=>{this._getMIDIResolve=e,this._sendMessage(Fe.getMIDI,void 0)})}loadNewSongList(e,t=!0){this.pause(),this.midiData=Ts,this.hasDummyData=!0,this.duration=99999,this._sendMessage(Fe.loadNewSongList,[e,t]),this.songIndex=0,this.songsAmount=e.length,this.songsAmount>1&&(this.loop=!1),t===!1&&(this.pausedTime=this.currentTime)}connectMidiOutput(e){this.resetMIDIOut(),this.MIDIout=e,this._sendMessage(Fe.changeMIDIMessageSending,e!==void 0),this.currentTime-=.1}pause(){if(this.paused){Z("Already paused");return}this.pausedTime=this.currentTime,this._sendMessage(Fe.pause)}unpause(){this.pausedTime=void 0,this.isFinished=!1}play(e=!1){this.isFinished&&(e=!0),this._recalculateStartTime(this.pausedTime||0),this.unpause(),this._sendMessage(Fe.play,e)}stop(){this._sendMessage(Fe.stop)}};var bo=["Shift_JIS","windows-1250","utf-8","utf-16","utf-16le","utf-16be","latin1","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","EUC-JP","ISO-2022-JP","EUC-KR","Big5","GB18030"];function Gs(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' viewBox='0 0 16 16'>
        <path d='m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z'/>
    </svg>`}function zt(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor'  viewBox='0 0 16 16'>
        <path d='M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z'/>
    </svg>`}function Ns(o){return`<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' viewBox='0 0 100 100'>
	<path d='M83.729,23.57c-0.007-0.562-0.32-1.084-0.825-1.337c-0.503-0.259-1.107-0.212-1.568,0.114l-5.944,4.262l-0.468,0.336
		c-6.405-6.391-15.196-10.389-24.938-10.389c-13.284,0-24.878,7.354-30.941,18.201l0.024,0.013
		c-0.548,1.183-0.124,2.607,1.026,3.271c0.001,0,0.001,0,0.002,0.001l8.136,4.697c1.218,0.704,2.777,0.287,3.48-0.932
		c0.006-0.011,0.009-0.023,0.015-0.034c3.591-6.404,10.438-10.747,18.289-10.747c4.879,0,9.352,1.696,12.914,4.5l-1.001,0.719
		l-5.948,4.262c-0.455,0.327-0.696,0.89-0.611,1.447c0.081,0.558,0.471,1.028,1.008,1.208l25.447,8.669
		c0.461,0.162,0.966,0.084,1.367-0.203c0.399-0.29,0.629-0.746,0.627-1.23L83.729,23.57z'/>
	<path d='M79.904,61.958c0,0-0.001,0-0.002-0.001l-8.136-4.697c-1.218-0.704-2.777-0.287-3.48,0.932
		c-0.006,0.011-0.009,0.023-0.015,0.034c-3.591,6.404-10.438,10.747-18.289,10.747c-4.879,0-9.352-1.696-12.914-4.5l1.001-0.719
		l5.948-4.262c0.455-0.327,0.696-0.89,0.611-1.447c-0.081-0.558-0.471-1.028-1.008-1.208l-25.447-8.669
		c-0.461-0.162-0.966-0.084-1.367,0.203c-0.399,0.29-0.629,0.746-0.627,1.23l0.092,26.828c0.007,0.562,0.32,1.084,0.825,1.337
		c0.503,0.259,1.107,0.212,1.568-0.114l5.944-4.262l0.468-0.336c6.405,6.391,15.196,10.389,24.938,10.389
		c13.284,0,24.878-7.354,30.941-18.201L80.93,65.23C81.478,64.046,81.055,62.623,79.904,61.958z'/>
</svg>`}function Us(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-text-center' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z'/>
</svg>`}function qs(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-skip-end-fill' viewBox='0 0 16 16'>
  <path d='M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z'/>
</svg>`}function _s(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-skip-start-fill' viewBox='0 0 16 16'>
  <path d='M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z'/>
</svg>`}function vo(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-volume-up-fill' viewBox='0 0 16 16'>
  <path d='M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z'/>
  <path d='M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z'/>
  <path d='M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z'/>
</svg>`}function Ao(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-mic' viewBox='0 0 16 16'>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
  <path d='M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3'/>
</svg>`}function Hs(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.9}' height='${o*.9}' fill='currentColor' class='bi bi-mic-fill' viewBox='0 0 16 16'>
  <path d='M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z'/>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
</svg>`}function Ps(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' style='color: red;' class='bi bi-volume-mute-fill' viewBox='0 0 16 16'>
  <path style='color: red;' fill='currentColor' d='M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z'/>
</svg>`}function In(o){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${o}" height="${o}" class="bi bi-drum-fill" fill="currentColor">
    <path d="M494,12L258.3,123.8c-6.8-4.6-15.1-7.3-24-7.3c-23.6,0-42.6,19.1-42.6,42.6s19.1,42.6,42.6,42.6
    		c22.4,0,40.9-17.3,42.6-39.3l129.2-61.3c38.7,16.3,62.6,37.6,62.6,57.9c0,40.2-91.1,85.2-213.1,85.2s-213.1-45-213.1-85.2
    		s91.1-85.2,213.1-85.2c3.7,0,7-0.1,10.7,0l75.2-35.3c-26.7-4.5-55.3-7.3-85.9-7.3C109.9,31.3,0,86.2,0,159.1v213.1
    		c0,21.1,9.5,40.4,24,55.9c14.5,15.6,34.2,28.1,57.3,38.6c46.1,21,107.1,33.3,174.4,33.3s128.3-12.3,174.4-33.3
    		c23.1-10.5,42.8-23.1,57.3-38.6c14.5-15.6,24-34.9,24-55.9V159.1c0-31.5-20.8-59.4-55.9-81.2L512,50.6L494,12z M42.6,231.7
    		c21.6,16.3,50.7,29.7,85.2,39.3v168.4c-10.7-3.3-20.4-7.2-29.3-11.3c-19.3-8.8-34-19.4-43.3-29.3c-9.2-9.9-12.7-18.2-12.7-26.6
    		V231.7z M468.7,231.7v140.5c0,8.4-3.4,16.7-12.7,26.6c-9.2,9.9-24,20.5-43.3,29.3c-8.9,4.1-18.6,8-29.3,11.3V271
    		C418,261.4,447.1,248,468.7,231.7z M170.4,280.3c26.5,4.4,55,6.7,85.2,6.7s58.8-2.2,85.2-6.7v169.1c-26.2,4.9-54.9,8-85.2,8
    		s-59-3.1-85.2-8V280.3z"/>
   </svg>`}function un(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-music-note" viewBox="0 0 16 16">
  <path d="M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z"/>
  <path fill-rule="evenodd" d="M9 3v10H8V3h1z"/>
  <path d="M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z"/>
</svg>`}function Os(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-gear-fill' viewBox='0 0 16 16'>
  <path d='M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z'/>
</svg>`}function Vs(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-music-note-beamed' viewBox='0 0 16 16'>
  <path d='M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13s1.12-2 2.5-2 2.5.896 2.5 2m9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2'/>
  <path fill-rule='evenodd' d='M14 11V2h1v9zM6 3v10H5V3z'/>
  <path d='M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4z'/>
</svg>`}function Ys(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-chevron-down' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708'/>
</svg>`}function xo(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-lock-fill' viewBox='0 0 16 16'>
  <path d='M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2'/>
</svg>`}function ui(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-unlock-fill' viewBox='0 0 16 16'>
  <path d='M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2'/>
</svg>`}function Js(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-hourglass' viewBox='0 0 16 16'>
      <path d='M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5m2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2z'/>
    </svg>`}function Mo(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`}function mi(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
  <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
</svg>`}function ro(o,e){let t=document.createElement("div");return t.classList.add("control_buttons"),t.title=o,t.innerHTML=e,t}var Ee={synthesizerUIShow:"s",settingsShow:"r",blackMidiMode:"b",midiPanic:"backspace",playPause:" ",toggleLoop:"l",toggleLyrics:"t",seekBackwards:"arrowleft",seekForwards:"arrowright",previousSong:"[",nextSong:"]",toggleSubtitles:"escape",sustainPedal:"shift",cinematicMode:"c",videoMode:"v"};function Ks(){navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.currentSongTitle,artist:"SpessaSynth"}),navigator.mediaSession.setActionHandler("play",()=>{this.seqPlay()}),navigator.mediaSession.setActionHandler("pause",()=>{this.seqPause()}),navigator.mediaSession.setActionHandler("stop",()=>{this.seq.currentTime=0,this.seqPause()}),navigator.mediaSession.setActionHandler("seekbackward",o=>{this.seq.currentTime-=o.seekOffset||10}),navigator.mediaSession.setActionHandler("seekforward",o=>{this.seq.currentTime+=o.seekOffset||10}),navigator.mediaSession.setActionHandler("seekto",o=>{this.seq.currentTime=o.seekTime}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.switchToPreviousSong()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.switchToNextSong()}),navigator.mediaSession.playbackState="playing")}function zs(o=!0){if(this.seq?.hasDummyData===!0)this.currentSongTitle=this.locale.getLocaleString("locale.synthInit.genericLoading");else if(this.seq.midiData.midiNameUsesFileName)this.currentSongTitle=Yo(this.seq.midiData.fileName);else{let e=this.infoDecoder.decode(this.seq.midiData.rawMidiName.buffer).replace(/\0$/,"");this.currentSongTitle=Yo(e)}if(this.seq.midiData&&(this.loadLyricData(),this.setLyricsText(this.lyricsIndex),o&&(this.rawOtherTextEvents=[])),this.synthDisplayMode.enabled===!1?this.mainTitleMessageDisplay.innerText=this.currentSongTitle:this.mainTitleMessageDisplay.innerText=this.decodeTextFix(this.synthDisplayMode.currentEncodedText.buffer),document.title=this.currentSongTitle+" - SpessaSynth",this.musicModeUI.setTitle(this.currentSongTitle),!!navigator.mediaSession)try{navigator.mediaSession.setPositionState({duration:this.seq.duration,playbackRate:this.seq.playbackRate,position:this.seq.currentTime})}catch{}}function ll(o){let e=[],t="",n=!1;for(let i=0;i<o.length;i++){let s=o[i];s==="{"?(t&&(e.push(t),t=""),n=!0,t+=s):s==="}"?(t+=s,e.push(t),t="",n=!1):t+=s}return t&&e.push(t),e}function Ws(o){let e=o.slice(2),t=255-parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),i=parseInt(e.slice(4,6),16);return`rgba(${parseInt(e.slice(6),16)}, ${i}, ${n}, ${t/255})`}var mn=class{text=[];textClean="";layer=0;startSeconds=0;endSeconds=0;styleName="";styleData={};marginLeft=0;marginRight=0;marginVertical=0;element=void 0;primaryColor;secondaryColor;constructor(e,t,n,i,s,A,a,r,l){this.text=ll(e);let u=[];this.text.forEach(c=>{c.startsWith("{")||u.push(c)}),this.textClean=u.join(""),this.startSeconds=n,this.endSeconds=i,this.styleName=s,this.styleData=l.find(c=>c.Name===this.styleName),this.marginLeft=A||parseInt(this.styleData.MarginL),this.marginRight=a||parseInt(this.styleData.MarginR),this.marginVertical=r||parseInt(this.styleData.MarginV),this.primaryColor=Ws(this.styleData.PrimaryColour),this.secondaryColor=Ws(this.styleData.SecondaryColour)}hide(){this.element!==void 0&&this.element.remove(),this.element=void 0}updateHighlights(e){let t=0,n=0,i=0,s=e-this.startSeconds,A=!1,a=0;for(let r of this.text)if(r.startsWith("{")){let l=r.startsWith("{\\K")||r.startsWith("{\\kf");if(!l&&!r.startsWith("{\\k"))continue;let u=parseInt(r.slice(3,-1))/100;l?(a=u,A=!0):t+=u,n=u}else{let l=this.textChunks[i];if(A){if(A=!1,t>s)l.style.cssText="",l.style.backgroundImage="",l.style.backgroundClip="",l.style.color=this.secondaryColor;else{let u=s-t,c=Math.min(100,u/a*100);l.style.color="transparent",l.style.backgroundImage=`linear-gradient(90deg, ${this.primaryColor} 50%, ${this.secondaryColor} 50%)`,l.style.backgroundPosition=`${100-c}%`,l.style.backgroundSize="200% 100%",l.style.backgroundClip="text"}t+=a}else l.style.backgroundImage="",l.style.backgroundClip="",t-n>s?l.style.color=this.secondaryColor:l.style.color=this.primaryColor;i++}}show(e,t,n,i,s){if(this.element!==void 0){this.updateHighlights(i);return}this.element=document.createElement("div"),this.element.classList.add("ass_renderer_element");let A=parseInt(this.styleData.Alignment);if(this.text[0].startsWith("{\\an"))A=parseInt(this.text[0][4]);else if(this.text[0].startsWith("{\\a"))switch(parseInt(this.text[0][3])){case 1:A=1;break;case 2:A=2;break;case 3:A=3;break;case 5:A=7;break;case 6:A=8;break;case 7:A=9;break;case 9:A=4;break;case 10:A=5;break;case 11:A=6;break;default:A=5;break}let a=this.marginLeft/e*100,r=this.marginRight/e*100,l=this.marginVertical/t*100;switch(A){case 1:this.element.style.left=`${a}%`,this.element.style.bottom=`${l}%`;break;case 2:this.element.style.left=`calc(50% + ${a}% - ${r}%)`,this.element.style.bottom=`${l}%`,this.element.style.transform="translateX(-50%)";break;case 3:this.element.style.right=`${r}%`,this.element.style.bottom=`${l}%`;break;case 4:this.element.style.left=`${a}%`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translateY(-50%)";break;case 5:this.element.style.left=`calc(50% + ${a}% - ${r}%)`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translate(-50%, -50%)";break;case 6:this.element.style.right=`${r}%`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translateY(-50%)";break;case 7:this.element.style.left=`${a}%`,this.element.style.top=`${l}%`;break;case 8:this.element.style.left=`calc(50% + ${a}% - ${r}%)`,this.element.style.top=`${l}%`,this.element.style.transform="translateX(-50%)";break;case 9:this.element.style.right=`${r}%`,this.element.style.top=`${l}%`;break;default:this.element.style.left=`${a}%`,this.element.style.bottom=`${l}%`;break}this.element.style.color=this.secondaryColor,this.element.style.zIndex=(this.layer+99999).toString();let u=`${this.styleData.Fontname}, "${s}", sans-serif`,c=this.styleData.Fontsize;this.text[0].startsWith("{\\fs")&&(c=this.text[0].slice(4,-1)),this.element.style.fontFamily=u,this.element.style.fontSize=`${parseFloat(c)/t*.8*window.screen.height}px`,this.styleData.Bold==="1"&&(this.element.style.fontWeight="bold"),this.styleData.Italic==="1"&&(this.element.style.fontStyle="italic"),this.styleData.Underline==="1"&&(this.element.style.textDecoration="underline"),this.styleData.StrikeOut==="1"&&(this.element.style.textDecoration="line-through"),this.textChunks=[];for(let d of this.text)if(!d.startsWith("{")){let p=document.createElement("span");p.textContent=d.replaceAll("\\N",`
`).replaceAll("\\h"," ").replaceAll("\\n",`
`),p.style.color=this.secondaryColor,this.element.appendChild(p),this.textChunks.push(p)}n.appendChild(this.element),this.updateHighlights(i),this.element.offsetHeight;let g=this.element.getBoundingClientRect();for(let d of n.children){if(d===this.element)continue;let p=d.getBoundingClientRect(),E=n.getBoundingClientRect();g.top<p.bottom&&g.bottom>p.top&&(p.top-E.top>g.height?(this.element.style.top="",this.element.style.bottom=`${E.bottom-p.top}px`):(this.element.style.top=`${p.top+p.height}px`,this.element.style.bottom=""))}}};var pi=384,Ci=288;function Zs(o){let[e,t,n]=o.split(":"),[i,s]=n.split(".");return parseInt(e)*3600+parseInt(t)*60+parseInt(i)+parseInt(s)/100}var Ei=class{type;data},pn=class{type;contents=[];constructor(e,t){this.type=e,this.contents=t}getContent(e,t=""){return this.contents.find(n=>n.type===e)?.data||t}},Cn=class{visible;subData=[];resolutionX=pi;resolutionY=Ci;kerning=!0;styles=[];events=[];fonts=[];timer=1;constructor(e,t,n){this.seq=e,this.screen=t,this.init(),n.onRender=this.tick.bind(this),document.addEventListener("keydown",i=>{i.key.toLowerCase()===Ee.toggleSubtitles&&this.setVisibility(!this.visible)})}tick(){if(!this.visible){for(let t of this.events)t.hide();return}let e=this.seq.currentTime*this.timer;for(let t of this.events)(t.startSeconds>e||t.endSeconds<=e)&&t.hide();this.screen.offsetHeight;for(let t of this.events)t.startSeconds<=e&&t.endSeconds>e&&t.show(this.resolutionX,this.resolutionY,this.screen,e,this.firstEmbeddedFontName)}init(){this.visible=!1,this.subData=[],this.resolutionX=pi,this.resolutionY=Ci,this.kerning=!0,this.styles=[],this.events=[],this.fonts=[],this.screen.innerHTML=""}setVisibility(e){this.visible=e,this.tick(),setTimeout(()=>this.tick(),10)}_getSection(e,t=!1){let n=e.toLowerCase(),i=this.subData.find(s=>s.type.toLowerCase()===n);if(!i&&t)throw new Error(`Section ${e} not found!`);return i}loadASSSubtitles(e){this.init();let t=e.replaceAll(`\r
`,`
`).split(`
`),n=!1,i="",s="",A=[];for(let g of t)if(g.startsWith("[")&&!n)i=g,n=!0;else if(g.length===0&&n)n=!1,this.subData.push(new pn(i,A)),A=[];else if(i==="[Fonts]")if(!g.startsWith("fontname: "))this.fonts.find(d=>d.name===s).data+=g;else{let d=g.split(/: (.*)/s)[1];this.fonts.push({name:d,data:"",dataDecoded:void 0}),s=d}else if(!g.startsWith("!")&&!g.startsWith(";")){let d=g.split(/: (.*)/s),p=new Ei;p.type=d[0],p.data=d[1],A.push(p)}n&&this.subData.push(new pn(i,A));let a=this._getSection("[Script Info]",!0);this.resolutionX=parseInt(a.getContent("PlayResX",pi.toString())),this.resolutionY=parseInt(a.getContent("PlayResY",Ci.toString())),this.kerning=a.getContent("Kerning","yes")==="yes",this.timer=parseFloat(a.getContent("Timer","100"))/100;let r=this._getSection("[V4+ Styles]",!0),l=r.getContent("Format","").split(", ");for(let g of r.contents){if(g.type!=="Style")continue;let d=g.data.split(",");if(d.length!==l.length)throw new Error(`Format and style data counts do not match. Expected ${l.length} got ${d.length}`);let p={};for(let E=0;E<d.length;E++)p[l[E]]=d[E];this.styles.push(p)}let u=this._getSection("[Events]",!0),c=u.getContent("Format","").split(", ");for(let g of u.contents){if(g.type!=="Dialogue")continue;let d=[],p=g.data;for(let w=0;w<c.length-1;w++){let y=p.indexOf(",");d.push(p.substring(0,y)),p=p.substring(y+1)}if(d.push(p),d.length!==c.length)throw new Error(`Format and dialogue data counts do not match. Expected ${c.length} got ${d.length}`);let E={};for(let w=0;w<d.length;w++)E[c[w]]=d[w];let f=new mn(E.Text||"",parseInt(E.Layer)||0,E.Start?Zs(E.Start):0,E.End?Zs(E.End):0,E.Style||"",parseInt(E.MarginL)||0,parseInt(E.MarginR)||0,parseInt(E.MarginV)||0,this.styles);this.events.push(f)}for(let g of this.fonts){let d=g.data,p=[];for(let y=0;y<d.length;y+=4){let D=d.slice(y,y+4).split("").map(F=>F.charCodeAt(0)-33),k=D[0]<<2|D[1]>>4,I=(D[1]&15)<<4|D[2]>>2,v=(D[2]&3)<<6|D[3];y+1<d.length&&p.push(k),y+2<d.length&&p.push(I),y+3<d.length&&p.push(v)}g.dataDecoded=new Uint8Array(p);let E=new Blob([g.dataDecoded]),f=URL.createObjectURL(E),w=document.createElement("style");w.innerHTML=`@font-face {
                font-family: "${g.name}";
                src: url("${f}");
            }`,document.head.appendChild(w)}this.firstEmbeddedFontName=this.fonts[0]?.name||"sans-serif",x("Subtitles:",this.styles,this.events,this.fonts),this.screen.style.fontKerning=this.kerning?"normal":"none"}};function js(){this.lyricsElement={};let o=document.createElement("div");o.classList.add("lyrics");let e=document.createElement("div");e.classList.add("lyrics_title_wrapper"),o.append(e),this.lyricsElement.titleWrapper=e;let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent","locale.sequencerController.lyrics.title"),t.classList.add("lyrics_title"),e.appendChild(t),this.lyricsElement.title=t;let n=document.createElement("select");bo.forEach(u=>{let c=document.createElement("option");c.innerText=u,c.value=u,n.appendChild(c)}),n.value=this.encoding,n.onchange=()=>this.changeEncoding(n.value),n.classList.add("lyrics_selector"),this.encodingSelector=n,e.appendChild(n);let i=document.createElement("p");i.classList.add("lyrics_text"),o.appendChild(i);let s=document.createElement("details"),A=document.createElement("summary");this.locale.bindObjectProperty(A,"textContent","locale.sequencerController.lyrics.otherText.title"),s.appendChild(A);let a=document.createElement("div");a.innerText="",s.appendChild(a),o.appendChild(s),this.subtitleManager=new Cn(this.seq,document.getElementsByClassName("ass_renderer_field")[0],this.renderer);let r=document.createElement("input");r.type="file",r.accept=".ass",r.id="subtitle_upload",r.classList.add("hidden"),o.appendChild(r),r.onchange=async()=>{if(r.files[0]===void 0)return;let u=r.files[0];this.subtitleManager.loadASSSubtitles(await u.text()),this.subtitleManager.setVisibility(!0),this.toggleLyrics()};let l=document.createElement("label");l.htmlFor="subtitle_upload",l.classList.add("general_button"),this.locale.bindObjectProperty(l,"textContent","locale.sequencerController.lyrics.subtitles.title"),this.locale.bindObjectProperty(l,"title","locale.sequencerController.lyrics.subtitles.description"),o.appendChild(l),this.lyricsElement.text={main:i,other:a,subtitleButton:l,separateLyrics:[]},this.lyricsElement.mainDiv=o,this.lyricsElement.selector=n,this.controls.appendChild(o),this.requiresTextUpdate=!0}function Xs(o){if(!(this.currentLyricsString.length<2||o<0||o>this.currentLyricsString.length)){this.lyricsIndex=o;for(let e=0;e<o;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_gray"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_highlight");if(o<this.currentLyricsString.length){for(let e=o;e<this.lyricsElement.text.separateLyrics.length;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_highlight"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_gray");this.lyricsElement.text.separateLyrics[o].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}}function $s(){let o="";for(let e of this.rawOtherTextEvents)o+=`<span><pre>${Object.keys(N).find(t=>N[t]===e.type).replace(/([a-z])([A-Z])/g,"$1 $2")}:</pre> <i>${this.decodeTextFix(e.data.buffer)}</i></span><br>`;this.lyricsElement.text.other.innerHTML=o}var st=32,eA="#ccc",tA="#555",cl="#333",gl="#ddd",dl="Shift_JIS",Et=class{constructor(e,t,n,i){this.iconColor=eA,this.iconDisabledColor=tA,this.controls=e,this.encoding=dl,this.decoder=new TextDecoder(this.encoding),this.infoDecoder=new TextDecoder(this.encoding),this.hasInfoDecoding=!1,this.lyricsIndex=0,this.requiresTextUpdate=!1,this.lastTimeUpdate=0,this.rawOtherTextEvents=[],this.mode="dark",this.locale=t,this.currentSongTitle="",this.currentLyrics=[],this.currentLyricsString=[],this.musicModeUI=n,this.renderer=i,this.mainTitleMessageDisplay=document.getElementById("title"),this.synthDisplayMode={enabled:!1,currentEncodedText:new Uint8Array(0)};let s=null;i.synth.eventHandler.addEvent("synthdisplay","sequi-synth-display",A=>{if(A.displayType===0||A.displayType===1){this.mainTitleMessageDisplay.classList.add("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display");let a=A.displayData;A.displayType===1&&(a=a.slice(1));let r=this.decodeTextFix(a.buffer);if(A.displayType===1){let l=A.displayData[0];this.mainTitleMessageDisplay.classList.add("xg_sysex_display");let u=l&15;for(let c=0;c<u;c++)r=" "+r;r.length>=16&&(r=r.slice(0,16)+`
`+r.slice(16)),(l&16)>1&&(r=`
`+r)}r.trim().length===0?this.mainTitleMessageDisplay.innerText="\u200E ":this.mainTitleMessageDisplay.innerText=r,this.synthDisplayMode.enabled=!0,this.synthDisplayMode.currentEncodedText=a,s!==null&&clearTimeout(s),s=setTimeout(()=>{this.synthDisplayMode.enabled=!1,this.restoreDisplay()},5e3)}})}toggleDarkMode(){if(this.mode==="dark"?(this.mode="light",this.iconColor=cl,this.iconDisabledColor=gl):(this.mode="dark",this.iconColor=eA,this.iconDisabledColor=tA),!this.seq){this.requiresThemeUpdate=!0;return}this.progressBar.classList.toggle("note_progress_light"),this.progressBarBackground.classList.toggle("note_progress_background_light"),this.lyricsElement.mainDiv.classList.toggle("lyrics_light"),this.lyricsElement.titleWrapper.classList.toggle("lyrics_light"),this.lyricsElement.selector.classList.toggle("lyrics_light")}seqPlay(e=!0){e&&this.seq.play(),this.playPause.innerHTML=zt(st),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing")}seqPause(e=!0){e&&this.seq.pause(),this.playPause.innerHTML=Gs(st),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused")}switchToNextSong(){this.seq.nextSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}switchToPreviousSong(){this.seq.previousSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}decodeTextFix(e){let t=0;for(;;)try{return this.decoder.decode(e)}catch{t++,this.changeEncoding(bo[t]),this.encodingSelector.value=bo[t]}}connectSequencer(e){this.seq=e,this.createControls(),this.setSliderInterval(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seq.onTextEvent=(t,n,i)=>{switch(n){default:return;case N.text:case N.copyright:case N.cuePoint:case N.trackName:case N.instrumentName:case N.programName:case N.marker:this.rawOtherTextEvents.push({type:n,data:t}),this.requiresTextUpdate=!0;return;case N.lyric:this.setLyricsText(i);break}},this.seq.addOnTimeChangeEvent(()=>{this.seqPlay(!1)},"sequi-time-change"),this.seq.addOnSongChangeEvent(t=>{if(this.synthDisplayMode.enabled=!1,this.lyricsIndex=0,this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seqPlay(!1),this.seq.songsAmount>1&&(this.seq.loop=!1,this.loopButton.firstElementChild.setAttribute("fill",this.iconDisabledColor)),this.restoreDisplay(),this.hasInfoDecoding=this.seq.midiData.RMIDInfo?.[ye.encoding]!==void 0,t.isEmbedded){let n=(a,r,l,u="")=>this.seq.midiData.RMIDInfo?.[a]===void 0?r:u+l.decode(this.seq.midiData.RMIDInfo?.[a]).replace(/\0$/,""),i=new TextDecoder,s=n(ye.midiEncoding,this.encoding,i),A=n(ye.encoding,"utf-8",i);this.infoDecoder=new TextDecoder(A),this.changeEncoding(s)}},"sequi-song-change"),this.requiresThemeUpdate&&this.mode==="light"&&(this.mode="dark",this.toggleDarkMode())}restoreDisplay(){let e=this.currentSongTitle;this.seq||(e=this.locale.getLocaleString("locale.titleMessage")),this.mainTitleMessageDisplay.innerText=e,this.mainTitleMessageDisplay.classList.remove("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display")}changeEncoding(e){this.encoding=e,this.decoder=new TextDecoder(e),this.hasInfoDecoding||(this.infoDecoder=new TextDecoder(e)),this.updateOtherTextEvents(),this.lyricsElement.text.separateLyrics.forEach((t,n)=>{this.currentLyrics[n]!==void 0&&(t.innerText=this.decodeTextFix(this.currentLyrics[n].buffer))}),this.lyricsElement.selector.value=e,this.updateTitleAndMediaStatus(!1),this.setLyricsText(this.lyricsIndex)}createControls(){this.progressTime=document.createElement("p"),this.progressTime.id="note_time",this.progressTime.onclick=c=>{c.preventDefault();let g=e.getBoundingClientRect(),d=c.clientX-g.left,p=g.width;this.seq.currentTime=d/p*this.seq.duration,n.innerHTML=zt(st)},this.createLyrics();let e=document.createElement("div");e.id="note_progress_background",this.progressBarBackground=e,this.progressBar=document.createElement("div"),this.progressBar.id="note_progress",this.progressBar.min="0",this.progressBar.max=this.seq.duration.toString();let t=document.createElement("div"),n=ro("Play/Pause",zt(st));this.playPause=n,this.locale.bindObjectProperty(n,"title","locale.sequencerController.playPause");let i=()=>{this.seq.paused?this.seqPlay():this.seqPause()};n.onclick=i;let s=ro("Previous song",_s(st));this.locale.bindObjectProperty(s,"title","locale.sequencerController.previousSong"),s.onclick=()=>this.switchToPreviousSong();let A=ro("Next song",qs(st));this.locale.bindObjectProperty(A,"title","locale.sequencerController.nextSong"),A.onclick=()=>this.switchToNextSong();let a=ro("Loop this",Ns(st));this.locale.bindObjectProperty(a,"title","locale.sequencerController.loopThis");let r=()=>{this.seq.loop?this.seq.loop=!1:(this.seq.loop=!0,this.seq.currentTime>=this.seq.duration&&(this.seq.currentTime=0)),a.firstElementChild.setAttribute("fill",this.seq.loop?this.iconColor:this.iconDisabledColor)};a.onclick=r,this.loopButton=a;let l=ro("Show lyrics",Us(st));this.locale.bindObjectProperty(l,"title","locale.sequencerController.lyrics.show"),l.firstElementChild.setAttribute("fill",this.iconDisabledColor);let u=()=>{this.lyricsElement.mainDiv.classList.toggle("lyrics_show"),l.firstElementChild.setAttribute("fill",this.lyricsElement.mainDiv.classList.contains("lyrics_show")?this.iconColor:this.iconDisabledColor)};this.toggleLyrics=u,l.onclick=u,t.appendChild(s),t.appendChild(a),t.appendChild(n),t.appendChild(l),t.appendChild(A),this.controls.appendChild(e),e.appendChild(this.progressBar),this.controls.appendChild(this.progressTime),this.controls.appendChild(t),document.addEventListener("keydown",c=>{switch(c.key.toLowerCase()){case Ee.playPause:c.preventDefault(),i();break;case Ee.toggleLoop:c.preventDefault(),r();break;case Ee.toggleLyrics:c.preventDefault(),u();break;case Ee.seekBackwards:c.preventDefault(),this.seq.currentTime-=5,n.innerHTML=zt(st);break;case Ee.seekForwards:c.preventDefault(),this.seq.currentTime+=5,n.innerHTML=zt(st);break;case Ee.previousSong:this.switchToPreviousSong();break;case Ee.nextSong:this.switchToNextSong();break;default:if(!isNaN(parseFloat(c.key))){c.preventDefault();let g=parseInt(c.key);0<=g&&g<=9&&(this.seq.currentTime=this.seq.duration*(g/10),n.innerHTML=zt(st))}break}})}_updateInterval(){let e=this.seq.currentTime;if(this.lastTimeUpdate===e)return;this.lastTimeUpdate=e,this.progressBar.style.width=`${e/this.seq.duration*100}%`;let t=qt(e),n=qt(this.seq.duration);this.progressTime.innerText=`${t.time} / ${n.time}`,this.requiresTextUpdate&&(this.updateOtherTextEvents(),this.requiresTextUpdate=!1)}setSliderInterval(){setInterval(this._updateInterval.bind(this),100)}loadLyricData(){if(this.currentLyrics=this.seq.midiData.lyrics,this.currentLyricsString=this.currentLyrics.map(e=>this.decodeTextFix(e.buffer)),this.currentLyrics.length===0)this.currentLyricsString=[this.locale.getLocaleString("locale.sequencerController.lyrics.noLyrics")];else{let e=!0;for(let t=1;t<this.currentLyricsString.length-1;t+=2){let n=this.currentLyricsString[t],i=this.currentLyricsString[t+1];if(n.trim()===""||i.trim()===""){t-=1;continue}if(n.trim()!==i.trim()){e=!1;break}}if(e)for(let t=0;t<this.currentLyricsString.length;t+=2){if(this.currentLyricsString[t]===`
`){t-=1;continue}this.currentLyricsString[t]=""}}this.currentLyricsString=this.currentLyricsString.map(e=>e.replace("/",`
`)),this.lyricsElement.text.main.innerHTML="",this.lyricsElement.text.separateLyrics=[];for(let e of this.currentLyricsString){let t=document.createElement("span");t.innerText=e,t.classList.add("lyrics_text_gray"),this.lyricsElement.text.main.appendChild(t),this.lyricsElement.text.separateLyrics.push(t)}}};Et.prototype.createNavigatorHandler=Ks;Et.prototype.updateTitleAndMediaStatus=zs;Et.prototype.createLyrics=js;Et.prototype.setLyricsText=Xs;Et.prototype.updateOtherTextEvents=$s;function oA(){this.controllers.forEach(o=>{o.voiceMeter.hide(),o.pitchWheel.hide(),o.pan.hide(),o.expression.hide(),o.volume.hide(),o.mod.hide(),o.chorus.hide(),o.reverb.hide(),o.brightness.hide()})}function nA(){this.controllers.forEach(o=>{o.voiceMeter.show(),o.pitchWheel.show(),o.pan.show(),o.expression.show(),o.volume.show(),o.mod.show(),o.chorus.show(),o.reverb.show(),o.brightness.show()})}function iA(){this.mainControllerDiv.classList.toggle("synthui_controller_light"),this.mainButtons.forEach(o=>{o.classList.toggle("synthui_button"),o.classList.toggle("synthui_button_light")}),this.mainMeters.forEach(o=>{o.toggleMode(!0)}),this.controllers.forEach(o=>{o.voiceMeter.toggleMode(),o.pitchWheel.toggleMode(),o.pan.toggleMode(),o.expression.toggleMode(),o.volume.toggleMode(),o.mod.toggleMode(),o.chorus.toggleMode(),o.reverb.toggleMode(),o.brightness.toggleMode(),o.preset.toggleMode(),o.drumsToggle.classList.toggle("mute_button_light"),o.muteButton.classList.toggle("mute_button_light")})}var $e=class{constructor(e="none",t,n,i,s=0,A=100,a=!1,r=void 0,l=void 0,u=void 0){if(this.meterText="",n.bindObjectProperty(this,"meterText",t+".title"),this.min=s,this.max=A,this.currentValue=-1,this.isShown=!0,this.isVisualValueSet=!0,this.isLocked=!1,this.lockCallback=l,this.unlockCallback=u,this.div=document.createElement("div"),this.div.classList.add("voice_meter"),this.div.classList.add("controller_element"),e!=="none"&&e!==""&&(this.div.style.borderColor=e),n.bindObjectProperty(this.div,"title",t+".description",i),this.bar=document.createElement("div"),this.bar.classList.add("voice_meter_bar"),this.bar.style.background=e,this.div.appendChild(this.bar),this.text=document.createElement("p"),this.text.classList.add("voice_meter_text"),this.div.appendChild(this.text),this.isActive=!1,a){if(r===void 0)throw new Error("No editable function given!");this.div.onmousedown=c=>{c.preventDefault(),c.button===0?this.isActive=!0:this.lockMeter()},this.div.onmousemove=c=>{if(!this.isActive)return;let g=c.currentTarget.getBoundingClientRect(),d=g.left,p=g.width,E=c.clientX-d,f=Math.max(0,Math.min(1,E/p));r(f*(A-s)+s)},this.div.onmouseup=()=>this.isActive=!1,this.div.onmouseleave=c=>{this.div.onmousemove(c),this.isActive=!1},this.text.oncontextmenu=c=>{c.preventDefault()},this.div.onclick=c=>{c.preventDefault(),this.isActive=!0,this.div.onmousemove(c),this.isActive=!1,Pe&&this.lockMeter()},this.div.classList.add("editable")}}lockMeter(){this.lockCallback!==void 0&&(this.isLocked?(this.text.classList.remove("locked_meter"),this.unlockCallback()):(this.text.classList.add("locked_meter"),this.lockCallback()),this.isLocked=!this.isLocked)}toggleMode(e=!1){e&&(this.bar.classList.toggle("voice_meter_light_color"),this.div.classList.toggle("voice_meter_light_color")),this.text.classList.toggle("voice_meter_text_light")}show(){if(this.isShown=!0,!this.isVisualValueSet){let e=Math.max(0,Math.min((this.currentValue-this.min)/(this.max-this.min),1));this.bar.style.width=`${e*100}%`,this.text.textContent=this.meterText+(Math.round(this.currentValue*100)/100).toString(),this.isVisualValueSet=!0}}hide(){this.isShown=!1}update(e,t=!1){if(!(e===this.currentValue&&t===!1))if(this.currentValue=e,this.isShown){let n=Math.max(0,Math.min((e-this.min)/(this.max-this.min),1));this.bar.style.width=`${n*100}%`,this.text.textContent=this.meterText+(Math.round(e*100)/100).toString(),this.isVisualValueSet=!0}else this.isVisualValueSet=!1}};var sA=["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Honky-tonk Piano","Electric Piano 1","Electric Piano 2","Harpsichord","Clavi","Celesta","Glockenspiel","Music Box","Vibraphone","Marimba","Xylophone","Tubular Bells","Dulcimer","Drawbar Organ","Percussive Organ","Rock Organ","Church Organ","Reed Organ","Accordion","Harmonica","Tango Accordion","Acoustic Guitar (nylon)","Acoustic Guitar (steel)","Electric Guitar (jazz)","Electric Guitar (clean)","Electric Guitar (muted)","Overdriven Guitar","Distortion Guitar","Guitar Harmonics","Acoustic Bass","Electric Bass (finger)","Electric Bass (pick)","Fretless Bass","Slap Bass 1","Slap Bass 2","Synth Bass 1","Synth Bass 2","Violin","Viola","Cello","Contrabass","Tremolo Strings","Pizzicato Strings","Orchestral Harp","Timpani","String Ensemble 1","String Ensemble 2","Synth Strings 1","Synth Strings 2","Choir Aahs","VoiceGroup Oohs","Synth Choir","Orchestra Hit","Trumpet","Trombone","Tuba","Muted Trumpet","French Horn","Brass Section","Synth Brass 1","Synth Brass 2","Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Oboe","English Horn","Bassoon","Clarinet","Piccolo","Flute","Recorder","Pan Flute","Blown Bottle","Shakuhachi","Whistle","Ocarina","Lead 1 (square)","Lead 2 (sawtooth)","Lead 3 (calliope)","Lead 4 (chiff)","Lead 5 (charang)","Lead 6 (voice)","Lead 7 (fifths)","Lead 8 (bass + lead)","Pad 1 (new age)","Pad 2 (warm)","Pad 3 (polysynth)","Pad 4 (choir)","Pad 5 (bowed)","Pad 6 (metallic)","Pad 7 (halo)","Pad 8 (sweep)","FX 1 (rain)","FX 2 (soundtrack)","FX 3 (crystal)","FX 4 (atmosphere)","FX 5 (brightness)","FX 6 (goblins)","FX 7 (echoes)","FX 8 (sci-fi)","Sitar","Banjo","Shamisen","Koto","Kalimba","Bagpipe","Fiddle","Shanai","Tinkle Bell","Agogo","Steel Drums","Woodblock","Taiko Drum","Melodic Tom","Synth Drum","Reverse Cymbal","Guitar Fret Noise","Breath Noise","Seashore","Bird Tweet","Telephone Ring","Attack Helicopter","Applause","Gunshot"];var En=class{constructor(e,t,n,i,s=void 0,A=void 0){this.elements=e.map(a=>({name:a.name,program:a.program,bank:a.bank,stringified:`${a.bank.toString().padStart(3,"0")}:${a.program.toString().padStart(3,"0")} ${a.name}`})),this.elements.length>0?this.value=`${this.elements[0].bank}:${this.elements[0].program}`:this.value="",this.mainButton=document.createElement("button"),this.mainButton.classList.add("voice_selector"),this.mainButton.classList.add("controller_element"),t.bindObjectProperty(this.mainButton,"title",n+".description",i),this.locale=t,this.localePath=n,this.localeArgs=i,this.reload(),this.mainButton.onclick=()=>{this.showSelectionMenu()},this.editCallback=s,this.selectionMenu=void 0,this.lockCallback=A,this.locked=!1,this.isWindowShown=!1}showSelectionMenu(){this.selectionMenu=document.createElement("div"),this.selectionMenu.classList.add("voice_selector_wrapper"),document.getElementsByClassName("spessasynth_main")[0].appendChild(this.selectionMenu);let e=document.createElement("div");e.classList.add("voice_selector_window");let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent",this.localePath+".selectionPrompt",this.localeArgs),e.appendChild(t);let n=document.createElement("div");n.classList.add("voice_selector_search_wrapper"),e.appendChild(n);let i=document.createElement("input");i.type="text",this.locale.bindObjectProperty(i,"placeholder",this.localePath+".searchPrompt"),n.appendChild(i),i.onkeydown=l=>l.stopPropagation();let s=document.createElement("div");s.innerHTML=this.locked?xo(ke):ui(ke),this.locale.bindObjectProperty(s,"title",ae+"channelController.presetReset.description",this.localeArgs),s.classList.add("voice_reset"),this.mainButton.classList.contains("voice_selector_light")&&s.classList.add("voice_reset_light"),s.onclick=()=>{this.locked=!this.locked,this.lockCallback(this.locked),this.mainButton.classList.toggle("locked_selector"),this.locked?s.innerHTML=xo(ke):s.innerHTML=ui(ke)},n.appendChild(s),this.presetLock=s;let A=document.createElement("div");A.classList.add("voice_selector_table_wrapper"),e.appendChild(A);let r=this.generateTable(A,this.elements).querySelector(".voice_selector_selected");i.oninput=l=>{l.stopPropagation();let u=i.value,c=this.elements.filter(E=>E.stringified.search(new RegExp(u,"i"))>=0);if(c.length===this.elements.length||c.length===0)return;A.replaceChildren();let g=this.generateTable(A,c),d=g.querySelector(".voice_selector_selected");if(d){r=d;return}let p=g.querySelector(".voice_selector_option");p.classList.add("voice_selector_selected"),r=p},i.addEventListener("keydown",l=>{switch(l.key){case"Enter":let u=r.getAttribute("bank"),c=r.getAttribute("program"),g=`${u}:${c}`;if(this.value===g){this.hideSelectionMenu();return}this.editCallback(g),this.locked=!0,this.presetLock.innerHTML=xo(ke),this.hideSelectionMenu();break;case"ArrowDown":let d=r.nextElementSibling;for(;d;){if(d.classList.contains("voice_selector_option")){r.classList.remove("voice_selector_selected"),d.classList.add("voice_selector_selected"),r=d;return}d=d.nextElementSibling}break;case"ArrowUp":let p=r.previousElementSibling;for(;p;){if(p.classList.contains("voice_selector_option")){r.classList.remove("voice_selector_selected"),p.classList.add("voice_selector_selected"),r=p;return}p=p.previousElementSibling}break}}),e.onclick=l=>{l.stopPropagation()},this.selectionMenu.appendChild(e),this.selectionMenu.onclick=l=>{l.stopPropagation(),this.hideSelectionMenu()},this.isWindowShown=!0,Pe||i.focus()}generateTable(e,t){let n=document.createElement("table");n.classList.add("voice_selector_table");let i=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]),A=-20;for(let a of t){let r=document.createElement("tr"),l=a.program;if(r.classList.add("voice_selector_option"),r.setAttribute("program",l.toString()),r.setAttribute("bank",a.bank.toString()),l===s&&a.bank===i&&(r.classList.add("voice_selector_selected"),setTimeout(()=>{r.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},20)),r.onclick=()=>{let E=`${a.bank}:${l}`;if(this.value===E){this.hideSelectionMenu();return}this.editCallback(E),this.locked=!0,this.presetLock.innerHTML=xo(ke),this.hideSelectionMenu()},l!==A&&(A=l,a.bank!==128)){let E=document.createElement("tr"),f=document.createElement("th");f.colSpan="3",f.textContent=sA[A],E.appendChild(f),n.appendChild(E)}let u=`${a.program.toString().padStart(3,"0")}`,c=`${a.bank.toString().padStart(3,"0")}`,g=document.createElement("td");g.classList.add("voice_selector_preset_name"),g.textContent=a.name;let d=document.createElement("td");g.classList.add("voice_selector_preset_program"),d.textContent=u;let p=document.createElement("td");g.classList.add("voice_selector_preset_program"),p.textContent=c,r.appendChild(p),r.appendChild(d),r.appendChild(g),n.appendChild(r)}return e.appendChild(n),n}hideSelectionMenu(){document.getElementsByClassName("spessasynth_main")[0].removeChild(this.selectionMenu),this.selectionMenu=void 0,this.isWindowShown=!1}toggleMode(){this.mainButton.classList.toggle("voice_selector_light")}reload(e=this.elements){if(this.elements=e.map(t=>({name:t.name,program:t.program,bank:t.bank,stringified:`${t.bank.toString().padStart(3,"0")}:${t.program.toString().padStart(3,"0")} ${t.name}`})),this.elements.length>0){let t=this.elements[0],n=t.bank,i=parseInt(this.value.split(":")[1]),s=i;this.elements.find(A=>A.program===i)===void 0&&(s=t.program),this.mainButton.textContent=this.getString(`${n}:${s}`)}}set(e){if(this.value=e,this.reload(),this.mainButton.textContent=this.getString(this.value),this.isWindowShown){let t=this.selectionMenu.getElementsByClassName("voice_selector_selected")[0];t!==void 0&&t.classList.remove("voice_selector_selected");let n=this.selectionMenu.getElementsByClassName("voice_selector_table")[0],i=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]);for(let A of n.rows){if(A.cells.length===1)continue;let a=parseInt(A.cells[0].textContent),r=parseInt(A.cells[1].textContent);a===i&&r===s&&(A.classList.add("voice_selector_selected"),A.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))}}}getString(e){let t=e.split(":"),n=parseInt(t[0]),i=parseInt(t[1]),s=this.elements.find(A=>A.bank===n&&A.program===i);return s?n===128||this.elements.filter(A=>A.program===i&&A.bank!==128).length<2?`${i}. ${s.name}`:`${n}:${i} ${s.name}`:""}};var ke=32;function AA(o){this.soloChannels=new Set;let e=document.createElement("div");e.classList.add("channel_controller");let t=new $e(this.channelColors[o%this.channelColors.length],ae+"channelController.voiceMeter",this.locale,[o+1],0,100);t.bar.classList.add("voice_meter_bar_smooth"),e.appendChild(t.div);let n=new $e(this.channelColors[o%this.channelColors.length],ae+"channelController.pitchBendMeter",this.locale,[o+1],-8192,8191,!0,y=>{let S=n.isLocked;S&&this.synth.lockController(o,St+de.pitchWheel,!1),y=Math.round(y)+8192;let D=y>>7,k=y&127;this.synth.pitchWheel(o,D,k),S&&this.synth.lockController(o,St+de.pitchWheel,!0)},()=>this.synth.lockController(o,St+de.pitchWheel,!0),()=>this.synth.lockController(o,St+de.pitchWheel,!1));n.update(0),e.appendChild(n.div);let i=(y,S,D)=>{D.isLocked?(this.synth.lockController(o,y,!1),this.synth.controllerChange(o,y,S),this.synth.lockController(o,y,!0)):this.synth.controllerChange(o,y,S)},s=(y,S,D)=>{let k=new $e(this.channelColors[o%this.channelColors.length],ae+S,this.locale,[o+1],0,127,!0,I=>i(y,Math.round(I),k),()=>this.synth.lockController(o,y,!0),()=>this.synth.lockController(o,y,!1));return k.update(D),k},A=s(T.pan,"channelController.panMeter",64);e.appendChild(A.div);let a=s(T.expressionController,"channelController.expressionMeter",127);e.appendChild(a.div);let r=s(T.mainVolume,"channelController.volumeMeter",100);e.appendChild(r.div);let l=s(T.modulationWheel,"channelController.modulationWheelMeter",0);e.appendChild(l.div);let u=s(T.chorusDepth,"channelController.chorusMeter",0);e.appendChild(u.div);let c=s(T.reverbDepth,"channelController.reverbMeter",0);e.appendChild(c.div);let g=s(T.brightness,"channelController.filterMeter",64);e.appendChild(g.div);let d=new $e(this.channelColors[o%this.channelColors.length],ae+"channelController.transposeMeter",this.locale,[o+1],-36,36,!0,y=>{y=Math.round(y),this.synth.transposeChannel(o,y,!0),d.update(y)});d.update(0),e.appendChild(d.div);let p=new En([],this.locale,ae+"channelController.presetSelector",[o+1],async y=>{let S=y.split(":");this.synth.lockController(o,Re,!1),this.synth.controllerChange(o,T.bankSelect,parseInt(S[0]),!0),this.synth.programChange(o,parseInt(S[1]),!0),p.mainButton.classList.add("locked_selector"),this.synth.lockController(o,Re,!0)},y=>this.synth.lockController(o,Re,y));e.appendChild(p.mainButton);let E=document.createElement("div");E.innerHTML=Ao(ke),this.locale.bindObjectProperty(E,"title",ae+"channelController.soloButton.description",[o+1]),E.classList.add("controller_element"),E.classList.add("mute_button"),E.onclick=()=>{if(this.soloChannels.has(o)?this.soloChannels.delete(o):this.soloChannels.add(o),this.soloChannels.size===0||this.soloChannels.size>=this.synth.channelsAmount){for(let y=0;y<this.synth.channelsAmount;y++)this.controllers[y].soloButton.innerHTML=Ao(ke),this.synth.muteChannel(y,this.controllers[y].muteButton.hasAttribute("is_muted"));this.soloChannels.size>=this.synth.channelsAmount&&this.soloChannels.clear();return}for(let y=0;y<this.synth.channelsAmount;y++)this.soloChannels.has(y)?(this.controllers[y].soloButton.innerHTML=Hs(ke),this.synth.muteChannel(y,this.controllers[y].muteButton.hasAttribute("is_muted"))):(this.controllers[y].soloButton.innerHTML=Ao(ke),this.synth.muteChannel(y,!0))},e.appendChild(E);let f=document.createElement("div");f.innerHTML=vo(ke),this.locale.bindObjectProperty(f,"title",ae+"channelController.muteButton.description",[o+1]),f.classList.add("controller_element"),f.classList.add("mute_button"),f.onclick=()=>{if(f.hasAttribute("is_muted")){f.removeAttribute("is_muted");let y=this.soloChannels.size===0||this.soloChannels.has(o);this.synth.muteChannel(o,!y),f.innerHTML=vo(ke)}else this.synth.muteChannel(o,!0),f.setAttribute("is_muted","true"),f.innerHTML=Ps(ke)},e.appendChild(f);let w=document.createElement("div");return w.innerHTML=o===He?In(ke):un(ke),this.locale.bindObjectProperty(w,"title",ae+"channelController.drumToggleButton.description",[o+1]),w.classList.add("controller_element"),w.classList.add("mute_button"),w.onclick=()=>{p.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(o,Re,!1),p.mainButton.classList.remove("locked_selector")),this.synth.setDrums(o,!this.synth.channelProperties[o].isDrum)},e.appendChild(w),{controller:e,voiceMeter:t,pitchWheel:n,pan:A,expression:a,volume:r,mod:l,chorus:u,reverb:c,brightness:g,preset:p,drumsToggle:w,soloButton:E,muteButton:f,transpose:d}}function rA(){let o=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.controllers=[];for(let e=0;e<this.synth.channelsAmount;e++){let t=this.createChannelController(e);this.controllers.push(t),o.appendChild(t.controller)}this.setEventListeners(),setInterval(this.updateVoicesAmount.bind(this),100),this.hideControllers()}function et(o){return o.parentElement.nextElementSibling}function aA(o){let e=o.getElementsByTagName("spessarange");for(let t of e)t.parentElement.insertBefore(fi(t,!0),t);for(;e.length>0;)e[0].parentNode.removeChild(e[0])}function fi(o,e=!0){let t=document.createElement("div");t.classList.add("settings_slider_wrapper");let n=o.getAttribute("min"),i=o.getAttribute("max"),s=o.getAttribute("value"),A=o.getAttribute("units"),a=o.getAttribute("input_id"),r=document.createElement("input");r.classList.add("settings_slider"),r.type="range",r.id=a,r.min=n,r.max=i,r.value=s;let l;e&&(l=document.createElement("span"),l.textContent=s+A);let u=document.createElement("div");u.classList.add("settings_visual_wrapper");let c=document.createElement("div");c.classList.add("settings_slider_progress"),u.appendChild(c);let g=document.createElement("div");return g.classList.add("settings_slider_thumb"),u.appendChild(g),u.appendChild(r),r.addEventListener("input",()=>{let d=parseInt(u.style.getPropertyValue("--visual-width").replace("%","")),p=Math.round((r.value-r.min)/(r.max-r.min)*100);Math.abs((d-p)/100)>.05?u.classList.add("settings_slider_transition"):u.classList.remove("settings_slider_transition"),u.style.setProperty("--visual-width",`${p}%`)}),u.style.setProperty("--visual-width",`${(r.value-r.min)/(r.max-r.min)*100}%`),t.appendChild(u),e&&t.appendChild(l),t}function ft(o,e,t){if(e.textContent&&(o.textContent=e.textContent),e.translatePathTitle){if(!t)throw new Error("Translate path title provided but no locale provided.");t.bindObjectProperty(o,"textContent",e.translatePathTitle+".title",e?.translatePathTitleProps),t.bindObjectProperty(o,"title",e.translatePathTitle+".description",e?.translatePathTitleProps)}}function lA(o,e){switch(o.type){case"button":let t=document.createElement("button");return ft(t,o,e),bt(o,[t]),t;case"text":let n=document.createElement("p");return ft(n,o,e),bt(o,[n]),n;case"input":let i=document.createElement("div");i.classList.add("notification_input_wrapper");let s=document.createElement("input");ft(s,o,e),s.addEventListener("keydown",D=>D.stopPropagation());let A=document.createElement("label");return ft(A,o,e),bt(o,[s,A]),i.append(A),i.appendChild(s),i;case"select":let a=document.createElement("div");a.classList.add("notification_input_wrapper");let r=document.createElement("select");if(o.selectOptions===void 0)throw new Error("Select but no options given?");for(let D of Object.entries(o.selectOptions)){let k=document.createElement("option");k.value=D[0],k.textContent=D[1],r.appendChild(k)}let l=document.createElement("label");return ft(l,o,e),bt(o,[r,l]),a.appendChild(l),a.appendChild(r),a;case"file":let u=document.createElement("label");u.classList.add("notification_input_wrapper");let c=document.createElement("input");c.type="file";let g=document.createElement("label");g.classList.add("notification_file_button"),ft(g,o,e);let d=document.createElement("label");return ft(d,o,e),bt(o,[g,c,d]),g.appendChild(c),u.append(d),u.appendChild(g),u;case"progress":let p=document.createElement("div");p.classList.add("notification_progress_background");let E=document.createElement("div");return E.classList.add("notification_progress"),bt(o,[E,p]),p.appendChild(E),p;case"toggle":return hl(o,e);case"range":let f=document.createElement("input");f.type="range";let w=document.createElement("label");bt(o,[f,w]),ft(w,o,e);let y=fi(f,!1),S=document.createElement("div");return S.classList.add("notification_slider_wrapper"),S.appendChild(w),S.appendChild(y),S}}function bt(o,e){if(o.attributes)for(let[t,n]of Object.entries(o.attributes))for(let i of e)t.startsWith("onchange")?i[t]=n:i.setAttribute(t,n);if(o.listeners)for(let[t,n]of Object.entries(o.listeners))for(let i of e)i.addEventListener(t,n)}function hl(o,e){let t=document.createElement("label");t.classList.add("notification_switch_wrapper");let n=document.createElement("label");ft(n,o,e);let i=document.createElement("input");i.type="checkbox",bt(o,[n,i]);let s=document.createElement("div");s.classList.add("notification_switch"),s.appendChild(i);let A=document.createElement("div");return A.classList.add("notification_switch_slider"),s.appendChild(A),t.appendChild(n),t.appendChild(s),t}var Il=13,ul=0,Fo={};function re(o,e,t=Il,n=!0,i=void 0,s=void 0,A=void 0){let a=document.createElement("div"),r=ul++;a.classList.add("notification"),a.innerHTML=`
    <div class='top'>
        <h2 class='notification_title'>${o}</h2>
        <span class='close_btn'>\xD7</span>
    </div>`;let l=document.createElement("div");if(l.classList.add("notification_content"),s)for(let[c,g]of Object.entries(s))l.style[c]=g;a.appendChild(l);for(let c of e){let g=lA(c,i);c.onClick&&(g.onclick=()=>c.onClick({div:a,id:r},g)),l.appendChild(g)}n?a.getElementsByClassName("close_btn")[0].onclick=()=>{ie(r)}:a.getElementsByClassName("close_btn")[0].style.display="none",setTimeout(()=>{a.classList.add("drop")},75);let u=setTimeout(()=>{ie(r)},t*1e3+75);return document.getElementsByClassName("notification_field")[0].appendChild(a),Fo[r]={div:a,timeout:u,onclose:A},{div:a,id:r}}function ie(o){if(Fo[o]===void 0)return;let e=Fo[o],t=e.div;clearTimeout(Fo[o].timeout),t.classList.remove("drop"),setTimeout(()=>t.parentElement.removeChild(t),500),e.onclose&&e.onclose(),Fo[o]=void 0}var Le={nodesAmount:ot.nodesAmount,defaultDelay:ot.defaultDelay,delayVariation:ot.delayVariation,stereoDifference:ot.stereoDifference,oscillatorFrequency:ot.oscillatorFrequency,oscillatorFrequencyVariation:ot.oscillatorFrequencyVariation,oscillatorGain:ot.oscillatorGain};function cA(o,e,t){let n=e+"effectsConfig.",i=re(o.getLocaleString(n+"button.title"),[{type:"button",translatePathTitle:e+"disableCustomVibrato",onClick:(s,A)=>{t.disableGSNRPparams(),A.parentNode.removeChild(A)}},{type:"text",translatePathTitle:n+"reverbConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"file",translatePathTitle:n+"reverbConfig.impulseResponse",attributes:{accept:"audio/*"},listeners:{input:async s=>{if(s.target.files.length===0)return;s.stopImmediatePropagation(),s.preventDefault();let A=s.target.parentElement.parentElement;A.textContent=o.getLocaleString("locale.synthInit.genericLoading");let a=await t.context.decodeAudioData(await s.target.files[0].arrayBuffer());t.setReverbResponse(a),A.textContent=o.getLocaleString("locale.synthInit.done"),x("%cReverb response set!",B.info)}}},{type:"text",translatePathTitle:n+"chorusConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"input",translatePathTitle:n+"chorusConfig.nodesAmount",attributes:{type:"number",min:"0",value:Le.nodesAmount,setting:"nodes"}},{type:"input",translatePathTitle:n+"chorusConfig.defaultDelay",attributes:{type:"number",min:"0",value:Le.defaultDelay,setting:"delay"}},{type:"input",translatePathTitle:n+"chorusConfig.delayVariation",attributes:{type:"number",min:"0",value:Le.delayVariation,setting:"delay-var"}},{type:"input",translatePathTitle:n+"chorusConfig.stereoDifference",attributes:{type:"number",min:"0",value:Le.stereoDifference,setting:"stereo"}},{type:"input",translatePathTitle:n+"chorusConfig.oscillatorFrequency",attributes:{type:"number",min:"0",value:Le.oscillatorFrequency,setting:"osc-freq"}},{type:"input",translatePathTitle:n+"chorusConfig.frequencyVariation",attributes:{type:"number",min:"0",value:Le.oscillatorFrequencyVariation,setting:"freq-var"}},{type:"input",translatePathTitle:n+"chorusConfig.oscillatorGain",attributes:{type:"number",min:"0",value:Le.oscillatorGain,setting:"osc-gain"}},{type:"button",translatePathTitle:n+"chorusConfig.apply",onClick:s=>{Le.nodesAmount=parseFloat(s.div.querySelector("input[setting='nodes']").value),Le.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Le.delayVariation=parseFloat(s.div.querySelector("input[setting='delay-var']").value),Le.stereoDifference=parseFloat(s.div.querySelector("input[setting='stereo']").value),Le.oscillatorFrequency=parseFloat(s.div.querySelector("input[setting='osc-freq']").value),Le.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Le.oscillatorFrequencyVariation=parseFloat(s.div.querySelector("input[setting='freq-var']").value),Le.oscillatorGain=parseFloat(s.div.querySelector("input[setting='osc-gain']").value),t.setChorusConfig(Le)}}],999999,!0,o);return i.div.onclick=s=>s.stopImmediatePropagation(),i}var fe="locale.synthesizerController.keyModifiers.";async function gA(o,e){return new Promise(t=>{let n=re(o.getLocaleString(fe+"selectKey.title"),[{type:"text",textContent:o.getLocaleString(fe+"selectKey.prompt")}],999999,!1,o);e.onNotePressed=i=>{ie(n.id),e.onNotePressed=void 0,t(i)}})}async function dA(o,e,t,n){let i=await gA(e,t),s=(g,d,p,E)=>{let f={type:"number",min:d.toString(),max:p.toString(),value:E.toString()};return f[g]="true",f},A={};A.unchanged=e.getLocaleString(fe+"modifyKey.preset.unchanged");for(let g of n.toSorted((d,p)=>d.presetName<p.presetName?-1:d.presetName>p.presetName?1:0))A[g.presetName]=g.presetName;let a=o.keyModifierManager.getModifier(t.channel,i),r=a?.velocity??-1,l=re(e.getLocaleString(fe+"modifyKey.title"),[{type:"text",translatePathTitle:fe+"selectedKey",translatePathTitleProps:[i.toString()]},{type:"button",textContent:e.getLocaleString(fe+"selectKey.change"),onClick:async g=>{ie(g.id),await dA(o,e,t,n)}},{type:"input",translatePathTitle:fe+"selectedChannel",attributes:s("chan",0,(o.channelsAmount-1).toString(),t.channel.toString())},{type:"input",translatePathTitle:fe+"modifyKey.velocity",attributes:s("vel",0,127,r)},{type:"select",translatePathTitle:fe+"modifyKey.preset",attributes:{"preset-selector":"true"},selectOptions:A},{type:"button",translatePathTitle:fe+"modifyKey.apply",onClick:g=>{let d=parseInt(g.div.querySelector("input[chan]").value)??-1,p=parseInt(g.div.querySelector("input[vel]").value)??-1,E=g.div.querySelector("select[preset-selector]").value,f=-1,w=-1;if(E!=="unchanged"){let y=n.find(S=>S.presetName===E);f=y.bank,w=y.program}o.keyModifierManager.addModifier(d,i,{velocity:p,patch:{program:w,bank:f}}),ie(g.id)}}],99999,!0,e),u=a?.patch?.program??-1,c=a?.patch?.bank??-1;c!==-1&&u!==-1&&(l.div.querySelector("select[preset-selector]").value=n.find(g=>g.bank===c&&g.program===u).presetName)}async function hA(o,e,t){let n=await gA(e,t);re(e.getLocaleString(fe+"removeModification.title"),[{type:"text",translatePathTitle:fe+"selectedKey",translatePathTitleProps:[n.toString()]},{type:"button",textContent:e.getLocaleString(fe+"selectKey.change"),onClick:async i=>{ie(i.id),await hA(o,e,t)}},{type:"input",translatePathTitle:fe+"selectedChannel",attributes:{chan:"true",type:"number",value:t.channel.toString(),min:"0",max:(o.channelsAmount-1).toString()}},{type:"button",translatePathTitle:fe+"removeModification.remove",onClick:i=>{let s=parseInt(i.div.querySelector("input[chan]").value)??-1;o.keyModifierManager.deleteModifier(s,n),ie(i.id)}}],99999,!0,e)}function IA(o,e,t,n){re(e.getLocaleString(fe+"mainTitle"),[{type:"text",textContent:e.getLocaleString(fe+"detailedDescription"),attributes:{style:"white-space: pre; font-style: italic;"}},{type:"text",textContent:e.getLocaleString(fe+"prompt")},{type:"button",translatePathTitle:fe+"modifyKey",onClick:i=>{ie(i.id),dA(o,e,t,n).then()}},{type:"button",translatePathTitle:fe+"removeModification",onClick:i=>{ie(i.id),hA(o,e,t).then()}},{type:"button",translatePathTitle:fe+"resetModifications",onClick:i=>{ie(i.id),re(e.getLocaleString(fe+"resetModifications.confirmation.title"),[{type:"text",textContent:e.getLocaleString(fe+"resetModifications.confirmation.description")},{type:"button",textContent:e.getLocaleString("locale.yes"),onClick:s=>{ie(s.id),o.keyModifierManager.clearModifiers()}},{type:"button",textContent:e.getLocaleString("locale.no"),onClick:s=>{ie(s.id)}}],99999,!0,e)}}],9999999,!0,e)}function uA(){let o=document.createElement("div");o.classList.add("controls_wrapper"),this.voiceMeter=new $e("",ae+"mainVoiceMeter",this.locale,[],0,di),this.voiceMeter.bar.classList.add("voice_meter_bar_smooth"),this.voiceMeter.div.classList.add("main_controller_element"),this.volumeController=new $e("",ae+"mainVolumeMeter",this.locale,[],0,200,!0,l=>{this.synth.setMainVolume(Math.round(l)/100),this.volumeController.update(l)}),this.volumeController.bar.classList.add("voice_meter_bar_smooth"),this.volumeController.div.classList.add("main_controller_element"),this.volumeController.update(100),this.panController=new $e("",ae+"mainPanMeter",this.locale,[],-1,1,!0,l=>{this.synth.setMasterPan(l),this.panController.update(l)}),this.panController.bar.classList.add("voice_meter_bar_smooth"),this.panController.div.classList.add("main_controller_element"),this.panController.update(0),this.transposeController=new $e("",ae+"mainTransposeMeter",this.locale,[],-12,12,!0,l=>{this.synth.transpose(Math.round(l*2)/2),this.transposeController.update(Math.round(l*2)/2)}),this.transposeController.bar.classList.add("voice_meter_bar_smooth"),this.transposeController.div.classList.add("main_controller_element"),this.transposeController.update(0);let e=document.createElement("button");this.locale.bindObjectProperty(e,"textContent",ae+"midiPanic.title"),this.locale.bindObjectProperty(e,"title",ae+"midiPanic.description"),e.classList.add("synthui_button"),e.classList.add("main_controller_element"),e.onclick=()=>this.synth.stopAll(!0);let t=document.createElement("button");this.locale.bindObjectProperty(t,"textContent",ae+"systemReset.title"),this.locale.bindObjectProperty(t,"title",ae+"systemReset.description"),t.classList.add("synthui_button"),t.classList.add("main_controller_element"),t.onclick=()=>{this.controllers.forEach((l,u)=>{l.pitchWheel.isLocked&&l.pitchWheel.lockMeter(),l.pan.isLocked&&l.pan.lockMeter(),l.expression.isLocked&&l.expression.lockMeter(),l.volume.isLocked&&l.volume.lockMeter(),l.mod.isLocked&&l.mod.lockMeter(),l.chorus.isLocked&&l.chorus.lockMeter(),l.reverb.isLocked&&l.reverb.lockMeter(),l.brightness.isLocked&&l.brightness.lockMeter(),l.preset.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(u,Re,!1),l.preset.mainButton.classList.remove("locked_selector")),this.synth.transposeChannel(u,0,!0),l.transpose.update(0),l.soloButton.innerHTML=Ao(ke),l.muteButton.innerHTML=vo(ke),this.synth.muteChannel(u,!1)}),this.synth.resetControllers()};let n=document.createElement("button");this.locale.bindObjectProperty(n,"textContent",ae+"blackMidiMode.title"),this.locale.bindObjectProperty(n,"title",ae+"blackMidiMode.description"),n.classList.add("synthui_button"),n.classList.add("main_controller_element"),n.onclick=()=>{this.synth.highPerformanceMode=!this.synth.highPerformanceMode};let i=document.createElement("button");this.locale.bindObjectProperty(i,"textContent",ae+"keyModifiers.button.title"),this.locale.bindObjectProperty(i,"title",ae+"keyModifiers.button.description"),i.classList.add("synthui_button"),i.classList.add("main_controller_element"),i.onclick=()=>{IA(this.synth,this.locale,this.keyboard,this.presetList)};let s=document.createElement("button");this.locale.bindObjectProperty(s,"textContent",ae+"effectsConfig.button.title"),this.locale.bindObjectProperty(s,"title",ae+"effectsConfig.button.description"),s.classList.add("synthui_button"),s.classList.add("main_controller_element"),s.onclick=()=>{if(this.effectsConfigWindow!==void 0){ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0;return}this.effectsConfigWindow=cA(this.locale,ae,this.synth).id};let A=document.createElement("select");A.classList.add("main_controller_element"),A.classList.add("synthui_button"),this.locale.bindObjectProperty(A,"title",ae+"interpolation.description");{let l=document.createElement("option");l.value="0",this.locale.bindObjectProperty(l,"textContent",ae+"interpolation.linear"),A.appendChild(l);let u=document.createElement("option");u.value="1",this.locale.bindObjectProperty(u,"textContent",ae+"interpolation.nearestNeighbor"),A.appendChild(u);let c=document.createElement("option");c.value="2",c.selected=!0,this.locale.bindObjectProperty(c,"textContent",ae+"interpolation.cubic"),A.appendChild(c),A.onchange=()=>{this.synth.setInterpolationType(parseInt(A.value))}}let a=document.createElement("div");a.classList.add("synthui_controller"),this.uiDiv.appendChild(a);let r=document.createElement("button");this.locale.bindObjectProperty(r,"textContent",ae+"toggleButton.title"),this.locale.bindObjectProperty(r,"title",ae+"toggleButton.description"),r.classList.add("synthui_button"),r.onclick=()=>{this.hideOnDocClick=!1,this.toggleVisibility()},o.appendChild(this.volumeController.div),o.appendChild(this.panController.div),o.appendChild(this.transposeController.div),o.appendChild(e),o.appendChild(t),o.appendChild(n),o.appendChild(i),o.appendChild(s),o.appendChild(A),this.mainMeters=[this.volumeController,this.panController,this.transposeController,this.voiceMeter],this.mainButtons=[e,t,n,i,s,r,A],this.uiDiv.appendChild(this.voiceMeter.div),this.uiDiv.appendChild(r),a.appendChild(o),this.mainControllerDiv=a,this.mainControllerDiv.onclick=l=>l.stopPropagation(),document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.effectsConfigWindow!==void 0&&(ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0),a.classList.remove("synthui_controller_show"),this.isShown=!1,this.hideControllers()})}function mA(){let o=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.synth.eventHandler.addEvent("programchange","synthui-program-change",e=>{this.controllers[e.channel].preset.set(`${e.bank}:${e.program}`)}),this.synth.eventHandler.addEvent("allcontrollerreset","synthui-all-controller-reset",()=>{for(let e of this.controllers)e.pan.update(64),e.mod.update(0),e.chorus.update(0),e.pitchWheel.update(0),e.expression.update(127),e.volume.update(100),e.reverb.update(0),e.brightness.update(64)}),this.synth.eventHandler.addEvent("controllerchange","synthui-controller-change",e=>{let t=e.controllerNumber,n=e.channel,i=e.controllerValue,s=this.controllers[n];if(s!==void 0)switch(t){default:break;case T.expressionController:s.expression.update(i);break;case T.mainVolume:s.volume.update(i);break;case T.pan:s.pan.update(i);break;case T.modulationWheel:s.mod.update(i);break;case T.chorusDepth:s.chorus.update(i);break;case T.reverbDepth:s.reverb.update(i);break;case T.brightness:s.brightness.update(i)}}),this.synth.eventHandler.addEvent("pitchwheel","synthui-pitch-wheel",e=>{let t=e.MSB<<7|e.LSB;this.controllers[e.channel].pitchWheel.update(t-8192)}),this.synth.eventHandler.addEvent("drumchange","synthui-drum-change",e=>{this.controllers[e.channel].drumsToggle.innerHTML=e.isDrumChannel?In(32):un(32),this.controllers[e.channel].preset.reload(e.isDrumChannel?this.percussionList:this.instrumentList)}),this.synth.eventHandler.addEvent("newchannel","synthui-new-channel",()=>{let e=this.createChannelController(this.controllers.length);this.controllers.push(e),o.appendChild(e.controller),this.hideControllers()})}var ae="locale.synthesizerController.",At=class{constructor(e,t,n){this.channelColors=e;let i=t;this.uiDiv=document.createElement("div"),this.uiDiv.classList.add("wrapper"),i.appendChild(this.uiDiv),this.uiDiv.style.visibility="visible",this.isShown=!1,this.animationId=-1,this.locale=n,this.hideOnDocClick=!0,this.effectsConfigWindow=void 0}connectKeyboard(e){this.keyboard=e}connectSynth(e){this.synth=e,this.getInstrumentList(),this.createMainSynthController(),this.createChannelControllers(),document.addEventListener("keydown",t=>{switch(t.key.toLowerCase()){case Ee.synthesizerUIShow:t.preventDefault(),this.toggleVisibility();break;case Ee.settingsShow:this.isShown=!0,this.toggleVisibility();break;case Ee.blackMidiMode:t.preventDefault(),this.synth.highPerformanceMode=!this.synth.highPerformanceMode;break;case Ee.midiPanic:t.preventDefault(),this.synth.stopAll(!0);break}}),this.locale.onLocaleChanged.push(()=>{this.voiceMeter.update(this.voiceMeter.currentValue,!0),this.volumeController.update(this.volumeController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.transposeController.update(this.transposeController.currentValue,!0);for(let t of this.controllers)t.voiceMeter.update(t.voiceMeter.currentValue,!0),t.pitchWheel.update(t.pitchWheel.currentValue,!0),t.pan.update(t.pan.currentValue,!0),t.volume.update(t.volume.currentValue,!0),t.expression.update(t.expression.currentValue,!0),t.mod.update(t.mod.currentValue,!0),t.chorus.update(t.chorus.currentValue,!0),t.reverb.update(t.reverb.currentValue,!0),t.brightness.update(t.brightness.currentValue,!0),t.transpose.update(t.transpose.currentValue,!0)})}toggleVisibility(){this.animationId!==-1&&clearTimeout(this.animationId);let e=document.getElementsByClassName("synthui_controller")[0];this.isShown=!this.isShown,this.isShown?(e.style.display="block",document.getElementsByClassName("top_part")[0].classList.add("synthui_shown"),this.showControllers(),setTimeout(()=>{e.classList.add("synthui_controller_show")},75)):(this.effectsConfigWindow!==void 0&&(ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0),document.getElementsByClassName("top_part")[0].classList.remove("synthui_shown"),this.hideControllers(),e.classList.remove("synthui_controller_show"),this.animationId=setTimeout(()=>{e.style.display="none"},200))}updateVoicesAmount(){this.voiceMeter.update(this.synth.voicesAmount),this.controllers.forEach((e,t)=>{let n=this.synth.channelProperties[t].voicesAmount;e.voiceMeter.update(n),n<1&&this.synth.voicesAmount>0?e.controller.classList.add("no_voices"):e.controller.classList.remove("no_voices")})}getInstrumentList(){this.synth.eventHandler.addEvent("presetlistchange","synthui-preset-list-change",e=>{let t=e;this.presetList=t,this.instrumentList=t.filter(n=>n.bank!==128).sort((n,i)=>n.program===i.program?n.bank-i.bank:n.program-i.program).map(n=>({name:n.presetName,bank:n.bank,program:n.program})),this.percussionList=t.filter(n=>n.bank===128).sort((n,i)=>n.program-i.program).map(n=>({name:n.presetName,bank:n.bank,program:n.program})),this.percussionList.length===0?this.percussionList=this.instrumentList:this.instrumentList.length===0&&(this.instrumentList=this.percussionList),this.controllers.forEach((n,i)=>{let s=this.synth.channelProperties[i].isDrum?this.percussionList:this.instrumentList;n.preset.reload(s),n.preset.set(`${s[0].bank}:${s[0].program}`)})})}};At.prototype.hideControllers=oA;At.prototype.showControllers=nA;At.prototype.toggleDarkMode=iA;At.prototype.createChannelController=AA;At.prototype.createChannelControllers=rA;At.prototype.createMainSynthController=uA;At.prototype.setEventListeners=mA;var Ro=null,fn=class{constructor(){}async createMIDIDeviceHandler(){if(this.selectedInput=Ro,this.selectedOutput=Ro,navigator.requestMIDIAccess)try{let e=await navigator.requestMIDIAccess({sysex:!0,software:!0});return this.inputs=e.inputs,this.outputs=e.outputs,x("%cMIDI handler created!",B.recognized),!0}catch(e){return Z("Could not get MIDI Devices:",e),this.inputs=[],this.outputs=[],!1}else return Z("Web MIDI Api not supported!",B.unrecognized),this.inputs=[],this.outputs=[],!1}connectMIDIOutputToSeq(e,t){this.selectedOutput=e,t.connectMidiOutput(e),x(`%cPlaying MIDI to %c${e.name}`,B.info,B.recognized)}disconnectSeqFromMIDI(e){this.selectedOutput=Ro,e.connectMidiOutput(void 0),x("%cDisconnected from MIDI out.",B.info)}connectDeviceToSynth(e,t){this.selectedInput=e,e.onmidimessage=n=>{t.sendMessage(n.data)},x(`%cListening for messages on %c${e.name}`,B.info,B.recognized)}disconnectDeviceFromSynth(e){this.selectedInput=Ro,e.onmidimessage=void 0,x(`%cDisconnected from %c${e.name}`,B.info,B.recognized)}disconnectAllDevicesFromSynth(){this.selectedInput=Ro;for(let e of this.inputs)e[1].onmidimessage=void 0}};var Bn=class{constructor(e){window.addEventListener("message",t=>{if(typeof t.data!="string")return;let n=t.data.split(",");if(n[0]!=="midi")return;n.shift();let i=n.map(s=>parseInt(s,16));e.sendMessage(i)}),x("%cWeb MIDI Link handler created!",B.recognized)}};var vt="midi range";function pA(o,e,t){let n=0,i=this.htmlControls.keyboard,s=[],A=[],a,r=g=>{let d=A[g],p=d.drum?128:d.bank,E=a.find(f=>f.bank===p&&f.program===d.program);E||(E=a[0]),s[g].textContent=": "+E.presetName},l=()=>{if(a)for(let g=0;g<s.length;g++)r(g)},u=()=>{let g=document.createElement("option");g.value=n.toString();let d=document.createElement("p");this.locale.bindObjectProperty(d,"textContent","locale.settings.keyboardSettings.selectedChannel.channelOption",[n+1]);let p=document.createElement("p");p.textContent=": not ",s.push(p),A.push({program:0,bank:0,drum:n%16===9}),l(),g.appendChild(d),g.appendChild(p),g.style.background=e.channelColors[n%e.channelColors.length],g.style.color="rgb(0, 0, 0)",i.channelSelector.appendChild(g),n++},c=this.synthui.synth;c.eventHandler.addEvent("presetlistchange","settings-preset-list-change",g=>{a=g,l()}),c.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),c.eventHandler.addEvent("programchange","settings-program-change",g=>{let d=A[g.channel];d.bank=g.bank,d.program=g.program,r(g.channel)}),c.eventHandler.addEvent("drumchange","settings-drum-change",g=>{A[g.channel].drum=g.isDrumChannel,r(g.channel)});for(let g=0;g<e.synth.channelsAmount;g++)u();i.channelSelector.onchange=()=>{o.selectChannel(parseInt(i.channelSelector.value))},i.sizeSelector.onchange=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{i.sizeSelector.value===vt?(this.autoKeyRange=!0,this?.sequi?.seq&&(o.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,o.keyRange=this.keyboardSizes[i.sizeSelector.value],t.keyRange=this.keyboardSizes[i.sizeSelector.value]),this._saveSettings()},600);return}i.sizeSelector.value===vt?(this.autoKeyRange=!0,this?.sequi?.seq&&(o.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,o.keyRange=this.keyboardSizes[i.sizeSelector.value],t.keyRange=this.keyboardSizes[i.sizeSelector.value]),this._saveSettings()},this.addSequencer=g=>{g.addOnSongChangeEvent(d=>{this.autoKeyRange&&(o.keyRange=d.keyRange,t.keyRange=d.keyRange),d.RMIDInfo?.IPIC!==void 0&&this.musicMode.visible===!1&&this.toggleMusicPlayerMode().then()},"settings-keyboard-handler-song-change")},e.synth.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),e.synth.eventHandler.addEvent("programchange","settings-keyboard-program-change",g=>{g.userCalled&&(o.selectChannel(g.channel),i.channelSelector.value=g.channel)}),e.synth.eventHandler.addEvent("mutechannel","settings-keuboard-mute-channel",g=>{if(g.isMuted&&g.channel===o.channel){let d=0;for(;e.synth.channelProperties[d].isMuted;)if(d++,e.synth.channelProperties[d]===void 0)return;d<e.synth.channelsAmount&&(o.selectChannel(d),i.channelSelector.value=d)}}),i.modeSelector.onclick=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{o.toggleMode(),this._saveSettings()},600);return}o.toggleMode(),this._saveSettings()},i.showSelector.onclick=()=>{o.shown=!o.shown,this._saveSettings()}}var CA=`
<h1 translate-path='locale.settings.mainTitle'></h1>
<div class='settings_groups_parent'>
    <div class='settings_group'>
        <h2 translate-path='locale.settings.rendererSettings.title'></h2>
        <label translate-path-title='locale.settings.rendererSettings.noteFallingTime'></label>
        <spessarange min='1' max='9999' value='1000' class='settings_slider' input_id='note_time_slider' units='ms'></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.noteAfterTriggerTime'></label>
        <spessarange min='0' max='9999' value='0' class='settings_slider' input_id='note_after_time_slider' units='ms'></spessarange>
        
        
        <label translate-path-title='locale.settings.rendererSettings.waveformThickness'></label>
        <spessarange min='0' max='10' value='2' class='settings_slider' input_id='analyser_thickness_slider' units='px'></spessarange>
        
        <label 
        translate-path-title='locale.settings.rendererSettings.waveformSampleSize'></label>
        <spessarange min='5' max='15' value='10' class='settings_slider' input_id='analyser_fft_slider' units=''></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.waveformAmplifier'></label>
        <spessarange min='-10' max='10' value='2' class='settings_slider' input_id='wave_multiplier_slider' units=''></spessarange>
        
        <div class='switch_label'>
            <label for='analyser_toggler' translate-path-title='locale.settings.rendererSettings.toggleWaveformsRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='analyser_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='note_toggler' translate-path-title='locale.settings.rendererSettings.toggleNotesRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='active_note_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingActiveNotes'></label>
            <label class='switch'>
                <input type='checkbox' checked id='active_note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='visual_pitch_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingVisualPitch'></label>
            <label class='switch'>
                <input type='checkbox' checked id='visual_pitch_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='stabilize_waveforms_toggler' translate-path-title='locale.settings.rendererSettings.toggleStabilizeWaveforms'></label>
            <label class='switch'>
                <input type='checkbox' checked id='stabilize_waveforms_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>


    <div class='settings_group'>
        <h2 translate-path='locale.settings.keyboardSettings.title'></h2>
        <label for='channel_selector' translate-path-title='locale.settings.keyboardSettings.selectedChannel'></label>
        <select id='channel_selector'>
        </select>
        
        <label for='keyboard_size_selector' translate-path-title='locale.settings.keyboardSettings.keyboardSize'></label>
        <select id='keyboard_size_selector'>
            <option value='full' translate-path='locale.settings.keyboardSettings.keyboardSize.full'></option>
            <option value='piano' translate-path='locale.settings.keyboardSettings.keyboardSize.piano'></option>
            <option value='5 octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.fiveOctaves'></option>
            <option value='two octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.twoOctaves'></option>
            <option value='${vt}' translate-path='locale.settings.keyboardSettings.keyboardSize.useSongKeyRange'></option>
        </select>
        
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' id='mode_selector'>
                <span class='switch_slider'></span>
            </label>
        </div>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.show'></label>
            <label class='switch'>
                <input type='checkbox' checked id='keyboard_show'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>
    
    
    <div class='settings_group' id='midi_settings'>
        <h2 translate-path='locale.settings.midiSettings.title'></h2>
        <label for='midi_input_selector' translate-path-title='locale.settings.midiSettings.midiInput'></label>
        <select id='midi_input_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiInput.disabled'></option>
        </select>
        
        <label for='midi_output_selector' translate-path-title='locale.settings.midiSettings.midiOutput'></label>
        <select id='midi_output_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiOutput.disabled'></option>
        </select>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.midiSettings.reminder'></h4>
    </div>
    
    
    <div class='settings_group'>
        <h2 translate-path='locale.settings.interfaceSettings.title'></h2>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.interfaceSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' checked id='toggle_mode_button'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <label for='language_selector' translate-path-title='locale.settings.interfaceSettings.selectLanguage'></label>
        <select id='language_selector'>
         <option value='help-translate' translate-path='locale.settings.interfaceSettings.selectLanguage.helpTranslate'></option>
        <!-- will be added via javascript -->
        </select>
        
        <label for='layout_selector' translate-path-title='locale.settings.interfaceSettings.layoutDirection'></label>
        <select id='layout_selector'>
            <option value='downwards' selected translate-path='locale.settings.interfaceSettings.layoutDirection.values.downwards'></option>
            <option value='upwards' translate-path='locale.settings.interfaceSettings.layoutDirection.values.upwards'></option>
            <option value='left' translate-path='locale.settings.interfaceSettings.layoutDirection.values.leftToRight'></option>
            <option value='right' translate-path='locale.settings.interfaceSettings.layoutDirection.values.rightToLeft'></option>
        </select>
        
        <h3><a href='https://github.com/spessasus/SpessaSynth/wiki/How-To-Use-App' target='_blank' translate-path-title='locale.synthesizerController.helpButton'></a></h3>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.interfaceSettings.reminder'></h4>
        <h4 class='hover_reminder'>
            <span translate-path='locale.settings.interfaceSettings.useFirefox.firefox' style='color: orange;'></span>
            <span translate-path='locale.settings.interfaceSettings.useFirefox.recommended'></span>
        </h4>
    </div>
</div>
`;async function EA(){let o=await window.savedSettings;if(!o.interface)return;x("Loading saved settings...",o);let e=this.htmlControls.renderer,t=this.renderer,n=o.renderer;t.noteFallingTimeMs=n.noteFallingTimeMs??1e3,e.noteTimeSlider.value=n.noteFallingTimeMs,e.noteTimeSlider.dispatchEvent(new Event("input")),et(e.noteTimeSlider).innerText=`${n.noteFallingTimeMs}ms`,t.noteAfterTriggerTimeMs=n.noteAfterTriggerTimeMs??0,e.noteAfterTriggerTimeSlider.value=n.noteAfterTriggerTimeMs,e.noteAfterTriggerTimeSlider.dispatchEvent(new Event("input")),et(e.noteAfterTriggerTimeSlider).innerText=`${n.noteAfterTriggerTimeMs}ms`,e.analyserThicknessSlider.value=n.waveformThickness??2,e.analyserThicknessSlider.dispatchEvent(new Event("input")),t.lineThickness=n.waveformThickness,et(e.analyserThicknessSlider).innerText=`${n.waveformThickness}px`;let i=n.sampleSize??10;e.analyserFftSlider.value=Math.log2(i),e.analyserFftSlider.dispatchEvent(new Event("input")),t.normalAnalyserFft=i,t.drumAnalyserFft=Math.pow(2,Math.min(15,Math.log2(i)+2)),t.updateFftSize(),this.setTimeDelay(i),et(e.analyserFftSlider).innerText=`${i}`,t.waveMultiplier=n.amplifier??2,e.waveMultiplierSlizer.value=n.amplifier,e.waveMultiplierSlizer.dispatchEvent(new Event("input")),et(e.waveMultiplierSlizer).innerText=n.amplifier.toString();let s=this.htmlControls.renderer;t.renderAnalysers=n.renderWaveforms??!0,s.analyserToggler.checked=n.renderWaveforms??!0,t.renderNotes=n.renderNotes??!0,s.noteToggler.checked=n.renderNotes??!0,t.drawActiveNotes=n.drawActiveNotes??!0,s.activeNoteToggler.checked=n.drawActiveNotes??!0,t.showVisualPitch=n.showVisualPitch??!0,s.visualPitchToggler.checked=n.showVisualPitch??!0,t.stabilizeWaveforms=n.stabilizeWaveforms??!0,s.stabilizeWaveformsToggler.checked=n.stabilizeWaveforms??!0,t.keyRange=n.keyRange??{min:0,max:128};let A=this.htmlControls.keyboard,a=this.midiKeyboard,r=o.keyboard;a.setKeyRange(r.keyRange??{min:0,max:128},!1),r.autoRange?(A.sizeSelector.value=vt,this.autoKeyRange=!0):(this.autoKeyRange=!1,A.sizeSelector.value=Object.keys(this.keyboardSizes).find(l=>this.keyboardSizes[l].min===r.keyRange.min&&this.keyboardSizes[l].max===r.keyRange.max)),r.mode==="dark"&&(a.toggleMode(!1),this.htmlControls.keyboard.modeSelector.checked=!0),r.show===!1&&(a.shown=!1,this.htmlControls.keyboard.showSelector.checked=!1),this.locale.changeGlobalLocale(o.interface.language,!0),setTimeout(()=>{this.htmlControls.interface.languageSelector.value=o.interface.language},100),o.interface.mode==="light"?(this._toggleDarkMode(),this.htmlControls.interface.themeSelector.checked=!1):this.htmlControls.interface.themeSelector.checked=!0,this.htmlControls.interface.layoutSelector.value=o.interface.layout||"downwards",this._changeLayout(o.interface.layout||"downwards")}function fA(){window.saveSettings&&window.saveSettings(this._serializeSettings())}function BA(){return{renderer:{noteFallingTimeMs:this.renderer.noteFallingTimeMs,noteAfterTriggerTimeMs:this.renderer.noteAfterTriggerTimeMs,waveformThickness:this.renderer.lineThickness,sampleSize:this.renderer.normalAnalyserFft,amplifier:this.renderer.waveMultiplier,renderWaveforms:this.renderer.renderAnalysers,renderNotes:this.renderer.renderNotes,drawActiveNotes:this.renderer.drawActiveNotes,showVisualPitch:this.renderer.showVisualPitch,stabilizeWaveforms:this.renderer.stabilizeWaveforms,keyRange:this.renderer.keyRange},keyboard:{selectedChannel:this.midiKeyboard.channel,keyRange:this.midiKeyboard.keyRange,mode:this.midiKeyboard.mode,autoRange:this.htmlControls.keyboard.sizeSelector.value===vt,show:this.htmlControls.keyboard.showSelector.checked===!0},midi:{input:this.midiDeviceHandler.selectedInput===null?null:this.midiDeviceHandler.selectedInput.name,output:this.midiDeviceHandler.selectedOutput===null?null:this.midiDeviceHandler.selectedOutput.name},interface:{mode:this.mode,language:this.htmlControls.interface.languageSelector.value,layout:this.htmlControls.interface.layoutSelector.value}}}function QA(){let o=this.htmlControls.interface.themeSelector;o.onclick=()=>{this._toggleDarkMode(),this._saveSettings()};let e=this.htmlControls.interface.languageSelector;for(let[n,i]of Object.entries(this.locales)){let s=document.createElement("option");s.value=n,s.textContent=i.localeName,e.appendChild(s)}e.value=this.locale.localeCode,e.onchange=()=>{if(e.value==="help-translate"){window.open("https://github.com/spessasus/SpessaSynth/blob/master/src/website/js/locale/locale_files/README.md"),e.value=this.locale.localeCode;return}this.locale.changeGlobalLocale(e.value),this._saveSettings()};let t=this.htmlControls.interface.layoutSelector;t.onchange=()=>{this._changeLayout(t.value),this._saveSettings(),t.blur()}}function yA(o){let e=document.getElementById("keyboard_canvas_wrapper"),t=document.getElementById("note_canvas"),n=document.getElementById("keyboard");switch(o){case"downwards":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),n.classList.remove("sideways"),this.renderer.direction="down",this.renderer.sideways=!1;break;case"upwards":e.classList.add("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),n.classList.remove("sideways"),this.renderer.direction="up",this.renderer.sideways=!1;break;case"left":e.classList.remove("upwards"),e.classList.add("left_to_right"),e.classList.remove("right_to_left"),t.classList.add("sideways"),n.classList.add("sideways"),this.renderer.direction="up",this.renderer.sideways=!0;break;case"right":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.add("right_to_left"),t.classList.add("sideways"),n.classList.add("sideways"),this.renderer.direction="down",this.renderer.sideways=!0}}var Qn={start:"#101010",end:"#212121"},yn={start:"#bbb",end:"#f0f0f0"},SA="#eee",wA="#333",Sn={start:"#222",end:"#333"},wn={start:"#ccc",end:"#fff"},It=.2;function DA(){this.mode==="dark"?(this.mode="light",this.renderer.drawActiveNotes=!1):(this.renderer.drawActiveNotes=!0,this.mode="dark"),this.renderer.toggleDarkMode(),this.synthui.toggleDarkMode(),this.sequi.toggleDarkMode(),this.musicMode.toggleDarkMode(),document.getElementsByClassName("spessasynth_main")[0].classList.toggle("light_mode"),document.getElementsByClassName("top_part")[0].classList.toggle("top_part_light"),this.mainDiv.classList.toggle("settings_menu_light");let o=document.styleSheets[0].cssRules;for(let e of o)if(e.selectorText==="*"){this.mode==="dark"?(ut(wA,SA,It,e,"--font-color"),ut(wn.start,Sn.start,It,e,"--top-buttons-color-start"),ut(wn.end,Sn.end,It,e,"--top-buttons-color-end"),ut(yn.start,Qn.start,It,e,"--top-color-start"),ut(yn.end,Qn.end,It,e,"--top-color-end")):(ut(SA,wA,It,e,"--font-color"),ut(Sn.start,wn.start,It,e,"--top-buttons-color-start"),ut(Sn.end,wn.end,It,e,"--top-buttons-color-end"),ut(Qn.start,yn.start,It,e,"--top-color-start"),ut(Qn.end,yn.end,It,e,"--top-color-end"));break}document.body.style.background=this.mode==="dark"?"black":"white"}var ao={};function ut(o,e,t,n,i){ao[i]&&(clearInterval(ao[i]),ao[i]=void 0);function s(c){c.length===4&&(c=`#${c[1]}${c[1]}${c[2]}${c[2]}${c[3]}${c[3]}`);let g=parseInt(c.slice(1),16);return{r:g>>16&255,g:g>>8&255,b:g&255}}function A(c,g,d){return c+(g-c)*d}let a=s(o),r=s(e),l=performance.now()/1e3;function u(){let g=performance.now()/1e3-l,d=Math.min(g/t,1),p=Math.round(A(a.r,r.r,d)),E=Math.round(A(a.g,r.g,d)),f=Math.round(A(a.b,r.b,d));n.style.setProperty(i,`rgb(${p}, ${E}, ${f})`),d>=1&&(clearInterval(ao[i]),ao[i]=void 0)}ao[i]=setInterval(u,1e3/60)}function kA(o){let e=this.htmlControls.renderer;e.noteTimeSlider.addEventListener("input",()=>{o.noteFallingTimeMs=e.noteTimeSlider.value,et(e.noteTimeSlider).innerText=`${e.noteTimeSlider.value}ms`}),e.noteTimeSlider.onchange=()=>{this._saveSettings()},e.noteAfterTriggerTimeSlider.addEventListener("input",()=>{o.noteAfterTriggerTimeMs=e.noteAfterTriggerTimeSlider.value,et(e.noteAfterTriggerTimeSlider).innerText=`${e.noteAfterTriggerTimeSlider.value}ms`}),e.noteAfterTriggerTimeSlider.onchange=()=>{this._saveSettings()},e.analyserThicknessSlider.addEventListener("input",()=>{o.lineThickness=parseInt(e.analyserThicknessSlider.value),et(e.analyserThicknessSlider).innerText=`${e.analyserThicknessSlider.value}px`}),e.analyserThicknessSlider.onchange=()=>{this._saveSettings()},e.analyserFftSlider.addEventListener("input",()=>{let t=Math.pow(2,parseInt(e.analyserFftSlider.value));o.normalAnalyserFft=t,o.drumAnalyserFft=Math.pow(2,Math.min(15,parseInt(e.analyserFftSlider.value)+2)),o.updateFftSize(),this.setTimeDelay(t),et(e.analyserFftSlider).innerText=`${t}`}),e.analyserFftSlider.onchange=()=>{this._saveSettings()},e.waveMultiplierSlizer.addEventListener("input",()=>{o.waveMultiplier=parseInt(e.waveMultiplierSlizer.value),et(e.waveMultiplierSlizer).innerText=e.waveMultiplierSlizer.value}),e.waveMultiplierSlizer.onchange=()=>{this._saveSettings()},e.analyserToggler.onclick=()=>{o.renderAnalysers=!o.renderAnalysers,this._saveSettings()},e.noteToggler.onclick=()=>{o.renderNotes=!o.renderNotes,this._saveSettings()},e.activeNoteToggler.onclick=()=>{o.drawActiveNotes=!o.drawActiveNotes,this._saveSettings()},e.visualPitchToggler.onclick=()=>{o.showVisualPitch=!o.showVisualPitch,this._saveSettings()},e.stabilizeWaveformsToggler.onclick=()=>{o.stabilizeWaveforms=!o.stabilizeWaveforms,this._saveSettings()}}function bA(o,e,t){o.createMIDIDeviceHandler().then(n=>{n?(this._createMidiInputHandler(o,t.synth),this._createMidiOutputHandler(o,e)):(Pe||re(this.locale.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.locale.getLocaleString("locale.warnings.noMidiSupport")}]),document.getElementById("midi_settings").style.display="none")})}function vA(o,e){if(o.inputs.length<1)return;let t=this.htmlControls.midi.inputSelector;for(let n of o.inputs){let i=document.createElement("option");i.value=n[0],i.innerText=n[1].name,t.appendChild(i)}if(t.onchange=()=>{t.value==="-1"?o.disconnectAllDevicesFromSynth():o.connectDeviceToSynth(o.inputs.get(t.value),e),this._saveSettings()},o.inputs.size>0){let n=o.inputs.entries().next().value;o.connectDeviceToSynth(n[1],e),t.value=n[0]}}function xA(o,e){if(!o.outputs){setTimeout(()=>{this._createMidiOutputHandler(o,e)},1e3);return}if(o.outputs.length<1)return;let t=this.htmlControls.midi.outputSelector;for(let n of o.outputs){let i=document.createElement("option");i.value=n[0],i.innerText=n[1].name,t.appendChild(i)}t.onchange=()=>{if(!e.seq){setTimeout(t.onchange,1e3);return}t.value==="-1"?o.disconnectSeqFromMIDI(e.seq):o.connectMIDIOutputToSeq(o.outputs.get(t.value),e.seq),this._saveSettings()}}var MA={title:"Renderer settings",noteFallingTime:{title:"Note falling time (milliseconds)",description:"How fast the notes fall (visually)"},noteAfterTriggerTime:{title:"Note after trigger time (milliseconds)",description:"How long the notes fall after they get triggered. Zero means that they trigger at the bottom."},waveformThickness:{title:"Waveform line thickness (px)",description:"How thick the waveform lines are"},waveformSampleSize:{title:"Waveform sample size",description:"How detailed the waveforms are (Note: high values might impact performance). Also note that high values will add a delay to the audio to sync the waveforms with the audio."},waveformAmplifier:{title:"Waveform amplifier",description:"How vibrant the waveforms are"},toggleWaveformsRendering:{title:"Enable waveforms rendering",description:"Enable rendering the channel waveforms (colorful lines showing audio)"},toggleNotesRendering:{title:"Enable notes rendering",description:"Enable rendering of the falling notes when playing a MIDI file"},toggleDrawingActiveNotes:{title:"Enable drawing active notes",description:"Enable notes lighting up and glowing when they get pressed"},toggleDrawingVisualPitch:{title:"Enable drawing visual pitch",description:"Enable notes sliding left or right when the pitch wheel is applied"},toggleStabilizeWaveforms:{title:"Stabilize waveforms",description:"Enable oscilloscope triggering"}};var FA={title:"MIDI Keyboard settings",selectedChannel:{title:"Selected channel",description:"The channel keyboard sends messages to",channelOption:"Channel {0}"},keyboardSize:{title:"Keyboard size",description:"The range of keys shown on the keyboard. Adjusts the MIDI note size accordingly",full:"128 keys (full)",piano:"88 keys (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Use song's key range",twoOctaves:"Two octaves"},toggleTheme:{title:"Use dark theme",description:"Use the dark MIDI keyboard theme"},show:{title:"Show",description:"Show/hide MIDI keyboard"}};var RA={title:"MIDI settings",midiInput:{title:"MIDI input",description:"The port to listen on for MIDI messages",disabled:"Disabled"},midiOutput:{title:"MIDI output",description:"The port to play the MIDI file to",disabled:"Use SpessaSynth"},reminder:{title:"Note that you need to RESTART YOUR BROWSER after connecting a new MIDI device for it to show up here.",description:"Also note that Safari does not support WebMIDI, so you will need to use a different browser if you are on Mac."}};var LA={toggleButton:"Settings",mainTitle:"Program settings",rendererSettings:MA,keyboardSettings:FA,midiSettings:RA,interfaceSettings:{title:"Interface settings",toggleTheme:{title:"Use dark theme",description:"Enable the dark theme for the interface"},selectLanguage:{title:"Language",description:"Change the program language",helpTranslate:"Translate SpessaSynth"},layoutDirection:{title:"Layout direction",description:"The layout direction of the renderer and keyboard",values:{downwards:"Downwards",upwards:"Upwards",leftToRight:"Left to right",rightToLeft:"Right to left"}},reminder:{title:"Did you know that you can hover over the settings to get more information?",description:"Like this one!"},useFirefox:{firefox:"Firefox Web Browser",recommended:"is highly recommended for the best performance."}}};var TA={toggleButton:{title:"Toggle music player mode",description:"Toggle the simplified UI version, hiding the keyboard and note visualizations"},currentlyPlaying:"Currently playing:",nothingPlaying:"Nothing is playing",nothingPlayingCopyright:"Upload a MIDI!"};var GA={voiceMeter:{title:"Voices: ",description:"The current amount of voices playing on channel {0}"},pitchBendMeter:{title:"Pitch: ",description:"The current pitch bend applied to channel {0}"},panMeter:{title:"Pan: ",description:"The current stereo panning applied to channel {0} (right-click to lock)"},expressionMeter:{title:"Expression: ",description:"The current expression (loudness) of channel {0} (right-click to lock)"},volumeMeter:{title:"Volume: ",description:"The current volume of channel {0} (right-click to lock)"},modulationWheelMeter:{title:"Mod wheel: ",description:"The current modulation (usually vibrato) depth of channel {0} (right-click to lock)"},chorusMeter:{title:"Chorus: ",description:"The current level of chorus effect applied to channel {0} (right-click to lock)"},reverbMeter:{title:"Reverb: ",description:"The current level of reverb effect applied to channel {0} (right-click to lock)"},filterMeter:{title:"Filter: ",description:"The current level of low-pass filter cutoff applied to channel {0} (right-click to lock)"},transposeMeter:{title:"Transpose: ",description:"The current transposition (key shift) of channel {0}"},presetSelector:{description:"Change the patch (instrument) channel {0} is using",selectionPrompt:"Change instrument for channel {0}",searchPrompt:"Search..."},presetReset:{description:"Unlock channel {0} to allow program changes"},soloButton:{description:"Solo on channel {0}"},muteButton:{description:"Mute/unmute channel {0}"},drumToggleButton:{description:"Toggle drums on channel {0}"}};var NA={button:{title:"Effects config",description:"Configure the chorus and reverb effects and the custom vibrato"},reverbConfig:{title:"Reverb configuration",description:"Configure the reverb processor",impulseResponse:{title:"Impulse response",description:"Select impulse response for the convolver reverb"}},chorusConfig:{title:"Chorus configuration",description:"Configure the chorus processor",nodesAmount:{title:"Nodes amount",description:"The amount of delay nodes (for each stereo channel) to use"},defaultDelay:{title:"Delay (s)",description:"The delay time for the first node in seconds"},delayVariation:{title:"Delay increment (s)",description:"The amount to increment each delay node after the first one in seconds"},stereoDifference:{title:"Stereo difference (s)",description:"The difference of delays between two channels (added to the left channel and subtracted from the right)"},oscillatorFrequency:{title:"LFO frequency (Hz)",description:"The first delay node's LFO frequency, in Hz. The LFO controls delay time."},frequencyVariation:{title:"LFO increment (Hz)",description:"The amount to increment each LFO's frequency after the first one, in Hz"},oscillatorGain:{title:"LFO gain (s)",description:"How much will LFO alter the delay in delay nodes, in seconds"},apply:{title:"Apply",description:"Apply the selected settings"}}};var UA={button:{title:"Key Modifiers",description:"Modify individual key parameters"},mainTitle:"Key Modification editor",detailedDescription:`This menu allows you to modify a MIDI note on a given channel.
Currently you can modify its velocity and assign a patch (instrument) it uses.
 This is especially useful for drums.`,prompt:"What would you like to do?",selectKey:{prompt:"Press the key you want to modify on the keyboard.",title:"Select key",change:"Change key"},selectedChannel:{title:"Selected channel",description:"The channel to which the key you want to modify belongs"},selectedKey:{title:"Selected key: {0}",description:"You have selected the MIDI note number {0}"},modifyKey:{title:"Modify a key",description:"Modify a single key on a given channel",velocity:{title:"Velocity override",description:"The velocity to use on this key, ignoring the MIDI velocity. Leave at -1 for unchanged"},preset:{title:"Preset override",description:"The preset to use on this key.",unchanged:"Unchanged"},apply:{title:"Apply",description:"Apply the selected modifier"}},removeModification:{title:"Remove modification",description:"Remove modification from a single key on a given channel",remove:{title:"Remove",description:"Remove this key modifier"}},resetModifications:{title:"Reset changes",description:"Clear and reset all key modifications from all channels",confirmation:{title:"Confirm your actions",description:"Are you sure you want to remove ALL modifications?"}}};var qA={toggleButton:{title:"Synthesizer controller",description:"Show the synthesizer controller"},mainVoiceMeter:{title:"Voices: ",description:"The total amount of voices currently playing"},mainVolumeMeter:{title:"Volume: ",description:"The current master volume of the synthesizer"},mainPanMeter:{title:"Pan: ",description:"The current master stereo panning of the synthesizer"},mainTransposeMeter:{title:"Transpose: ",description:"Transposes the synthesizer (in semitones or keys)"},midiPanic:{title:"MIDI Panic",description:"Stops all voices immediately"},systemReset:{title:"System reset",description:"Resets all controllers to their default values"},blackMidiMode:{title:"Black MIDI mode",description:"Toggles the High Performance Mode, simplifying the look and killing the notes faster"},disableCustomVibrato:{title:"Disable custom vibrato",description:"Disables the custom (NRPN) Vibrato permamently. Reload the website to reenable it"},helpButton:{title:"Help",description:"Opens an external website with the usage guide"},interpolation:{description:"Select the synthesizer's interpolation method",linear:"Linear Interpolation",nearestNeighbor:"Nearest neighbor",cubic:"Cubic Interpolation"},holdPedalDown:"Hold pedal is down (Shift)",channelController:GA,effectsConfig:NA,keyModifiers:UA};var _A={previousSong:"Previous song",nextSong:"Next song",loopThis:"Loop this song",playPause:"Play/pause",lyrics:{show:"Show lyrics",title:"Decoded text",noLyrics:"No lyrics available...",otherText:{title:"Other text"},subtitles:{title:"Upload ASS subtitles",description:"Upload your own subtitles in the (.ass) format"}}};var HA={button:{title:"Save Audio",description:"Save the composition to various formats"},formats:{title:"Choose format",formats:{wav:{button:{title:"WAV audio (.wav)",description:"Export the song with modifications as a .wav audio file"},options:{title:"WAV export options",description:"Export the current MIDI file as WAV applying all the modifications made via the synthesizer controller.",confirm:"Export",normalizeVolume:{title:"Normalize volume",description:"Keep the volume at the same level, no matter how loud or quiet the MIDI is. Recommended."},additionalTime:{title:"Additional time (s)",description:"Additional time at the end of the song to allow for the sound to fade. (seconds)"},sampleRate:{title:"Sample rate",description:"Output file sample rate in Hz. Leave as is unless you know what you're doing."},separateChannels:{title:"Separate channels",description:"Save each channel as a separate file. Useful for things like oscilloscope viewers. Note that this disables reverb and chorus.",saving:{title:"Channel files",save:"Save channel {0}"}},loopCount:{title:"Loop count",description:"The amount of times to loop the song"}},exportMessage:{message:"Exporting WAV audio...",estimated:"Remaining:",convertWav:"Converting to wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Export the MIDI file with the controller and instrument changes applied"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Export a SoundFont2 file"},options:{title:"SF export options",confirm:"Export",trim:{title:"Trim",description:"Export the soundfont trimmed to only use instruments and samples that the MIDI file uses"},compress:{title:"Compress",description:"Compress samples with lossy Ogg Vorbis compression if uncompressed. Significantly reduces the file size.If the soundfont was already compressed, it won't be uncompressed even if this option is disabled"},quality:{title:"Compression quality",description:"The quality of compression. Higher is better"}}},dls:{button:{title:"DLS (.dls)",description:"Export the SoundFont as DLS"},warning:{title:"DLS Export warning",message:"DLS export is limited and may produce broken files with large and complex SoundFonts.",details:"More info",confirm:"Export anyways"}},rmidi:{button:{title:"Embedded MIDI (.rmi)",description:"Export the modified MIDI with the embedded trimmed soundfont as a single file. Note that this format isn't widely supported"},progress:{title:"Exporting embeded MIDI...",loading:"Loading Soundfont and MIDI...",modifyingMIDI:"Modifying MIDI...",modifyingSoundfont:"Trimming Soundfont... (this may take a while!)",saving:"Saving RMIDI...",done:"Done!"},options:{title:"RMIDI export options",description:"Embed the current SoundFont + MIDI as RMIDI and apply all the modifications made via the synthesizer controller.",confirm:"Export",compress:{title:"Compress",description:"Compress the Soundfont with lossy Ogg Vorbis compression. Significantly reduces the file size. Recommended."},quality:{title:"Compression quality",description:"The quality of compression. Higher is better."},bankOffset:{title:"Bank offset",description:"The bank offset of the file. Value of 0 is recommended. Only change if you know what you're doing."},adjust:{title:"Adjust MIDI",description:"Adjusts the MIDI file to the SoundFont. Leave this on unless you know what you're doing."}}}},metadata:{songTitle:{title:"Title:",description:"The song's title"},album:{title:"Album:",description:"The song's album"},artist:{title:"Artist:",description:"The song's artist"},albumCover:{title:"Album cover:",description:"The song's album cover"},creationDate:{title:"Created:",description:"The song's creation date"},genre:{title:"Genre:",description:"The song's genre"},comment:{title:"Comment:",description:"The song's comment"},duration:{title:"Duration:",description:"The song's duration"}}}};var PA={localeName:"English",titleMessage:"SpessaSynth: SoundFont2 Javascript Synthesizer",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript Synthesizer Online Demo",synthInit:{genericLoading:"Loading...",loadingSoundfont:"Loading SoundFont...",loadingBundledSoundfont:"Loading bundled SoundFont...",startingSynthesizer:"Starting Synthesizer...",savingSoundfont:"Saving SoundFont for reuse...",noWebAudio:"Your browser does not support Web Audio.",done:"Ready!"},midiUploadButton:"Upload your MIDI files",exportAudio:HA,error:"Error",yes:"Yes",no:"No",demoSoundfontUploadButton:"Upload the soundfont",demoGithubPage:"Project page",demoDownload:{main:"Download",downloadLocal:{title:"Download Local Edition",description:"Download SpessaSynth: Local Edition to use offline on your computer"}},demoSongButton:"Demo Song",credits:"Credits",dropPrompt:"Drop files here...",warnings:{outOfMemory:"Your browser ran out of memory. Consider using Firefox or SF3 soundfont instead. (see console for error).",noMidiSupport:"No MIDI ports detected, this functionality will be disabled.",chromeMobile:"SpessaSynth performs poorly on Chrome Mobile. Consider using Firefox Android instead.",warning:"Warning"},hideTopBar:{title:"Hide top bar",description:"Hide the top (title) bar to provide a more seamless experience"},convertDls:{title:"DLS Conversion",message:"Looks like you've uploaded a DLS file. Do you want to convert it to SF2?"},musicPlayerMode:TA,settings:LA,synthesizerController:qA,sequencerController:_A};var OA={title:"Ustawienia wizualizacji",noteFallingTime:{title:"Czas spadania nut (ms)",description:"Jak szybko spadaj\u0105 z g\xF3ry nuty (w milisekundach)"},noteAfterTriggerTime:{title:"Czas po aktywacji nuty (ms)",description:"Jak d\u0142ugo nuty spadaj\u0105 po aktywacji. Zero oznacza, \u017Ce aktywuj\u0105 si\u0119 na dole."},waveformThickness:{title:"Grubo\u015B\u0107 lini fal (px)",description:"Jak grube s\u0105 linie fal d\u017Awi\u0119kowych"},waveformSampleSize:{title:"Rozmiar pr\xF3bki fali",description:"Jak szczeg\xF3\u0142owe s\u0105 linie fal d\u017Awi\u0119kowcyh (Uwaga: wysokie warto\u015Bci mog\u0105 pogorszy\u0107 wydajno\u015B\u0107) Pami\u0119taj, \u017Ce wysokie warto\u015Bci dodadz\u0105 op\xF3\u017Anienie do d\u017Awi\u0119ku, aby zsynchronizowa\u0107 fale z d\u017Awi\u0119kiem."},waveformAmplifier:{title:"Wzmacniasz fal",description:"Jak '\u017Cywe' s\u0105 fale. Kontroluje ich amplitud\u0119"},toggleWaveformsRendering:{title:"W\u0142\u0105cz rysowanie fal",description:"W\u0142\u0105cz rysowanie fal d\u017Awi\u0119kowych (16-tu kolorowych linii z ty\u0142u)"},toggleNotesRendering:{title:"W\u0142\u0105cz rysowanie nut",description:"W\u0142\u0105cz rysowanie spadaj\u0105cych nut podczas odtwarzania pliku MIDI"},toggleDrawingActiveNotes:{title:"W\u0142\u0105cz rysowanie aktywnych nut",description:"W\u0142\u0105cz efekt pod\u015Bwietlania si\u0119 nut przy aktywacji"},toggleDrawingVisualPitch:{title:"W\u0142\u0105cz wizualizacj\u0119 wysoko\u015Bci tonu",description:"W\u0142\u0105cz przesuwanie nut w lewo lub w prawo gdy wysoko\u015B\u0107 nut jest zmieniana"},toggleStabilizeWaveforms:{title:"W\u0142\u0105cz stabilizacj\u0119 fal",description:"W\u0142\u0105cz stabilizowanie fal d\u017Awi\u0119kowych"}};var VA={title:"Ustawienia pianina",selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142, do kt\xF3rego b\u0119dzie pod\u0142\u0105czone pianino",channelOption:"Kana\u0142 {0}"},keyboardSize:{title:"Rozmiar pianina",description:"Zakres klawiszy widocznych na pianine. Dostosowuje r\xF3wnie\u017C szeroko\u015B\u0107 wizualizowanych nut",full:"128 klawiszy (pe\u0142en zakres)",piano:"88 klawiszy (fortepian)",fiveOctaves:"5 oktaw",twoOctaves:"Dwie oktawy",useSongKeyRange:"U\u017Cyj zakresu utworu"},toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw wbudowanego pianina"},show:{title:"Poka\u017C",description:"Poka\u017C/ukryj pianino"}};var YA={title:"Ustawienia MIDI",midiInput:{title:"Wej\u015Bcie MIDI",description:"Port MIDI, kt\xF3ry b\u0119dzie nas\u0142uchiwany",disabled:"Wy\u0142\u0105czony"},midiOutput:{title:"Wyj\u015Bcie MIDI",description:"Port MIDI, do kt\xF3rego b\u0119dzie grany utw\xF3r",disabled:"U\u017Cyj SpessaSynth"},reminder:{title:"Zauwa\u017C, \u017Ce po pod\u0142\u0105czeniu nowego urz\u0105dzenia MIDI MUSISZ ZRESTARTOWA\u0106 PRZEGL\u0104DARK\u0118, aby pojawi\u0142o si\u0119 ono tutaj.",description:"Zauwa\u017C r\xF3wnie\u017C, \u017Ce Safari nie obs\u0142uguje WebMIDI, wi\u0119c musisz u\u017Cy\u0107 innej przegl\u0105darki, je\u015Bli jeste\u015B na Macu."}};var JA={toggleButton:"Ustawienia",mainTitle:"Ustawienia programu",rendererSettings:OA,keyboardSettings:VA,midiSettings:YA,interfaceSettings:{title:"Ustawienia interfejsu",toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw programu"},selectLanguage:{title:"J\u0119zyk",description:"Zmie\u0144 j\u0119zyk programu",helpTranslate:"Przet\u0142umacz SpessaSynth"},layoutDirection:{title:"Uk\u0142ad",description:"Kierunek uk\u0142adu wizualizacji i pianina",values:{downwards:"W d\xF3\u0142",upwards:"W g\xF3r\u0119",leftToRight:"Od lewej do prawej",rightToLeft:"Od prawej do lewej"}},reminder:{title:"Czy wiedzia\u0142e\u015B, \u017Ce mo\u017Cesz najecha\u0107 na ustawienia, aby uzyska\u0107 wi\u0119cej informacji?",description:"Tak jak ta!"},useFirefox:{firefox:"Przegl\u0105darka firefox",recommended:"jest mocno zalecana dla najlepszej wydajno\u015Bci."}}};var KA={toggleButton:{title:"Prze\u0142\u0105cz tryb odtwarzania muzyki",description:"Prze\u0142\u0105cz uproszczon\u0105 wersj\u0119 interfejsu, ukrywaj\u0105c pianino i wizualizacj\u0119 nut"},currentlyPlaying:"Teraz gramy:",nothingPlaying:"Nic teraz nie gra",nothingPlayingCopyright:"Wgraj jakie\u015B MIDI!"};var zA={voiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Aktualna ilo\u015B\u0107 d\u017Awi\u0119k\xF3w na kanale {0}"},pitchBendMeter:{title:"Wysoko\u015B\u0107: ",description:"Aktualna wysoko\u015B\u0107 tonu na kanale {0}"},panMeter:{title:"Stereo: ",description:"Aktualny efekt stereo na kanale {0} (kliknij prawym aby zablokowa\u0107)"},expressionMeter:{title:"Ekspresja: ",description:"Aktualna ekspresja (g\u0142o\u015Bno\u015Bc) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},volumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Aktualna g\u0142o\u015Bno\u015B\u0107 kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},modulationWheelMeter:{title:"Modulacja: ",description:"Aktualna g\u0142\u0119boko\u015B\u0107 modulacji (zazwyczaj vibrato) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},chorusMeter:{title:"Ch\xF3r: ",description:"Aktualny efekt ch\xF3ru na kanale {0} (kliknij prawym aby zablokowa\u0107)"},reverbMeter:{title:"Pog\u0142os: ",description:"Aktualny efekt pog\u0142osu na kanale {0} (kliknij prawym aby zablokowa\u0107)"},filterMeter:{title:"Filtr: ",description:"Aktualny poziom filtra niskopasmowego na kanale {0} (kliknij prawym aby zablokowa\u0107)"},transposeMeter:{title:"Transpozycja: ",description:"Aktualna transpozycja (przesuni\u0119cie klawiszy) kana\u0142u {0}"},presetSelector:{description:"Zmie\u0144 patch (instrument), kt\xF3rego u\u017Cywa kana\u0142 {0}",selectionPrompt:"Zmie\u0144 instrument kana\u0142u {0}",searchPrompt:"Wyszukaj..."},presetReset:{description:"Odblokuj kana\u0142 {0}, aby program m\xF3g\u0142 go zmienia\u0107"},soloButton:{description:"Solo na kanale {0}"},muteButton:{description:"Wycisz/odcisz kana\u0142 {0}"},drumToggleButton:{description:"Prze\u0142\u0105cz perkusj\u0119 na kanale {0}"}};var WA={button:{title:"Konfiguracja efekt\xF3w",description:"Skonfiguruj efekt pog\u0142osu i ch\xF3ru oraz wy\u0142\u0105cz niestandardowe wibrato"},reverbConfig:{title:"Konfiguracja pog\u0142osu",description:"Skonfiguruj procesor pog\u0142osu",impulseResponse:{title:"Impuls pog\u0142osu",description:"Wybierz impuls kszta\u0142tuj\u0105cy d\u017Awi\u0119k pog\u0142osu"}},chorusConfig:{title:"Konfiguracja ch\xF3ru",description:"Skonfiguruj procesor efektu ch\xF3ru",nodesAmount:{title:"Ilo\u015B\u0107 w\u0119z\u0142\xF3w",description:"Ilo\u015B\u0107 li\u0144 op\xF3\u017Aniaj\u0105cych dla ka\u017Cdego kana\u0142u stereo"},defaultDelay:{title:"Op\xF3\u017Anienie (s)",description:"Op\xF3\u017Anienie pierwszej linii, w sekundach"},delayVariation:{title:"Przyrost op\xF3\u017Anienia (s)",description:"Przyrost op\xF3\u017Anienia ka\u017Cdej kolejnej linii w sekundach"},stereoDifference:{title:"R\xF3\u017Cnica stereo (s)",description:"R\xF3\u017Cnica op\xF3\u017Anie\u0144 w kana\u0142ach stereo (dodane do lewego kana\u0142u i odj\u0119te od prawego sekundy)"},oscillatorFrequency:{title:"Cz\u0119stotliwo\u015B\u0107 LFO (Hz)",description:"Cz\u0119stotliwo\u015B\u0107 pierwszego LFO kontroluj\u0105cego op\xF3\u017Anienie pierwszej linii w Hz."},frequencyVariation:{title:"Przyrost LFO (Hz)",description:"Przyrost cz\u0119stotliwo\u015Bci LFO ka\u017Cdej kolejnej linii w Hz"},oscillatorGain:{title:"Si\u0142a LFO (s)",description:"Jak bardzo LFO b\u0119dzie wp\u0142ywa\u0107 na op\xF3\u017Anienie linii, w sekundach"},apply:{title:"Zastosuj",description:"Zastosuj wybrane ustawienia"}}};var ZA={button:{title:"Modyfikacja klawiszy",description:"Zmodyfikuj indywidualne parametry klawiszy."},mainTitle:"Edytor modyfikacji klawiszy",detailedDescription:`To menu pozwala Ci na modyfikacj\u0119 danych klawiszy na danym kanale.
Aktualnie mo\u017Cesz nadpisa\u0107 si\u0142\u0119 nacisku oraz przypisa\u0107 instrument do danego klawisza.
To jest szczeg\xF3lnie przydatne w przypadku perkusji.`,prompt:"Co chcesz teraz zrobi\u0107?",selectKey:{prompt:"Naci\u015Bnij klawisz kt\xF3ry chcesz zmodyfikowa\u0107.",title:"Wybierz klawisz",change:"Zmie\u0144 klawisz"},selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142 do kt\xF3rego nale\u017Cy klawisz kt\xF3ry chcesz zmodyfikowa\u0107."},selectedKey:{title:"Wybrany klawisz: {0}",description:"Wybra\u0142e\u015B/a\u015B klawisz MIDI o numerze {0}."},modifyKey:{title:"Zmodyfikuj klawisz",description:"Zmodyfikuj pojedynczy klawisz na danym kanale",velocity:{title:"Si\u0142a nacisku",description:"Si\u0142a nacisku dla tego klawisza. Pozostaw -1 dla braku zmian."},preset:{title:"Nadpisanie instrumentu",description:"Instrument dla tego klawisza.",unchanged:"Bez zmian"},apply:{title:"Zastosuj",description:"Zastosuj modyfikacj\u0119"}},removeModification:{title:"Usu\u0144 modyfikacj\u0119",description:"Usu\u0144 modyfikacj\u0119 z klawisza na danym kanale.",remove:{title:"Usu\u0144",description:"Usu\u0144 ten modyfikator."}},resetModifications:{title:"Zresetuj zmiany",description:"Wyczy\u015B\u0107 i usu\u0144 wszystkie zastosowane zmiany",confirmation:{title:"Potwierdzenie",description:"Jeste\u015B pewien, \u017Ce chcesz usun\u0105\u0107 WSZYSTKIE zmiany?"}}};var jA={toggleButton:{title:"Kontroler syntezatora",description:"Poka\u017C kontroler syntezatora"},mainVoiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Ca\u0142kowita ilo\u015B\u0107 aktualnie odtwarzanych d\u017Awi\u0119k\xF3w"},mainVolumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Aktualna g\u0142o\u015Bno\u015B\u0107 syntezatora"},mainPanMeter:{title:"Stereo: ",description:"Aktualna pozycja stereo syntezatora"},mainTransposeMeter:{title:"Transpozycja: ",description:"Transpozycjonuje syntezator (w semitonach)"},midiPanic:{title:"MIDI Panic",description:"Zatrzymuje wszystkie d\u017Awi\u0119ki"},systemReset:{title:"Reset systemu",description:"Resetuje wszystkie kontroleru do ich domy\u015Blnych warto\u015Bci"},blackMidiMode:{title:"Tryb black MIDI",description:"Prze\u0142\u0105cza tryb wysokiej wydajno\u015Bci, upraszczaj\u0105c wygl\u0105d i pogarszaj\u0105c jako\u015B\u0107 d\u017Awi\u0119ku"},disableCustomVibrato:{title:"Wy\u0142\u0105cz niestandardowe vibrato",description:"Wy\u0142\u0105cza niestandardowe (NRPN) vibrato. Wymaga prze\u0142adowania strony aby je ponownie w\u0142\u0105czy\u0107"},helpButton:{title:"Pomoc",description:"Poka\u017C instrukcj\u0119 obs\u0142ugi"},interpolation:{description:"Wybierz metod\u0119 interpolacji",linear:"Interpolacja liniowa",nearestNeighbor:"Najbli\u017Cszy s\u0105siad",cubic:"Interpolacja Sze\u015Bcienna"},holdPedalDown:"Peda\u0142 podtrzymania naci\u015Bni\u0119ty (Shift)",channelController:zA,effectsConfig:WA,keyModifiers:ZA};var XA={previousSong:"Poprzedni utw\xF3r",nextSong:"Nast\u0119pny utw\xF3r",loopThis:"Odtwarzaj w p\u0119tli",playPause:"Odtw\xF3rz/wstrzymaj",lyrics:{show:"Poka\u017C tekst",title:"Odczytany tekst",noLyrics:"Brak dost\u0119pnego tekstu...",otherText:{title:"Inny tekst"},subtitles:{title:"Wgraj napisy ASS",description:"Wgraj swoje w\u0142asne napisy w formacie ASS (.ass)"}}};var $A={button:{title:"Zapisz",description:"Zapisz w r\xF3\u017Cnych formatach"},formats:{title:"Wybierz format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Eksportuj utw\xF3r ze zmianami jako plik audio .wav"},options:{title:"Opcje eksportu audio",description:"Eksportuj MIDI jako WAV, uwzgl\u0119dniaj\u0105c wszystkie modyfikacje wykonane w kontrolerze.",confirm:"Eksportuj",normalizeVolume:{title:"Normalizuj g\u0142o\u015Bno\u015B\u0107",description:"Eksportuj audio z tak\u0105 sam\u0105 g\u0142o\u015Bno\u015Bci\u0105, niezale\u017Cnie od g\u0142o\u015Bno\u015Bci MIDI."},additionalTime:{title:"Dodatkowy czas (s)",description:"Dodatkowy czas na ko\u0144cu utworu aby pozwoli\u0107 na wyciszenie si\u0119 d\u017Awi\u0119ku. (sekundy)"},sampleRate:{title:"Cz\u0119stotliwo\u015B\u0107",description:"Cz\u0119stotliwo\u015B\u0107 pr\xF3bkowania d\u017Awi\u0119ku. Pozostaw bez zmian, chyba \u017Ce wiesz, co robisz."},separateChannels:{title:"Rozdziel kana\u0142y",description:"Zapisz ka\u017Cdy kana\u0142 w osobnym pliuku. Przydatne dla rzeczy jak widok oscyloskopowy. Nale\u017Cy pami\u0119ta\u0107 \u017Ce to wy\u0142\u0105cza ekfet pog\u0142osu i ch\xF3ru",saving:{title:"Pliki audio kana\u0142\xF3w",save:"Zapisz kana\u0142 {0}"}},loopCount:{title:"Ilo\u015B\u0107 p\u0119tli",description:"Ilo\u015B\u0107 razy zap\u0119tlenia utworu"}},exportMessage:{message:"Eksportowanie audio...",estimated:"Pozosta\u0142o:",convertWav:"Konwertowanie do wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Eksportuj plik MIDI wraz ze zmianami instrument\xF3w i kontroler\xF3w"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Eksportuj SoundFont"},options:{title:"Opcje eksportu soundfonta",confirm:"Eksportuj",trim:{title:"Zmniejsz",description:"Zmniejsz SoundFont aby zawiera\u0142 tylko klawisze u\u017Cyte w MIDI"},compress:{title:"Kompresuj",description:"Zkompresuj pr\xF3bki kt\xF3re nie s\u0105 zkompresowane przy u\u017Cyciu stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku.Je\u015Bli soundfont by\u0142 ju\u017C skompresowany, nie zostanie zdekompresowany nawet gdy ta opcja jest wy\u0142\u0105czona"},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"}}},dls:{button:{title:"DLS (.dls)",description:"Eksportuj SoundFonta jako DLS"},warning:{title:"Ostrze\u017Cenie DLS",message:"Eksport do formatu DLS jest ograniczony i mo\u017Ce utworzy\u0107 uszkodzone pliki.",details:"Wi\u0119cej informacji",confirm:"Eksportuj i tak"}},rmidi:{button:{title:"Osadzone MIDI (.rmi)",description:"Eksportuj zmodyfikowane MIDI wraz ze zmniejszonym soundfontem jako jeden plik. Uwaga: ten format nie jest szeroko wspierany"},progress:{title:"Exportowanie osadzonego MIDI...",loading:"Wczytywanie soundfonta i MIDI...",modifyingMIDI:"Modyfikowanie MIDI...",modifyingSoundfont:"Zmniejszanie Soundfonta... (troch\u0119 to zajmie!)",saving:"Zapisywanie RMIDI...",done:"Gotowe!"},options:{title:"Opcje eksportu RMIDI",description:"Osad\u017A SoundFonta + MIDI jako RMIDI i dodaj wszystkie modyfikacje wykonane z kontrolera.",confirm:"Eksportuj",compress:{title:"Kompresuj",description:"Skompresuj osadzonego soundfonta za pomoc\u0105 stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku. Zalecane."},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"},bankOffset:{title:"Przesuni\u0119cie banku",description:"Przesuni\u0119cie banku w pliku. Zalecane 0. Zmie\u0144 tylko je\u015Bli wiesz co robisz."},adjust:{title:"Dostosuj MIDI",description:"Dostosuj MIDI do SoundFonta. Pozostaw w\u0142\u0105czone, chyba \u017Ce wiesz co robisz."}}}},metadata:{songTitle:{title:"Tytu\u0142:",description:"Tytu\u0142 utworu"},album:{title:"Album:",description:"Album utworu"},artist:{title:"Tw\xF3rca:",description:"Tw\xF3rca utworu"},albumCover:{title:"Ok\u0142adka albumu:",description:"Ok\u0142adka albumu utworu"},creationDate:{title:"Stworzono:",description:"Data stworzenia utworu"},genre:{title:"Gatunek:",description:"Gatunek utworu"},comment:{title:"Komentarz:",description:"Komentarz do utworu"},duration:{title:"Czas trwania:",description:"Czas trwania utworu"}}}};var er={localeName:"Polski",titleMessage:"SpessaSynth: JavaScriptowy Syntezator SoundFont2",demoTitleMessage:"SpessaSynth: JavaScriptowy Syntezator SF2/DLS Wersja Demo",synthInit:{genericLoading:"Wczytywanie...",loadingSoundfont:"Wczytywanie SoundFonta...",loadingBundledSoundfont:"Wczytywanie wbudowanego SoundFonta...",startingSynthesizer:"Uruchamianie syntezatora...",savingSoundfont:"Zapisywanie SoundFonta do przegl\u0105darki...",noWebAudio:"Twoja przegl\u0105darka nie wspiera Web Audio.",done:"Gotowe!"},midiUploadButton:"Wgraj Twoje pliki MIDI",midiRenderButton:{title:"Eksportuj audio",description:"Zapisz audio do pliku WAV lub MIDI"},exportAudio:$A,yes:"Tak",no:"Nie",error:"B\u0142\u0105d",demoSoundfontUploadButton:"Wgraj SoundFonta",demoGithubPage:"Strona projektu",demoDownload:{main:"Pobierz",downloadLocal:{title:"Pobierz Edycj\u0119 Lokaln\u0105",description:"Pobierz SpessaSynth: Edycja Lokalna aby u\u017Cywa\u0107 jej na swoim komputerze bez internetu"}},demoSongButton:"Piosenka demo",credits:"Tw\xF3rcy",dropPrompt:"Upu\u015B\u0107 pliki tutaj...",warnings:{outOfMemory:"Twojej przegl\u0105darce sko\u0144czy\u0142a si\u0119 pami\u0119\u0107. Rozwa\u017C u\u017Cycie Firefoxa albo plik\xF3w SF3. (Zobacz b\u0142\u0105d w konsoli)",noMidiSupport:"Nie wykryto MIDI. Korzystanie z port\xF3w MIDI nie b\u0119dzie dost\u0119pne.",chromeMobile:"SpessaSynth dzia\u0142a wolno na Chromie na telefon. Rozwa\u017C u\u017Cycie Firefoxa Android.",warning:"Uwaga"},hideTopBar:{title:"Ukryj g\xF3rny pasek",description:"Ukryj pasek tytu\u0142owy w celu poprawy widoczno\u015Bci na pionowych ekranach"},convertDls:{title:"Konwersja DLS",message:"Wygl\u0105da na to, \u017Ce wgra\u0142e\u015B plik DLS. Czy chcesz przekonwertowa\u0107 go do SF2?"},musicPlayerMode:KA,settings:JA,synthesizerController:jA,sequencerController:XA};var tr={title:"\u30EC\u30F3\u30C0\u30E9\u30FC\u8A2D\u5B9A",noteFallingTime:{title:"\u30CE\u30FC\u30C8\u306E\u843D\u4E0B\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09",description:"\u30CE\u30FC\u30C8\u304C\u843D\u3061\u308B\u901F\u3055\uFF08\u8996\u899A\u7684\u306B\uFF09"},waveformThickness:{title:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09",description:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055"},waveformSampleSize:{title:"\u6CE2\u5F62\u306E\u30B5\u30F3\u30D7\u30EB\u30B5\u30A4\u30BA",description:"\u6CE2\u5F62\u306E\u8A73\u7D30\u5EA6\uFF08\u6CE8\uFF1A\u9AD8\u3044\u5024\u306F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u306B\u5F71\u97FF\u3092\u4E0E\u3048\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\uFF09 \u9AD8\u3044\u5024\u306F\u3001\u6CE2\u5F62\u3092\u30AA\u30FC\u30C7\u30A3\u30AA\u3068\u540C\u671F\u3055\u305B\u308B\u305F\u3081\u306B\u30AA\u30FC\u30C7\u30A3\u30AA\u306B\u9045\u5EF6\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"},waveformAmplifier:{title:"\u6CE2\u5F62\u306E\u5897\u5E45\u5668",description:"\u6CE2\u5F62\u306E\u9BAE\u3084\u304B\u3055"},toggleWaveformsRendering:{title:"\u6CE2\u5F62\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"\u30C1\u30E3\u30F3\u30CD\u30EB\u6CE2\u5F62\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059\uFF08\u30AA\u30FC\u30C7\u30A3\u30AA\u3092\u8868\u793A\u3059\u308B\u30AB\u30E9\u30D5\u30EB\u306A\u7DDA\uFF09"},toggleNotesRendering:{title:"\u30CE\u30FC\u30C8\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u969B\u306E\u843D\u4E0B\u30CE\u30FC\u30C8\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingActiveNotes:{title:"\u30A2\u30AF\u30C6\u30A3\u30D6\u30CE\u30FC\u30C8\u306E\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048",description:"\u30CE\u30FC\u30C8\u304C\u62BC\u3055\u308C\u305F\u3068\u304D\u306B\u5149\u308A\u8F1D\u304F\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingVisualPitch:{title:"\u30D3\u30B8\u30E5\u30A2\u30EB\u30D4\u30C3\u30C1\u63CF\u753B\u306E\u5207\u308A\u66FF\u3048",description:"\u30D4\u30C3\u30C1\u30DB\u30A4\u30FC\u30EB\u304C\u9069\u7528\u3055\u308C\u305F\u3068\u304D\u306B\u30CE\u30FC\u30C8\u304C\u5DE6\u53F3\u306B\u30B9\u30E9\u30A4\u30C9\u3059\u308B\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleStabilizeWaveforms:{title:"\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B",description:"\u30AA\u30FC\u30C7\u30A3\u30AA\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B\u8A2D\u5B9A\u3092\u5207\u308A\u66FF\u3048\u3001\u6CE2\u5F62\u3092\u56FA\u5B9A\u3057\u307E\u3059\u3002"}};var or={title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u8A2D\u5B9A",selectedChannel:{title:"\u9078\u629E\u3055\u308C\u305F\u30C1\u30E3\u30F3\u30CD\u30EB",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u304C\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u9001\u4FE1\u3059\u308B\u30C1\u30E3\u30F3\u30CD\u30EB",channelOption:"\u30C1\u30E3\u30F3\u30CD\u30EB {0}"},keyboardSize:{title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u30B5\u30A4\u30BA",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306B\u8868\u793A\u3055\u308C\u308B\u30AD\u30FC\u306E\u7BC4\u56F2\u3002MIDI\u30CE\u30FC\u30C8\u306E\u30B5\u30A4\u30BA\u306B\u5FDC\u3058\u3066\u8ABF\u6574\u3055\u308C\u307E\u3059",full:"128\u30AD\u30FC\uFF08\u5168\u4F53\uFF09",piano:"88\u30AD\u30FC\uFF08\u30D4\u30A2\u30CE\uFF09",fiveOctaves:"5\u30AA\u30AF\u30BF\u30FC\u30D6",useSongKeyRange:"\u66F2\u306E\u30AD\u30FC\u7BC4\u56F2\u3092\u4F7F\u7528",twoOctaves:"\u30AA\u30AF\u30BF\u30FC\u30D6"},toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},show:{title:"\u8868\u793A",description:"MIDI\u30AD\u30FC\u30DC\u30FC\u30C9\u3092\u8868\u793A/\u975E\u8868\u793A"}};var nr={title:"MIDI\u8A2D\u5B9A",midiInput:{title:"MIDI\u5165\u529B",description:"MIDI\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53D7\u4FE1\u3059\u308B\u30DD\u30FC\u30C8",disabled:"\u7121\u52B9"},midiOutput:{title:"MIDI\u51FA\u529B",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u30DD\u30FC\u30C8",disabled:"SpessaSynth\u3092\u4F7F\u7528"},reminder:{title:"\u65B0\u3057\u3044MIDI\u30C7\u30D0\u30A4\u30B9\u3092\u63A5\u7D9A\u3057\u305F\u5F8C\u3001\u3053\u3053\u306B\u8868\u793A\u3059\u308B\u306B\u306F\u30D6\u30E9\u30A6\u30B6\u3092\u518D\u8D77\u52D5\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",description:"\u307E\u305F\u3001Safari\u306FWebMIDI\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001Mac\u306E\u5834\u5408\u306F\u5225\u306E\u30D6\u30E9\u30A6\u30B6\u3092\u4F7F\u7528\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}};var ir={toggleButton:"\u8A2D\u5B9A",mainTitle:"\u30D7\u30ED\u30B0\u30E9\u30E0\u8A2D\u5B9A",rendererSettings:tr,keyboardSettings:or,midiSettings:nr,interfaceSettings:{title:"\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u8A2D\u5B9A",toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},selectLanguage:{title:"\u8A00\u8A9E",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u8A00\u8A9E\u3092\u5909\u66F4\u3057\u307E\u3059"},layoutDirection:{title:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u65B9\u5411",description:"\u30EC\u30F3\u30C0\u30E9\u30FC\u3068\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u65B9\u5411",values:{downwards:"\u4E0B\u5411\u304D",upwards:"\u4E0A\u5411\u304D",leftToRight:"\u5DE6\u304B\u3089\u53F3",rightToLeft:"\u53F3\u304B\u3089\u5DE6"}},reminder:{title:"\u8A2D\u5B9A\u306B\u30AB\u30FC\u30BD\u30EB\u3092\u5408\u308F\u305B\u308B\u3068\u3001\u8A73\u7D30\u60C5\u5831\u3092\u8868\u793A\u3067\u304D\u308B\u3053\u3068\u3092\u77E5\u3063\u3066\u3044\u307E\u3057\u305F\u304B\uFF1F",description:"\u3053\u306E\u3088\u3046\u306B\uFF01"}}};var sr={toggleButton:{title:"\u97F3\u697D\u30D7\u30EC\u30A4\u30E4\u30FC\u30E2\u30FC\u30C9\u306E\u5207\u308A\u66FF\u3048",description:"\u7C21\u7565\u5316\u3055\u308C\u305FUI\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u5207\u308A\u66FF\u3048\u3001\u30AD\u30FC\u30DC\u30FC\u30C9\u3068\u30CE\u30FC\u30C8\u306E\u8996\u899A\u5316\u3092\u96A0\u3057\u307E\u3059"},currentlyPlaying:"\u518D\u751F\u4E2D:",nothingPlaying:"\u518D\u751F\u3057\u3066\u3044\u308B\u3082\u306E\u306F\u3042\u308A\u307E\u305B\u3093",nothingPlayingCopyright:"MIDI\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u304F\u3060\u3055\u3044\uFF01"};var Ar={voiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u73FE\u5728\u306E\u6570"},pitchBendMeter:{title:"\u30D4\u30C3\u30C1: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30D4\u30C3\u30C1\u30D9\u30F3\u30C9"},panMeter:{title:"\u30D1\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},expressionMeter:{title:"\u30A8\u30AF\u30B9\u30D7\u30EC\u30C3\u30B7\u30E7\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u8868\u73FE\uFF08\u97F3\u91CF\uFF09\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},volumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u97F3\u91CF\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},modulationWheelMeter:{title:"\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\u30DB\u30A4\u30FC\u30EB: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\uFF08\u901A\u5E38\u306F\u30D3\u30D6\u30E9\u30FC\u30C8\uFF09\u306E\u6DF1\u3055\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},chorusMeter:{title:"\u30B3\u30FC\u30E9\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B3\u30FC\u30E9\u30B9\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},reverbMeter:{title:"\u30EA\u30D0\u30FC\u30D6: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30EA\u30D0\u30FC\u30D6\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},filterMeter:{title:"\u30D5\u30A3\u30EB\u30BF\u30FC: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u30ED\u30FC\u30D1\u30B9\u30D5\u30A3\u30EB\u30BF\u30FC\u306E\u30AB\u30C3\u30C8\u30AA\u30D5\u306E\u73FE\u5728\u306E\u30EC\u30D9\u30EB (\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF)"},transposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u79FB\u8ABF\uFF08\u30AD\u30FC\u30B7\u30D5\u30C8\uFF09"},presetSelector:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u304C\u4F7F\u7528\u3059\u308B\u30D1\u30C3\u30C1\uFF08\u697D\u5668\uFF09\u3092\u5909\u66F4",selectionPrompt:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u697D\u5668\u3092\u5909\u66F4\u3059\u308B",searchPrompt:"\u691C\u7D22..."},presetReset:{description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u5909\u66F4\u3092\u8A31\u53EF\u3059\u308B\u305F\u3081\u306B\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u30ED\u30C3\u30AF\u3092\u89E3\u9664"},soloButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u5358\u72EC\u518D\u751F"},muteButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u30DF\u30E5\u30FC\u30C8/\u30DF\u30E5\u30FC\u30C8\u89E3\u9664"},drumToggleButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u30C9\u30E9\u30E0\u3092\u5207\u308A\u66FF\u3048"}};var rr={toggleButton:{title:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u8868\u793A"},mainVoiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u73FE\u5728\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u7DCF\u6570"},mainVolumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30DC\u30EA\u30E5\u30FC\u30E0"},mainPanMeter:{title:"\u30D1\u30F3: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0"},mainTransposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u79FB\u8ABF\u3057\u307E\u3059\uFF08\u30BB\u30DF\u30C8\u30FC\u30F3\u307E\u305F\u306F\u30AD\u30FC\uFF09"},midiPanic:{title:"MIDI\u30D1\u30CB\u30C3\u30AF",description:"\u3059\u3079\u3066\u306E\u30DC\u30A4\u30B9\u3092\u5373\u5EA7\u306B\u505C\u6B62"},systemReset:{title:"\u30B7\u30B9\u30C6\u30E0\u30EA\u30BB\u30C3\u30C8",description:"\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u306B\u30EA\u30BB\u30C3\u30C8"},blackMidiMode:{title:"\u30D6\u30E9\u30C3\u30AFMIDI\u30E2\u30FC\u30C9",description:"\u9AD8\u6027\u80FD\u30E2\u30FC\u30C9\u3092\u5207\u308A\u66FF\u3048\u3001\u898B\u305F\u76EE\u3092\u7C21\u7D20\u5316\u3057\u3001\u30CE\u30FC\u30C8\u3092\u901F\u304F\u6D88\u53BB"},disableCustomVibrato:{title:"\u30AB\u30B9\u30BF\u30E0\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u7121\u52B9\u5316",description:"\u30AB\u30B9\u30BF\u30E0\uFF08NRPN\uFF09\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u6C38\u4E45\u306B\u7121\u52B9\u5316\u3002\u518D\u5EA6\u6709\u52B9\u5316\u3059\u308B\u306B\u306F\u30A6\u30A7\u30D6\u30B5\u30A4\u30C8\u3092\u30EA\u30ED\u30FC\u30C9"},helpButton:{title:"\u30D8\u30EB\u30D7",description:"\u4F7F\u7528\u30AC\u30A4\u30C9\u3092\u8868\u793A\u3057\u307E\u3059"},interpolation:{description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u88DC\u9593\u65B9\u6CD5\u3092\u9078\u629E",linear:"\u30EA\u30CB\u30A2",nearestNeighbor:"\u306A\u3057"},channelController:Ar};var ar={previousSong:"\u524D\u306E\u66F2",nextSong:"\u6B21\u306E\u66F2",loopThis:"\u3053\u306E\u66F2\u3092\u30EB\u30FC\u30D7",playPause:"\u518D\u751F/\u4E00\u6642\u505C\u6B62",lyrics:{show:"\u6B4C\u8A5E\u3092\u8868\u793A",title:"\u30C7\u30B3\u30FC\u30C9\u3055\u308C\u305F\u30C6\u30AD\u30B9\u30C8",noLyrics:"\u6B4C\u8A5E\u304C\u3042\u308A\u307E\u305B\u3093...",otherText:{title:"\u305D\u306E\u4ED6\u306E\u30C6\u30AD\u30B9\u30C8"}}};var lr={button:{title:"\u97F3\u58F0\u3092\u4FDD\u5B58",description:"\u97F3\u58F0\u3092WAV\u3001MIDI\u3001SF2\u3001\u307E\u305F\u306FRMI\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58"},formats:{title:"\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u3092\u9078\u629E",formats:{wav:{button:{title:"WAV\u97F3\u58F0 (.wav)",description:"\u5909\u66F4\u3092\u52A0\u3048\u305F\u66F2\u3092.wav\u30AA\u30FC\u30C7\u30A3\u30AA\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"WAV\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",normalizeVolume:{title:"\u97F3\u91CF\u306E\u6B63\u898F\u5316",description:"MIDI\u306E\u97F3\u91CF\u306B\u304B\u304B\u308F\u3089\u305A\u3001\u97F3\u91CF\u3092\u4E00\u5B9A\u306B\u4FDD\u3061\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},additionalTime:{title:"\u8FFD\u52A0\u6642\u9593\uFF08\u79D2\uFF09",description:"\u97F3\u304C\u30D5\u30A7\u30FC\u30C9\u30A2\u30A6\u30C8\u3059\u308B\u305F\u3081\u306B\u66F2\u306E\u6700\u5F8C\u306B\u8FFD\u52A0\u3059\u308B\u6642\u9593\u3067\u3059\u3002\uFF08\u79D2\uFF09"},separateChannels:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5206\u5272",description:"\u5404\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5225\u3005\u306E\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58\u3057\u307E\u3059\u3002\u30AA\u30B7\u30ED\u30B9\u30B3\u30FC\u30D7\u30D3\u30E5\u30FC\u30A2\u306A\u3069\u306B\u4FBF\u5229\u3067\u3059\u3002\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u4F7F\u7528\u3059\u308B\u3068\u30EA\u30D0\u30FC\u30D6\u3084\u30B3\u30FC\u30E9\u30B9\u304C\u7121\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",saving:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u30D5\u30A1\u30A4\u30EB",save:"\u30C1\u30E3\u30F3\u30CD\u30EB{0}\u3092\u4FDD\u5B58"}},loopCount:{title:"\u30EB\u30FC\u30D7\u56DE\u6570",description:"\u66F2\u3092\u30EB\u30FC\u30D7\u3059\u308B\u56DE\u6570"}},exportMessage:{message:"WAV\u97F3\u58F0\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",estimated:"\u6B8B\u308A\u6642\u9593:",convertWav:"WAV\u306B\u5909\u63DB\u4E2D..."}},midi:{button:{title:"MIDI (.mid)",description:"\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3068\u697D\u5668\u306E\u5909\u66F4\u304C\u9069\u7528\u3055\u308C\u305FMIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"}},soundfont:{button:{title:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8 (.sf2)",description:"SoundFont2\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"SF\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",trim:{title:"\u30C8\u30EA\u30DF\u30F3\u30B0",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3067\u4F7F\u7528\u3055\u308C\u3066\u3044\u308B\u697D\u5668\u3068\u30B5\u30F3\u30D7\u30EB\u3060\u3051\u306B\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},compress:{title:"\u5727\u7E2E",description:"\u672A\u5727\u7E2E\u306E\u5834\u5408\u306F\u3001Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u30B5\u30F3\u30D7\u30EB\u3092\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u304C\u3059\u3067\u306B\u5727\u7E2E\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u7121\u52B9\u306B\u3057\u3066\u3082\u518D\u5727\u7E2E\u3055\u308C\u308B\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059"}}},rmidi:{button:{title:"\u57CB\u3081\u8FBC\u307FMIDI (.rmi)",description:"\u5909\u66F4\u3055\u308C\u305FMIDI\u3068\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u30921\u3064\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u57CB\u3081\u8FBC\u3093\u3067\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059\u3002\u3053\u306E\u5F62\u5F0F\u306F\u5E83\u304F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044"},progress:{title:"\u57CB\u3081\u8FBC\u307E\u308C\u305FMIDI\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u4E2D...",loading:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3068MIDI\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",modifyingMIDI:"MIDI\u3092\u4FEE\u6B63\u4E2D...",modifyingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u4E2D...",saving:"RMIDI\u3092\u4FDD\u5B58\u4E2D...",done:"\u5B8C\u4E86\u3057\u307E\u3057\u305F\uFF01"},options:{title:"RMIDI\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",compress:{title:"\u5727\u7E2E",description:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059\u3002"},bankOffset:{title:"\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8",description:"\u30D5\u30A1\u30A4\u30EB\u306E\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8\u3067\u3059\u30020\u306E\u5024\u304C\u63A8\u5968\u3055\u308C\u307E\u3059\u3002\u5909\u66F4\u306F\u614E\u91CD\u306B\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002"},adjust:{title:"MIDI\u3092\u8ABF\u6574",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306B\u5408\u308F\u305B\u3066\u8ABF\u6574\u3057\u307E\u3059\u3002\u7279\u5225\u306A\u7406\u7531\u304C\u306A\u3044\u9650\u308A\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u30AA\u30F3\u306E\u307E\u307E\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}}}},metadata:{songTitle:{title:"\u30BF\u30A4\u30C8\u30EB:",description:"\u66F2\u306E\u30BF\u30A4\u30C8\u30EB"},album:{title:"\u30A2\u30EB\u30D0\u30E0:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0"},artist:{title:"\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8:",description:"\u66F2\u306E\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8"},albumCover:{title:"\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC"},creationDate:{title:"\u4F5C\u6210\u65E5:",description:"\u66F2\u306E\u4F5C\u6210\u65E5"},genre:{title:"\u30B8\u30E3\u30F3\u30EB:",description:"\u66F2\u306E\u30B8\u30E3\u30F3\u30EB"},comment:{title:"\u30B3\u30E1\u30F3\u30C8:",description:"\u66F2\u306E\u30B3\u30E1\u30F3\u30C8"},duration:{title:"\u9577\u3055:",description:"\u66F2\u306E\u9577\u3055"}}}};var cr={localeName:"\u65E5\u672C\u8A9E",titleMessage:"SpessaSynth: SoundFont2 Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC \u30AA\u30F3\u30E9\u30A4\u30F3\u30C7\u30E2",synthInit:{genericLoading:"\u8AAD\u307F\u8FBC\u307F\u4E2D...",loadingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",loadingBundledSoundfont:"\u30D0\u30F3\u30C9\u30EB\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",startingSynthesizer:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u8D77\u52D5\u3057\u3066\u3044\u307E\u3059...",savingSoundfont:"\u518D\u5229\u7528\u306E\u305F\u3081\u306B\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",noWebAudio:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u306FWeb Audio\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002",done:"\u6E96\u5099\u5B8C\u4E86\uFF01"},midiUploadButton:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",exportAudio:lr,yes:"\u306F\u3044",no:"\u3044\u3044\u3048",error:"\u30A8\u30E9\u30FC",demoSoundfontUploadButton:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",demoGithubPage:"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u30DA\u30FC\u30B8",demoSongButton:"\u30C7\u30E2\u30BD\u30F3\u30B0",credits:"\u30AF\u30EA\u30A8\u30A4\u30BF\u30FC",dropPrompt:"\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7...",warnings:{noMidiSupport:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306FMIDI\u5165\u529B\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3053\u306E\u6A5F\u80FD\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002Chrome\u307E\u305F\u306FFirefox\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",outOfMemory:`\u30D6\u30E9\u30A6\u30B6\u306E\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u307E\u3057\u305F\u3002Firefox\u3084SF3\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306E\u4F7F\u7528\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002

\uFF08\u30A8\u30E9\u30FC\u306B\u3064\u3044\u3066\u306F\u30B3\u30F3\u30BD\u30FC\u30EB\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF09\u3002`,chromeMobile:`SpessaSynth\u306FChrome Mobile\u3067\u306E\u52D5\u4F5C\u304C\u826F\u304F\u3042\u308A\u307E\u305B\u3093\u3002

\u4EE3\u308F\u308A\u306BFirefox Android\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002`,warning:"\u6CE8\u610F"},hideTopBar:{title:"\u30C8\u30C3\u30D7\u30D0\u30FC\u3092\u96A0\u3059",description:"\u30C8\u30C3\u30D7\uFF08\u30BF\u30A4\u30C8\u30EB\uFF09\u30D0\u30FC\u3092\u96A0\u3057\u3066\u3001\u3088\u308A\u30B7\u30FC\u30E0\u30EC\u30B9\u306A\u4F53\u9A13\u3092\u63D0\u4F9B\u3057\u307E\u3059"},convertDls:{title:"DLS\u5909\u63DB",message:"DLS\u30D5\u30A1\u30A4\u30EB\u304C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3055\u308C\u305F\u3088\u3046\u3067\u3059\u3002\u3053\u308C\u3092SF2\u306B\u5909\u63DB\u3057\u307E\u3059\u304B\uFF1F"},musicPlayerMode:sr,settings:ir,synthesizerController:rr,sequencerController:ar};var gr={title:"Configuration de l'affichage",noteFallingTime:{title:"Temps de descente des cascades (millisecondes)",description:"D\xE9finition de la vitesse \xE0 laquelle les notes tombent sur le clavier (visuellement)"},noteAfterTriggerTime:{title:"Dur\xE9e apr\xE8s le d\xE9clenchement d'une note (millisecondes)",description:"Dur\xE9e de la chute des notes apr\xE8s leur d\xE9clenchement. Z\xE9ro signifie qu'elles se d\xE9clenchent en bas"},waveformThickness:{title:"\xC9paisseur du trait des formes d'ondes (pixels)",description:"D\xE9finition de l'\xE9paisseur du trait des formes d'ondes"},waveformSampleSize:{title:"R\xE9solution des formes d'ondes",description:"D\xE9finition du niveau de d\xE9tail des formes d'ondes (note : une valeur \xE9lev\xE9e peut diminuer les performances)"},waveformAmplifier:{title:"Amplification des formes d'ondes",description:"Cette option permet d'obtenir des formes d'ondes \xE9voluant avec plus ou moins d'amplitude"},toggleWaveformsRendering:{title:"Visibilit\xE9 des formes d'ondes",description:"Active ou non le rendu des formes d'ondes (les lignes color\xE9es r\xE9agissant avec l'audio)"},toggleNotesRendering:{title:"Visibilit\xE9 des cascades",description:"Active ou non le rendu des chutes de notes sur le clavier lors de la lecture d'un fichier MIDI"},toggleDrawingActiveNotes:{title:"Visibilit\xE9 des notes actives",description:"Active ou non les lumi\xE8res lorsque les touches sont appuy\xE9es"},toggleDrawingVisualPitch:{title:"Rendu visuel du pitch bend",description:"Active ou non le glissement vers la droite ou vers la gauche des notes lorsque le pitch bend est utilis\xE9"},toggleStabilizeWaveforms:{title:"Stabilisation des formes d'ondes",description:"Active ou non la stabilisation des formes d'ondes comme sur un oscilloscope"}};var dr={title:"Configuration du clavier MIDI",selectedChannel:{title:"S\xE9lection du canal",description:"Le canal sur lequel le clavier envoie des messages",channelOption:"Canal {0}"},keyboardSize:{title:"Taille du clavier",description:"Choix de l'\xE9tendue de notes sur le clavier, ajustant la largeur des touches en cons\xE9quence",full:"128 notes (complet)",piano:"88 notes (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Utiliser l'\xE9tendue de notes du morceau",twoOctaves:"2 octaves"},toggleTheme:{title:"Th\xE8me sombre",description:"Utiliser le th\xE8me sombre du clavier MIDI"},show:{title:"Visibilit\xE9",description:"Montrer / cacher le clavier MIDI"}};var hr={title:"Configuration MIDI",midiInput:{title:"Entr\xE9e MIDI",description:"Le port \xE0 \xE9couter pour recevoir les messages MIDI",disabled:"D\xE9sactiv\xE9"},midiOutput:{title:"Sortie MIDI",description:"Le port utilis\xE9 pour jouer les fichiers MIDI",disabled:"Utilisation de SpessaSynth"},reminder:{title:"Notez que vous devez REDEMARRER VOTRE NAVIGATEUR apr\xE8s avoir connect\xE9 un nouveau p\xE9riph\xE9rique MIDI pour qu'il apparaisse ici.",description:"Notez \xE9galement que Safari ne prend pas en charge WebMIDI, vous devrez donc utiliser un navigateur diff\xE9rent si vous \xEAtes sur Mac."}};var Ir={toggleButton:"Configurations",mainTitle:"Configuration du synth\xE9tiseur",rendererSettings:gr,keyboardSettings:dr,midiSettings:hr,interfaceSettings:{title:"Configuration de l'interface",toggleTheme:{title:"Th\xE8me sombre",description:"Active ou non le th\xE8me sombre pour l'interface"},selectLanguage:{title:"Langue",description:"Change la langue de l'interface",helpTranslate:"Traduire SpessaSynth"},layoutDirection:{title:"Orientation de la mise en page",description:"Orientation du rendu des notes et du clavier",values:{downwards:"Vers le bas",upwards:"Vers le haut",leftToRight:"De gauche \xE0 droite",rightToLeft:"De droite \xE0 gauche"}},reminder:{title:"Saviez-vous que vous pouvez survoler les param\xE8tres pour obtenir plus d'informations ?",description:"Comme ceci !"}}};var ur={toggleButton:{title:"Activer / d\xE9sactiver le mode lecteur de musique",description:"Cette option permet de simplifier l'interface, en masquant le clavier et l'animation des notes"},currentlyPlaying:"Lecture en cours :",nothingPlaying:"Aucune lecture en cours",nothingPlayingCopyright:"Chargez un fichier MIDI !"};var mr={voiceMeter:{title:"Voix : ",description:"Le nombre actuel de voix sur le canal {0}"},pitchBendMeter:{title:"Pitch : ",description:"La valeur actuelle du pitch bend sur le canal {0}"},panMeter:{title:"Balance : ",description:"La valeur actuelle de la panoramique st\xE9r\xE9o sur le canal {0} (clic droit pour verrouiller)"},expressionMeter:{title:"Expression : ",description:"La valeur actuelle de l'expression (force) du canal {0} (clic droit pour verrouiller)"},volumeMeter:{title:"Volume : ",description:"Le volume actuel du canal 0} (clic droit pour verrouiller)"},modulationWheelMeter:{title:"Molette de modulation : ",description:"La valeur actuelle de la quantit\xE9 de modulation (g\xE9n\xE9ralement utilis\xE9e pour le vibrato) du canal {0} (clic droit pour verrouiller)"},chorusMeter:{title:"Chorus : ",description:"Le niveau actuel de l'effet de chorus appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},reverbMeter:{title:"R\xE9verb\xE9ration : ",description:"Le niveau actuel de r\xE9verb\xE9ration appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},filterMeter:{title:"Filtre : ",description:"La hauteur actuelle du filtre passe-bas appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},transposeMeter:{title:"Transposition : ",description:"La transposition actuelle (d\xE9calage de notes) du canal {0}"},presetSelector:{description:"Changer l'instrument que le canal {0} utilise",selectionPrompt:"Changer l'instrument du canal {0}",searchPrompt:"Chercher..."},presetReset:{description:"D\xE9verrouiller le canal {0} pour permettre un changement de programme"},soloButton:{description:"Solo du canal {0}"},muteButton:{description:"Rendre ou non le canal {0} muet"},drumToggleButton:{description:"Activer les percussions sur le canal {0}"}};var pr={button:{title:"Configuration des effets",description:"Configure les effets de chorus et de r\xE9verb\xE9ration ainsi que le vibrato personnalis\xE9"},reverbConfig:{title:"Configuration de la r\xE9verb\xE9ration",description:"Configure l'effet de r\xE9verb\xE9ration",impulseResponse:{title:"Response impulsionnelle",description:"S\xE9lectionnez la r\xE9ponse impulsionnelle pour la r\xE9verb\xE9ration \xE0 convolution"}},chorusConfig:{title:"Configuration du chorus",description:"Configure l'effet de chorus",nodesAmount:{title:"Nombre de lignes de retard",description:"Nombre de lignes de retard (pour chaque canal st\xE9r\xE9o) \xE0 utiliser"},defaultDelay:{title:"D\xE9lai (s)",description:"Dur\xE9e en secondes de la premi\xE8re ligne de retard"},delayVariation:{title:"Augmentation du d\xE9lai (s)",description:"Dur\xE9e \xE0 ajouter en secondes pour chaque ligne de retard apr\xE8s la premi\xE8re"},stereoDifference:{title:"Diff\xE9rence st\xE9r\xE9o (s)",description:"Diff\xE9rence du d\xE9lai entre 2 canaux (ajout\xE9 au canal de gauche et soustrait au canal de droite)"},oscillatorFrequency:{title:"Fr\xE9quence LFO (Hz)",description:"Fr\xE9quence de l'oscillateur (LFO) de la premi\xE8re ligne de retard, en Hz. Le LFO contr\xF4le la dur\xE9e du retard."},frequencyVariation:{title:"Augmentation LFO (Hz)",description:"Quantit\xE9 \xE0 ajouter \xE0 la fr\xE9quence d'oscillation de chaque ligne de retard apr\xE8s la premi\xE8re, en Hz"},oscillatorGain:{title:"Gain LFO (s)",description:"Combien l'oscillateur modifie-t-il le d\xE9lai des lignes de retard, en secondes "},apply:{title:"Valider",description:"Sauvegarde les param\xE8tres des effets"}}};var Cr={button:{title:"Modificateur de notes",description:"Permet de modifier des notes, individuellement"},mainTitle:"\xC9diteur de modifications de notes",detailedDescription:`Ce menu vous permet de modifier une note MIDI d'un canal choisi.
Vous pouvez actuellement modifier sa v\xE9locit\xE9 et assigner un patch (instrument).
Cette fonction est particuli\xE8rement utile pour les percussions.`,prompt:"Que voulez-vous faire ?",selectKey:{prompt:"Appuyez sur la note que vous voulez modifier sur le clavier.",title:"S\xE9lectionner une note",change:"Changer la note"},selectedChannel:{title:"Canal s\xE9lectionn\xE9",description:"Le canal auquel appartient la note \xE0 modifier"},selectedKey:{title:"Note s\xE9lectionn\xE9e : {0}",description:"Vous avez s\xE9lectionn\xE9 la note MIDI {0}"},modifyKey:{title:"Modifier une note",description:"Modifie une note d'un canal choisi",velocity:{title:"Forcer la v\xE9locit\xE9",description:"V\xE9locit\xE9 \xE0 utiliser pour cette note, ignorant la v\xE9locit\xE9 indiqu\xE9e par les signaux MIDI. La valeur -1 d\xE9sactive le for\xE7age"},preset:{title:"Forcer le preset",description:"Preset \xE0 utiliser pour cette note",unchanged:"Inchang\xE9"},apply:{title:"Valider",description:"Sauvegarder les modificateurs"}},removeModification:{title:"Enlever un modificateur",description:"Enlever un modificateur s'appliquant \xE0 une note pour un canal donn\xE9",remove:{title:"Enlever",description:"Enlever ce modificateur de note"}},resetModifications:{title:"Tout r\xE9initialiser",description:"Enlever tous les modificateurs de notes pour tous les canaux",confirmation:{title:"Confirmation",description:"\xCAtes-vous s\xFBr(e) de bien vouloir supprimer tous les modificateurs ?"}}};var Er={toggleButton:{title:"Contr\xF4leurs du synth\xE9tiseur",description:"Affiche les contr\xF4leurs du synth\xE9tiseur"},mainVoiceMeter:{title:"Voix : ",description:"Le nombre total de voix jou\xE9es actuellement"},mainVolumeMeter:{title:"Volume : ",description:"Le volume global actuel du synth\xE9tiseur"},mainPanMeter:{title:"Balance : ",description:"La panoramique globale actuelle du synth\xE9tiseur"},mainTransposeMeter:{title:"Transposition : ",description:"Pour transposer le synth\xE9tiseur (en demi-tons ou notes)"},midiPanic:{title:"Panique MIDI",description:"Stoppe toutes les voix imm\xE9diatement"},systemReset:{title:"R\xE9initialisation du syst\xE8me",description:"R\xE9initialise tous les contr\xF4leurs \xE0 leur valeur par d\xE9faut"},blackMidiMode:{title:"Mode Black MIDI",description:"Active le mode haute performance, en simplifiant l'apparence g\xE9n\xE9rale et en arr\xEAtant les notes plus rapidement"},disableCustomVibrato:{title:"D\xE9sactiver le vibrato personnalis\xE9",description:`D\xE9sactive le vibrato personnalis\xE9 (NRPN) de mani\xE8re permanente
Un rechargement de la page web sera n\xE9cessaire pour le r\xE9activer`},helpButton:{title:"Aide",description:"Ouvre une page web pour afficher un guide"},interpolation:{description:"S\xE9lection de la m\xE9thode d'interpolation du synth\xE9tiseur",linear:"Interpolation lin\xE9aire",nearestNeighbor:"Aucune (valeur la plus proche)",cubic:"Interpolation cubique"},channelController:mr,effectsConfig:pr,keyModifiers:Cr};var fr={previousSong:"Morceau pr\xE9c\xE9dent",nextSong:"Morceau suivant",loopThis:"Lire ce morceau en boucle",playPause:"Lecture / pause",lyrics:{show:"Montrer les paroles",title:"Texte d\xE9cod\xE9",noLyrics:"Paroles indisponibles...",otherText:{title:"Autre texte"},subtitles:{title:"Charger des sous-titres ASS",description:"Chargez vos propres sous-titres au format .ass"}}};var Br={button:{title:"Sauvegarder l'audio",description:"Sauvegarder la composition dans diff\xE9rents formats"},formats:{title:"Choix du format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Exporter le morceau avec les modifications dans un fichier audio .wav"},options:{title:"Options de l'exportation WAV",confirm:"Exporter",normalizeVolume:{title:"Normaliser le volume",description:"Pour garder le volume \xE0 un niveau constant, peu importe comment est jou\xE9 le morceau MIDI (option recommand\xE9e)"},additionalTime:{title:"Dur\xE9e additionnelle (s)",description:"Dur\xE9e additionnelle \xE0 la fin du morceau pour donner le temps au son de disparaitre, en secondes"},sampleRate:{title:"Fr\xE9quence d'\xE9chantillonnage",description:"Fr\xE9quence d'\xE9chantillonnage du fichier de sortie en Hz (ne changez ce param\xE8tre que si vous savez ce que vous faites)"},separateChannels:{title:"S\xE9paration des canaux",description:"Pour sauvegarder chaque canal dans un fichier s\xE9par\xE9, utile par exemple pour des affichage de type oscilloscope (cette option d\xE9sactive la r\xE9verb\xE9ration et l'effet de chorus)",saving:{title:"Fichiers des canaux",save:"Sauvegarder le canal {0}"}},loopCount:{title:"Nombre de r\xE9p\xE9titions",description:"Nombre de fois que le morceau est r\xE9p\xE9t\xE9 apr\xE8s la premi\xE8re lecture"}},exportMessage:{message:"Exportation de l'audio en cours...",estimated:"Temps restant :",convertWav:"Conversion dans le format WAV..."}},midi:{button:{title:"MIDI (.mid)",description:"Exporter le fichier MIDI en incluant les modifications des contr\xF4leurs et des instruments"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exporter une banque de sons au format SoundFont2"},options:{title:"Options de l'exportation SoundFont2",confirm:"Exporter",trim:{title:"All\xE9ger",description:"Exporter la banque de sons avec seulement les instruments et \xE9chantillons utilis\xE9s par le fichier MIDI"},compress:{title:"Compresser",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier
Note : si la banque de sons \xE9tait d\xE9j\xE0 compress\xE9e, cette option ne d\xE9compressera pas m\xEAme en \xE9tant d\xE9sactiv\xE9e`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"}}},dls:{button:{title:"DLS (.dls)",description:"Exporte la soundfont au format DLS"},warning:{title:"Avertissement concernant l'exportation DLS",message:"L'exportation DLS est limit\xE9e et peut produire des fichiers corrompus avec des soundfonts lourdes et complexes.",details:"Plus d'info",confirm:"Continuer l'exportation"}},rmidi:{button:{title:"MIDI embarqu\xE9 (.rmi)",description:`Exporter le fichier MIDI modifi\xE9 avec la banque de sons all\xE9g\xE9e dans un seul fichier
Note : ce format n'est pas support\xE9 par tous les lecteurs MIDI`},progress:{title:"Exportation du fichier MIDI embarqu\xE9...",loading:"Chargement de la banque de sons et du fichier MIDI...",modifyingMIDI:"Modification MIDI...",modifyingSoundfont:"All\xE8gement de la banque de sons...",saving:"Cr\xE9ation du fichier RMIDI...",done:"Termin\xE9 !"},options:{title:"Options de l'exportation RMIDI",confirm:"Exporter",compress:{title:"Compression",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier (option recommand\xE9e)`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"},bankOffset:{title:"D\xE9calage de banque",description:`D\xE9calage des num\xE9ros de banque dans le fichier
(une valeur de 0 est recommand\xE9e sauf cas particulier)`},adjust:{title:"Ajustement MIDI",description:`Ajuste le fichier MIDI \xE0 la banque de sons
(il est conseill\xE9 de laisser cette option activ\xE9e sauf cas particulier)`}}}},metadata:{songTitle:{title:"Titre :",description:"Le titre du morceau"},album:{title:"Album :",description:"Le nom de l'album dans lequel se trouve le morceau"},artist:{title:"Artiste :",description:"Le ou les artiste(s) du morceau"},albumCover:{title:"Pochette d'album :",description:"La pochette de l'album dans lequel se trouve le morceau"},creationDate:{title:"Date de cr\xE9ation :",description:"La date de cr\xE9ation du morceau"},genre:{title:"Genre :",description:"Le genre du morceau"},comment:{title:"Commentaire :",description:"Le commentaire li\xE9 au morceau"},duration:{title:"Dur\xE9e :",description:"La dur\xE9e du morceau"}}}};var Qr={localeName:"Fran\xE7ais",titleMessage:"SpessaSynth : synth\xE9tiseur compatible SF2, \xE9crit en javascript",demoTitleMessage:"SpessaSynth : d\xE9mo en ligne du synth\xE9tiseur compatible SF2/DLS",synthInit:{genericLoading:"Chargement...",loadingSoundfont:"Chargement de la banque de sons...",loadingBundledSoundfont:"Chargement de la banque de sons int\xE9gr\xE9e...",startingSynthesizer:"D\xE9marrage du synth\xE9tiseur...",savingSoundfont:"Sauvegarde de la banque de sons pour une utilisation ult\xE9rieure...",noWebAudio:"Votre navigateur ne supporte pas l'audio par le web.",done:"Pr\xEAt !"},midiUploadButton:"Charger des fichiers MIDI",exportAudio:Br,yes:"Oui",no:"Non",error:"Erreur",demoSoundfontUploadButton:"Charger une banque de sons",demoGithubPage:"Page du projet",demoSongButton:"Morceau d\xE9mo",credits:"Cr\xE9dits",dropPrompt:"Rel\xE2chez les fichiers ici...",warnings:{outOfMemory:"Votre navigateur est \xE0 cours de m\xE9moire. L'usage de Firefox ou des banques de sons au format SF3 est recommand\xE9 (voir la console pour plus de d\xE9tails concernant l'erreur).",noMidiSupport:"Aucun port MIDI d\xE9tect\xE9, cette fonctionnalit\xE9 sera d\xE9sactiv\xE9e.",chromeMobile:"Les performances de SpessaSynth sont basses sur Chrome pour mobile. L'usage de Firefox est recommand\xE9.",warning:"Attention"},hideTopBar:{title:"Masquer la barre sup\xE9rieure",description:"Masquer la barre sup\xE9rieure (titre) pour offrir une meilleure exp\xE9rience"},convertDls:{title:"Conversion DLS",message:"Le fichier charg\xE9 semble \xEAtre au format DLS. Voulez-vous le convertir au format SF2 ?"},musicPlayerMode:ur,settings:Ir,synthesizerController:Er,sequencerController:fr};var yr={title:"Configura\xE7\xF5es do Renderizador",noteFallingTime:{title:"Tempo de queda da nota (milissegundos)",description:"A velocidade com que as notas caem (visualmente)"},waveformThickness:{title:"Espessura da linha da forma de onda (px)",description:"A espessura das linhas da forma de onda"},waveformSampleSize:{title:"Tamanho da amostra da forma de onda",description:"O qu\xE3o detalhadas s\xE3o as formas de onda (Nota: valores altos podem impactar o desempenho) Tamb\xE9m observe que valores altos adicionar\xE3o um atraso ao \xE1udio para sincronizar as formas de onda com o \xE1udio."},waveformAmplifier:{title:"Amplificador de forma de onda",description:"O qu\xE3o vibrantes s\xE3o as formas de onda"},toggleWaveformsRendering:{title:"Habilitar renderiza\xE7\xE3o de formas de onda",description:"Habilitar a renderiza\xE7\xE3o das formas de onda do canal (linhas coloridas mostrando o \xE1udio)"},toggleNotesRendering:{title:"Habilitar renderiza\xE7\xE3o de notas",description:"Habilitar a renderiza\xE7\xE3o das notas caindo ao reproduzir um arquivo MIDI"},toggleDrawingActiveNotes:{title:"Habilitar desenho de notas ativas",description:"Habilitar o destaque e o brilho das notas quando pressionadas"},toggleDrawingVisualPitch:{title:"Habilitar desenho de altura visual",description:"Habilitar o deslizamento das notas para a esquerda ou direita quando o wheel de pitch \xE9 aplicado"},toggleStabilizeWaveforms:{title:"Estabilizar formas de onda",description:"Habilitar o disparo do oscilosc\xF3pio"}};var Sr={title:"Configura\xE7\xF5es do Teclado MIDI",selectedChannel:{title:"Canal selecionado",description:"O canal para o qual o teclado envia mensagens",channelOption:"Canal {0}"},keyboardSize:{title:"Tamanho do teclado",description:"A faixa de teclas mostradas no teclado. Ajusta o tamanho das notas MIDI de acordo",full:"128 teclas (completo)",piano:"88 teclas (piano)",fiveOctaves:"5 oitavas",useSongKeyRange:"Usar a faixa de notas da m\xFAsica",twoOctaves:"Duas oitavas"},toggleTheme:{title:"Usar tema escuro",description:"Usar o tema escuro do teclado MIDI"},show:{title:"Mostrar",description:"Mostrar/ocultar o teclado MIDI"}};var wr={title:"Configura\xE7\xF5es MIDI",midiInput:{title:"Entrada MIDI",description:"A porta para escutar mensagens MIDI",disabled:"Desativado"},midiOutput:{title:"Sa\xEDda MIDI",description:"A porta para reproduzir o arquivo MIDI",disabled:"Usar SpessaSynth"},reminder:{title:"Note que voc\xEA precisa REINICIAR O NAVEGADOR ap\xF3s conectar um novo dispositivo MIDI para que ele apare\xE7a aqui.",description:"Tamb\xE9m note que o Safari n\xE3o suporta WebMIDI, ent\xE3o voc\xEA precisar\xE1 usar um navegador diferente se estiver no Mac."}};var Dr={toggleButton:"Configura\xE7\xF5es",mainTitle:"Configura\xE7\xF5es do Programa",rendererSettings:yr,keyboardSettings:Sr,midiSettings:wr,interfaceSettings:{title:"Configura\xE7\xF5es da Interface",toggleTheme:{title:"Usar tema escuro",description:"Ativar o tema escuro para a interface"},selectLanguage:{title:"Idioma",description:"Alterar o idioma do programa",helpTranslate:"Traduzir o SpessaSynth"},layoutDirection:{title:"Dire\xE7\xE3o do layout",description:"A dire\xE7\xE3o do layout do renderizador e do teclado",values:{downwards:"Para baixo",upwards:"Para cima",leftToRight:"Da esquerda para a direita",rightToLeft:"Da direita para a esquerda"}},reminder:{title:"Voc\xEA sabia que pode passar o mouse sobre as configura\xE7\xF5es para obter mais informa\xE7\xF5es?",description:"Como esta!"}}};var kr={toggleButton:{title:"Trocar o modo do reprodutor de m\xFAsica",description:"Ir para a vers\xE3o simplificada, ocultando o teclado e as visualiza\xE7\xF5es de notas"},currentlyPlaying:"Tocando agora:",nothingPlaying:"Nada est\xE1 tocando",nothingPlayingCopyright:"Envie um MIDI!"};var br={voiceMeter:{title:"Vozes: ",description:"A quantidade atual de vozes tocando no canal {0}"},pitchBendMeter:{title:"Pitch: ",description:"O desvio de pitch atual aplicado ao canal {0}"},panMeter:{title:"Pan: ",description:"O panning est\xE9reo atual aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},expressionMeter:{title:"Express\xE3o: ",description:"A express\xE3o (volume) atual do canal {0} (clique com o bot\xE3o direito para travar)"},volumeMeter:{title:"Volume: ",description:"O volume atual do canal {0} (clique com o bot\xE3o direito para travar)"},modulationWheelMeter:{title:"Roda de modula\xE7\xE3o: ",description:"A profundidade de modula\xE7\xE3o (geralmente vibrato) atual do canal {0} (clique com o bot\xE3o direito para travar)"},chorusMeter:{title:"Chorus: ",description:"O n\xEDvel atual do efeito de chorus aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},reverbMeter:{title:"Reverb: ",description:"O n\xEDvel atual do efeito de reverb aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},filterMeter:{title:"Filtro: ",description:"O n\xEDvel atual do corte do filtro passa-baixo aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},transposeMeter:{title:"Transposi\xE7\xE3o: ",description:"A transposi\xE7\xE3o (mudan\xE7a de tonalidade) atual do canal {0}"},presetSelector:{description:"Mudar o patch (instrumento) que o canal {0} est\xE1 usando",selectionPrompt:"Mudar instrumento para o canal {0}",searchPrompt:"Pesquisar..."},presetReset:{description:"Destravar o canal {0} para permitir altera\xE7\xF5es de programa"},soloButton:{description:"Solo no canal {0}"},muteButton:{description:"Silenciar/desmutar o canal {0}"},drumToggleButton:{description:"Alternar bateria no canal {0}"}};var vr={button:{title:"Configura\xE7\xF5es de Efeitos",description:"Configure os efeitos de chorus e reverb, al\xE9m do vibrato personalizado"},reverbConfig:{title:"Configura\xE7\xE3o do Reverb",description:"Configure o processador de reverb",impulseResponse:{title:"Resposta ao impulso",description:"Selecione a resposta ao impulso para o reverb convolver"}},chorusConfig:{title:"Configura\xE7\xE3o do Chorus",description:"Configure o processador de chorus",nodesAmount:{title:"Quantidade de n\xF3s",description:"A quantidade de n\xF3s de atraso (para cada canal est\xE9reo) a serem usados"},defaultDelay:{title:"Atraso (s)",description:"O tempo de atraso para o primeiro n\xF3 em segundos"},delayVariation:{title:"Incremento de atraso (s)",description:"A quantidade para incrementar cada n\xF3 de atraso ap\xF3s o primeiro em segundos"},stereoDifference:{title:"Diferen\xE7a est\xE9reo (s)",description:"A diferen\xE7a de atrasos entre dois canais (adicionada ao canal esquerdo e subtra\xEDda do direito)"},oscillatorFrequency:{title:"Frequ\xEAncia do LFO (Hz)",description:"A frequ\xEAncia do LFO do primeiro n\xF3 de atraso, em Hz. O LFO controla o tempo de atraso."},frequencyVariation:{title:"Incremento do LFO (Hz)",description:"A quantidade para incrementar a frequ\xEAncia de cada LFO ap\xF3s o primeiro, em Hz"},oscillatorGain:{title:"Ganho do LFO (s)",description:"Quanto o LFO alterar\xE1 o atraso nos n\xF3s de atraso, em segundos"},apply:{title:"Aplicar",description:"Aplicar as configura\xE7\xF5es selecionadas"}}};var xr={toggleButton:{title:"Controlador de Sintetizador",description:"Mostra o controlador do sintetizador"},mainVoiceMeter:{title:"Voices: ",description:"A quantidade total de vozes atualmente tocando"},mainVolumeMeter:{title:"Volume: ",description:"O volume mestre atual do sintetizador"},mainPanMeter:{title:"Pan: ",description:"A panor\xE2mica est\xE9reo mestre atual do sintetizador"},mainTransposeMeter:{title:"Transposi\xE7\xE3o: ",description:"Transp\xF5e o sintetizador (em semitons ou teclas)"},midiPanic:{title:"P\xE2nico MIDI",description:"Para todas as vozes imediatamente"},systemReset:{title:"Reiniciar Sistema",description:"Redefine todos os controladores para seus valores padr\xE3o"},blackMidiMode:{title:"Modo Black MIDI",description:"Ativa o Modo de Alto Desempenho, simplificando a apar\xEAncia e eliminando as notas mais rapidamente"},disableCustomVibrato:{title:"Desativar vibrato personalizado",description:"Desativa permanentemente o vibrato personalizado (NRPN). Recarregue o site para reativ\xE1-lo"},helpButton:{title:"Ajuda",description:"Abre um site externo com o guia de uso"},interpolation:{description:"Selecione o m\xE9todo de interpola\xE7\xE3o do sintetizador",linear:"Interpola\xE7\xE3o Linear",nearestNeighbor:"Vizinho mais pr\xF3ximo",cubic:"Interpola\xE7\xE3o C\xFAbica"},channelController:br,effectsConfig:vr};var Mr={previousSong:"M\xFAsica anterior",nextSong:"Pr\xF3xima m\xFAsica",loopThis:"Repetir esta m\xFAsica",playPause:"Pausar/reproduzir",lyrics:{show:"Mostrar letras",title:"Texto decodificado",noLyrics:"Sem letras dispon\xEDveis...",otherText:{title:"Outro texto"}}};var Fr={button:{title:"Salvar \xC1udio",description:"Salvar a composi\xE7\xE3o em v\xE1rios formatos"},formats:{title:"Escolher formato",formats:{wav:{button:{title:"\xC1udio WAV (.wav)",description:"Exportar a m\xFAsica com modifica\xE7\xF5es como um arquivo de \xE1udio .wav"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o WAV",confirm:"Exportar",normalizeVolume:{title:"Normalizar volume",description:"Mant\xE9m o volume no mesmo n\xEDvel, independentemente de qu\xE3o alto ou baixo est\xE1 o MIDI. Recomendado."},additionalTime:{title:"Tempo adicional (s)",description:"Tempo extra no final da m\xFAsica para o som se dissipar. (em segundos)"},separateChannels:{title:"Separar canais",description:"Salva cada canal como um arquivo separado. \xDAtil para visualizadores de oscilosc\xF3pio. Note que isto desativa reverb e chorus.",saving:{title:"Arquivos de canal",save:"Salvar canal {0}"}},loopCount:{title:"Quantidade de repeti\xE7\xF5es",description:"N\xFAmero de vezes que a m\xFAsica ser\xE1 repetida"}},exportMessage:{message:"Exportando \xE1udio WAV...",estimated:"Restante:",convertWav:"Convertendo para wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Exportar o arquivo MIDI com as altera\xE7\xF5es de controlador e instrumento aplicadas"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exportar um arquivo SoundFont2"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o SF",confirm:"Exportar",trim:{title:"Cortar",description:"Exportar o SoundFont apenas com os instrumentos e amostras utilizados pelo arquivo MIDI"},compress:{title:"Comprimir",description:"Comprimir as amostras com compress\xE3o Ogg Vorbis com perdas, se n\xE3o comprimidas. Reduz bastante o tamanho do arquivo. Se o SoundFont j\xE1 estava comprimido, n\xE3o ser\xE1 descomprimido, mesmo se esta op\xE7\xE3o estiver desativada."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor"}}},rmidi:{button:{title:"MIDI Embutido (.rmi)",description:"Exportar o MIDI modificado com o SoundFont recortado embutido como um \xFAnico arquivo. Observe que este formato n\xE3o \xE9 amplamente suportado."},progress:{title:"Exportando MIDI embutido...",loading:"Carregando SoundFont e MIDI...",modifyingMIDI:"Modificando MIDI...",modifyingSoundfont:"Cortando SoundFont...",saving:"Salvando RMIDI...",done:"Pronto!"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o RMIDI",confirm:"Exportar",compress:{title:"Comprimir",description:"Comprimir o SoundFont com Ogg Vorbis com perdas. Reduz bastante o tamanho do arquivo. Recomendado."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor."},bankOffset:{title:"Deslocamento do banco",description:"O deslocamento do banco do arquivo. Valor 0 \xE9 recomendado. Alterar somente se souber o que est\xE1 fazendo."},adjust:{title:"Ajustar MIDI",description:"Ajusta o arquivo MIDI ao SoundFont. Mantenha ativado, a menos que tenha certeza do que est\xE1 fazendo."}}}},metadata:{songTitle:{title:"T\xEDtulo:",description:"T\xEDtulo da m\xFAsica"},album:{title:"\xC1lbum:",description:"\xC1lbum da m\xFAsica"},artist:{title:"Artista:",description:"Artista da m\xFAsica"},albumCover:{title:"Capa do \xE1lbum:",description:"Capa do \xE1lbum da m\xFAsica"},creationDate:{title:"Criado em:",description:"Data de cria\xE7\xE3o da m\xFAsica"},genre:{title:"G\xEAnero:",description:"G\xEAnero da m\xFAsica"},comment:{title:"Coment\xE1rio:",description:"Coment\xE1rio da m\xFAsica"},duration:{title:"Dura\xE7\xE3o:",description:"Dura\xE7\xE3o da m\xFAsica"}}}};var Rr={localeName:"Portugu\xEAs (Brasil)",titleMessage:"SpessaSynth: Sintetizador JavaScript SoundFont2",demoTitleMessage:"SpessaSynth: Demo Online do Sintetizador JavaScript SF2/DLS",synthInit:{genericLoading:"Carregando...",loadingSoundfont:"Carregando SoundFont...",loadingBundledSoundfont:"Carregando SoundFont embutida...",startingSynthesizer:"Iniciando sintetizador...",savingSoundfont:"Salvando SoundFont para reutiliza\xE7\xE3o...",noWebAudio:"Seu navegador n\xE3o suporta Web Audio.",done:"Pronto!"},midiUploadButton:"Envie seus arquivos MIDI",exportAudio:Fr,yes:"Sim",no:"N\xE3o",demoSoundfontUploadButton:"Envie a SoundFont",demoGithubPage:"P\xE1gina do projeto",demoSongButton:"M\xFAsica de demonstra\xE7\xE3o",credits:"Cr\xE9ditos",dropPrompt:"Solte os arquivos aqui...",warnings:{outOfMemory:"Seu navegador ficou sem mem\xF3ria. Tente usar o Firefox ou uma SoundFont SF3 (veja o console para detalhes).",noMidiSupport:"Nenhuma porta MIDI detectada, essa fun\xE7\xE3o ser\xE1 desativada.",chromeMobile:"SpessaSynth pode ter um desempenho reduzido no Chrome Mobile. Considere usar o Firefox para Android.",warning:"Aten\xE7\xE3o"},hideTopBar:{title:"Ocultar barra superior",description:"Oculte a barra de t\xEDtulo para uma experi\xEAncia mais imersiva"},convertDls:{title:"Convers\xE3o DLS",message:"Parece que voc\xEA enviou um arquivo DLS. Quer converter para SF2?"},musicPlayerMode:kr,settings:Dr,synthesizerController:xr,sequencerController:Mr};var Bi="en",Wt={en:PA,pl:er,ja:cr,fr:Qr,pt:Rr};var ml=.2,pl={2048:.05,4096:.27,8192:.34,16384:.37151927437641724,32768:.48},Te=class{addSequencer;constructor(e,t,n,i,s,A,a,r,l){this.delay=l,this.mode="dark",this.autoKeyRange=!1,this.renderer=i,this.midiKeyboard=s,this.midiDeviceHandler=A,this.synthui=t,this.sequi=n,this.locale=r,this.musicMode=a,this.locales=Wt,this.keyboardSizes={full:{min:0,max:127},piano:{min:21,max:108},"5 octaves":{min:36,max:96},"two octaves":{min:53,max:77}};let u=document.createElement("div");u.style.position="relative",u.classList.add("seamless_button"),u.classList.add("settings_button"),e.appendChild(u);let c=document.createElement("div");c.classList.add("seamless_button"),this.locale.bindObjectProperty(c,"innerText","locale.musicPlayerMode.toggleButton.title"),this.locale.bindObjectProperty(c,"title","locale.musicPlayerMode.toggleButton.description"),e.appendChild(c);let g=document.createElement("div");g.classList.add("seamless_button"),this.locale.bindObjectProperty(g,"innerText","locale.hideTopBar.title"),this.locale.bindObjectProperty(g,"title","locale.hideTopBar.description"),e.appendChild(g);let d=document.getElementsByClassName("show_top_button")[0];d.innerHTML=Ys(20);let p=document.createElement("span");this.locale.bindObjectProperty(p,"innerText","locale.settings.toggleButton"),u.appendChild(p);let E=document.createElement("div");E.innerHTML=Os(24),E.classList.add("gear"),u.appendChild(E),this.mainDiv=document.createElement("div"),this.mainDiv.classList.add("settings_menu"),this.visible=!1,this.animationId=-1,u.onclick=()=>this.setVisibility(!this.visible),e.appendChild(this.mainDiv),c.onclick=this.toggleMusicPlayerMode.bind(this),g.onclick=this.hideTopPart.bind(this),this.hideOnDocClick=!0,this.mainDiv.onclick=()=>{this.hideOnDocClick=!1},document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.setVisibility(!1)}),this.mainDiv.innerHTML=CA,aA(this.mainDiv);for(let w of this.mainDiv.querySelectorAll("*[translate-path]"))this.locale.bindObjectProperty(w,"textContent",w.getAttribute("translate-path"));for(let w of this.mainDiv.querySelectorAll("*[translate-path-title]")){let y=w.getAttribute("translate-path-title");if(this.locale.bindObjectProperty(w,"textContent",y+".title"),this.locale.bindObjectProperty(w,"title",y+".description"),w.tagName==="LABEL"){let S=w.getAttribute("for");if(S){let D=document.getElementById(S);D&&this.locale.bindObjectProperty(D,"title",y+".description")}}}this.getHtmlControls(),document.addEventListener("keydown",w=>{switch(w.key.toLowerCase()){case Ee.settingsShow:this.setVisibility(!this.visible);break;case Ee.synthesizerUIShow:this.setVisibility(!1)}}),window.savedSettings?this._loadSettings().then(()=>{this.createHandlers(i,s,A,n,t)}):this.createHandlers(i,s,A,n,t),this.topPartVisible=!0;let f=!1;window.addEventListener("resize",()=>{let w=window.screen.height,y=window.screen.width,S=window.outerHeight,D=window.outerWidth,k;k=y===D&&w===S,k!==f&&(f=k,k?this.hideTopPart():this.showTopPart())}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement===null?this.showTopPart():this.hideTopPart()})}async toggleMusicPlayerMode(){this.musicMode.visible===!1&&this.hideTopPart(),this.musicMode.setVisibility(!this.musicMode.visible,document.getElementById("keyboard_canvas_wrapper")),this.renderer.renderBool=!this.musicMode.visible}showTopPart(){if(this.topPartVisible===!0)return;this.topPartVisible=!0;let e=document.getElementsByClassName("top_part")[0],t=document.getElementsByClassName("show_top_button")[0];e.style.display="",setTimeout(()=>{e.classList.remove("top_part_hidden")},75),t.classList.remove("shown"),t.style.display="none"}hideTopPart(){if(this.topPartVisible===!1)return;this.topPartVisible=!1;let e=document.getElementsByClassName("top_part")[0];e.classList.add("top_part_hidden"),setTimeout(()=>{e.style.display="none"},200);let t=document.getElementsByClassName("show_top_button")[0];t.style.display="flex",setTimeout(()=>{t.classList.add("shown")},75),t.onclick=this.showTopPart.bind(this)}setVisibility(e){this.animationId&&clearTimeout(this.animationId),e?(this.mainDiv.style.display="block",setTimeout(()=>{document.getElementsByClassName("top_part")[0].classList.add("settings_shown"),this.mainDiv.classList.add("settings_menu_show")},75),this.hideOnDocClick=!1):(document.getElementsByClassName("top_part")[0].classList.remove("settings_shown"),this.mainDiv.classList.remove("settings_menu_show"),this.animationId=setTimeout(()=>{this.mainDiv.style.display="none"},ml*1e3)),this.visible=e}createHandlers(e,t,n,i,s){this._createRendererHandler(e),this._createMidiSettingsHandler(n,i,s),this._createKeyboardHandler(t,s,e),this._createInterfaceSettingsHandler()}getHtmlControls(){this.htmlControls={renderer:{noteTimeSlider:document.getElementById("note_time_slider"),noteAfterTriggerTimeSlider:document.getElementById("note_after_time_slider"),analyserToggler:document.getElementById("analyser_toggler"),noteToggler:document.getElementById("note_toggler"),activeNoteToggler:document.getElementById("active_note_toggler"),visualPitchToggler:document.getElementById("visual_pitch_toggler"),stabilizeWaveformsToggler:document.getElementById("stabilize_waveforms_toggler"),analyserThicknessSlider:document.getElementById("analyser_thickness_slider"),analyserFftSlider:document.getElementById("analyser_fft_slider"),waveMultiplierSlizer:document.getElementById("wave_multiplier_slider")},keyboard:{channelSelector:document.getElementById("channel_selector"),modeSelector:document.getElementById("mode_selector"),sizeSelector:document.getElementById("keyboard_size_selector"),showSelector:document.getElementById("keyboard_show")},midi:{outputSelector:document.getElementById("midi_output_selector"),inputSelector:document.getElementById("midi_input_selector")},interface:{themeSelector:document.getElementById("toggle_mode_button"),languageSelector:document.getElementById("language_selector"),layoutSelector:document.getElementById("layout_selector")}}}setTimeDelay(e){let t;e>=2048?t=pl[e]:t=0,this.delay.delayTime.value=t,this.renderer.timeOffset=t,this.synthui.synth.eventHandler.timeDelay=t}};Te.prototype._toggleDarkMode=DA;Te.prototype._createInterfaceSettingsHandler=QA;Te.prototype._changeLayout=yA;Te.prototype._createRendererHandler=kA;Te.prototype._createMidiSettingsHandler=bA;Te.prototype._createMidiInputHandler=vA;Te.prototype._createMidiOutputHandler=xA;Te.prototype._createKeyboardHandler=pA;Te.prototype._loadSettings=EA;Te.prototype._serializeSettings=BA;Te.prototype._saveSettings=fA;var Lr=.5,Dn=class{constructor(e,t){this.mainDiv=e,this.mainDiv.innerHTML=`
        <div id='player_info_background_image'></div>
        <div class='player_info_wrapper'>
            <div class='player_info_note_icon'>
                ${Vs("100%")}
                <img src='' alt='' style='display: none'>
            </div>
            <div class='player_info_details_wrapper'>
                <p style='font-size: small'><i translate-path='locale.musicPlayerMode.currentlyPlaying'></i></p>
                <h2  id='player_info_title' translate-path='locale.musicPlayerMode.nothingPlaying'></h2>
                
                <div class='player_info_detail_element'>
                    <i id='player_info_detail' translate-path='locale.musicPlayerMode.nothingPlayingCopyright'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.artist'></b><i id='player_info_artist'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.album'></b><i id='player_info_album'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.genre'></b><i id='player_info_genre'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.creationDate'></b><i id='player_info_creation'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.comment'></b><i id='player_info_comment'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.duration'></b><i id='player_info_time'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <pre id='player_info_file_name'></pre>
                </div>
            </div>
        </div>`;for(let n of this.mainDiv.querySelectorAll("*[translate-path]"))t.bindObjectProperty(n,"textContent",n.getAttribute("translate-path"));for(let n of this.mainDiv.querySelectorAll("*[translate-path-title]"))t.bindObjectProperty(n,"textContent",n.getAttribute("translate-path-title")+".title"),t.bindObjectProperty(n,"title",n.getAttribute("translate-path-title")+".description");this.timeoutId=-1,this.visible=!1,this.locale=t}toggleDarkMode(){this.mainDiv.getElementsByClassName("player_info_wrapper")[0].classList.toggle("light_mode")}setTitle(e){document.getElementById("player_info_title").textContent=e}connectSequencer(e){this.seq=e,this.seq.addOnSongChangeEvent(t=>{let n=t.copyright,i=(d,p,E=!0)=>{let f=document.getElementById(d),w=p.trim().split(`
`);if(w.length>1){f.parentElement.classList.remove("hidden"),f.innerHTML="";for(let y of w){let S=document.createElement("span");S.textContent=y,f.appendChild(S),f.appendChild(document.createElement("br"))}f.removeChild(f.lastChild);return}if(p.length>0)if(f.parentElement.classList.remove("hidden"),f.innerHTML="",p.length>30&&E){f.classList.add("marquee");let y=document.createElement("span");y.textContent=p,f.appendChild(y)}else f.textContent=p;else f.parentElement.classList.add("hidden")};i("player_info_detail",n),i("player_info_time",qt(this.seq.duration).time),i("player_info_file_name",t.fileName,!1);let s=(d,p,E,f="")=>this.seq.midiData.RMIDInfo?.[d]===void 0?p:f+E.decode(this.seq.midiData.RMIDInfo?.[d]).replace(/\0$/,""),A=s("IENC","ascii",new TextDecoder),a=new TextDecoder(A);i("player_info_album",s("IPRD","",a)),i("player_info_artist",s("IART","",a)),i("player_info_genre",s("IGNR","",a)),i("player_info_creation",s("ICRD","",a)+s("ICRT","",a,`
`)),i("player_info_comment",s("ICMT","",a));let r=this.mainDiv.getElementsByTagName("svg")[0],l=this.mainDiv.getElementsByTagName("img")[0],u=document.getElementById("player_info_background_image");if(!t.isEmbedded){r.style.display="",l.style.display="none",u.style.setProperty("--bg-image","undefined");return}if(t.RMIDInfo.IPIC===void 0){r.style.display="",l.style.display="none",u.style.setProperty("--bg-image","undefined");return}r.style.display="none",l.style.display="";let c=new Blob([t.RMIDInfo.IPIC.buffer]),g=URL.createObjectURL(c);l.src=g,u.style.setProperty("--bg-image",`url('${g}')`)},"player-js-song-change")}setVisibility(e,t){if(e===this.visible)return;this.visible=e,this.timeoutId&&clearTimeout(this.timeoutId);let n=this.mainDiv;if(e){t.classList.add("out_animation"),this.savedCKWrapperHeight=t.clientHeight;let i=t.clientHeight,s=t.getBoundingClientRect().top;n.style.position="absolute",n.style.top=`${s}px`,n.style.height=`${i}px`,n.style.display="flex",setTimeout(()=>{n.classList.add("player_info_show"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(async()=>{t.style.display="none",n.style.position="",n.style.top="",n.style.height="",document.body.style.overflow=""},Lr*1e3)}else{let i=n.getBoundingClientRect().top;t.style.display="",t.style.position="absolute",t.style.top=`${i}px`,t.style.height=`${this.savedCKWrapperHeight}px`,n.classList.remove("player_info_show"),setTimeout(()=>{t.classList.remove("out_animation"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(()=>{n.style.display="none",t.style.position="",t.style.top="",t.style.height="",document.body.style.overflow=""},Lr*1e3)}}};var kn=class{onLocaleChanged=[];constructor(e){this.locale=Wt[e]||Wt[Bi],this.fallbackLocale=Wt[Bi],this.localeCode=e,this._boundObjectProperties=[]}getLocaleString(e,t=[]){let n=this._resolveLocalePath(e);return t.length>0?this._formatLocale(n,t):n}_applyPropertyInternal(e){if(e.isEdited)return;let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]=t}_validatePropertyIntegrity(e){let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]!==t&&(e.isEdited=!0)}_formatLocale(e,t){return e.replace(/{(\d+)}/g,(n,i)=>typeof t[i]<"u"?t[i]:n)}bindObjectProperty(e,t,n,i=[]){let s={object:e,propertyName:t,localePath:n,formattingArguments:i,isEdited:!1};this._applyPropertyInternal(s),this._boundObjectProperties.push(s)}_resolveLocalePath(e,t=!1){if(!e.startsWith("locale."))throw new Error(`Invalid locale path: ${e} (it should start with "locale.")`);let n=e.split("."),i=t?this.fallbackLocale:this.locale;for(let s=1;s<n.length;s++)if(i[n[s]]!==void 0)i=i[n[s]];else{if(t)throw new Error(`Invalid locale path: ${e}: part "${n[s]}" does not exist. Available paths: ${Object.keys(i).join(", ")}`);return console.warn(`Locale path "${e}" not translated in ${this.locale.localeName} (${this.localeCode}). Using ${this.fallbackLocale.localeName} instead.`),this._resolveLocalePath(e,!0)}if(typeof i!="string")throw new Error(`Invalid locale path: ${e}: value is not a string. Perhaps the path is incomplete`);return i}changeGlobalLocale(e,t=!1){document.documentElement.lang=e;let n=Wt[e];if(!n){Z(`Locale ${e} not found. Not switching.`);return}this.localeCode=e,x("Changing locale to",n.localeName),t||this._boundObjectProperties.forEach(i=>{this._validatePropertyIntegrity(i)}),this.locale=n,this._boundObjectProperties.forEach(i=>{this._applyPropertyInternal(i)}),this.onLocaleChanged.forEach(i=>i())}};function Qi(o,e=!0,t=0,n={},i=void 0){let s=o.getChannelData(t),A=o.getChannelData(t+1),a=s.length,r=2,l=new R(0),u=Object.keys(n).length>0;if(u){let I=new TextEncoder,v=[Jt("INFO"),V("ICMT",I.encode("Created with SpessaSynth"),!0)];n.artist&&v.push(V("IART",I.encode(n.artist),!0)),n.album&&v.push(V("IPRD",I.encode(n.album),!0)),n.genre&&v.push(V("IGNR",I.encode(n.genre),!0)),n.title&&v.push(V("INAM",I.encode(n.title),!0)),l=V("LIST",ue(v))}let c=new R(0),g=i?.end!==void 0&&i?.start!==void 0;if(g){let I=Math.floor(i.start*o.sampleRate),v=Math.floor(i.end*o.sampleRate),F=new R(24);xe(F,0,4),xe(F,0,4),Se(F,"data"),xe(F,0,4),xe(F,0,4),xe(F,I,4);let K=new R(24);xe(K,1,4),xe(K,0,4),Se(K,"data"),xe(K,0,4),xe(K,0,4),xe(K,v,4);let W=ue([new R([2,0,0,0]),F,K]);c=V("cue ",W)}let d=44,p=a*2*r,E=d+p+l.length+c.length-8,f=new Uint8Array(d);f.set([82,73,70,70],0),f.set(new Uint8Array([E&255,E>>8&255,E>>16&255,E>>24&255]),4),f.set([87,65,86,69],8),f.set([102,109,116,32],12),f.set([16,0,0,0],16),f.set([1,0],20),f.set([2,0],22);let w=o.sampleRate;f.set(new Uint8Array([w&255,w>>8&255,w>>16&255,w>>24&255]),24);let y=w*2*r;f.set(new Uint8Array([y&255,y>>8&255,y>>16&255,y>>24&255]),28),f.set([4,0],32),f.set([16,0],34),f.set([100,97,116,97],36),f.set(new Uint8Array([p&255,p>>8&255,p>>16&255,p>>24&255]),40);let S=new Uint8Array(E+8),D=d;S.set(f,0);let k=32767;if(e){let I=s.map((v,F)=>Math.max(Math.abs(v),Math.abs(A[F]))).reduce((v,F)=>Math.max(v,F));k=I>0?32767/I:1}for(let I=0;I<a;I++){let v=Math.min(32767,Math.max(-32768,s[I]*k)),F=Math.min(32767,Math.max(-32768,A[I]*k));S[D++]=v&255,S[D++]=v>>8&255,S[D++]=F&255,S[D++]=F>>8&255}return u&&(S.set(l,D),D+=l.length),g&&S.set(c,D),new Blob([S.buffer],{type:"audio/wav"})}var Tr=1e3;async function Gr(o=!0,e=44100,t=2,n=!1,i={},s=0){if(this.isExporting=!0,!this.seq)throw new Error("No sequencer active");let A=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.message"),a=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.estimated"),r=manager.localeManager.getLocaleString("locale.synthInit.genericLoading"),l=re(A,[{type:"text",textContent:r},{type:"progress"}],9999999,!1),u=await this.seq.getMIDI(),c=so(u.loop.start,u),g=so(u.loop.end,u),d=g-c,p=u.duration+t+d*s,E=e*p,f;try{f=new OfflineAudioContext({numberOfChannels:n?32:2,sampleRate:e,length:E}),await f.audioWorklet.addModule(new URL(this.workletPath,import.meta.url))}catch(G){re("ERROR",[{type:"text",textContent:G}]);return}let w=await this.synth.getSynthesizerSnapshot(),y=this.soundFont,S,k={reverbEnabled:!0,chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:await f.decodeAudioData(this.impulseResponseRaw.slice(0,this.impulseResponseRaw.byteLength))};w.effectsConfig=k;try{S=new no(f.destination,y,!1,{parsedMIDI:u,snapshot:w,oneOutput:n,loopCount:s},k)}catch(G){throw re(this.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),G}let I=l.div.getElementsByTagName("p")[0],v=l.div.getElementsByClassName("notification_progress")[0],F=Tr/1e3,K=S.currentTime,W=p,_=.1,Y=setInterval(()=>{let G=S.currentTime-K;K=S.currentTime;let H=S.currentTime/p;v.style.width=`${H*100}%`;let ne=G/F,we=(1-H)/ne*p;we!==1/0&&(W=_*we+(1-_)*W,I.innerText=`${a} ${qt(W).time}`)},Tr),ee=await f.startRendering();if(v.style.width="100%",clearInterval(Y),I.innerText=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(G=>setTimeout(G,75)),n){let G="locale.exportAudio.formats.formats.wav.options.separateChannels.saving.",H=[],ne=new Set;for(let Ce of u.usedChannelsOnTrack)Ce.forEach(at=>ne.add(at));for(let Ce=0;Ce<16;Ce++){let at=!0;for(let Ne=Ce;Ne<w.channelSnapshots.length;Ne+=16)if(!w.channelSnapshots[Ne].isMuted){at=!1;break}!ne.has(Ce)||at||H.push({type:"button",textContent:this.localeManager.getLocaleString(G+"save",[Ce+1]),onClick:async(Ne,lt)=>{let co=lt.textContent;lt.textContent=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(go=>setTimeout(go,75));let Gi=Qi(ee,!1,Ce*2),Ni=`${Ce+1} - ${w.channelSnapshots[Ce].patchName}.wav`;this.saveBlob(Gi,Ni),lt.classList.add("green_button"),lt.textContent=co}})}let we=re(this.localeManager.getLocaleString(G+"title"),H,99999999,!0,void 0,{display:"flex",flexWrap:"wrap",flexDirection:"row"});we.div.style.width="30rem"}else{let G=so(u.firstNoteOn,u),H=c-G,ne=g-G,we={start:H,end:ne};x(`%cWriting loop points: start %c${H}%c, end:%c${ne}`,B.info,B.recognized,B.info,B.recognized);let Ce=Qi(ee,o,0,i,we);this.saveBlob(Ce,`${this.seqUI.currentSongTitle||"unnamed_song"}.wav`)}ie(l.id),this.isExporting=!1}async function Nr(){if(this.isExporting)return;let o="locale.exportAudio.formats.formats.wav.options.",e="locale.exportAudio.formats.metadata.",t=(l,u,c)=>this.seq.midiData.RMIDInfo?.[l]===void 0?u:c.decode(this.seq.midiData.RMIDInfo?.[l]).replace(/\0$/,""),n=t("IENC","ascii",new TextDecoder),i=new TextDecoder(n),s=t("IPRD","",i),A=t("IART","",i),a=t("IGNR","",i),r=[{type:"text",textContent:this.localeManager.getLocaleString(o+"description"),attributes:{style:"max-width: 30ch; font-style: italic"}},{type:"toggle",translatePathTitle:o+"normalizeVolume",attributes:{"normalize-volume-toggle":"1",checked:"true"}},{type:"input",translatePathTitle:o+"additionalTime",attributes:{value:"2",type:"number","additional-time":"1"}},{type:"input",translatePathTitle:o+"sampleRate",attributes:{value:"44100",type:"number","sample-rate":"1"}},{type:"input",translatePathTitle:o+"loopCount",attributes:{value:"0",type:"number","loop-count":"1"}},{type:"toggle",translatePathTitle:o+"separateChannels",attributes:{"separate-channels-toggle":"1"}},{type:"input",translatePathTitle:e+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:e+"album",attributes:{value:s,name:"album",type:"text"}},{type:"input",translatePathTitle:e+"artist",attributes:{value:A,name:"artist",type:"text"}},{type:"input",translatePathTitle:e+"genre",attributes:{value:a,name:"genre",type:"text"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:l=>{ie(l.id);let u=l.div.querySelector("input[normalize-volume-toggle]").checked,c=l.div.querySelector("input[additional-time]").value,g=l.div.querySelector("input[sample-rate]").value,d=l.div.querySelector("input[loop-count]").value,p=l.div.querySelector("input[separate-channels-toggle]").checked,E=l.div.querySelector("input[name='artist']").value,f=l.div.querySelector("input[name='album']").value,w=l.div.querySelector("input[name='song_title']").value,y=l.div.querySelector("input[name='genre']").value,S={artist:E.length>0?E:void 0,album:f.length>0?f:void 0,title:w.length>0?w:void 0,genre:y.length>0?y:void 0};this._doExportAudioData(u,parseInt(g),parseInt(c),p,S,parseInt(d))}}];re(this.localeManager.getLocaleString(o+"title"),r,9999999,!0,this.localeManager)}async function Ur(){let o=await this.seq.getMIDI();try{Dt(o,await this.synth.getSynthesizerSnapshot())}catch(n){Z("Failed to modify MIDI:",n)}let e=gn(o),t=new Blob([e],{type:"audio/mid"});this.saveBlob(t,`${this.seqUI.currentSongTitle||"unnamed_song"}.mid`)}function qr(o,e){Be("%cSearching for all used programs and keys...",B.info);let t=16+o.midiPortChannelOffsets.reduce((c,g)=>g>c?g:c),n=[];for(let c=0;c<t;c++){let g=c%16===He?128:0;n.push({program:0,bank:g,drums:c%16===He,string:`${g}:0`})}function i(c){let g=e.getPreset(c.bank,c.program);c.bank=g.bank,c.program=g.program,c.string=c.bank+":"+c.program,s[c.string]||(x(`%cDetected a new preset: %c${c.string}`,B.info,B.recognized),s[c.string]=new Set)}let s={},A=Array(o.tracks.length).fill(0),a=o.tracks.length;function r(){let c=0,g=1/0;return o.tracks.forEach((d,p)=>{A[p]>=d.length||d[A[p]].ticks<g&&(c=p,g=d[A[p]].ticks)}),c}let l=o.midiPorts.slice(),u="gs";for(;a>0;){let c=r(),g=o.tracks[c];if(A[c]>=g.length){a--;continue}let d=g[A[c]];if(A[c]++,d.messageStatusByte===N.midiPort){l[c]=d.messageData[0];continue}let p=d.messageStatusByte&240;if(p!==N.noteOn&&p!==N.controllerChange&&p!==N.programChange&&p!==N.systemExclusive)continue;let E=(d.messageStatusByte&15)+o.midiPortChannelOffsets[l[c]]||0,f=n[E];switch(p){case N.programChange:f.program=d.messageData[0],i(f);break;case N.controllerChange:if(d.messageData[0]!==T.bankSelect||u==="gs"&&f.drums)continue;let w=d.messageData[1],y=Math.max(0,w-o.bankOffset);if(u==="xg"){let k=w===120||w===126||w===127;k!==f.drums?(f.drums=k,f.bank=f.drums?128:y,i(f)):f.bank=f.drums?128:y;continue}n[E].bank=y;break;case N.noteOn:if(d.messageData[1]===0)continue;i(f),s[f.string].add(`${d.messageData[0]}-${d.messageData[1]}`);break;case N.systemExclusive:if(d.messageData[0]!==65||d.messageData[2]!==66||d.messageData[3]!==18||d.messageData[4]!==64||(d.messageData[5]&16)===0||d.messageData[6]!==21){d.messageData[0]===67&&d.messageData[2]===76&&d.messageData[5]===126&&d.messageData[6]===0&&(u="xg");continue}let S=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][d.messageData[5]&15]+o.midiPortChannelOffsets[l[c]],D=!!(d.messageData[7]>0&&d.messageData[5]>>4);f=n[S],f.drums=D,f.bank=D?128:0,i(f);break}}for(let c of Object.keys(s))s[c].size===0&&(x(`%cDetected change but no keys for %c${c}`,B.info,B.value),delete s[c]);return X(),s}function lo(o,e){function t(i,s){let A=0;for(let a=0;a<i.instrumentZones.length;a++){let r=i.instrumentZones[a];if(r.isGlobal)continue;let l=r.keyRange,u=r.velRange,c=!1;for(let g of s)if(g.key>=l.min&&g.key<=l.max&&g.velocity>=u.min&&g.velocity<=u.max){c=!0;break}c||(x(`%c${r.sample.sampleName} %cremoved from %c${i.instrumentName}%c. Use count: %c${r.useCount-1}`,B.recognized,B.info,B.recognized,B.info,B.recognized),i.safeDeleteZone(a)&&(A++,a--,x(`%c${r.sample.sampleName} %cdeleted`,B.recognized,B.info)),r.sample.useCount<1&&o.deleteSample(r.sample))}return A}qe("%cTrimming soundfont...",B.info);let n=qr(e,o);Be("%cModifying soundfont...",B.info),x("Detected keys for midi:",n);for(let i=0;i<o.presets.length;i++){let s=o.presets[i],A=s.bank+":"+s.program,a=n[A];if(a===void 0)x(`%cDeleting preset %c${s.presetName}%c and its zones`,B.info,B.recognized,B.info),o.deletePreset(s),i--;else{let r=[...a].map(u=>{let c=u.split("-");return{key:parseInt(c[0]),velocity:parseInt(c[1])}});Be(`%cTrimming %c${s.presetName}`,B.info,B.recognized),x(`Keys for ${s.presetName}:`,r);let l=0;for(let u=0;u<s.presetZones.length;u++){let c=s.presetZones[u];if(c.isGlobal)continue;let g=c.keyRange,d=c.velRange,p=!1;for(let E of r)if(E.key>=g.min&&E.key<=g.max&&E.velocity>=d.min&&E.velocity<=d.max){p=!0;let f=t(c.instrument,r);x(`%cTrimmed off %c${f}%c zones from %c${c.instrument.instrumentName}`,B.info,B.recognized,B.info,B.recognized);break}p||(l++,s.deleteZone(u),c.instrument.useCount<1&&o.deleteInstrument(c.instrument),u--)}x(`%cTrimmed off %c${l}%c zones from %c${s.presetName}`,B.info,B.recognized,B.info,B.recognized),X()}}o.removeUnusedElements(),o.soundFontInfo.ICMT=`NOTE: This soundfont was trimmed by SpessaSynth to only contain presets used in "${e.midiName}"

`+o.soundFontInfo.ICMT,x("%cSoundfont modified!",B.recognized),X(),X()}function _r(){let o=4;for(let n of this.instruments)o+=n.instrumentZones.reduce((i,s)=>(s.generators=s.generators.filter(A=>A.generatorType!==h.sampleID&&A.generatorType!==h.keyRange&&A.generatorType!==h.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:h.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:h.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:h.sampleID,generatorValue:this.samples.indexOf(s.sample)}),s.generators.length*4+i),0);let e=new R(o),t=0;for(let n of this.instruments)for(let i of n.instrumentZones){i.generatorZoneStartIndex=t;for(let s of i.generators)q(e,s.generatorType),q(e,s.generatorValue),t++}return $(e,0),Ie(new ge("igen",e.length,e))}function Hr(o,e,t,n,i){let s=this.samples.map((l,u)=>{t&&l.compressSample(n,i);let c=l.getRawData();return x(`%cEncoded sample %c${u}. ${l.sampleName}%c of %c${this.samples.length}%c. Compressed: %c${l.isCompressed}%c.`,B.info,B.recognized,B.info,B.recognized,B.info,l.isCompressed?B.recognized:B.unrecognized,B.info),c}),A=this.samples.reduce((l,u,c)=>l+s[c].length+46,0),a=new R(A);this.samples.forEach((l,u)=>{let c=s[u],g,d,p=c.length;l.isCompressed?(g=a.currentIndex,d=g+c.length):(g=a.currentIndex/2,d=g+c.length/2,p+=46),o.push(g),a.set(c,a.currentIndex),a.currentIndex+=p,e.push(d)});let r=Ie(new ge("smpl",a.length,a),new R([115,100,116,97]));return Ie(new ge("LIST",r.length,r))}function Pr(o,e){let n=new R(46*(this.samples.length+1));return this.samples.forEach((i,s)=>{Se(n,i.sampleName,20);let A=o[s];$(n,A);let a=e[s];$(n,a);let r=i.sampleLoopStartIndex+A,l=i.sampleLoopEndIndex+A;i.isCompressed&&(r-=A,l-=A),$(n,r),$(n,l),$(n,i.sampleRate),n[n.currentIndex++]=i.samplePitch,n[n.currentIndex++]=i.samplePitchCorrection,q(n,i.sampleLink),q(n,i.sampleType)}),Se(n,"EOS",46),Ie(new ge("shdr",n.length,n))}function Or(){let o=10;for(let n of this.instruments)o+=n.instrumentZones.reduce((i,s)=>s.modulators.length*10+i,0);let e=new R(o),t=0;for(let n of this.instruments)for(let i of n.instrumentZones){i.modulatorZoneStartIndex=t;for(let s of i.modulators)q(e,s.sourceEnum),q(e,s.modulatorDestination),q(e,s.transformAmount),q(e,s.secondarySourceEnum),q(e,s.transformType),t++}return xe(e,0,10),Ie(new ge("imod",e.length,e))}function Vr(){let o=this.instruments.reduce((s,A)=>A.instrumentZones.length*4+s,4),e=new R(o),t=0,n=0,i=0;for(let s of this.instruments){s.instrumentZoneIndex=t;for(let A of s.instrumentZones)A.zoneID=t,q(e,n),q(e,i),n+=A.generators.length,i+=A.modulators.length,t++}return q(e,n),q(e,i),Ie(new ge("ibag",e.length,e))}function Yr(){let o=this.instruments.length*22+22,e=new R(o),t=0,n=0;for(let i of this.instruments)Se(e,i.instrumentName,20),q(e,t),t+=i.instrumentZones.length,i.instrumentID=n,n++;return Se(e,"EOI",20),q(e,t),Ie(new ge("inst",e.length,e))}function Jr(){let o=4;for(let n of this.presets)o+=n.presetZones.reduce((i,s)=>(s.generators=s.generators.filter(A=>A.generatorType!==h.instrument&&A.generatorType!==h.keyRange&&A.generatorType!==h.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:h.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:h.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:h.instrument,generatorValue:this.instruments.indexOf(s.instrument)}),s.generators.length*4+i),0);let e=new R(o),t=0;for(let n of this.presets)for(let i of n.presetZones){i.generatorZoneStartIndex=t;for(let s of i.generators)q(e,s.generatorType),q(e,s.generatorValue);t+=i.generators.length}return q(e,0),q(e,0),Ie(new ge("pgen",e.length,e))}function Kr(){let o=10;for(let n of this.presets)o+=n.presetZones.reduce((i,s)=>s.modulators.length*10+i,0);let e=new R(o),t=0;for(let n of this.presets)for(let i of n.presetZones){i.modulatorZoneStartIndex=t;for(let s of i.modulators)q(e,s.sourceEnum),q(e,s.modulatorDestination),q(e,s.transformAmount),q(e,s.secondarySourceEnum),q(e,s.transformType),t++}return xe(e,0,10),Ie(new ge("pmod",e.length,e))}function zr(){let o=this.presets.reduce((s,A)=>A.presetZones.length*4+s,4),e=new R(o),t=0,n=0,i=0;for(let s of this.presets){s.presetZoneStartIndex=t;for(let A of s.presetZones)A.zoneID=t,q(e,n),q(e,i),n+=A.generators.length,i+=A.modulators.length,t++}return q(e,n),q(e,i),Ie(new ge("pbag",e.length,e))}function Wr(){let o=this.presets.length*38+38,e=new R(o),t=0;for(let n of this.presets)Se(e,n.presetName,20),q(e,n.program),q(e,n.bank),q(e,t),$(e,n.library),$(e,n.genre),$(e,n.morphology),t+=n.presetZones.length;return Se(e,"EOP",20),q(e,0),q(e,0),q(e,t),$(e,0),$(e,0),$(e,0),Ie(new ge("phdr",e.length,e))}var Cl={compress:!1,compressionQuality:.5,compressionFunction:void 0};function Zr(o=Cl){if(o.compress&&typeof o.compressionFunction!="function")throw new TypeError("No compression function supplied but compression enabled.");Be("%cSaving soundfont...",B.info),x(`%cCompression: %c${o?.compress||"false"}%c quality: %c${o?.compressionQuality||"none"}`,B.info,B.recognized,B.info,B.recognized),x("%cWriting INFO...",B.info);let e=[];this.soundFontInfo.ISFT="SpessaSynth",o?.compress&&(this.soundFontInfo.ifil="3.0");for(let[D,k]of Object.entries(this.soundFontInfo))if(D==="ifil"||D==="iver"){let I=parseInt(k.split(".")[0]),v=parseInt(k.split(".")[1]),F=new R(4);q(F,I),q(F,v),e.push(Ie(new ge(D,4,F)))}else if(D==="DMOD")e.push(Ie(new ge(D,k.length,k)));else{let I=new R(k.length);Se(I,k),e.push(Ie(new ge(D,k.length,I)))}let t=ue([new R([73,78,70,79]),...e]),n=Ie(new ge("LIST",t.length,t));x("%cWriting SDTA...",B.info);let i=[],s=[],A=Hr.call(this,i,s,o?.compress,o?.compressionQuality??.5,o.compressionFunction);x("%cWriting PDTA...",B.info),x("%cWriting SHDR...",B.info);let a=Pr.call(this,i,s);x("%cWriting IGEN...",B.info);let r=_r.call(this);x("%cWriting IMOD...",B.info);let l=Or.call(this);x("%cWriting IBAG...",B.info);let u=Vr.call(this);x("%cWriting INST...",B.info);let c=Yr.call(this),g=Jr.call(this);x("%cWriting PMOD...",B.info);let d=Kr.call(this);x("%cWriting PBAG...",B.info);let p=zr.call(this);x("%cWriting PHDR...",B.info);let E=Wr.call(this),f=ue([new R([112,100,116,97]),E,p,d,g,c,u,l,r,a]),w=Ie(new ge("LIST",f.length,f));x("%cWriting the output file...",B.info);let y=ue([new R([115,102,98,107]),n,A,w]),S=Ie(new ge("RIFF",y.length,y));return x(`%cSaved succesfully! Final file size: %c${S.length}`,B.info,B.recognized),X(),S}var Lo=class{velRange={min:-1,max:127};keyRange={min:-1,max:127};isGlobal=!1;generators=[];modulators=[];get hasKeyRange(){return this.keyRange.min!==-1}get hasVelRange(){return this.velRange.min!==-1}getGeneratorValue(e,t){return this.generators.find(n=>n.generatorType===e)?.generatorValue??t}};var Ge=class extends Lo{sample=void 0;useCount=0;deleteZone(){this.useCount--,!this.isGlobal&&this.sample.useCount--}},xt=class extends Lo{instrument=void 0;deleteZone(){this.isGlobal||this.instrument.removeUseCount()}};var El=new Set([h.velRange,h.keyRange,h.instrument,h.exclusiveClass,h.endOper,h.sampleModes,h.startloopAddrsOffset,h.startloopAddrsCoarseOffset,h.endloopAddrsOffset,h.endloopAddrsCoarseOffset,h.startAddrsOffset,h.startAddrsCoarseOffset,h.endAddrOffset,h.endAddrsCoarseOffset,h.initialAttenuation,h.fineTune,h.coarseTune,h.keyNumToVolEnvHold,h.keyNumToVolEnvDecay,h.keyNumToModEnvHold,h.keyNumToModEnvDecay]);function jr(o,e=!0){function t(c,g){c.push(...g.filter(d=>!c.find(p=>p.generatorType===d.generatorType)))}function n(c,g){return{min:Math.max(c.min,g.min),max:Math.min(c.max,g.max)}}function i(c,g){c.push(...g.filter(d=>!c.find(p=>j.isIdentical(d,p))))}let s=[],A=[],a=[],r={min:0,max:127},l={min:0,max:127},u=o.presetZones.find(c=>c.isGlobal);u&&(A.push(...u.generators),a.push(...u.modulators),r=u.keyRange,l=u.velRange);for(let c of o.presetZones){if(c.isGlobal)continue;let g=c.keyRange;c.hasKeyRange||(g=r);let d=c.velRange;c.hasVelRange||(d=l);let p=c.generators.map(I=>new U(I.generatorType,I.generatorValue));t(p,A);let E=[...c.modulators];i(E,a);let f=c.instrument.instrumentZones,w=[],y=[],S={min:0,max:127},D={min:0,max:127},k=f.find(I=>I.isGlobal);k&&(w.push(...k.generators),y.push(...k.modulators),S=k.keyRange,D=k.velRange);for(let I of f){if(I.isGlobal)continue;let v=I.keyRange;I.hasKeyRange||(v=S);let F=I.velRange;if(I.hasVelRange||(F=D),v=n(v,g),F=n(F,d),v.max<v.min||F.max<F.min)continue;let K=I.generators.map(G=>new U(G.generatorType,G.generatorValue));t(K,w);let W=[...I.modulators];i(W,y);let _=[...W];for(let G of E){let H=_.findIndex(ne=>j.isIdentical(G,ne));H!==-1?_[H]=_[H].sumTransform(G):_.push(G)}let Y=K.map(G=>new U(G.generatorType,G.generatorValue));for(let G of p){if(G.generatorType===h.velRange||G.generatorType===h.keyRange||G.generatorType===h.instrument||G.generatorType===h.endOper||G.generatorType===h.sampleModes)continue;let H=K.findIndex(ne=>ne.generatorType===G.generatorType);if(H!==-1){let ne=Y[H].generatorValue+G.generatorValue;Y[H]=new U(G.generatorType,ne)}else{let ne=z[G.generatorType].def+G.generatorValue;Y.push(new U(G.generatorType,ne))}}Y=Y.filter(G=>G.generatorType!==h.sampleID&&G.generatorType!==h.keyRange&&G.generatorType!==h.velRange&&G.generatorType!==h.endOper&&G.generatorType!==h.instrument&&G.generatorValue!==z[G.generatorType].def);let ee=new Ge;ee.keyRange=v,ee.velRange=F,ee.keyRange.min===0&&ee.keyRange.max===127&&(ee.keyRange.min=-1),ee.velRange.min===0&&ee.velRange.max===127&&(ee.velRange.min=-1),ee.isGlobal=!1,ee.sample=I.sample,ee.generators=Y,ee.modulators=_,s.push(ee)}}if(e){let c=new Ge;c.isGlobal=!0;for(let p=0;p<58;p++){if(El.has(p))continue;let E={},f=z[p]?.def||0;E[f]=0;for(let w of s){let y=w.generators.find(k=>k.generatorType===p);if(y){let k=y.generatorValue;E[k]===void 0?E[k]=1:E[k]++}else E[f]++;let S;switch(p){default:continue;case h.decayVolEnv:S=h.keyNumToVolEnvDecay;break;case h.holdVolEnv:S=h.keyNumToVolEnvHold;break;case h.decayModEnv:S=h.keyNumToModEnvDecay;break;case h.holdModEnv:S=h.keyNumToModEnvHold}if(w.generators.find(k=>k.generatorType===S)!==void 0){E={};break}}if(Object.keys(E).length>0){let w=Object.entries(E).reduce((S,D)=>S[1]<D[1]?D:S,[0,0]),y=parseInt(w[0]);y!==f&&c.generators.push(new U(p,y)),s.forEach(S=>{let D=S.generators.findIndex(k=>k.generatorType===p);D!==-1?S.generators[D].generatorValue===y&&S.generators.splice(D,1):y!==f&&S.generators.push(new U(p,f))})}}let d=s.find(p=>!p.isGlobal).modulators.map(p=>j.copy(p));for(let p of d){let E=!0;for(let f of s){if(f.isGlobal||!E)continue;f.modulators.find(y=>j.isIdentical(y,p))||(E=!1)}if(E===!0){c.modulators.push(j.copy(p));for(let f of s){let w=f.modulators.find(y=>j.isIdentical(y,p));w.transformAmount===p.transformAmount&&f.modulators.splice(f.modulators.indexOf(w),1)}}}s.splice(0,0,c)}return s}var Xr=20;function bn(o,e,t,n,i,s,A){let a=A===0?0:1,r=new R(Xr+a*16);$(r,Xr),q(r,e),q(r,t);let l=n*.4,u=Math.floor(l*-65536);$(r,u),$(r,2);let c=s-i,g=0;switch(A){default:case 0:a=0;break;case 1:g=0,a=1;break;case 3:g=1,a=1}return $(r,a),a===1&&($(r,16),$(r,g),$(r,i),$(r,c)),V("wsmp",r)}var O={none:0,modLfo:1,velocity:2,keyNum:3,volEnv:4,modEnv:5,pitchWheel:6,polyPressure:7,channelPressure:8,vibratoLfo:9,modulationWheel:129,volume:135,pan:138,expression:139,chorus:219,reverb:221,pitchWheelRange:256,fineTune:257,coarseTune:258},vn=new j({srcEnum:219,dest:h.reverbEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),xn=new j({srcEnum:221,dest:h.chorusEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),Mn=new j({srcEnum:129,dest:h.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0}),Fn=new j({srcEnum:13,dest:h.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0});var M={none:0,gain:1,reserved:2,pitch:3,pan:4,keyNum:5,chorusSend:128,reverbSend:129,modLfoFreq:260,modLfoDelay:261,vibLfoFreq:276,vibLfoDelay:277,volEnvAttack:518,volEnvDecay:519,volEnvRelease:521,volEnvSustain:522,volEnvDelay:523,volEnvHold:524,modEnvAttack:778,modEnvDecay:779,modEnvRelease:781,modEnvSustain:782,modEnvDelay:783,modEnvHold:784,filterCutoff:1280,filterQ:1281};var To=class{source;control;destination;scale;transform;constructor(e,t,n,i,s){this.source=e,this.control=t,this.destination=n,this.scale=i,this.transform=s}writeArticulator(){let e=new R(12);return q(e,this.source),q(e,this.control),q(e,this.destination),q(e,this.transform),$(e,this.scale<<16),e}};function $r(o,e){if(o)switch(e){default:return;case T.modulationWheel:return O.modulationWheel;case T.mainVolume:return O.volume;case T.pan:return O.pan;case T.expressionController:return O.expression;case T.chorusDepth:return O.chorus;case T.reverbDepth:return O.reverb}else switch(e){default:return;case de.noteOnKeyNum:return O.keyNum;case de.noteOnVelocity:return O.velocity;case de.noController:return O.none;case de.polyPressure:return O.polyPressure;case de.channelPressure:return O.channelPressure;case de.pitchWheel:return O.pitchWheel;case de.pitchWheelRange:return O.pitchWheelRange}}function ea(o,e){switch(o){default:return;case h.initialAttenuation:return{dest:M.gain,amount:-e};case h.fineTune:return M.pitch;case h.pan:return M.pan;case h.keyNum:return M.keyNum;case h.reverbEffectsSend:return M.reverbSend;case h.chorusEffectsSend:return M.chorusSend;case h.freqModLFO:return M.modLfoFreq;case h.delayModLFO:return M.modLfoDelay;case h.delayVibLFO:return M.vibLfoDelay;case h.freqVibLFO:return M.vibLfoFreq;case h.delayVolEnv:return M.volEnvDelay;case h.attackVolEnv:return M.volEnvAttack;case h.holdVolEnv:return M.volEnvHold;case h.decayVolEnv:return M.volEnvDecay;case h.sustainVolEnv:return{dest:M.volEnvSustain,amount:1e3-e};case h.releaseVolEnv:return M.volEnvRelease;case h.delayModEnv:return M.modEnvDelay;case h.attackModEnv:return M.modEnvAttack;case h.holdModEnv:return M.modEnvHold;case h.decayModEnv:return M.modEnvDecay;case h.sustainModEnv:return{dest:M.modEnvSustain,amount:1e3-e};case h.releaseModEnv:return M.modEnvRelease;case h.initialFilterFc:return M.filterCutoff;case h.initialFilterQ:return M.filterQ}}function ta(o,e){switch(o){default:return;case h.modEnvToFilterFc:return{source:O.modEnv,dest:M.filterCutoff,amt:e,isBipolar:!1};case h.modEnvToPitch:return{source:O.modEnv,dest:M.pitch,amt:e,isBipolar:!1};case h.modLfoToFilterFc:return{source:O.modLfo,dest:M.filterCutoff,amt:e,isBipolar:!0};case h.modLfoToVolume:return{source:O.modLfo,dest:M.gain,amt:e,isBipolar:!0};case h.modLfoToPitch:return{source:O.modLfo,dest:M.pitch,amt:e,isBipolar:!0};case h.vibLfoToPitch:return{source:O.vibratoLfo,dest:M.pitch,amt:e,isBipolar:!0};case h.keyNumToVolEnvHold:return{source:O.keyNum,dest:M.volEnvHold,amt:e,isBipolar:!0};case h.keyNumToVolEnvDecay:return{source:O.keyNum,dest:M.volEnvDecay,amt:e,isBipolar:!0};case h.keyNumToModEnvHold:return{source:O.keyNum,dest:M.modEnvHold,amt:e,isBipolar:!0};case h.keyNumToModEnvDecay:return{source:O.keyNum,dest:M.modEnvDecay,amt:e,isBipolar:!0};case h.scaleTuning:return{source:O.keyNum,dest:M.pitch,amt:e*128,isBipolar:!1}}}function oa(o){let e=ea(o.generatorType,o.generatorValue),t=e,n=0,i=o.generatorValue;e?.amount!==void 0&&(i=e.amount,t=e.dest);let s=ta(o.generatorType,o.generatorValue);if(s!==void 0)i=s.amt,t=s.dest,n=s.source;else if(t===void 0){Z(`Invalid generator type: ${o.generatorType}`);return}return new To(n,0,t,i,0)}function na(o){if(o.transformType!==0){Z("Other transform types are not supported.");return}let e=$r(o.sourceUsesCC,o.sourceIndex),t=o.sourceCurveType,n=o.sourcePolarity,i=o.sourceDirection;if(e===void 0){Z(`Invalid source: ${o.sourceIndex}, CC: ${o.sourceUsesCC}`);return}o.modulatorDestination===h.initialAttenuation&&(i=i===1?0:1);let s=$r(o.secSrcUsesCC,o.secSrcIndex),A=o.secSrcCurveType,a=o.secSrcPolarity,r=o.secSrcDirection;if(s===void 0){Z(`Invalid secondary source: ${o.secSrcIndex}, CC: ${o.secSrcUsesCC}`);return}let l=ea(o.modulatorDestination,o.transformAmount),u=l,c=o.transformAmount;l?.dest!==void 0&&(u=l.dest,c=l.amount);let g=ta(o.modulatorDestination,o.transformAmount);if(g!==void 0)c=g.amt,s=e,A=t,a=n,r=i,t=De.linear,n=g.isBipolar?1:0,i=0,e=g.source,u=g.dest;else if(u===void 0){Z(`Invalid destination: ${o.modulatorDestination}`);return}let d=0;return d|=A<<4,d|=a<<8,d|=r<<9,d|=t,d|=n<<14,d|=i<<15,new To(e,s,u,c,d)}var fl=new Set([h.sampleModes,h.initialAttenuation,h.keyRange,h.velRange,h.sampleID,h.fineTune,h.coarseTune,h.startAddrsOffset,h.startAddrsCoarseOffset,h.endAddrOffset,h.endAddrsCoarseOffset,h.startloopAddrsOffset,h.startloopAddrsCoarseOffset,h.endloopAddrsOffset,h.endloopAddrsCoarseOffset,h.overridingRootKey,h.exclusiveClass]);function Rn(o){for(let s=0;s<o.generators.length;s++){let A=o.generators[s];(A.generatorType===h.delayVolEnv||A.generatorType===h.attackVolEnv||A.generatorType===h.holdVolEnv||A.generatorType===h.decayVolEnv||A.generatorType===h.releaseVolEnv||A.generatorType===h.delayModEnv||A.generatorType===h.attackModEnv||A.generatorType===h.holdModEnv||A.generatorType===h.decayModEnv)&&(o.generators[s]=new U(A.generatorType,Math.min(A.generatorValue,6386),!1))}for(let s=0;s<o.generators.length;s++){let A=o.generators[s],a;switch(A.generatorType){default:continue;case h.keyNumToVolEnvDecay:a=h.decayVolEnv;break;case h.keyNumToVolEnvHold:a=h.holdVolEnv;break;case h.keyNumToModEnvDecay:a=h.decayModEnv;break;case h.keyNumToModEnvHold:a=h.holdModEnv}let r=o.generators.find(p=>p.generatorType===a);if(r===void 0)continue;let l=A.generatorValue*-128,u=60/128*l,c=r.generatorValue-u,g=o.generators.indexOf(A),d=o.generators.indexOf(r);o.generators[d]=new U(a,c,!1),o.generators[g]=new U(A.generatorType,l,!1)}let e=o.generators.reduce((s,A)=>{if(fl.has(A.generatorType))return s;let a=oa(A);return a!==void 0?(s.push(a),x("%cSucceeded converting to DLS Articulator!",B.recognized)):Z("Failed converting to DLS Articulator!"),s},[]),t=o.modulators.reduce((s,A)=>{if(j.isIdentical(A,xn,!0)||j.isIdentical(A,vn,!0)||j.isIdentical(A,Mn,!0)||j.isIdentical(A,Fn,!0))return s;let a=na(A);return a!==void 0?(s.push(a),x("%cSucceeded converting to DLS Articulator!",B.recognized)):Z("Failed converting to DLS Articulator!"),s},[]);e.push(...t);let n=new R(8);$(n,8),$(n,e.length);let i=e.map(s=>s.writeArticulator());return V("art2",ue([n,...i]))}function ia(o,e){let t=new R(12);q(t,Math.max(o.keyRange.min,0)),q(t,o.keyRange.max),q(t,Math.max(o.velRange.min,0)),q(t,o.velRange.max),q(t,0);let n=o.getGeneratorValue(h.exclusiveClass,0);q(t,n),q(t,0);let i=V("rgnh",t),s=o.getGeneratorValue(h.overridingRootKey,o.sample.samplePitch);o.getGeneratorValue(h.scaleTuning,e.getGeneratorValue(h.scaleTuning,100))===0&&o.keyRange.max-o.keyRange.min===0&&(s=o.keyRange.min);let a=bn(o.sample,s,o.getGeneratorValue(h.fineTune,0)+o.getGeneratorValue(h.coarseTune,0)*100+o.sample.samplePitchCorrection,o.getGeneratorValue(h.initialAttenuation,0),o.sample.sampleLoopStartIndex+o.getGeneratorValue(h.startloopAddrsOffset,0)+o.getGeneratorValue(h.startloopAddrsCoarseOffset,0)*32768,o.sample.sampleLoopEndIndex+o.getGeneratorValue(h.endloopAddrsOffset,0)+o.getGeneratorValue(h.endloopAddrsCoarseOffset,0)*32768,o.getGeneratorValue(h.sampleModes,0)),r=new R(12);q(r,0),q(r,0),$(r,1),$(r,this.samples.indexOf(o.sample));let l=V("wlnk",r),u=new R(0);if(o.modulators.length+o.generators.length>0){let c=Rn(o);u=V("lar2",c,!1,!0)}return V("rgn2",ue([i,a,l,u]),!1,!0)}function sa(o){Be(`%cWriting %c${o.presetName}%c...`,B.info,B.recognized,B.info);let e=jr(o),t=e.reduce((g,d)=>d.isGlobal?g:g+1,0),n=new R(12);$(n,t);let i=(o.bank&127)<<8;o.bank===128&&(i|=1<<31),$(n,i),$(n,o.program&127);let s=V("insh",n),A=new R(0),a=e.find(g=>g.isGlobal===!0);if(a){let g=Rn(a);A=V("lar2",g,!1,!0)}let r=ue(e.reduce((g,d)=>(d.isGlobal||g.push(ia.apply(this,[d,a])),g),[])),l=V("lrgn",r,!1,!0),u=V("INAM",dt(o.presetName)),c=V("INFO",u,!1,!0);return X(),V("ins ",ue([s,l,A,c]),!1,!0)}function Aa(){let o=ue(this.presets.map(e=>sa.apply(this,[e])));return V("lins",o,!1,!0)}function ra(o){let e=new R(18);q(e,1),q(e,1),$(e,o.sampleRate),$(e,o.sampleRate*2),q(e,2),q(e,16);let t=V("fmt ",e),n=1;o.sampleLoopStartIndex+Math.abs(o.getAudioData().length-o.sampleLoopEndIndex)<2&&(n=0);let i=bn(o,o.samplePitch,o.samplePitchCorrection,0,o.sampleLoopStartIndex,o.sampleLoopEndIndex,n),s=o.getAudioData(),A;if(o.isCompressed){let l=new Int16Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[u]*32768;A=V("data",new R(l.buffer))}else A=V("data",o.getRawData());let a=V("INAM",dt(o.sampleName)),r=V("INFO",a,!1,!0);return x(`%cSaved %c${o.sampleName}%c succesfully!`,B.recognized,B.value,B.recognized),V("wave",ue([t,i,A,r]),!1,!0)}function aa(){let o=0,e=[],t=this.samples.map(n=>{let i=ra(n);return e.push(o),o+=i.length,i});return{data:V("wvpl",ue(t),!1,!0),indexes:e}}function la(){Be("%cSaving DLS...",B.info);let o=new R(4);$(o,this.presets.length);let e=V("colh",o);Be("%cWriting instruments...",B.info);let t=Aa.apply(this);x("%cSuccess!",B.recognized),X(),Be("%cWriting WAVE samples...",B.info);let n=aa.apply(this),i=n.data,s=n.indexes;x("%cSucceeded!",B.recognized),X();let A=new R(8+4*s.length);$(A,8),$(A,s.length);for(let c of s)$(A,c);let a=V("ptbl",A);this.soundFontInfo.ICMT=(this.soundFontInfo.ICMT||"Soundfont")+`
Converted from SF2 to DLS using SpessaSynth`,this.soundFontInfo.ISFT="SpessaSynth";let r=[];for(let[c,g]of Object.entries(this.soundFontInfo))c!=="ICMT"&&c!=="INAM"&&c!=="ICRD"&&c!=="IENG"&&c!=="ICOP"&&c!=="ISFT"&&c!=="ISBJ"||r.push(V(c,dt(g),!0));let l=V("INFO",ue(r),!1,!0),u=new R(e.length+t.length+a.length+i.length+l.length+4);return Se(u,"DLS "),u.set(ue([e,t,a,i,l]),4),x("%cSaved succesfully!",B.recognized),X(),V("RIFF",u)}var Bl=48e3,Mt=class{constructor(e,t,n,i,s,A,a,r){this.sampleName=e,this.sampleRate=t,this.samplePitch=n,this.samplePitchCorrection=i,this.sampleLink=s,this.sampleType=A,this.sampleLoopStartIndex=a,this.sampleLoopEndIndex=r,this.isCompressed=(A&16)>0,this.compressedData=void 0,this.useCount=0,this.sampleData=void 0}getRawData(){let e=new Uint8Array(this.sampleData.length*2);for(let t=0;t<this.sampleData.length;t++){let n=Math.floor(this.sampleData[t]*32768);e[t*2]=n&255,e[t*2+1]=n>>8&255}return e}resampleData(e){let t=this.getAudioData(),n=e/this.sampleRate,i=new Float32Array(Math.floor(t.length*n));for(let s=0;s<i.length;s++)i[s]=t[Math.floor(s*(1/n))];t=i,this.sampleRate=e,this.sampleLoopStartIndex=Math.floor(this.sampleLoopStartIndex*n),this.sampleLoopEndIndex=Math.floor(this.sampleLoopEndIndex*n),this.sampleData=t}compressSample(e,t){if(!this.isCompressed)try{let n=this.getAudioData();(this.sampleRate<8e3||this.sampleRate>96e3)&&(this.resampleData(Bl),n=this.getAudioData()),this.compressedData=t([n],1,this.sampleRate,e),this.sampleType|=16,this.isCompressed=!0}catch{Z(`Failed to compress ${this.sampleName}. Leaving as uncompressed!`),this.isCompressed=!1,this.compressedData=void 0,this.sampleType&=239}}getAudioData(){return this.sampleData}};var Ft=class{constructor(){this.instrumentName="",this.instrumentZones=[],this._useCount=0}get useCount(){return this._useCount}addUseCount(){this._useCount++,this.instrumentZones.forEach(e=>e.useCount++)}removeUseCount(){this._useCount--;for(let e=0;e<this.instrumentZones.length;e++)this.safeDeleteZone(e)&&e--}deleteInstrument(){this.instrumentZones.forEach(e=>e.deleteZone()),this.instrumentZones.length=0}safeDeleteZone(e){return this.instrumentZones[e].useCount--,this.instrumentZones[e].useCount<1?(this.deleteZone(e),!0):!1}deleteZone(e){this.instrumentZones[e].deleteZone(),this.instrumentZones.splice(e,1)}};var Rt=class{constructor(e){this.presetName="",this.program=0,this.bank=0,this.presetZones=[],this.sampleIDOffset=0,this.foundSamplesAndGenerators=[];for(let t=0;t<128;t++)this.foundSamplesAndGenerators[t]=[];this.library=0,this.genre=0,this.morphology=0,this.defaultModulators=e}deletePreset(){this.presetZones.forEach(e=>e.deleteZone()),this.presetZones.length=0}deleteZone(e){this.presetZones[e].deleteZone(),this.presetZones.splice(e,1)}preload(e,t){for(let n=e;n<t+1;n++)for(let i=0;i<128;i++)this.getSamplesAndGenerators(n,i).forEach(s=>{s.sample.isSampleLoaded||s.sample.getAudioData()})}preloadSpecific(e,t){this.getSamplesAndGenerators(e,t).forEach(n=>{n.sample.isSampleLoaded||n.sample.getAudioData()})}getSamplesAndGenerators(e,t){let n=this.foundSamplesAndGenerators[e][t];if(n)return n;if(this.presetZones.length<1)return[];function i(d,p){return p>=d.min&&p<=d.max}function s(d,p){d.push(...p.filter(E=>!d.find(f=>f.generatorType===E.generatorType)))}function A(d,p){d.push(...p.filter(E=>!d.find(f=>j.isIdentical(E,f))))}let a=[],r=this.presetZones[0].isGlobal?[...this.presetZones[0].generators]:[],l=this.presetZones[0].isGlobal?[...this.presetZones[0].modulators]:[],u=this.presetZones[0].isGlobal?this.presetZones[0].keyRange:{min:0,max:127},c=this.presetZones[0].isGlobal?this.presetZones[0].velRange:{min:0,max:127};return this.presetZones.filter(d=>i(d.hasKeyRange?d.keyRange:u,e)&&i(d.hasVelRange?d.velRange:c,t)&&!d.isGlobal).forEach(d=>{if(d.instrument.instrumentZones.length<1)return;let p=d.generators,E=d.modulators,f=d.instrument.instrumentZones[0],w=f.isGlobal?[...f.generators]:[],y=f.isGlobal?[...f.modulators]:[],S=f.isGlobal?f.keyRange:{min:0,max:127},D=f.isGlobal?f.velRange:{min:0,max:127};d.instrument.instrumentZones.filter(I=>i(I.hasKeyRange?I.keyRange:S,e)&&i(I.hasVelRange?I.velRange:D,t)&&!I.isGlobal).forEach(I=>{let v=[...I.generators],F=[...I.modulators];s(p,r),s(v,w),A(E,l),A(F,y),A(F,this.defaultModulators);let K=[...F];for(let W=0;W<E.length;W++){let _=E[W],Y=K.findIndex(ee=>j.isIdentical(_,ee));Y!==-1?K[Y]=K[Y].sumTransform(_):K.push(_)}a.push({instrumentGenerators:v,presetGenerators:p,modulators:K,sample:I.sample,sampleID:I.generators.find(W=>W.generatorType===h.sampleID).generatorValue})})}),this.foundSamplesAndGenerators[e][t]=a,a}};var Lt=class o{constructor(e=void 0){this.soundFontInfo={},this.presets=[],this.samples=[],this.instruments=[],this.defaultModulators=zo.map(t=>j.copy(t)),e?.presets&&(this.presets.push(...e.presets),this.soundFontInfo=e.info)}static mergeSoundfonts(...e){let t=e.shift(),n=t.presets;for(;e.length;)e.shift().presets.forEach(s=>{n.find(A=>A.bank===s.bank&&A.program===s.program)===void 0&&n.push(s)});return new o({presets:n,info:t.soundFontInfo})}static getDummySoundfontFile(){let e=new o,t=new Mt("Saw",44100,65,20,0,0,0,127);t.sampleData=new Float32Array(128);for(let l=0;l<128;l++)t.sampleData[l]=l/128*2-1;e.samples.push(t);let n=new Ge;n.isGlobal=!0,n.generators.push(new U(h.initialAttenuation,375)),n.generators.push(new U(h.releaseVolEnv,-1e3)),n.generators.push(new U(h.sampleModes,1));let i=new Ge;i.sample=t;let s=new Ge;s.sample=t,s.generators.push(new U(h.fineTune,-9));let A=new Ft;A.instrumentName="Saw Wave",A.instrumentZones.push(n),A.instrumentZones.push(i),A.instrumentZones.push(s),e.instruments.push(A);let a=new xt;a.instrument=A;let r=new Rt(e.defaultModulators);return r.presetName="Saw Wave",r.presetZones.push(a),e.presets.push(r),e.soundFontInfo.ifil="2.1",e.soundFontInfo.isng="EMU8000",e.soundFontInfo.INAM="Dummy",e.write().buffer}removeUnusedElements(){this.instruments.forEach(e=>{e.useCount<1&&e.instrumentZones.forEach(t=>{t.isGlobal||t.sample.useCount--})}),this.instruments=this.instruments.filter(e=>e.useCount>0),this.samples=this.samples.filter(e=>e.useCount>0)}deleteInstrument(e){if(e.useCount>0)throw new Error(`Cannot delete an instrument that has ${e.useCount} usages.`);this.instruments.splice(this.instruments.indexOf(e),1),e.deleteInstrument(),this.removeUnusedElements()}deletePreset(e){e.deletePreset(),this.presets.splice(this.presets.indexOf(e),1),this.removeUnusedElements()}deleteSample(e){if(e.useCount>0)throw new Error(`Cannot delete sample that has ${e.useCount} usages.`);this.samples.splice(this.samples.indexOf(e),1),this.removeUnusedElements()}setSampleIDOffset(e){this.presets.forEach(t=>t.sampleIDOffset=e)}getPresetNoFallback(e,t,n=!1){let i=this.presets.find(s=>s.bank===e&&s.program===t);if(i)return i;if(n!==!1)return e===128?this.presets.find(s=>s.bank===128):this.presets.find(s=>s.program===t)}getPreset(e,t){let n=this.presets.find(i=>i.bank===e&&i.program===t);return n||(e===128?(n=this.presets.find(i=>i.bank===128&&i.program===t),n||(n=this.presets.find(i=>i.bank===128))):n=this.presets.find(i=>i.program===t&&i.bank!==128),n&&Z(`%cPreset ${e}.${t} not found. Replaced with %c${n.presetName} (${n.bank}.${n.program})`,B.warn,B.recognized)),n||(Z(`Preset ${t} not found. Defaulting to`,this.presets[0].presetName),n=this.presets[0]),n}getPresetByName(e){let t=this.presets.find(n=>n.presetName===e);return t||(Z("Preset not found. Defaulting to:",this.presets[0].presetName),t=this.presets[0]),t}parsingError(e){throw new Error(`SF parsing error: ${e} The file may be corrupted.`)}destroySoundfont(){delete this.presets,delete this.instruments,delete this.samples}};Lt.prototype.write=Zr;Lt.prototype.writeDLS=la;function ca(o){Be("%cLoading instruments...",B.info);for(let e=0;e<this.instrumentAmount;e++)this.readDLSInstrument(Ae(o.chunkData));X()}var Ln=class extends Rt{constructor(e,t){super(zo),this.program=t&127,this.bank=e>>8&127,e>>31&&(this.bank=128),this.DLSInstrument=new Ft,this.DLSInstrument.addUseCount();let i=new xt;i.instrument=this.DLSInstrument,this.presetZones=[i]}};function ga(o){this.verifyHeader(o,"LIST"),this.verifyText(ce(o.chunkData,4),"ins ");let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(Ae(o.chunkData));let t=e.find(d=>d.header==="insh");if(!t)throw X(),new Error("No instrument header!");let n=L(t.chunkData,4),i=L(t.chunkData,4),s=L(t.chunkData,4),A=new Ln(i,s),a="unnamedPreset",r=Ve(e,"INFO");if(r){let d=Ae(r.chunkData);for(;d.header!=="INAM";)d=Ae(r.chunkData);a=ce(d.chunkData,d.chunkData.length).trim()}A.presetName=a,A.DLSInstrument.instrumentName=a,qe(`%cParsing %c"${a}"%c...`,B.info,B.recognized,B.info);let l=Ve(e,"lrgn");if(!l)throw X(),new Error("No region list!");let u=new Ge;u.isGlobal=!0;let c=Ve(e,"lart"),g=Ve(e,"lar2");(g!==void 0||c!==void 0)&&this.readLart(c,g,u),u.generators=u.generators.filter(d=>d.generatorValue!==z[d.generatorType].def),u.modulators.find(d=>d.modulatorDestination===h.reverbEffectsSend)===void 0&&u.modulators.push(j.copy(vn)),u.modulators.find(d=>d.modulatorDestination===h.chorusEffectsSend)===void 0&&u.modulators.push(j.copy(xn)),A.DLSInstrument.instrumentZones.push(u);for(let d=0;d<n;d++){let p=Ae(l.chunkData);this.verifyHeader(p,"LIST");let E=ce(p.chunkData,4);E!=="rgn "&&E!=="rgn2"&&(X(),this.parsingError(`Invalid DLS region! Expected "rgn " or "rgn2" got "${E}"`));let f=this.readRegion(p);f&&A.DLSInstrument.instrumentZones.push(f)}this.presets.push(A),this.instruments.push(A.DLSInstrument),X()}function da(o){let e,t=!1;switch(o){default:case O.modLfo:case O.vibratoLfo:case O.coarseTune:case O.fineTune:case O.modEnv:return;case O.keyNum:e=de.noteOnKeyNum;break;case O.none:e=de.noController;break;case O.modulationWheel:e=T.modulationWheel,t=!0;break;case O.pan:e=T.pan,t=!0;break;case O.reverb:e=T.reverbDepth,t=!0;break;case O.chorus:e=T.chorusDepth,t=!0;break;case O.expression:e=T.expressionController,t=!0;break;case O.volume:e=T.mainVolume,t=!0;break;case O.velocity:e=de.noteOnVelocity;break;case O.polyPressure:e=de.polyPressure;break;case O.channelPressure:e=de.channelPressure;break;case O.pitchWheel:e=de.pitchWheel;break;case O.pitchWheelRange:e=de.pitchWheelRange;break}if(e===void 0)throw new Error(`Unknown DLS Source: ${o}`);return{enum:e,isCC:t}}function Ql(o,e){switch(o){default:case M.none:return;case M.pan:return h.pan;case M.gain:return{gen:h.initialAttenuation,newAmount:e*-1};case M.pitch:return h.fineTune;case M.keyNum:return h.overridingRootKey;case M.volEnvDelay:return h.delayVolEnv;case M.volEnvAttack:return h.attackVolEnv;case M.volEnvHold:return h.holdVolEnv;case M.volEnvDecay:return h.decayVolEnv;case M.volEnvSustain:return{gen:h.sustainVolEnv,newAmount:1e3-e};case M.volEnvRelease:return h.releaseVolEnv;case M.modEnvDelay:return h.delayModEnv;case M.modEnvAttack:return h.attackModEnv;case M.modEnvHold:return h.holdModEnv;case M.modEnvDecay:return h.decayModEnv;case M.modEnvSustain:return{gen:h.sustainModEnv,newAmount:(1e3-e)/10};case M.modEnvRelease:return h.releaseModEnv;case M.filterCutoff:return h.initialFilterFc;case M.filterQ:return h.initialFilterQ;case M.chorusSend:return h.chorusEffectsSend;case M.reverbSend:return h.reverbEffectsSend;case M.modLfoFreq:return h.freqModLFO;case M.modLfoDelay:return h.delayModLFO;case M.vibLfoFreq:return h.freqVibLFO;case M.vibLfoDelay:return h.delayVibLFO}}function yl(o,e){return o===O.vibratoLfo&&e===M.pitch?h.vibLfoToPitch:o===O.modLfo&&e===M.pitch?h.modLfoToPitch:o===O.modLfo&&e===M.filterCutoff?h.modLfoToFilterFc:o===O.modLfo&&e===M.gain?h.modLfoToVolume:o===O.modEnv&&e===M.filterCutoff?h.modEnvToFilterFc:o===O.modEnv&&e===M.pitch?h.modEnvToPitch:void 0}function ha(o,e,t,n,i){let s=yl(o,t),A,a,r=!1,l=!1,u=i;if(s===void 0){let w=Ql(t,i);if(w===void 0){Z(`Invalid destination: ${t}`);return}if(A=w,w.newAmount!==void 0&&(u=w.newAmount,A=w.gen),a=da(o),a===void 0){Z(`Invalid source: ${o}`);return}}else A=s,r=!0,a={enum:de.noController,isCC:!1},l=!0;let c=da(e);if(c===void 0){Z(`Invalid control: ${e}`);return}let g;if(l)g=0;else{let w=n&15,y=n>>10&15;y===De.linear&&w!==De.linear&&(y=w);let S=n>>14&1,D=n>>15&1;A===h.initialAttenuation&&i<0&&(D=1),g=nt(y,S,D,a.isCC,a.enum)}let d=n>>4&15,p=n>>8&1,E=n>>9&1,f=nt(d,p,E,c.isCC,c.enum);if(r){let w=f;f=g,g=w}return new j({srcEnum:g,secSrcEnum:f,dest:A,transform:0,amt:u})}function yi(o,e){let t=o.chunkData,n=[],i=[];L(t,4);let s=L(t,4);for(let A=0;A<s;A++){let a=L(t,2),r=L(t,2),l=L(t,2),u=L(t,2),g=(L(t,4)|0)>>16;if(a===0&&r===0&&u===0){let d;switch(l){case M.pan:d=new U(h.pan,g);break;case M.gain:d=new U(h.initialAttenuation,-g*10/.4);break;case M.filterCutoff:d=new U(h.initialFilterFc,g);break;case M.filterQ:d=new U(h.initialFilterQ,g);break;case M.modLfoFreq:d=new U(h.freqModLFO,g);break;case M.modLfoDelay:d=new U(h.delayModLFO,g);break;case M.vibLfoFreq:d=new U(h.freqVibLFO,g);break;case M.vibLfoDelay:d=new U(h.delayVibLFO,g);break;case M.volEnvDelay:d=new U(h.delayVolEnv,g);break;case M.volEnvAttack:d=new U(h.attackVolEnv,g);break;case M.volEnvHold:d=new U(h.holdVolEnv,g,!1);break;case M.volEnvDecay:d=new U(h.decayVolEnv,g,!1);break;case M.volEnvRelease:d=new U(h.releaseVolEnv,g);break;case M.volEnvSustain:let p=1e3-g;d=new U(h.sustainVolEnv,p);break;case M.modEnvDelay:d=new U(h.delayModEnv,g);break;case M.modEnvAttack:d=new U(h.attackModEnv,g);break;case M.modEnvHold:d=new U(h.holdModEnv,g,!1);break;case M.modEnvDecay:d=new U(h.decayModEnv,g,!1);break;case M.modEnvRelease:d=new U(h.releaseModEnv,g);break;case M.modEnvSustain:let E=1e3-g;d=new U(h.sustainModEnv,E);break;case M.reverbSend:d=new U(h.reverbEffectsSend,g);break;case M.chorusSend:d=new U(h.chorusEffectsSend,g);break;case M.pitch:let f=Math.floor(g/100),w=Math.floor(g-f*100);d=new U(h.fineTune,w),n.push(new U(h.coarseTune,f));break}d&&n.push(d)}else{let d=!0;if(r===O.none)if(a===O.modLfo&&l===M.pitch)n.push(new U(h.modLfoToPitch,g));else if(a===O.modLfo&&l===M.gain)n.push(new U(h.modLfoToVolume,g));else if(a===O.modLfo&&l===M.filterCutoff)n.push(new U(h.modLfoToFilterFc,g));else if(a===O.vibratoLfo&&l===M.pitch)n.push(new U(h.vibLfoToPitch,g));else if(a===O.modEnv&&l===M.pitch)n.push(new U(h.modEnvToPitch,g));else if(a===O.modEnv&&l===M.filterCutoff)n.push(new U(h.modEnvToFilterFc,g));else if(a===O.keyNum&&l===M.pitch)n.push(new U(h.scaleTuning,g/128));else if(a===O.keyNum&&l===M.volEnvHold){n.push(new U(h.keyNumToVolEnvHold,g/-128));let p=Math.round(60/128*g);n.forEach(E=>{E.generatorType===h.holdVolEnv&&(E.generatorValue+=p)})}else if(a===O.keyNum&&l===M.volEnvDecay){n.push(new U(h.keyNumToVolEnvDecay,g/-128));let p=Math.round(60/128*g);n.forEach(E=>{E.generatorType===h.decayVolEnv&&(E.generatorValue+=p)})}else if(a===O.keyNum&&l===M.modEnvHold){n.push(new U(h.keyNumToModEnvHold,g/-128));let p=Math.round(60/128*g);n.forEach(E=>{E.generatorType===h.holdModEnv&&(E.generatorValue+=p)})}else if(a===O.keyNum&&l===M.modEnvDecay){n.push(new U(h.keyNumToModEnvDecay,g/-128));let p=Math.round(60/128*g);n.forEach(E=>{E.generatorType===h.decayModEnv&&(E.generatorValue+=p)})}else d=!1;else d=!1;if(d===!1){let p=ha(a,r,l,u,g);p?(i.push(p),x("%cSucceeded converting to SF2 Modulator!",B.recognized)):Z("Failed converting to SF2 Modulator!")}}}return e&&i.push(j.copy(Mn),j.copy(Fn)),{modulators:i,generators:n}}function Ia(o,e,t){if(o)for(;o.chunkData.currentIndex<o.chunkData.length;){let n=Ae(o.chunkData);this.verifyHeader(n,"art1","art2");let i=yi(n,!0);t.generators.push(...i.generators),t.modulators.push(...i.modulators)}if(e)for(;e.chunkData.currentIndex<e.chunkData.length;){let n=Ae(e.chunkData);this.verifyHeader(n,"art2","art1");let i=yi(n,!1);t.generators.push(...i.generators),t.modulators.push(...i.modulators)}}var Tn=class extends Ge{constructor(e,t){super(),this.keyRange=e,this.velRange=t,this.isGlobal=!0}setWavesample(e,t,n,i,s,A,a){t!==0&&this.generators.push(new U(h.sampleModes,t)),this.generators.push(new U(h.initialAttenuation,e)),this.isGlobal=!1,a-=s.samplePitchCorrection;let r=Math.trunc(a/100);r!==0&&this.generators.push(new U(h.coarseTune,r));let l=a-r*100;if(l!==0&&this.generators.push(new U(h.fineTune,l)),t!==0){let u=n.start-s.sampleLoopStartIndex,c=n.end-s.sampleLoopEndIndex;if(u!==0){let g=u%32768;this.generators.push(new U(h.startloopAddrsOffset,g));let d=Math.trunc(u/32768);d!==0&&this.generators.push(new U(h.startloopAddrsCoarseOffset,d))}if(c!==0){let g=c%32768;this.generators.push(new U(h.endloopAddrsOffset,g));let d=Math.trunc(c/32768);d!==0&&this.generators.push(new U(h.endloopAddrsCoarseOffset,d))}}i!==s.samplePitch&&this.generators.push(new U(h.overridingRootKey,i)),this.generators.push(new U(h.sampleID,A)),this.sample=s,s.useCount++}};function ua(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(Ae(o.chunkData));let t=e.find(F=>F.header==="rgnh"),n=L(t.chunkData,2),i=L(t.chunkData,2),s=L(t.chunkData,2),A=L(t.chunkData,2),a=new Tn({min:n,max:i},{min:s,max:A});L(t.chunkData,2);let r=L(t.chunkData,2);r!==0&&a.generators.push(new U(h.exclusiveClass,r));let l=Ve(e,"lart"),u=Ve(e,"lar2");this.readLart(l,u,a),a.isGlobal=!1;let c=e.find(F=>F.header==="wsmp");L(c.chunkData,4);let g=L(c.chunkData,2),d=wt(c.chunkData[c.chunkData.currentIndex++],c.chunkData[c.chunkData.currentIndex++]),E=(L(c.chunkData,4)|0)/-655360;L(c.chunkData,4);let f=L(c.chunkData,4),w,y={start:0,end:0};if(f===0)w=0;else{L(c.chunkData,4),L(c.chunkData,4)===0?w=1:w=3,y.start=L(c.chunkData,4);let K=L(c.chunkData,4);y.end=y.start+K}let S=e.find(F=>F.header==="wlnk");if(S===void 0)return;L(S.chunkData,2),L(S.chunkData,2),L(S.chunkData,4);let D=L(S.chunkData,4),k=this.samples[D];if(k===void 0)throw new Error("Invalid sample ID!");let v=(E||k.sampleDbAttenuation)*10/.4;return a.setWavesample(v,w,y,g,k,D,d),a}var Gn=class extends Mt{sampleDbAttenuation;sampleData;constructor(e,t,n,i,s,A,a,r){super(e,t,n,i,0,1,s,A),this.sampleData=a,this.sampleDbAttenuation=r}getAudioData(){return this.sampleData}getRawData(){if(this.isCompressed){if(!this.compressedData)throw new Error("Compressed but no data?? This shouldn't happen!!");return this.compressedData}return super.getRawData()}};var ma={PCM:1,ALAW:6};function Sl(o,e){let t=Math.pow(2,e*8-1),n=Math.pow(2,e*8),i,s=!1;e===1?(i=255,s=!0):i=t;let A=o.size/e,a=new Float32Array(A);for(let r=0;r<a.length;r++){let l=L(o.chunkData,e);s?a[r]=l/i-.5:(l>=t&&(l-=n),a[r]=l/i)}return a}function wl(o,e){let t=o.size/e,n=new Float32Array(t);for(let i=0;i<n.length;i++){let s=L(o.chunkData,e),A=s^85;A&=127;let a=A>>4,r=A&15;a>0&&(r+=16),r=(r<<4)+8,a>1&&(r=r<<a-1);let l=s>127?r:-r;n[i]=l/32678}return n}function pa(o){Be("%cLoading Wave samples...",B.recognized);let e=0;for(;o.chunkData.currentIndex<o.chunkData.length;){let t=Ae(o.chunkData);this.verifyHeader(t,"LIST"),this.verifyText(ce(t.chunkData,4),"wave");let n=[];for(;t.chunkData.currentIndex<t.chunkData.length;)n.push(Ae(t.chunkData));let i=n.find(k=>k.header==="fmt ");if(!i)throw new Error("No fmt chunk in the wave file!");let s=L(i.chunkData,2),A=L(i.chunkData,2);if(A!==1)throw new Error(`Only mono samples are supported. Fmt reports ${A} channels`);let a=L(i.chunkData,4);L(i.chunkData,4),L(i.chunkData,2);let l=L(i.chunkData,2)/8,u=!1,c=n.find(k=>k.header==="data");c||this.parsingError("No data chunk in the WAVE chunk!");let g;switch(s){default:u=!0,g=new Float32Array(c.size/l);break;case ma.PCM:g=Sl(c,l);break;case ma.ALAW:g=wl(c,l);break}let d=Ve(n,"INFO"),p=`Unnamed ${e}`;if(d){let k=Ae(d.chunkData);for(;k.header!=="INAM"&&d.chunkData.currentIndex<d.chunkData.length;)k=Ae(d.chunkData);k.header==="INAM"&&(p=ce(k.chunkData,k.size).trim())}let E=60,f=0,w=0,y=g.length-1,S=0,D=n.find(k=>k.header==="wsmp");if(D){L(D.chunkData,4),E=L(D.chunkData,2),f=wt(D.chunkData[D.chunkData.currentIndex++],D.chunkData[D.chunkData.currentIndex++]);let k=Math.trunc(f/100);if(E+=k,f-=k*100,S=(L(D.chunkData,4)|0)/-655360,L(D.chunkData,4),L(D.chunkData,4)===1){L(D.chunkData,8),w=L(D.chunkData,4);let F=L(D.chunkData,4);y=w+F}}else Z("No wsmp chunk in wave... using sane defaults.");u&&console.error(`Failed to load '${p}': Unsupported format: (${s})`),this.samples.push(new Gn(p,a,E,f,w,y,g,S)),e++,x(`%cLoaded sample %c${p}`,B.info,B.recognized)}X()}var Bt=class extends Lt{constructor(e){super(),this.dataArray=new R(e),qe("%cParsing DLS...",B.info),this.dataArray||(X(),this.parsingError("No data provided!"));let t=Ae(this.dataArray,!1);this.verifyHeader(t,"riff"),this.verifyText(ce(this.dataArray,4).toLowerCase(),"dls ");let n=[];for(;this.dataArray.currentIndex<this.dataArray.length;)n.push(Ae(this.dataArray));this.soundFontInfo.ifil="2.1",this.soundFontInfo.isng="EMU8000",this.soundFontInfo.INAM="Unnamed DLS",this.soundFontInfo.IENG="Unknown",this.soundFontInfo.IPRD="SpessaSynth DLS",this.soundFontInfo.ICRD=new Date().toDateString();let i=Ve(n,"INFO");if(i)for(;i.chunkData.currentIndex<i.chunkData.length;){let r=Ae(i.chunkData);this.soundFontInfo[r.header]=ce(r.chunkData,r.size)}this.soundFontInfo.ICMT=this.soundFontInfo.ICMT||"(No description)",this.soundFontInfo.ISBJ&&(this.soundFontInfo.ICMT+=`
`+this.soundFontInfo.ISBJ,delete this.soundFontInfo.ISBJ),this.soundFontInfo.ICMT+=`
Converted from DLS to SF2 with SpessaSynth`;for(let[r,l]of Object.entries(this.soundFontInfo))x(`%c"${r}": %c"${l}"`,B.info,B.recognized);let s=n.find(r=>r.header==="colh");s||(X(),this.parsingError("No colh chunk!")),this.instrumentAmount=L(s.chunkData,4),x(`%cInstruments amount: %c${this.instrumentAmount}`,B.info,B.recognized);let A=Ve(n,"wvpl");A||(X(),this.parsingError("No wvpl chunk!")),this.readDLSSamples(A);let a=Ve(n,"lins");a||(X(),this.parsingError("No lins chunk!")),this.readDLSInstrumentList(a),this.presets.sort((r,l)=>r.program-l.program+(r.bank-l.bank)),x(`%cParsing finished! %c"${this.soundFontInfo.INAM||"UNNAMED"}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info),X()}verifyHeader(e,...t){for(let n of t)if(e.header.toLowerCase()===n.toLowerCase())return;X(),this.parsingError(`Invalid DLS chunk header! Expected "${t.toString()}" got "${e.header.toLowerCase()}"`)}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(X(),this.parsingError(`FourCC error: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"`))}parsingError(e){throw new Error(`DLS parse error: ${e} The file may be corrupted.`)}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};Bt.prototype.readDLSInstrumentList=ca;Bt.prototype.readDLSInstrument=ga;Bt.prototype.readRegion=ua;Bt.prototype.readLart=Ia;Bt.prototype.readDLSSamples=pa;var Tt=Tt!==void 0?Tt:{},Ca=!1,Ea;Tt.isInitialized=new Promise(o=>Ea=o);var Dl=function(o){var e,t,n,i,s,A,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=r.indexOf(o.charAt(u++)),s=r.indexOf(o.charAt(u++)),A=r.indexOf(o.charAt(u++)),a=r.indexOf(o.charAt(u++)),e=i<<2|s>>4,t=(15&s)<<4|A>>2,n=(3&A)<<6|a,l+=String.fromCharCode(e),A!==64&&(l+=String.fromCharCode(t)),a!==64&&(l+=String.fromCharCode(n));while(u<o.length);return l};(function(){var o,e,t,n,i,s,A,a,r,l,u,c,g,d,p,E,f,w,y,S,D,k,I=I!==void 0?I:{};I.wasmBinary=Uint8Array.from(Dl("AGFzbQEAAAABpQEYYAJ/fwF/YAF/AGAAAX9gBH9/f38AYAAAYAN/f38Bf2ABfwF/YAJ/fwBgBn9/f39/fwF/YAR/f39/AX9gBX9/f39/AX9gB39/f39/f38Bf2AGf39/f39/AGAIf39/f39/f38Bf2AFf39/f38AYAd/f39/f39/AGADf39/AGABfwF9YAF9AX1gAnx/AXxgAnx/AX9gA3x8fwF8YAJ8fAF8YAF8AXwCngIPA2VudgZtZW1vcnkCAIACA2VudgV0YWJsZQFwAQQEA2Vudgl0YWJsZUJhc2UDfwADZW52DkRZTkFNSUNUT1BfUFRSA38AA2VudghTVEFDS1RPUAN/AANlbnYJU1RBQ0tfTUFYA38ABmdsb2JhbAhJbmZpbml0eQN8AANlbnYFYWJvcnQAAQNlbnYNZW5sYXJnZU1lbW9yeQACA2Vudg5nZXRUb3RhbE1lbW9yeQACA2VudhdhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeQACA2Vudg5fX19hc3NlcnRfZmFpbAADA2VudgtfX19zZXRFcnJObwABA2VudgZfYWJvcnQABANlbnYWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwAFA3d2BgYCAQcHAQIBAQcBCAcFAAkGCQoHBgYGBgEFBgIBBgYKAAgLAAYGBgYGBgYBAAoMDAMGBQANCAoJAAwODA8OAQAGBgcEABAJEAERAAADBQwAAAMHBxIGAQAABwIFEwMOBw8HBgYQFAoVExYXFxcXFgQFBQYFAAYkB38BIwELfwEjAgt/ASMDC38BQQALfwFBAAt8ASMEC38BQQALB9MCFRBfX2dyb3dXYXNtTWVtb3J5AAgRX19fZXJybm9fbG9jYXRpb24AYwVfZnJlZQBfB19tYWxsb2MAXgdfbWVtY3B5AHkHX21lbXNldAB6BV9zYnJrAHsXX3N0Yl92b3JiaXNfanNfY2hhbm5lbHMAJhRfc3RiX3ZvcmJpc19qc19jbG9zZQAlFV9zdGJfdm9yYmlzX2pzX2RlY29kZQAoE19zdGJfdm9yYmlzX2pzX29wZW4AJBpfc3RiX3ZvcmJpc19qc19zYW1wbGVfcmF0ZQAnC2R5bkNhbGxfaWlpAHwTZXN0YWJsaXNoU3RhY2tTcGFjZQAMC2dldFRlbXBSZXQwAA8LcnVuUG9zdFNldHMAeAtzZXRUZW1wUmV0MAAOCHNldFRocmV3AA0Kc3RhY2tBbGxvYwAJDHN0YWNrUmVzdG9yZQALCXN0YWNrU2F2ZQAKCQoBACMACwR9VFl9Csb2A3YGACAAQAALGwEBfyMGIQEjBiAAaiQGIwZBD2pBcHEkBiABCwQAIwYLBgAgACQGCwoAIAAkBiABJAcLEAAjCEUEQCAAJAggASQJCwsGACAAJAsLBAAjCwsRACAABEAgABARIAAgABASCwvvBwEKfyAAQYADaiEHIAcoAgAhBQJAIAUEQCAAQfwBaiEEIAQoAgAhASABQQBKBEAgAEHwAGohCANAIAUgAkEYbGpBEGohCSAJKAIAIQEgAQRAIAgoAgAhAyAFIAJBGGxqQQ1qIQogCi0AACEGIAZB/wFxIQYgAyAGQbAQbGpBBGohAyADKAIAIQMgA0EASgRAQQAhAwNAIAEgA0ECdGohASABKAIAIQEgACABEBIgA0EBaiEDIAgoAgAhASAKLQAAIQYgBkH/AXEhBiABIAZBsBBsakEEaiEBIAEoAgAhBiAJKAIAIQEgAyAGSA0ACwsgACABEBILIAUgAkEYbGpBFGohASABKAIAIQEgACABEBIgAkEBaiECIAQoAgAhASACIAFODQMgBygCACEFDAAACwALCwsgAEHwAGohAyADKAIAIQEgAQRAIABB7ABqIQUgBSgCACECIAJBAEoEQEEAIQIDQAJAIAEgAkGwEGxqQQhqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQRxqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQSBqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQaQQaiEEIAQoAgAhBCAAIAQQEiABIAJBsBBsakGoEGohASABKAIAIQEgAUUhBCABQXxqIQFBACABIAQbIQEgACABEBIgAkEBaiECIAUoAgAhASACIAFODQAgAygCACEBDAELCyADKAIAIQELIAAgARASCyAAQfgBaiEBIAEoAgAhASAAIAEQEiAHKAIAIQEgACABEBIgAEGIA2ohAyADKAIAIQEgAQRAIABBhANqIQUgBSgCACECIAJBAEoEQEEAIQIDQCABIAJBKGxqQQRqIQEgASgCACEBIAAgARASIAJBAWohAiAFKAIAIQcgAygCACEBIAIgB0gNAAsLIAAgARASCyAAQQRqIQIgAigCACEBIAFBAEoEQEEAIQEDQCAAQZQGaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQZQHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQdgHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiABQQFqIQEgAigCACEDIAEgA0ghAyABQRBJIQUgBSADcQ0ACwtBACEBA0AgAEGgCGogAUECdGohAiACKAIAIQIgACACEBIgAEGoCGogAUECdGohAiACKAIAIQIgACACEBIgAEGwCGogAUECdGohAiACKAIAIQIgACACEBIgAEG4CGogAUECdGohAiACKAIAIQIgACACEBIgAEHACGogAUECdGohAiACKAIAIQIgACACEBIgAUEBaiEBIAFBAkcNAAsLGwAgAEHEAGohACAAKAIAIQAgAEUEQCABEF8LC3wBAX8gAEHUB2ohASABQQA2AgAgAEGAC2ohASABQQA2AgAgAEH4CmohASABQQA2AgAgAEGcCGohASABQQA2AgAgAEHVCmohASABQQA6AAAgAEH8CmohASABQQA2AgAgAEHUC2ohASABQQA2AgAgAEHYC2ohACAAQQA2AgAL8AQBB38jBiELIwZBEGokBiALQQhqIQcgC0EEaiEKIAshCCAAQSRqIQYgBiwAACEGAn8gBgR/IABBgAtqIQYgBigCACEGIAZBf0oEQCAFQQA2AgAgACABIAIQFgwCCyAAQRRqIQYgBiABNgIAIAEgAmohAiAAQRxqIQkgCSACNgIAIABB2ABqIQIgAkEANgIAIABBABAXIQkgCUUEQCAFQQA2AgBBAAwCCyAAIAcgCCAKEBghCSAJBEAgBygCACECIAgoAgAhCSAKKAIAIQggACACIAkgCBAaIQogByAKNgIAIABBBGohAiACKAIAIQggCEEASgRAQQAhAgNAIABBlAZqIAJBAnRqIQcgBygCACEHIAcgCUECdGohByAAQdQGaiACQQJ0aiEMIAwgBzYCACACQQFqIQIgAiAISA0ACwsgAwRAIAMgCDYCAAsgBSAKNgIAIABB1AZqIQAgBCAANgIAIAYoAgAhACAAIAFrDAILAkACQAJAAkACQCACKAIAIgNBIGsOBAECAgACCyACQQA2AgAgAEHUAGohAiAAEBkhAwJAIANBf0cEQANAIAIoAgAhAyADDQIgABAZIQMgA0F/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ACECIABBmAhqIQYgBigCACEHIAUgA2shCSAJIAdqIQkgAiAJSSEJIAIgB0khDSACIAdrIQJBACACIA0bIQIgAiADaiECIAIgBUohByAFIAIgBxshAiAJBEAgASACNgIAIAYoAgAhACAAIAJqIQAgBiAANgIAQQEMBgsLCyAAQfQKaiECIAIoAgAhAiADIB9rIQYgBiACaiEGIABBmAhqIQIgAiAGNgIAIAhBATYCAAwBBSAAQZgIaiECIAYNAQsMAQsgBCADayEDIAIoAgAhBCADIARqIQMgAiADNgIACyATKAIAIQIgAgRAIABByABqIQIgAigCACECIABB0ABqIQAgACgCACEAIAIgAEcEQEHTE0HEE0HkGkHnFBAECwsgASAFNgIAQQELIQAgHCQGIAALqAIBBX8gAEHoCmohBSAFKAIAIQICQCACQQBIBEBBACEABSACIAFIBEAgAUEYSgRAIABBGBAsIQIgAUFoaiEBIAAgARAsIQAgAEEYdCEAIAAgAmohACAADwsgAkUEQCAAQeQKaiECIAJBADYCAAsgAEHkCmohAwJAAkACQANAIAAQLiECIAJBf0YNASAFKAIAIQQgAiAEdCECIAMoAgAhBiAGIAJqIQIgAyACNgIAIAUgBEEIaiICNgIAIAIgAUgNAAwCAAsACyAFQX82AgBBACEADAQLIARBeEgEQEEAIQAMBAsLCyAAQeQKaiEEIAQoAgAhA0EBIAF0IQAgAEF/aiEAIAMgAHEhACADIAF2IQMgBCADNgIAIAIgAWshASAFIAE2AgALCyAAC40CAAJAIABBAEgEf0EABSAAQYCAAUgEQCAAQRBIBEAgAEGACGohACAALAAAIQAMAwsgAEGABEgEQCAAQQV2IQAgAEGACGohACAALAAAIQAgAEEFaiEABSAAQQp2IQAgAEGACGohACAALAAAIQAgAEEKaiEACwwCCyAAQYCAgAhIBH8gAEGAgCBIBH8gAEEPdiEAIABBgAhqIQAgACwAACEAIABBD2oFIABBFHYhACAAQYAIaiEAIAAsAAAhACAAQRRqCwUgAEGAgICAAkgEfyAAQRl2IQAgAEGACGohACAALAAAIQAgAEEZagUgAEEediEAIABBgAhqIQAgACwAACEAIABBHmoLCwshAAsgAAuiAQEDfyAAQdQKaiECIAIsAAAhAQJAAkAgAQ0AIABB3ApqIQEgASgCACEBIAEEQEF/IQMFIAAQLyEBIAEEQCACLAAAIQEgAQ0CQaEUQcQTQfYLQbUUEAQFQX8hAwsLDAELIAFBf2pBGHRBGHUhASACIAE6AAAgAEHsCmohASABKAIAIQIgAkEBaiECIAEgAjYCACAAEDAhACAAQf8BcSEDCyADC6wCAQd/IABB3ApqIQIgAigCACEBAkAgAUUEQCAAQdgKaiEEIAQoAgAhASABQX9GBEAgAEHQCGohASABKAIAIQEgAUF/aiEBIABB4ApqIQMgAyABNgIAIAAQMSEBIAFFBEAgAkEBNgIADAMLIABB0wpqIQEgASwAACEBIAFBAXEhASABBH8gBCgCAAUgAEEgEBUMAwshAQsgAUEBaiEHIAQgBzYCACAAQdQIaiABaiEDIAMsAAAhBiAGQf8BcSEDIAZBf0cEQCACQQE2AgAgAEHgCmohAiACIAE2AgALIABB0AhqIQEgASgCACEBIAcgAU4EQCAEQX82AgALIABB1ApqIQAgACwAACEBIAEEQEHFFEHEE0HoC0HaFBAEBSAAIAY6AAAgAyEFCwsLIAULUQEDfyAAQRRqIQMgAygCACEBIABBHGohAiACKAIAIQIgASACSQR/IAFBAWohACADIAA2AgAgASwAAAUgAEHUAGohACAAQQE2AgBBAAshACAACyABAX8gABAyIQEgAQR/IAAQMwUgAEEeEBVBAAshACAAC2ABAX8gABAwIQEgAUH/AXFBzwBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQAgAEH/AXFB0wBGIQAFQQAhAAsFQQAhAAsFQQAhAAsgAAvZAwEGfyAAEDAhAQJ/IAFB/wFxBH8gAEEfEBVBAAUgABAwIQEgAEHTCmohAiACIAE6AAAgABAjIQUgABAjIQIgABAjGiAAECMhASAAQcwIaiEDIAMgATYCACAAECMaIAAQMCEBIAFB/wFxIQEgAEHQCGohAyADIAE2AgAgAEHUCGohBCAAIAQgARAiIQEgAUUEQCAAQQoQFUEADAILIABB8ApqIQQgBEF+NgIAIAIgBXEhAQJAIAFBf0cEQCADKAIAIQEgAUEASgRAA0ACQCABQX9qIQIgAEHUCGogAmohBiAGLAAAIQYgBkF/Rw0AIAFBAUwNBCACIQEMAQsLIAQgAjYCACAAQfQKaiEBIAEgBTYCAAsLCyAAQdUKaiEBIAEsAAAhASABBEAgAygCACEDIANBAEoEf0EAIQJBACEBA0AgAEHUCGogAWohBCAELQAAIQQgBEH/AXEhBCACIARqIQIgAUEBaiEBIAEgA0gNAAsgAkEbagVBGwshASAAQShqIQIgAigCACECIAEgA2ohASABIAJqIQEgAEEsaiEDIAMgAjYCACAAQTBqIQIgAiABNgIAIABBNGohASABIAU2AgALIABB2ApqIQAgAEEANgIAQQELCyEAIAALowEBB38gAEHoCmohAyADKAIAIQECQCABQRlIBEAgAEHkCmohBCABRQRAIARBADYCAAsgAEHUCmohBSAAQdwKaiEGA0AgBigCACEBIAEEQCAFLAAAIQEgAUUNAwsgABAuIQIgAkF/Rg0CIAMoAgAhASACIAF0IQIgBCgCACEHIAcgAmohAiAEIAI2AgAgAUEIaiECIAMgAjYCACABQRFIDQALCwsLrQUBCX8gABA0IAFBIGohAiACKAIAIQUCQAJAIAVFIgNFDQAgAUGkEGohAiACKAIAIQIgAg0AQX8hAQwBCyABQQRqIQIgAigCACECAkACQCACQQhKBEAgAUGkEGohAyADKAIAIQMgAw0BBSADDQELDAELIABB5ApqIQggCCgCACEJIAkQOiEHIAFBrBBqIQIgAigCACECIAJBAUoEQCABQaQQaigCACEKQQAhAwNAIAJBAXYhBSAFIANqIQQgCiAEQQJ0aiEGIAYoAgAhBiAGIAdLIQYgAiAFayECIAMgBCAGGyEDIAUgAiAGGyECIAJBAUoNAAsFQQAhAwsgAUEXaiECIAIsAAAhAiACRQRAIAFBqBBqIQIgAigCACECIAIgA0ECdGohAiACKAIAIQMLIAFBCGohASABKAIAIQEgASADaiEBIAEtAAAhASABQf8BcSEBIABB6ApqIQIgAigCACEAIAAgAUgEf0EAIQBBfwUgACABayEAIAkgAXYhASAIIAE2AgAgAwshASACIAA2AgAMAQsgAUEXaiEDIAMsAAAhAyADBEBBgRVBxBNB6gxBjBUQBAsCQCACQQBKBEAgASgCCCEIIABB5ApqIQlBACEBA0ACQCAIIAFqIQMgAywAACEEIARB/wFxIQMgBEF/RwRAIAUgAUECdGoh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IwZBEGokBiACIQECfCAAvUIgiKdB/////wdxIgNB/MOk/wNJBHwgA0GewZryA0kEfEQAAAAAAADwPwUgAEQAAAAAAAAAABByCwUgACAAoSADQf//v/8HSw0BGgJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwgQcgwECyABKwMAIAErAwhBARBwmgwDCyABKwMAIAErAwgQcpoMAgsgASsDACABKwMIQQEQcAsLIQAgAiQGIAALywEBA38jBiECIwZBEGokBiACIQECQCAAvUIgiKdB/////wdxIgNB/MOk/wNJBEAgA0GAgMDyA08EQCAARAAAAAAAAAAAQQAQcCEACwUgA0H//7//B0sEQCAAIAChIQAMAgsCQAJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwhBARBwIQAMBQsgASsDACABKwMIEHIhAAwECyABKwMAIAErAwhBARBwmiEADAMLIAErAwAgASsDCBBymiEACwsLIAIkBiAAC5sDAwJ/AX4CfCAAvSIDQj+IpyEBAnwCfwJAIANCIIinQf////8HcSICQarGmIQESwR8IANC////////////AINCgICAgICAgPj/AFYEQCAADwsgAETvOfr+Qi6GQGQEQCAARAAAAAAAAOB/og8FIABE0rx63SsjhsBjIABEUTAt1RBJh8BjcUUNAkQAAAAAAAAAACIADwsABSACQcLc2P4DSwRAIAJBscXC/wNLDQIgAUEBcyABawwDCyACQYCAwPEDSwR8QQAhASAABSAARAAAAAAAAPA/oA8LCwwCCyAARP6CK2VHFfc/oiABQQN0QYATaisDAKCqCyEBIAAgAbciBEQAAOD+Qi7mP6KhIgAgBER2PHk17znqPaIiBaELIQQgACAEIAQgBCAEoiIAIAAgACAAIABE0KS+cmk3Zj6iRPFr0sVBvbu+oKJELN4lr2pWET+gokSTvb4WbMFmv6CiRD5VVVVVVcU/oKKhIgCiRAAAAAAAAABAIAChoyAFoaBEAAAAAAAA8D+gIQAgAUUEQCAADwsgACABEGULnwMDAn8BfgV8IAC9IgNCIIinIQECfyADQgBTIgIgAUGAgMAASXIEfyADQv///////////wCDQgBRBEBEAAAAAAAA8L8gACAAoqMPCyACRQRAIABEAAAAAAAAUEOi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mgDjqR0AXmGRAAgb5gCFmWUAoBRfAI1AaACA2P8AJ3NNAAYGMQDKVhUAyahzAHviYABrjMAAQcMSC11A+yH5PwAAAAAtRHQ+AAAAgJhG+DwAAABgUcx4OwAAAICDG/A5AAAAQCAlejgAAACAIoLjNgAAAAAd82k1AAAAAAAA4D8AAAAAAADgvwAAAAAAAPA/AAAAAAAA+D8AQagTCwgG0M9D6/1MPgBBuxMLigZAA7jiP09nZ1MuL3N0Yl92b3JiaXMuYwBmLT5hbGxvYy5hbGxvY19idWZmZXJfbGVuZ3RoX2luX2J5dGVzID09IGYtPnRlbXBfb2Zmc2V0AHZvcmJpc19kZWNvZGVfaW5pdGlhbABmLT5ieXRlc19pbl9zZWcgPiAwAGdldDhfcGFja2V0X3JhdwBmLT5ieXRlc19pbl9zZWcgPT0gMABuZXh0X3NlZ21lbnQAdm9yYmlzX2RlY29kZV9wYWNrZXRfcmVzdAAhYy0+c3BhcnNlAGNvZGVib29rX2RlY29kZV9zY2FsYXJfcmF3ACFjLT5zcGFyc2UgfHwgeiA8IGMtPnNvcnRlZF9lbnRyaWVzAGNvZGVib29rX2RlY29kZV9kZWludGVybGVhdmVfcmVwZWF0AHogPCBjLT5zb3J0ZWRfZW50cmllcwBjb2RlYm9va19kZWNvZGVfc3RhcnQAKG4gJiAzKSA9PSAwAGltZGN0X3N0ZXAzX2l0ZXIwX2xvb3AAMABnZXRfd2luZG93AGYtPnRlbXBfb2Zmc2V0ID09IGYtPmFsbG9jLmFsbG9jX2J1ZmZlcl9sZW5ndGhfaW5fYnl0ZXMAc3RhcnRfZGVjb2RlcgB2b3JiaXNjLT5zb3J0ZWRfZW50cmllcyA9PSAwAGNvbXB1dGVfY29kZXdvcmRzAHogPj0gMCAmJiB6IDwgMzIAbGVuW2ldID49IDAgJiYgbGVuW2ldIDwgMzIAYXZhaWxhYmxlW3ldID09IDAAayA9PSBjLT5zb3J0ZWRfZW50cmllcwBjb21wdXRlX3NvcnRlZF9odWZmbWFuAGMtPnNvcnRlZF9jb2Rld29yZHNbeF0gPT0gY29kZQBsZW4gIT0gTk9fQ09ERQBpbmNsdWRlX2luX3NvcnQAcG93KChmbG9hdCkgcisxLCBkaW0pID4gZW50cmllcwBsb29rdXAxX3ZhbHVlcwAoaW50KSBmbG9vcihwb3coKGZsb2F0KSByLCBkaW0pKSA8PSBlbnRyaWVzAOoPBG5hbWUB4g9+AAVhYm9ydAENZW5sYXJnZU1lbW9yeQIOZ2V0VG90YWxNZW1vcnkDF2Fib3J0T25DYW5ub3RHcm93TWVtb3J5BA5fX19hc3NlcnRfZmFpbAULX19fc2V0RXJyTm8GBl9hYm9ydAcWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwgQX19ncm93V2FzbU1lbW9yeQkKc3RhY2tBbGxvYwoJc3RhY2tTYXZlCwxzdGFja1Jlc3RvcmUME2VzdGFibGlzaFN0YWNrU3BhY2UNCHNldFRocmV3DgtzZXRUZW1wUmV0MA8LZ2V0VGVtcFJldDAQEV9zdGJfdm9yYmlzX2Nsb3NlEQ5fdm9yYmlzX2RlaW5pdBILX3NldHVwX2ZyZWUTGl9zdGJfdm9yYmlzX2ZsdXNoX3B1c2hkYXRhFCFfc3RiX3ZvcmJpc19kZWNvZGVfZnJhbWVfcHVzaGRhdGEVBl9lcnJvchYgX3ZvcmJpc19zZWFyY2hfZm9yX3BhZ2VfcHVzaGRhdGEXGF9pc193aG9sZV9wYWNrZXRfcHJlc2VudBgVX3ZvcmJpc19kZWNvZGVfcGFja2V0GQxfZ2V0OF9wYWNrZXQaFF92b3JiaXNfZmluaXNoX2ZyYW1lGxlfc3RiX3ZvcmJpc19vcGVuX3B1c2hkYXRhHAxfdm9yYmlzX2luaXQdDl9zdGFydF9kZWNvZGVyHg1fdm9yYmlzX2FsbG9jHxtfc3RiX3ZvcmJpc19nZXRfZmlsZV9vZmZzZXQgE19tYXliZV9zdGFydF9wYWNrZXQhDV9mbHVzaF9wYWNrZXQiBV9nZXRuIwZfZ2V0MzIkE19zdGJfdm9yYmlzX2pzX29wZW4lFF9zdGJfdm9yYmlzX2pzX2Nsb3NlJhdfc3RiX3ZvcmJpc19qc19jaGFubmVscycaX3N0Yl92b3JiaXNfanNfc2FtcGxlX3JhdGUoFV9zdGJfdm9yYmlzX2pzX2RlY29kZSkNX2NyYzMyX3VwZGF0ZSoWX3ZvcmJpc19kZWNvZGVfaW5pdGlhbCsaX3ZvcmJpc19kZWNvZGVfcGFja2V0X3Jlc3QsCV9nZXRfYml0cy0FX2lsb2cuEF9nZXQ4X3BhY2tldF9yYXcvDV9uZXh0X3NlZ21lbnQwBV9nZXQ4MQtfc3RhcnRfcGFnZTIQX2NhcHR1cmVfcGF0dGVybjMdX3N0YXJ0X3BhZ2Vfbm9fY2FwdHVyZXBhdHRlcm40DV9wcmVwX2h1ZmZtYW41G19jb2RlYm9va19kZWNvZGVfc2NhbGFyX3JhdzYOX3ByZWRpY3RfcG9pbnQ3D19kZWNvZGVfcmVzaWR1ZTgJX2RvX2Zsb29yOQ1faW52ZXJzZV9tZGN0OgxfYml0X3JldmVyc2U7EV9tYWtlX2Jsb2NrX2FycmF5PBJfc2V0dXBfdGVtcF9tYWxsb2M9JF9jb2RlYm9va19kZWNvZGVfZGVpbnRlcmxlYXZlX3JlcGVhdD4PX3Jlc2lkdWVfZGVjb2RlPxVfY29kZWJvb2tfZGVjb2RlX3N0ZXBAEF9jb2RlYm9va19kZWNvZGVBFl9jb2RlYm9va19kZWNvZGVfc3RhcnRCCl9kcmF3X2xpbmVDF19pbWRjdF9zdGVwM19pdGVyMF9sb29wRBlfaW1kY3Rfc3RlcDNfaW5uZXJfcl9sb29wRRlfaW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wRh9faW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wX2xkNjU0RwhfaXRlcl81NEgLX2dldF93aW5kb3dJEF92b3JiaXNfdmFsaWRhdGVKDV9zdGFydF9wYWNrZXRLBV9za2lwTAtfY3JjMzJfaW5pdE0NX3NldHVwX21hbGxvY04QX3NldHVwX3RlbXBfZnJlZU8SX2NvbXB1dGVfY29kZXdvcmRzUBdfY29tcHV0ZV9zb3J0ZWRfaHVmZm1hblEcX2NvbXB1dGVfYWNjZWxlcmF0ZWRfaHVmZm1hblIPX2Zsb2F0MzJfdW5wYWNrUw9fbG9va3VwMV92YWx1ZXNUDl9wb2ludF9jb21wYXJlVQpfbmVpZ2hib3JzVg9faW5pdF9ibG9ja3NpemVXCl9hZGRfZW50cnlYEF9pbmNsdWRlX2luX3NvcnRZD191aW50MzJfY29tcGFyZVoYX2NvbXB1dGVfdHdpZGRsZV9mYWN0b3JzWw9fY29tcHV0ZV93aW5kb3dcE19jb21wdXRlX2JpdHJldmVyc2VdB19zcXVhcmVeB19tYWxsb2NfBV9mcmVlYAhfcmVhbGxvY2ESX3RyeV9yZWFsbG9jX2NodW5rYg5fZGlzcG9zZV9jaHVua2MRX19fZXJybm9fbG9jYXRpb25kB19tZW1jbXBlB19zY2FsYm5mBl9xc29ydGcFX3NpZnRoBF9zaHJpCF90cmlua2xlagRfc2hsawVfcG50emwIX2FfY3R6X2xtBl9jeWNsZW4LX19fcmVtX3BpbzJvEV9fX3JlbV9waW8yX2xhcmdlcAZfX19zaW5xBl9sZGV4cHIGX19fY29zcwRfY29zdARfc2ludQRfZXhwdgRfbG9ndwRfcG93eAtydW5Qb3N0U2V0c3kHX21lbWNweXoHX21lbXNldHsFX3Nicmt8C2R5bkNhbGxfaWlpfQJiMA=="),function(m){return m.charCodeAt(0)});var I=I!==void 0?I:{},v={};for(o in I)I.hasOwnProperty(o)&&(v[o]=I[o]);I.arguments=[],I.thisProgram="./this.program",I.quit=function(m,C){throw C},I.preRun=[],I.postRun=[];var F=!1,K=!1,W=!1,_=!1;F=typeof window=="object",K=typeof importScripts=="function",W=typeof process=="object"&&typeof os=="function"&&!F&&!K,_=!F&&!W&&!K;var Y="";function ee(m){return I.locateFile?I.locateFile(m,Y):Y+m}W?(Y=__dirname+"/",I.read=function(C,Q){var b;return e||(e=void 0),t||(t=void 0),C=t.normalize(C),b=e.readFileSync(C),Q?b:b.toString()},I.readBinary=function(C){var Q=I.read(C,!0);return Q.buffer||(Q=new Uint8Array(Q)),yt(Q.buffer),Q},process.argv.length>1&&(I.thisProgram=process.argv[1].replace(/\\/g,"/")),I.arguments=process.argv.slice(2),typeof module<"u",process.on("uncaughtException",function(m){if(!(m instanceof uo))throw m}),process.on("unhandledRejection",function(m,C){process.exit(1)}),I.quit=function(m){process.exit(m)},I.inspect=function(){return"[Emscripten Module object]"}):_?(typeof read<"u"&&(I.read=function(C){return read(C)}),I.readBinary=function(C){var Q;return typeof readbuffer=="function"?new Uint8Array(readbuffer(C)):(yt(typeof(Q=read(C,"binary"))=="object"),Q)},typeof scriptArgs<"u"?I.arguments=scriptArgs:typeof arguments<"u"&&(I.arguments=arguments),typeof quit=="function"&&(I.quit=function(m){quit(m)})):(F||K)&&(F?document.currentScript&&(Y=document.currentScript.src):Y=self.location.href,Y=Y.indexOf("blob:")!==0?Y.split("/").slice(0,-1).join("/")+"/":"",I.read=function(C){var Q=new XMLHttpRequest;return Q.open("GET",C,!1),Q.send(null),Q.responseText},K&&(I.readBinary=function(C){var Q=new XMLHttpRequest;return Q.open("GET",C,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),I.readAsync=function(C,Q,b){var P=new XMLHttpRequest;P.open("GET",C,!0),P.responseType="arraybuffer",P.onload=function(){if(P.status==200||P.status==0&&P.response){Q(P.response);return}b()},P.onerror=b,P.send(null)},I.setWindowTitle=function(m){document.title=m});var G=I.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),H=I.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||G);for(o in v)v.hasOwnProperty(o)&&(I[o]=v[o]);function ne(m){var C=d;return d=d+m+15&-16,C}function we(m){var C=r[S>>2],Q=C+m+15&-16;return r[S>>2]=Q,Q>=be&&!Ji()?(r[S>>2]=C,0):C}function Ce(m,C){return C||(C=16),m=Math.ceil(m/C)*C}function at(m){switch(m){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if(m[m.length-1]==="*")return 4;if(m[0]!=="i")return 0;var C=parseInt(m.substr(1));return yt(C%8==0),C/8}}function Ne(m){Ne.shown||(Ne.shown={}),Ne.shown[m]||(Ne.shown[m]=1,H(m))}v=void 0;var lt={"f64-rem":function(m,C){return m%C},debugger:function(){}},co=[];function Gi(m,C){for(var Q=0,b=Q;b<Q+0;b++)if(!co[b])return co[b]=m,1+b;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."}function Ni(m){co[m-1]=null}var go={};function ql(m,C){if(m){yt(C),go[C]||(go[C]={});var Q=go[C];return Q[m]||(C.length===1?Q[m]=function(){return Hn(C,m)}:C.length===2?Q[m]=function(P){return Hn(C,m,[P])}:Q[m]=function(){return Hn(C,m,Array.prototype.slice.call(arguments))}),Q[m]}}function _l(m,C,Q){return Q?+(m>>>0)+4294967296*+(C>>>0):+(m>>>0)+4294967296*+(0|C)}function Hn(m,C,Q){return Q&&Q.length?I["dynCall_"+m].apply(null,[C].concat(Q)):I["dynCall_"+m].call(null,C)}var No=0,Ui=0;function yt(m,C){m||mt("Assertion failed: "+C)}function qi(m){var C=I["_"+m];return yt(C,"Cannot call unknown function "+m+", make sure it is exported"),C}var _i={stackSave:function(){Wn()},stackRestore:function(){zn()},arrayToC:function(m){var C,Q,b=Oo(m.length);return C=m,Q=b,i.set(C,Q),b},stringToC:function(m){var C=0;if(m!=null&&m!==0){var Q=(m.length<<2)+1;C=Oo(Q),Oi(m,C,Q)}return C}},Fa={string:_i.stringToC,array:_i.arrayToC};function Hi(m,C,Q,b,P){var oe=qi(m),se=[],J=0;if(b)for(var ve=0;ve<b.length;ve++){var me=Fa[Q[ve]];me?(J===0&&(J=Wn()),se[ve]=me(b[ve])):se[ve]=b[ve]}var pe,he=oe.apply(null,se);return he=(pe=he,C==="string"?Uo(pe):C==="boolean"?!!pe:pe),J!==0&&zn(J),he}function Ra(m,C,Q,b){switch((Q=Q||"i8").charAt(Q.length-1)==="*"&&(Q="i32"),Q){case"i1":case"i8":i[m>>0]=C;break;case"i16":A[m>>1]=C;break;case"i32":r[m>>2]=C;break;case"i64":tempI64=[C>>>0,+Ua(tempDouble=C)>=1?tempDouble>0?(0|_a(+ji(tempDouble/4294967296),4294967295))>>>0:~~+qa((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0],r[m>>2]=tempI64[0],r[m+4>>2]=tempI64[1];break;case"float":u[m>>2]=C;break;case"double":c[m>>3]=C;break;default:mt("invalid type for setValue: "+Q)}}function Hl(m,C,Q){switch((C=C||"i8").charAt(C.length-1)==="*"&&(C="i32"),C){case"i1":case"i8":return i[m>>0];case"i16":return A[m>>1];case"i32":case"i64":return r[m>>2];case"float":return u[m>>2];case"double":return c[m>>3];default:mt("invalid type for getValue: "+C)}return null}function Pl(m,C,Q,b){typeof m=="number"?(oe=!0,se=m):(oe=!1,se=m.length);var P=typeof C=="string"?C:null;if(J=Q==4?b:[typeof Po=="function"?Po:ne,Oo,ne,we][Q===void 0?2:Q](Math.max(se,P?1:C.length)),oe){for(b=J,yt((3&J)==0),ve=J+(-4&se);b<ve;b+=4)r[b>>2]=0;for(ve=J+se;b<ve;)i[b++>>0]=0;return J}if(P==="i8")return m.subarray||m.slice?s.set(m,J):s.set(new Uint8Array(m),J),J;for(var oe,se,J,ve,me,pe,he,te=0;te<se;){var Ue=m[te];if((me=P||C[te])===0){te++;continue}me=="i64"&&(me="i32"),Ra(J+te,Ue,me),he!==me&&(pe=at(me),he=me),te+=pe}return J}function Ol(m){return p?Jn?Po(m):we(m):ne(m)}function Uo(m,C){if(C===0||!m)return"";for(var Q,b,P,oe=0,se=0;oe|=b=s[m+se>>0],(b!=0||C)&&(se++,!C||se!=C););C||(C=se);var J="";if(oe<128){for(;C>0;)P=String.fromCharCode.apply(String,s.subarray(m,m+Math.min(C,1024))),J=J?J+P:P,m+=1024,C-=1024;return J}return Q=m,function(me,pe){for(var he=pe;me[he];)++he;if(he-pe>16&&me.subarray&&Pi)return Pi.decode(me.subarray(pe,he));for(var te,Ue,ze,We,Ze,Ut,je="";;){if(!(te=me[pe++]))return je;if(!(128&te)){je+=String.fromCharCode(te);continue}if(Ue=63&me[pe++],(224&te)==192){je+=String.fromCharCode((31&te)<<6|Ue);continue}if(ze=63&me[pe++],(240&te)==224?te=(15&te)<<12|Ue<<6|ze:(We=63&me[pe++],(248&te)==240?te=(7&te)<<18|Ue<<12|ze<<6|We:(Ze=63&me[pe++],te=(252&te)==248?(3&te)<<24|Ue<<18|ze<<12|We<<6|Ze:(1&te)<<30|Ue<<24|ze<<18|We<<12|Ze<<6|(Ut=63&me[pe++]))),te<65536)je+=String.fromCharCode(te);else{var mo=te-65536;je+=String.fromCharCode(55296|mo>>10,56320|1023&mo)}}}(s,Q)}function Vl(m){for(var C="";;){var Q=i[m++>>0];if(!Q)return C;C+=String.fromCharCode(Q)}}function Yl(m,C){return function(b,P,oe){for(var se=0;se<b.length;++se)i[P++>>0]=b.charCodeAt(se);oe||(i[P>>0]=0)}(m,C,!1)}var Pi=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function qo(m,C,Q,b){if(!(b>0))return 0;for(var P=Q,oe=Q+b-1,se=0;se<m.length;++se){var J=m.charCodeAt(se);if(J>=55296&&J<=57343&&(J=65536+((1023&J)<<10)|1023&m.charCodeAt(++se)),J<=127){if(Q>=oe)break;C[Q++]=J}else if(J<=2047){if(Q+1>=oe)break;C[Q++]=192|J>>6,C[Q++]=128|63&J}else if(J<=65535){if(Q+2>=oe)break;C[Q++]=224|J>>12,C[Q++]=128|J>>6&63,C[Q++]=128|63&J}else if(J<=2097151){if(Q+3>=oe)break;C[Q++]=240|J>>18,C[Q++]=128|J>>12&63,C[Q++]=128|J>>6&63,C[Q++]=128|63&J}else if(J<=67108863){if(Q+4>=oe)break;C[Q++]=248|J>>24,C[Q++]=128|J>>18&63,C[Q++]=128|J>>12&63,C[Q++]=128|J>>6&63,C[Q++]=128|63&J}else{if(Q+5>=oe)break;C[Q++]=252|J>>30,C[Q++]=128|J>>24&63,C[Q++]=128|J>>18&63,C[Q++]=128|J>>12&63,C[Q++]=128|J>>6&63,C[Q++]=128|63&J}}return C[Q]=0,Q-P}function Oi(m,C,Q){return qo(m,s,C,Q)}function _o(m){for(var C=0,Q=0;Q<m.length;++Q){var b=m.charCodeAt(Q);b>=55296&&b<=57343&&(b=65536+((1023&b)<<10)|1023&m.charCodeAt(++Q)),b<=127?++C:b<=2047?C+=2:b<=65535?C+=3:b<=2097151?C+=4:b<=67108863?C+=5:C+=6}return C}var Vi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Jl(m){for(var C=m,Q=C>>1;A[Q];)++Q;if((C=Q<<1)-m>32&&Vi)return Vi.decode(s.subarray(m,C));for(var b=0,P="";;){var oe=A[m+2*b>>1];if(oe==0)return P;++b,P+=String.fromCharCode(oe)}}function Kl(m,C,Q){if(Q===void 0&&(Q=2147483647),Q<2)return 0;for(var b=C,P=(Q-=2)<2*m.length?Q/2:m.length,oe=0;oe<P;++oe){var se=m.charCodeAt(oe);A[C>>1]=se,C+=2}return A[C>>1]=0,C-b}function zl(m){return 2*m.length}function Wl(m){for(var C=0,Q="";;){var b=r[m+4*C>>2];if(b==0)return Q;if(++C,b>=65536){var P=b-65536;Q+=String.fromCharCode(55296|P>>10,56320|1023&P)}else Q+=String.fromCharCode(b)}}function Zl(m,C,Q){if(Q===void 0&&(Q=2147483647),Q<4)return 0;for(var b=C,P=b+Q-4,oe=0;oe<m.length;++oe){var se=m.charCodeAt(oe);if(se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&m.charCodeAt(++oe)),r[C>>2]=se,(C+=4)+4>P)break}return r[C>>2]=0,C-b}function jl(m){for(var C=0,Q=0;Q<m.length;++Q){var b=m.charCodeAt(Q);b>=55296&&b<=57343&&++Q,C+=4}return C}function Xl(m){var C=_o(m)+1,Q=Po(C);return Q&&qo(m,i,Q,C),Q}function $l(m){var C=_o(m)+1,Q=Oo(C);return qo(m,i,Q,C),Q}function ec(m){return m}function tc(){var m,C=function(){var b=Error();if(!b.stack){try{throw Error(0)}catch(P){b=P}if(!b.stack)return"(no stack trace available)"}return b.stack.toString()}();return I.extraStackTrace&&(C+=`
`+I.extraStackTrace()),(m=C).replace(/__Z[\w\d_]+/g,function(Q){var b,P=b=Q;return Q===P?Q:Q+" ["+P+"]"})}function Pn(m,C){return m%C>0&&(m+=C-m%C),m}function Yi(m){I.buffer=n=m}function On(){I.HEAP8=i=new Int8Array(n),I.HEAP16=A=new Int16Array(n),I.HEAP32=r=new Int32Array(n),I.HEAPU8=s=new Uint8Array(n),I.HEAPU16=a=new Uint16Array(n),I.HEAPU32=l=new Uint32Array(n),I.HEAPF32=u=new Float32Array(n),I.HEAPF64=c=new Float64Array(n)}function Ji(){var m=I.usingWasm?65536:16777216,C=2147483648-m;if(r[S>>2]>C)return!1;var Q=be;for(be=Math.max(be,16777216);be<r[S>>2];)be=be<=536870912?Pn(2*be,m):Math.min(Pn((3*be+2147483648)/4,m),C);var b=I.reallocBuffer(be);return b&&b.byteLength==be?(Yi(b),On(),!0):(be=Q,!1)}g=d=E=f=w=y=S=0,p=!1,I.reallocBuffer||(I.reallocBuffer=function(m){try{if(ArrayBuffer.transfer)C=ArrayBuffer.transfer(n,m);else{var C,Q=i;C=new ArrayBuffer(m),new Int8Array(C).set(Q)}}catch{return!1}return!!Ha(C)&&C});try{(D=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch{D=function(C){return C.byteLength}}var Vn=I.TOTAL_STACK||5242880,be=I.TOTAL_MEMORY||16777216;function La(){return be}function ho(m){for(;m.length>0;){var C=m.shift();if(typeof C=="function"){C();continue}var Q=C.func;typeof Q=="number"?C.arg===void 0?I.dynCall_v(Q):I.dynCall_vi(Q,C.arg):Q(C.arg===void 0?null:C.arg)}}be<Vn&&H("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+be+"! (TOTAL_STACK="+Vn+")"),I.buffer?n=I.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(I.wasmMemory=new WebAssembly.Memory({initial:be/65536}),n=I.wasmMemory.buffer):n=new ArrayBuffer(be),I.buffer=n),On();var Ki=[],Yn=[],zi=[],Wi=[],Zi=[],Jn=!1,Ta=!1;function Ga(m){Ki.unshift(m)}function oc(m){Yn.unshift(m)}function nc(m){zi.unshift(m)}function ic(m){Wi.unshift(m)}function Na(m){Zi.unshift(m)}function sc(m,C,Q){var b,P;Ne("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),Q&&(b=i[P=C+_o(m)]),Oi(m,C,1/0),Q&&(i[P]=b)}function Ac(m,C,Q){return m>=0?m:C<=32?2*Math.abs(1<<C-1)+m:Math.pow(2,C)+m}function rc(m,C,Q){if(m<=0)return m;var b=C<=32?Math.abs(1<<C-1):Math.pow(2,C-1);return m>=b&&(C<=32||m>b)&&(m=-2*b+m),m}var Ua=Math.abs,qa=Math.ceil,ji=Math.floor,_a=Math.min,Nt=0,Kn=null,Io=null;function ac(m){return m}I.preloadedImages={},I.preloadedAudios={};var Xi="data:application/octet-stream;base64,";function Ho(m){return String.prototype.startsWith?m.startsWith(Xi):m.indexOf(Xi)===0}(function(){var C="main.wast",Q="main.wasm",b="main.temp.asm.js";Ho(C)||(C=ee(C)),Ho(Q)||(Q=ee(Q)),Ho(b)||(b=ee(b));var P={global:null,env:null,asm2wasm:lt,parent:I},oe=null;function se(he){return he}function J(){try{if(I.wasmBinary)return new Uint8Array(I.wasmBinary);if(I.readBinary)return I.readBinary(Q);throw"both async and sync fetching of the wasm failed"}catch(he){mt(he)}}I.asmPreload=I.asm;var ve=I.reallocBuffer,me=function(he){he=Pn(he,I.usingWasm?65536:16777216);var te=I.buffer.byteLength;if(I.usingWasm)try{var Ue=I.wasmMemory.grow((he-te)/65536);return Ue!==-1?I.buffer=I.wasmMemory.buffer:null}catch{return null}};I.reallocBuffer=function(he){return pe==="asmjs"?ve(he):me(he)};var pe="";I.asm=function(he,te,Ue){var ze;if(!(te=ze=te).table){var We,Ze=I.wasmTableSize;Ze===void 0&&(Ze=1024);var Ut=I.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?Ut!==void 0?te.table=new WebAssembly.Table({initial:Ze,maximum:Ut,element:"anyfunc"}):te.table=new WebAssembly.Table({initial:Ze,element:"anyfunc"}):te.table=Array(Ze),I.wasmTable=te.table}return te.memoryBase||(te.memoryBase=I.STATIC_BASE),te.tableBase||(te.tableBase=0),We=function(mo,$t,jn){if(typeof WebAssembly!="object")return H("no native wasm support detected"),!1;if(!(I.wasmMemory instanceof WebAssembly.Memory))return H("no native wasm Memory in use"),!1;function Vo(ct,gt){if((oe=ct.exports).memory){var po,Xn,ts;po=oe.memory,Xn=I.buffer,po.byteLength<Xn.byteLength&&H("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),ts=new Int8Array(Xn),new Int8Array(po).set(ts),Yi(po),On()}I.asm=oe,I.usingWasm=!0,function(uc){if(Nt--,I.monitorRunDependencies&&I.monitorRunDependencies(Nt),Nt==0&&(Kn!==null&&(clearInterval(Kn),Kn=null),Io)){var Pa=Io;Io=null,Pa()}}("wasm-instantiate")}if($t.memory=I.wasmMemory,P.global={NaN:NaN,Infinity:1/0},P["global.Math"]=Math,P.env=$t,Nt++,I.monitorRunDependencies&&I.monitorRunDependencies(Nt),I.instantiateWasm)try{return I.instantiateWasm(P,Vo)}catch(ct){return H("Module.instantiateWasm callback failed with error: "+ct),!1}function eo(ct){Vo(ct.instance,ct.module)}function es(ct){(!I.wasmBinary&&(F||K)&&typeof fetch=="function"?fetch(Q,{credentials:"same-origin"}).then(function(gt){if(!gt.ok)throw"failed to load wasm binary file at '"+Q+"'";return gt.arrayBuffer()}).catch(function(){return J()}):new Promise(function(gt,po){gt(J())})).then(function(gt){return WebAssembly.instantiate(gt,P)}).then(ct).catch(function(gt){H("failed to asynchronously prepare wasm: "+gt),mt(gt)})}return I.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||Ho(Q)||typeof fetch!="function"?es(eo):WebAssembly.instantiateStreaming(fetch(Q,{credentials:"same-origin"}),P).then(eo).catch(function(ct){H("wasm streaming compile failed: "+ct),H("falling back to ArrayBuffer instantiation"),es(eo)}),{}}(he,te,Ue),yt(We,"no binaryen method succeeded."),We},I.asm})(),d=(g=1024)+4816,Yn.push(),I.STATIC_BASE=g,I.STATIC_BUMP=4816;var Je=d;function lc(m){i[Je]=i[m],i[Je+1]=i[m+1],i[Je+2]=i[m+2],i[Je+3]=i[m+3]}function cc(m){i[Je]=i[m],i[Je+1]=i[m+1],i[Je+2]=i[m+2],i[Je+3]=i[m+3],i[Je+4]=i[m+4],i[Je+5]=i[m+5],i[Je+6]=i[m+6],i[Je+7]=i[m+7]}function gc(m,C,Q){var b=Q>0?Q:_o(m)+1,P=Array(b),oe=qo(m,P,0,P.length);return C&&(P.length=oe),P}function dc(m){for(var C=[],Q=0;Q<m.length;Q++){var b=m[Q];b>255&&(b&=255),C.push(String.fromCharCode(b))}return C.join("")}d+=16,S=ne(4),w=(E=f=Ce(d))+Vn,y=Ce(w),r[S>>2]=y,p=!0,I.wasmTableSize=4,I.wasmMaxTableSize=4,I.asmGlobalArg={},I.asmLibraryArg={abort:mt,assert:yt,enlargeMemory:Ji,getTotalMemory:La,abortOnCannotGrowMemory:function(){mt("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+be+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_iii:function(C,Q,b){var P=Wn();try{return I.dynCall_iii(C,Q,b)}catch(oe){if(zn(P),typeof oe!="number"&&oe!=="longjmp")throw oe;I.setThrew(1,0)}},___assert_fail:function(C,Q,b,P){mt("Assertion failed: "+Uo(C)+", at: "+[Q?Uo(Q):"unknown filename",b,P?Uo(P):"unknown function"])},___setErrNo:function(C){return I.___errno_location&&(r[I.___errno_location()>>2]=C),C},_abort:function(){I.abort()},_emscripten_memcpy_big:function(C,Q,b){return s.set(s.subarray(Q,Q+b),C),C},_llvm_floor_f64:ji,DYNAMICTOP_PTR:S,tempDoublePtr:Je,ABORT:No,STACKTOP:f,STACK_MAX:w};var $i=I.asm(I.asmGlobalArg,I.asmLibraryArg,n);I.asm=$i,I.___errno_location=function(){return I.asm.___errno_location.apply(null,arguments)};var Ha=I._emscripten_replace_memory=function(){return I.asm._emscripten_replace_memory.apply(null,arguments)};I._free=function(){return I.asm._free.apply(null,arguments)};var Po=I._malloc=function(){return I.asm._malloc.apply(null,arguments)};I._memcpy=function(){return I.asm._memcpy.apply(null,arguments)},I._memset=function(){return I.asm._memset.apply(null,arguments)},I._sbrk=function(){return I.asm._sbrk.apply(null,arguments)},I._stb_vorbis_js_channels=function(){return I.asm._stb_vorbis_js_channels.apply(null,arguments)},I._stb_vorbis_js_close=function(){return I.asm._stb_vorbis_js_close.apply(null,arguments)},I._stb_vorbis_js_decode=function(){return I.asm._stb_vorbis_js_decode.apply(null,arguments)},I._stb_vorbis_js_open=function(){return I.asm._stb_vorbis_js_open.apply(null,arguments)},I._stb_vorbis_js_sample_rate=function(){return I.asm._stb_vorbis_js_sample_rate.apply(null,arguments)},I.establishStackSpace=function(){return I.asm.establishStackSpace.apply(null,arguments)},I.getTempRet0=function(){return I.asm.getTempRet0.apply(null,arguments)},I.runPostSets=function(){return I.asm.runPostSets.apply(null,arguments)},I.setTempRet0=function(){return I.asm.setTempRet0.apply(null,arguments)},I.setThrew=function(){return I.asm.setThrew.apply(null,arguments)};var Oo=I.stackAlloc=function(){return I.asm.stackAlloc.apply(null,arguments)},zn=I.stackRestore=function(){return I.asm.stackRestore.apply(null,arguments)},Wn=I.stackSave=function(){return I.asm.stackSave.apply(null,arguments)};function uo(m){this.name="ExitStatus",this.message="Program terminated with exit("+m+")",this.status=m}function Zn(m){m=m||I.arguments,!(Nt>0)&&(function(){if(I.preRun)for(typeof I.preRun=="function"&&(I.preRun=[I.preRun]);I.preRun.length;)Ga(I.preRun.shift());ho(Ki)}(),!(Nt>0)&&(I.calledRun||(I.setStatus?(I.setStatus("Running..."),setTimeout(function(){setTimeout(function(){I.setStatus("")},1),C()},1)):C())));function C(){!I.calledRun&&(I.calledRun=!0,No||(Jn||(Jn=!0,ho(Yn)),ho(zi),I.onRuntimeInitialized&&I.onRuntimeInitialized(),function(){if(I.postRun)for(typeof I.postRun=="function"&&(I.postRun=[I.postRun]);I.postRun.length;)Na(I.postRun.shift());ho(Zi)}()))}}function hc(m,C){(!C||!I.noExitRuntime||m!==0)&&(I.noExitRuntime||(No=!0,Ui=m,f=k,ho(Wi),Ta=!0,I.onExit&&I.onExit(m)),I.quit(m,new uo(m)))}function mt(m){throw I.onAbort&&I.onAbort(m),m!==void 0?(G(m),H(m),m=JSON.stringify(m)):m="",No=!0,Ui=1,"abort("+m+"). Build with -s ASSERTIONS=1 for more info."}if(I.dynCall_iii=function(){return I.asm.dynCall_iii.apply(null,arguments)},I.asm=$i,I.ccall=Hi,I.cwrap=function(C,Q,b,P){var oe=(b=b||[]).every(function(se){return se==="number"});return Q!=="string"&&oe&&!P?qi(C):function(){return Hi(C,Q,b,arguments,P)}},uo.prototype=Error(),uo.prototype.constructor=uo,Io=function m(){I.calledRun||Zn(),I.calledRun||(Io=m)},I.run=Zn,I.abort=mt,I.preInit)for(typeof I.preInit=="function"&&(I.preInit=[I.preInit]);I.preInit.length>0;)I.preInit.pop()();I.noExitRuntime=!0,Zn(),I.onRuntimeInitialized=()=>{Ca=!0,Ea()},Tt.decode=function(m){return function(Q){if(!Ca)throw Error("Not initialized");var b={};function P($t){return new Int32Array(I.HEAPU8.buffer,$t,1)[0]}function oe($t,jn){var Vo=new ArrayBuffer(jn*Float32Array.BYTES_PER_ELEMENT),eo=new Float32Array(Vo);return eo.set(new Float32Array(I.HEAPU8.buffer,$t,jn)),eo}b.open=I.cwrap("stb_vorbis_js_open","number",[]),b.close=I.cwrap("stb_vorbis_js_close","void",["number"]),b.channels=I.cwrap("stb_vorbis_js_channels","number",["number"]),b.sampleRate=I.cwrap("stb_vorbis_js_sample_rate","number",["number"]),b.decode=I.cwrap("stb_vorbis_js_decode","number",["number","number","number","number","number"]);var se,J,ve,me,pe=b.open(),he=(se=Q,J=Q.byteLength,ve=I._malloc(J),(me=new Uint8Array(I.HEAPU8.buffer,ve,J)).set(new Uint8Array(se,0,J)),me),te=I._malloc(4),Ue=I._malloc(4),ze=b.decode(pe,he.byteOffset,he.byteLength,te,Ue);if(I._free(he.byteOffset),ze<0)throw b.close(pe),I._free(te),Error("stbvorbis decode failed: "+ze);for(var We=b.channels(pe),Ze=Array(We),Ut=new Int32Array(I.HEAPU32.buffer,P(te),We),je=0;je<We;je++)Ze[je]=oe(Ut[je],ze),I._free(Ut[je]);var mo=b.sampleRate(pe);return b.close(pe),I._free(P(te)),I._free(te),{data:Ze,sampleRate:mo,eof:!0,error:null}}(m)}})();var Si=class extends Mt{constructor(e,t,n,i,s,A,a,r,l,u,c,g,d){super(e,A,a,r,l,u,i-t/2,s-t/2),this.sampleName=e,this.sampleStartIndex=t,this.sampleEndIndex=n,this.isSampleLoaded=!1,this.sampleID=g,this.sampleLength=this.sampleEndIndex-this.sampleStartIndex,this.sampleDataArray=c,this.sampleData=new Float32Array(0),this.isCompressed&&(this.sampleLoopStartIndex+=this.sampleStartIndex/2,this.sampleLoopEndIndex+=this.sampleStartIndex/2,this.sampleLength=99999999),this.isDataRaw=d}getRawData(){let e=this.sampleDataArray;if(this.isCompressed){if(this.compressedData)return this.compressedData;let t=e.currentIndex;return e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t)}else{this.isDataRaw||super.getRawData();let t=e.currentIndex;return e.slice(t+this.sampleStartIndex,t+this.sampleEndIndex)}}decodeVorbis(){if(this.sampleLength<1)return;let e=this.sampleDataArray,t=e.currentIndex,n=e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t);this.sampleData=new Float32Array(0);try{let i=Tt.decode(n.buffer);this.sampleData=i.data[0]}catch(i){Z(`Error decoding sample ${this.sampleName}: ${i}`),this.sampleData=new Float32Array(this.sampleLoopEndIndex+1)}}getAudioData(){return this.isSampleLoaded?this.sampleData:this.sampleLength<1?new Float32Array(1):this.isCompressed?(this.decodeVorbis(),this.isSampleLoaded=!0,this.sampleData):this.isDataRaw?this.loadUncompressedData():this.getUncompressedReadyData()}loadUncompressedData(){if(this.isCompressed)return Z("Trying to load a compressed sample via loadUncompressedData()... aborting!"),new Float32Array(0);let e=new Float32Array(this.sampleLength/2),t=this.sampleDataArray.currentIndex,n=new Int16Array(this.sampleDataArray.slice(t+this.sampleStartIndex,t+this.sampleEndIndex).buffer);for(let i=0;i<n.length;i++)e[i]=n[i]/32768;return this.sampleData=e,this.isSampleLoaded=!0,e}getUncompressedReadyData(){let e=this.sampleDataArray.slice(this.sampleStartIndex/2,this.sampleEndIndex/2);return this.sampleData=e,this.isSampleLoaded=!0,e}};function fa(o,e,t=!0){let n=[],i=0;for(;o.chunkData.length>o.chunkData.currentIndex;){let s=kl(i,o.chunkData,e,t);n.push(s),i++}return n.length>1&&n.pop(),n}function kl(o,e,t,n){let i=ce(e,20),s=L(e,4)*2,A=L(e,4)*2,a=L(e,4),r=L(e,4),l=L(e,4),u=e[e.currentIndex++];u===255&&(u=60);let c=Ls(e[e.currentIndex++]),g=L(e,2),d=L(e,2);return new Si(i,s,A,a,r,l,u,c,g,d,t,o,n)}var wi=class extends U{constructor(e){super();let t=e.currentIndex;this.generatorType=e[t+1]<<8|e[t],this.generatorValue=wt(e[t+2],e[t+3]),e.currentIndex+=4}};function Di(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(new wi(o.chunkData));return e.length>1&&e.pop(),e}var ki=class extends Ft{constructor(e){super(),this.instrumentName=ce(e.chunkData,20).trim(),this.instrumentZoneIndex=L(e.chunkData,2),this.instrumentZonesAmount=0}getInstrumentZones(e,t){this.instrumentZonesAmount=e;for(let n=this.instrumentZoneIndex;n<this.instrumentZonesAmount+this.instrumentZoneIndex;n++)this.instrumentZones.push(t[n])}};function Ba(o,e){let t=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let n=new ki(o);if(t.length>0){let i=n.instrumentZoneIndex-t[t.length-1].instrumentZoneIndex;t[t.length-1].getInstrumentZones(i,e)}t.push(n)}return t.length>1&&t.pop(),t}var bi=class extends Ge{constructor(e){super(),this.generatorZoneStartIndex=L(e,2),this.modulatorZoneStartIndex=L(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getSample(e){let t=this.generators.find(n=>n.generatorType===h.sampleID);t&&(this.sample=e[t.generatorValue],this.isGlobal=!1,this.sample.useCount++)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===h.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===h.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function Qa(o,e,t,n){let i=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let s=new bi(o.chunkData);if(i.length>0){let A=s.modulatorZoneStartIndex-i[i.length-1].modulatorZoneStartIndex,a=s.generatorZoneStartIndex-i[i.length-1].generatorZoneStartIndex;i[i.length-1].setZoneSize(A,a),i[i.length-1].getGenerators(e),i[i.length-1].getModulators(t),i[i.length-1].getSample(n),i[i.length-1].getKeyRange(),i[i.length-1].getVelRange()}i.push(s)}return i.length>1&&i.pop(),i}var vi=class extends xt{constructor(e){super(),this.generatorZoneStartIndex=L(e,2),this.modulatorZoneStartIndex=L(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getInstrument(e){let t=this.generators.find(n=>n.generatorType===h.instrument);t&&(this.instrument=e[t.generatorValue],this.instrument.addUseCount(),this.isGlobal=!1)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===h.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===h.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function ya(o,e,t,n){let i=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let s=new vi(o.chunkData);if(i.length>0){let A=s.modulatorZoneStartIndex-i[i.length-1].modulatorZoneStartIndex,a=s.generatorZoneStartIndex-i[i.length-1].generatorZoneStartIndex;i[i.length-1].setZoneSize(A,a),i[i.length-1].getGenerators(e),i[i.length-1].getModulators(t),i[i.length-1].getInstrument(n),i[i.length-1].getKeyRange(),i[i.length-1].getVelRange()}i.push(s)}return i.length>1&&i.pop(),i}var xi=class extends Rt{constructor(e,t){super(t),this.presetName=ce(e.chunkData,20).trim().replace(/\d{3}:\d{3}/,""),this.program=L(e.chunkData,2),this.bank=L(e.chunkData,2),this.presetZoneStartIndex=L(e.chunkData,2),this.library=L(e.chunkData,4),this.genre=L(e.chunkData,4),this.morphology=L(e.chunkData,4),this.presetZonesAmount=0}getPresetZones(e,t){this.presetZonesAmount=e;for(let n=this.presetZoneStartIndex;n<this.presetZonesAmount+this.presetZoneStartIndex;n++)this.presetZones.push(t[n])}};function Sa(o,e,t){let n=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let i=new xi(o,t);if(n.length>0){let s=i.presetZoneStartIndex-n[n.length-1].presetZoneStartIndex;n[n.length-1].getPresetZones(s,e)}n.push(i)}return n.length>1&&n.pop(),n}var Mi=class extends j{constructor(e){super({srcEnum:L(e,2),dest:L(e,2),amt:wt(e[e.currentIndex++],e[e.currentIndex++]),secSrcEnum:L(e,2),transform:L(e,2)})}};function Nn(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(new Mi(o.chunkData));return e}var Un=class extends Lt{constructor(e,t=!0){super(),t&&console.warn("Using the constructor directly is deprecated. Use loadSoundFont instead."),this.dataArray=new R(e),qe("%cParsing SoundFont...",B.info),this.dataArray||(X(),this.parsingError("No data provided!"));let n=Ae(this.dataArray,!1);this.verifyHeader(n,"riff");let i=ce(this.dataArray,4).toLowerCase();if(i!=="sfbk"&&i!=="sfpk")throw X(),new SyntaxError(`Invalid soundFont! Expected "sfbk" or "sfpk" got "${i}"`);let s=i==="sfpk",A=Ae(this.dataArray);for(this.verifyHeader(A,"list"),ce(A.chunkData,4);A.chunkData.length>A.chunkData.currentIndex;){let W=Ae(A.chunkData),_;switch(W.header.toLowerCase()){case"ifil":case"iver":_=`${L(W.chunkData,2)}.${L(W.chunkData,2)}`,this.soundFontInfo[W.header]=_;break;case"icmt":_=ce(W.chunkData,W.chunkData.length,void 0,!1),this.soundFontInfo[W.header]=_;break;case"dmod":let Y=Nn(W);Y.pop(),_=`Modulators: ${Y.length}`;let ee=this.defaultModulators;this.defaultModulators=Y,this.defaultModulators.push(...ee.filter(G=>!this.defaultModulators.find(H=>j.isIdentical(G,H)))),this.soundFontInfo[W.header]=W.chunkData;break;default:_=ce(W.chunkData,W.chunkData.length),this.soundFontInfo[W.header]=_}x(`%c"${W.header}": %c"${_}"`,B.info,B.recognized)}let a=Ae(this.dataArray,!1);this.verifyHeader(a,"list"),this.verifyText(ce(this.dataArray,4),"sdta"),x("%cVerifying smpl chunk...",B.warn);let r=Ae(this.dataArray,!1);this.verifyHeader(r,"smpl");let l;if(s){x("%cSF2Pack detected, attempting to decode the smpl chunk...",B.info);try{l=Tt.decode(this.dataArray.buffer.slice(this.dataArray.currentIndex,this.dataArray.currentIndex+a.size-12)).data[0]}catch(W){throw X(),new Error(`SF2Pack Ogg Vorbis decode error: ${W}`)}x(`%cDecoded the smpl chunk! Length: %c${l.length}`,B.info,B.value)}else l=this.dataArray,this.sampleDataStartIndex=this.dataArray.currentIndex;x(`%cSkipping sample chunk, length: %c${a.size-12}`,B.info,B.value),this.dataArray.currentIndex+=a.size-12,x("%cLoading preset data chunk...",B.warn);let u=Ae(this.dataArray);this.verifyHeader(u,"list"),ce(u.chunkData,4);let c=Ae(u.chunkData);this.verifyHeader(c,"phdr");let g=Ae(u.chunkData);this.verifyHeader(g,"pbag");let d=Ae(u.chunkData);this.verifyHeader(d,"pmod");let p=Ae(u.chunkData);this.verifyHeader(p,"pgen");let E=Ae(u.chunkData);this.verifyHeader(E,"inst");let f=Ae(u.chunkData);this.verifyHeader(f,"ibag");let w=Ae(u.chunkData);this.verifyHeader(w,"imod");let y=Ae(u.chunkData);this.verifyHeader(y,"igen");let S=Ae(u.chunkData);this.verifyHeader(S,"shdr"),this.dataArray.currentIndex=this.sampleDataStartIndex,this.samples.push(...fa(S,l,!s));let D=Di(y),k=Nn(w),I=Qa(f,D,k,this.samples);this.instruments=Ba(E,I);let v=Di(p),F=Nn(d),K=ya(g,v,F,this.instruments);this.presets.push(...Sa(c,K,this.defaultModulators)),this.presets.sort((W,_)=>W.program-_.program+(W.bank-_.bank)),x(`%cParsing finished! %c"${this.soundFontInfo.INAM}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info),X(),s&&delete this.dataArray}verifyHeader(e,t){e.header.toLowerCase()!==t.toLowerCase()&&(X(),this.parsingError(`Invalid chunk header! Expected "${t.toLowerCase()}" got "${e.header.toLowerCase()}"`))}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(X(),this.parsingError(`Invalid FourCC: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"\``))}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};function Qt(o){let e=o.slice(8,12),t=new R(e);return ce(t,4,void 0,!1).toLowerCase()==="dls "?new Bt(o):new Un(o,!1)}async function wa(){let o="locale.exportAudio.formats.formats.soundfont.options.";re(this.localeManager.getLocaleString(o+"title"),[{type:"toggle",translatePathTitle:o+"trim",attributes:{"trim-toggle":"1",checked:"checked"}},{type:"toggle",translatePathTitle:o+"compress",attributes:{"compress-toggle":"1"}},{type:"range",translatePathTitle:o+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked,n=e.div.querySelector("input[compress-toggle='1']").checked,i=parseInt(e.div.querySelector("input[type='range']").value)/10;ie(e.id),qe("%cExporting minified soundfont...",B.info);let s=await this.seq.getMIDI(),A=Qt(s.embeddedSoundFont||this.soundFont);Dt(s,await this.synth.getSynthesizerSnapshot()),t&&lo(A,s);let a=A.write({compress:n,compressionQuality:i,compressionFunction:await this.getVorbisEncodeFunction()}),r=new Blob([a.buffer],{type:"audio/soundfont"}),l=A.soundFontInfo.ifil.split(".")[0]==="3"?"sf3":"sf2";this.saveBlob(r,`${A.soundFontInfo.INAM||"unnamed"}.${l}`),X()}}],99999999,!0,this.localeManager)}async function Da(){let o="locale.exportAudio.formats.";re(this.localeManager.getLocaleString(o+"title"),[{type:"button",translatePathTitle:o+"formats.wav.button",onClick:e=>{ie(e.id),this._exportAudioData()}},{type:"button",translatePathTitle:o+"formats.midi.button",onClick:e=>{ie(e.id),this.exportMidi()}},{type:"button",translatePathTitle:o+"formats.soundfont.button",onClick:e=>{ie(e.id);try{this._exportSoundfont()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:o+"formats.dls.button",onClick:e=>{ie(e.id);try{this._exportDLS()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:o+"formats.rmidi.button",onClick:e=>{ie(e.id);try{this._exportRMIDI()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}}],999999,!0,this.localeManager,{display:"flex",flexWrap:"wrap",justifyContent:"center"})}async function ka(){let o=(c,g,d)=>this.seq.midiData.RMIDInfo?.[c]===void 0?g:d.decode(this.seq.midiData.RMIDInfo?.[c]).replace(/\0$/,""),e=o("IENC","ascii",new TextDecoder),t=new TextDecoder(e),n=o("IPRD","",t),i=o("IART","",t),s=o("IGNR","",t),A=o("ICMT","Created using SpessaSynth: https://spessasus.github.io/SpessaSynth",t),a="locale.exportAudio.formats.formats.rmidi.options.",r="locale.exportAudio.formats.metadata.",u=re(this.localeManager.getLocaleString(a+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(a+"description"),attributes:{style:"max-width: 30ch; font-style: italic"}},{type:"toggle",translatePathTitle:a+"compress",attributes:{"compress-toggle":"1",checked:"true"}},{type:"range",translatePathTitle:a+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"input",translatePathTitle:r+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:r+"album",attributes:{value:n,name:"album",type:"text"}},{type:"input",translatePathTitle:r+"artist",attributes:{value:i,name:"artist",type:"text"}},{type:"input",translatePathTitle:r+"genre",attributes:{value:s,name:"genre",type:"text"}},{type:"input",translatePathTitle:r+"comment",attributes:{value:A,name:"comment",type:"text"}},{type:"file",translatePathTitle:r+"albumCover",attributes:{value:this.seq.midiData.RMIDInfo?.IPIC!==void 0?this.seq.midiData.RMIDInfo.IPIC:"",name:"cover",accept:"image/*"}},{type:"input",translatePathTitle:a+"bankOffset",attributes:{value:this.seq.midiData.bankOffset,name:"bank_offset",type:"number"}},{type:"toggle",translatePathTitle:a+"adjust",attributes:{name:"adjust",checked:"checked"}},{type:"button",textContent:this.localeManager.getLocaleString(a+"confirm"),onClick:async c=>{let g=c.div.querySelector("input[compress-toggle='1']").checked,d=parseInt(c.div.querySelector("input[type='range']").value)/10,p=c.div.querySelector("input[name='album']").value,E=c.div.querySelector("input[name='artist']").value,f=c.div.querySelector("input[name='song_title']").value,w=c.div.querySelector("input[name='comment']").value,y=c.div.querySelector("input[name='genre']").value,S=parseInt(c.div.querySelector("input[name='bank_offset']").value),D=c.div.querySelector("input[name='adjust']").checked,k=c.div.querySelector("input[type='file']")?.files[0];ie(c.id),Be("%cExporting RMIDI...",B.info);let I="locale.exportAudio.formats.formats.rmidi.progress.",v=re(this.localeManager.getLocaleString(I+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(I+"loading"),attributes:{class:"export_rmidi_message"}}],9999999,!1);await new Promise(H=>setTimeout(H,500));let F=v.div.getElementsByClassName("export_rmidi_message")[0],K=await this.seq.getMIDI(),W=Qt(K.embeddedSoundFont||this.soundFont);F.textContent=this.localeManager.getLocaleString(I+"modifyingMIDI"),await new Promise(H=>setTimeout(H,75));try{Dt(K,await this.synth.getSynthesizerSnapshot())}catch(H){Z("Failed to modify MIDI:",H)}F.textContent=this.localeManager.getLocaleString(I+"modifyingSoundfont"),await new Promise(H=>setTimeout(H,75)),lo(W,K);let _=W.write({compress:g,compressionQuality:d,compressionFunction:await this.getVorbisEncodeFunction()});F.textContent=this.localeManager.getLocaleString(I+"saving"),await new Promise(H=>setTimeout(H,75));let Y;k?.type.split("/")[0]==="image"?Y=await k.arrayBuffer():K.RMIDInfo?.IPIC!==void 0&&(Y=K.RMIDInfo.IPIC.buffer);let ee=dn(_,K,W,S,this.seqUI.encoding,{name:f,comment:w,engineer:W.soundFontInfo.IENG,picture:Y,album:p.length>0?p:void 0,artist:E.length>0?E:void 0,genre:y.length>0?y:void 0,midiEncoding:this.seqUI.encoding},D),G=new Blob([ee.buffer],{type:"audio/rmid"});this.saveBlob(G,`${f||"unnamed_song"}.rmi`),F.textContent=this.localeManager.getLocaleString(I+"done"),ie(v.id),X()}}],9999999,!0,this.localeManager).div.querySelector("input[type='file']");u.oninput=()=>{u.files[0]&&(u.parentElement.firstChild.textContent=u.files[0].name)}}var ba="synthetizer/worklet_processor.min.js";var qn=class{constructor(e,t){let n=document.getElementsByClassName("drop_prompt")[0];document.body.addEventListener("dragover",i=>{i.preventDefault(),n.classList.remove("hidden")}),document.body.addEventListener("dragend",()=>{n.classList.add("hidden")}),document.body.addEventListener("drop",async i=>{if(i.preventDefault(),n.classList.add("hidden"),!i.dataTransfer.files[0])return;let s=[];for(let A of i.dataTransfer.files){let a=A.name,r=await A.arrayBuffer(),l=r.slice(0,4),u=new TextDecoder;if(u.decode(l)==="RIFF"){let c=r.slice(8,12);if(u.decode(c)==="RMID"){s.push({binary:r,altName:a});continue}t(r);continue}s.push({binary:r,altName:a})}e(s)})}};async function va(){let o="locale.exportAudio.formats.formats.dls.warning.";re(this.localeManager.getLocaleString(o+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(o+"message"),attributes:{style:"font-weight: bold"}},{type:"toggle",translatePathTitle:"locale.exportAudio.formats.formats.soundfont.options.trim",attributes:{"trim-toggle":"1"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"details"),onClick:()=>{window.open("https://github.com/spessasus/SpessaSynth/wiki/DLS-Conversion-Problem")}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked;ie(e.id),qe("%cExporting DLS...",B.info);let n=await this.seq.getMIDI(),i=Qt(n.embeddedSoundFont||this.soundFont);Dt(n,await this.synth.getSynthesizerSnapshot()),t&&lo(i,n);try{let s=i.writeDLS(),A=new Blob([s.buffer],{type:"audio/dls"});this.saveBlob(A,`${i.soundFontInfo.INAM||"unnamed"}.dls`)}catch(s){Z("Failed to export DLS: ",s),re(this.localeManager.getLocaleString("locale.error"),[{type:"text",textContent:s,attributes:{style:"font-weight: bold; color: red"}}])}X()}}],99999999,!0,this.localeManager)}document.body.classList.add("load");var bl=!1,rt=class{channelColors=["rgba(255, 99, 71, 1)","rgba(255, 165, 0, 1)","rgba(255, 215, 0, 1)","rgba(50, 205, 50, 1)","rgba(60, 179, 113, 1)","rgba(0, 128, 0, 1)","rgba(0, 191, 255, 1)","rgba(65, 105, 225, 1)","rgba(138, 43, 226, 1)","rgba(50, 120, 125, 1)","rgba(255, 0, 255, 1)","rgba(255, 20, 147, 1)","rgba(218, 112, 214, 1)","rgba(240, 128, 128, 1)","rgba(255, 192, 203, 1)","rgba(255, 255, 0, 1)"];sfError;compressionFunction=void 0;constructor(e,t,n,i=bl){this.localeManager=n,this.context=e,this.enableDebug=i,this.isExporting=!1;let s;this.ready=new Promise(A=>s=A),this.initializeContext(e,t).then(()=>{s()})}async getVorbisEncodeFunction(){return this.compressionFunction!==void 0?this.compressionFunction:(this.compressionFunction=(await import("../externals/libvorbis/encode_vorbis.js")).encodeVorbis,this.compressionFunction)}saveBlob(e,t){let n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t,i.click(),x(i)}async initializeContext(e,t){if(!e.audioWorklet)throw alert("Audio worklet is not supported on your browser. Sorry!"),new Error("Audio worklet is not supported");for(let g of document.querySelectorAll("*[translate-path]"))this.localeManager.bindObjectProperty(g,"innerText",g.getAttribute("translate-path"));for(let g of document.querySelectorAll("*[translate-path-title]"))this.localeManager.bindObjectProperty(g,"innerText",g.getAttribute("translate-path-title")+".title"),this.localeManager.bindObjectProperty(g,"title",g.getAttribute("translate-path-title")+".description");this.soundFont=t;let i=this.enableDebug?"synthetizer/worklet_system/worklet_processor.js":ba;this.enableDebug&&console.warn("DEBUG ENABLED! DEBUGGING ENABLED!!");let s=window.isLocalEdition?"../../../spessasynth_lib/":"../../spessasynth_lib/";this.workletPath=s+i,e.audioWorklet&&await e.audioWorklet.addModule(new URL(this.workletPath,import.meta.url));let A=new URL(s+"synthetizer/audio_effects/impulse_response_2.flac",import.meta.url),r=await(await fetch(A)).arrayBuffer();this.impulseResponseRaw=r,this.impulseResponse=await e.decodeAudioData(r.slice(0,r.byteLength)),this.audioDelay=new DelayNode(e,{delayTime:0}),this.audioDelay.connect(e.destination),this.synth=new no(this.audioDelay,this.soundFont,void 0,void 0,{chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:this.impulseResponse,reverbEnabled:!0,audioNodeCreators:void 0}),this.synth.eventHandler.addEvent("soundfonterror","manager-sf-error",g=>{this.sfError&&this.sfError(g.message)}),await this.synth.isReady,this.midHandler=new fn,new Bn(this.synth),this.keyboard=new So(this.channelColors,this.synth);let l=document.getElementById("note_canvas");l.width=window.innerWidth*window.devicePixelRatio,l.height=window.innerHeight*window.devicePixelRatio,this.renderer=new Oe(this.channelColors,this.synth,l,this.localeManager,window.SPESSASYNTH_VERSION),this.renderer.render(!0);let u=!1,c=()=>{if(l.width=l.clientWidth*window.devicePixelRatio,l.height=l.clientHeight*window.devicePixelRatio,this.renderer.computeColors(),Pe){if(window.innerWidth/window.innerHeight>1){if(!u){let g=document.getElementById("title_wrapper"),d=document.getElementById("settings_div");u=!0,g.parentElement.insertBefore(d,g)}}else if(u){let g=document.getElementById("title_wrapper"),d=document.getElementById("settings_div");u=!1,g.parentElement.insertBefore(g,d)}}this.renderer.render(!1,!0)};c(),window.addEventListener("resize",c.bind(this)),window.addEventListener("orientationchange",c.bind(this)),Pe&&(this.renderer.keyRange={min:48,max:72},this.keyboard.setKeyRange({min:48,max:72},!1)),this.synthUI=new At(this.channelColors,document.getElementById("synthetizer_controls"),this.localeManager),this.synthUI.connectSynth(this.synth),this.synthUI.connectKeyboard(this.keyboard),this.playerUI=new Dn(document.getElementById("player_info"),this.localeManager),this.seqUI=new Et(document.getElementById("sequencer_controls"),this.localeManager,this.playerUI,this.renderer),this.settingsUI=new Te(document.getElementById("settings_div"),this.synthUI,this.seqUI,this.renderer,this.keyboard,this.midHandler,this.playerUI,this.localeManager,this.audioDelay),new qn(async g=>{if(g.length===0)return;await this.context.resume(),this.play(g);let d=g[0].altName;d>20&&(d=d.substring(0,21)+"..."),document.getElementById("file_upload").textContent=d;let p=document.getElementById("export_button");p.style.display="flex",p.onclick=this.exportSong.bind(this),window.isLocalEdition||(document.getElementById("demo_song").style.display="none")},g=>{this.reloadSf(g)}),document.addEventListener("keydown",g=>{if(!g.ctrlKey)switch(g.key.toLowerCase()){case Ee.cinematicMode:this.seq&&this.seq.pause();let d=window.prompt(`Cinematic mode activated!
 Paste the link to the image for canvas (leave blank to disable)`,"");if(this.seq&&this.seq.play(),d===null)return;l.style.background=`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), center center / cover url("${d}")`,document.getElementsByClassName("top_part")[0].style.display="none",document.getElementsByClassName("bottom_part")[0].style.display="none",document.body.requestFullscreen().then();break;case Ee.videoMode:this.seq&&this.seq.pause();let p=window.prompt(`Video mode!
 Paste the link to the video source (leave blank to disable)
Note: the video will be available in console as 'video'`,"");if(p===null)return;let E=document.createElement("video");E.src=p,E.classList.add("secret_video"),l.parentElement.appendChild(E),E.play(),window.video=E,this.seq&&(E.currentTime=parseFloat(window.prompt("Video offset to sync to midi, in seconds.","0")),E.play(),this.seq.currentTime=0),document.addEventListener("keydown",f=>{f.key===" "&&(E.paused?E.play():E.pause())});break;case Ee.sustainPedal:this.renderer.showHoldPedal=!0,this.renderer.render(!1),this.keyboard.setHoldPedal(!0)}}),document.addEventListener("keyup",g=>{if(!g.ctrlKey)switch(g.key.toLowerCase()){case Ee.sustainPedal:this.renderer.showHoldPedal=!1,this.renderer.render(!1),this.keyboard.setHoldPedal(!1);break;default:break}}),this.renderer.render(!1,!0)}doDLSCheck(){if(window.isLocalEdition!==!0){let e=this.soundFont.slice(8,12);ce(new R(e),4).toLowerCase()==="dls "&&re(this.localeManager.getLocaleString("locale.convertDls.title"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.convertDls.message")},{type:"button",textContent:this.localeManager.getLocaleString("locale.yes"),onClick:n=>{ie(n.id),this.downloadDesfont()}},{type:"button",textContent:this.localeManager.getLocaleString("locale.no"),onClick:n=>{ie(n.id)}}],99999999)}}async reloadSf(e){await this.synth.soundfontManager.reloadManager(e),this.soundFont=e,setTimeout(()=>{this.doDLSCheck()},3e3)}play(e){if(this.synth){if(this.seq){this.seq.loadNewSongList(e),this.seq.play(!0);return}this.seq=new hn(e,this.synth),this.seq.onError=t=>{document.getElementById("title").textContent=t},this.seqUI.connectSequencer(this.seq),this.playerUI.connectSequencer(this.seq),this.renderer.connectSequencer(this.seq),this.settingsUI.addSequencer(this.seq),this.seq.play(!0)}}async downloadDLSRMI(){let e=await this.seq.getMIDI(),t=Qt(this.soundFont),n=dn(t.writeDLS(),e,t),i=new Blob([n.buffer],{type:"audio/rmid"});this.saveBlob(i,`${e.midiName}.rmi`)}downloadDesfont(){let e=Qt(this.soundFont),t=e.write(),n=new Blob([t.buffer],{type:"audio/soundfont"});this.saveBlob(n,`${e.soundFontInfo.INAM}.sf2`)}};rt.prototype.exportSong=Da;rt.prototype._exportAudioData=Nr;rt.prototype._doExportAudioData=Gr;rt.prototype.exportMidi=Ur;rt.prototype._exportSoundfont=wa;rt.prototype._exportDLS=va;rt.prototype._exportRMIDI=ka;var vl=44100,xl="GeneralUserGS.sf3",_n=document.getElementById("title"),Gt=document.getElementById("midi_file_input"),Ml=document.getElementById("sf_file_input"),xa=document.getElementById("demo_song"),Fi=document.getElementById("export_button"),Zt=document.getElementsByClassName("loading")[0],Ye=document.getElementById("loading_message"),Fl=await(await fetch("package.json")).json();window.SPESSASYNTH_VERSION=Fl.version;var Rl="spessasynth-db",Xt="soundFontStore";function Ti(o){let e=indexedDB.open(Rl,1);e.onsuccess=()=>{let t=e.result;o(t)},e.onupgradeneeded=t=>{t.target.result.createObjectStore(Xt,{keyPath:"id"})}}async function Ll(){return await new Promise(o=>{Ti(e=>{let i=e.transaction([Xt],"readonly").objectStore(Xt).get("buffer");i.onerror=s=>{console.error("Database error"),console.error(s),o(void 0)},i.onsuccess=async()=>{let s=i.result;if(!s){o(void 0);return}o(s.data)}})})}function jt(o,e=!0){let t=Zt.getElementsByClassName("loading_icon")[0];t.innerHTML=o,t.style.animation=e?"none":""}async function Ma(o){Ti(e=>{let n=e.transaction([Xt],"readwrite").objectStore(Xt);try{let i=n.put({id:"buffer",data:o});i.onsuccess=()=>{x("SoundFont stored successfully")},i.onerror=s=>{console.error("Error saving soundfont",s)}}catch(i){Z("Failed saving soundfont:",i)}})}async function Tl(o){let e=new kn(o);try{let i=window.AudioContext||window.webkitAudioContext;window.audioContextMain=new i({sampleRate:vl})}catch(i){throw jt(Mo(256)),Ye.textContent=e.getLocaleString("locale.synthInit.noWebAudio"),i}Ye.textContent=e.getLocaleString("locale.synthInit.loadingSoundfont");let t=await Ll(),n=!0;if(t===void 0){Z("Failed to load from db, fetching online instead"),n=!1;let i=document.getElementById("progress_bar"),s=e.getLocaleString("locale.synthInit.loadingBundledSoundfont");Ye.textContent=s,t=await Gl(`soundfonts/${xl}`,A=>{Ye.textContent=`${s} ${A}%`}),i.style.width="0"}else x("Loaded the soundfont from the database succesfully");window.soundFontParser=t,n||(Ye.textContent=e.getLocaleString("locale.synthInit.savingSoundfont"),await Ma(t)),window.audioContextMain.state!=="running"&&document.addEventListener("mousedown",()=>{window.audioContextMain.state!=="running"&&window.audioContextMain.resume().then()}),Ye.textContent=e.getLocaleString("locale.synthInit.startingSynthesizer"),window.manager=new rt(audioContextMain,soundFontParser,e),window.manager.sfError=i=>{jt(Mo(256)),n?(Z("Invalid soundfont in the database. Resetting."),Ti(s=>{let r=s.transaction([Xt],"readwrite").objectStore(Xt).delete("buffer");r.onsuccess=()=>{location.reload()}})):_n.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${i}</pre>`,Ye.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${i}</pre>`},await manager.ready,Gt.files[0]?await Ri(Gt.files):(Gt.onclick=void 0,Gt.onchange=()=>{Gt.files[0]&&Ri(Gt.files).then()}),jt(mi(256)),Ye.textContent=e.getLocaleString("locale.synthInit.done")}async function Gl(o,e){let t=await fetch(o);if(!t.ok)throw _n.innerText="Error downloading soundfont!",t;let n=t.headers.get("content-length"),i=await(await t.body).getReader(),s=!1,A=new Uint8Array(parseInt(n)),a=0;do{let r=await i.read();r.value&&(A.set(r.value,a),a+=r.value.length),s=r.done;let l=Math.round(a/n*100);e(l)}while(!s);return A.buffer}async function Ri(o){xa.style.display="none";let e;o[0].name.length>20?e=o[0].name.substring(0,21)+"...":e=o[0].name,o.length>1&&(e+=` and ${o.length-1} others`),document.getElementById("file_upload").innerText=e,document.getElementById("file_upload").title=o[0].name;let t=[];for(let n of o)t.push({binary:await n.arrayBuffer(),altName:n.name});manager.synth.setLogLevel(!1,!1,!1,!1),manager.seq?manager.seq.loadNewSongList(t):manager.play(t),Fi.style.display="flex",Fi.onclick=window.manager.exportSong.bind(window.manager)}function Nl(o){localStorage.setItem("spessasynth-settings",JSON.stringify(o)),x("saved as",o)}window.saveSettings=Nl;var Go=JSON.parse(localStorage.getItem("spessasynth-settings"));Go!==null&&(window.savedSettings=new Promise(o=>{o(Go)}));var Li;Go&&Go.interface&&Go.interface.language?Li=(await savedSettings).interface.language||navigator.language.split("-")[0].toLowerCase():Li=navigator.language.split("-")[0].toLowerCase();Gt.value="";Gt.focus();Fi.style.display="none";document.getElementById("sf_upload").style.display="none";document.getElementById("file_upload").style.display="none";async function Ul(o){_n.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_songs/"+o);e.name=o,await Ri([e])}Tl(Li).then(()=>{document.getElementById("sf_upload").style.display="flex",document.getElementById("file_upload").style.display="flex",Zt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{Zt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll"),Pe&&window.chrome&&re(window.manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.chromeMobile")}],7)},1e3),Ml.onchange=o=>{if(!o.target.files[0])return;let e=o.target.files[0];window.manager.seq&&window.manager.seq.pause(),document.getElementById("sf_upload").firstElementChild.innerText=e.name,Zt.style.display="",setTimeout(async()=>{Zt.classList.remove("done"),jt(Js(256),!1),Ye.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.loadingSoundfont");let t=performance.now()/1e3,n;try{n=await e.arrayBuffer(),window.soundFontParser=n}catch(s){throw Ye.textContent=window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory"),jt(Mo(256)),re(manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),s}window.manager.sfError=s=>{Ye.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${s}</pre>`,jt(Mo(256)),console.error(s)},Ye.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.startingSynthesizer"),await window.manager.reloadSf(n),window.manager.seq&&(window.manager.seq.currentTime-=.1),Ye.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.savingSoundfont"),await Ma(n);let i=performance.now()/1e3-t;await new Promise(s=>setTimeout(s,1e3-i)),jt(mi(256)),Ye.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.done"),Zt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{Zt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll")},1e3)},75)},xa.onclick=async()=>{let o=[{type:"button",textContent:"Bundled SoundFont Credits",onClick:()=>{window.open("https://schristiancollins.com/generaluser.php")}}];_n.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await(await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_song_list.json")).text(),t=JSON.parse(e);for(let n of t)o.push({type:"button",textContent:n.name,onClick:i=>{ie(i.id),re(window.manager.localeManager.getLocaleString("locale.credits"),[{type:"text",textContent:n.credits.replace(`
`,`\r
\r
`),attributes:{style:"white-space: pre-line;"}},{type:"button",textContent:"Ok",onClick:s=>{ie(s.id)}}],999999,!0,void 0,void 0,async()=>{await Ul(n.fileName)})}});re(window.manager.localeManager.getLocaleString("locale.demoSongButton"),o,999999,!0,void 0)}});

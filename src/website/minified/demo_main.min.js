var Dn=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')});var F=class extends Uint8Array{currentIndex;constructor(e){super(e),this.currentIndex=0}};function ue(o){let e=o.reduce((n,s)=>n+s.length,0),t=new F(e),i=0;for(let n of o)t.set(n,i),i+=n.length;return t}function xt(o){o=Math.floor(o);let e=Math.floor(o/60),t=Math.round(o-e*60);return{minutes:e,seconds:t,time:`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}}function Fo(o){return o.trim().replaceAll(".mid","").replaceAll(".kar","").replaceAll(".rmi","").replaceAll("_"," ").trim()}var f={warn:"color: orange;",unrecognized:"color: red;",info:"color: aqua;",recognized:"color: lime",value:"color: yellow; background-color: black;"};var Re=class{constructor(e,t,i){this.ticks=e,this.messageStatusByte=t,this.messageData=i}};var N={noteOff:128,noteOn:144,polyPressure:160,controllerChange:176,programChange:192,channelPressure:208,pitchBend:224,systemExclusive:240,timecode:241,songPosition:242,songSelect:243,tuneRequest:246,clock:248,start:250,continue:251,stop:252,activeSensing:254,reset:255,sequenceNumber:0,text:1,copyright:2,trackName:3,instrumentName:4,lyric:5,marker:6,cuePoint:7,programName:8,midiChannelPrefix:32,midiPort:33,endOfTrack:47,setTempo:81,smpteOffset:84,timeSignature:88,keySignature:89,sequenceSpecific:127};function bn(o){let e=o&240,t=o&15,i=-1,n=o;return e>=128&&e<=224&&(i=t,n=e),{status:n,channel:i}}var R={bankSelect:0,modulationWheel:1,breathController:2,footController:4,portamentoTime:5,dataEntryMsb:6,mainVolume:7,balance:8,pan:10,expressionController:11,effectControl1:12,effectControl2:13,generalPurposeController1:16,generalPurposeController2:17,generalPurposeController3:18,generalPurposeController4:19,lsbForControl0BankSelect:32,lsbForControl1ModulationWheel:33,lsbForControl2BreathController:34,lsbForControl4FootController:36,lsbForControl5PortamentoTime:37,lsbForControl6DataEntry:38,lsbForControl7MainVolume:39,lsbForControl8Balance:40,lsbForControl10Pan:42,lsbForControl11ExpressionController:43,lsbForControl12EffectControl1:44,lsbForControl13EffectControl2:45,sustainPedal:64,portamentoOnOff:65,sostenutoPedal:66,softPedal:67,legatoFootswitch:68,hold2Pedal:69,soundVariation:70,timbreHarmonicContent:71,releaseTime:72,attackTime:73,brightness:74,soundController6:75,soundController7:76,soundController8:77,soundController9:78,soundController10:79,generalPurposeController5:80,generalPurposeController6:81,generalPurposeController7:82,generalPurposeController8:83,portamentoControl:84,reverbDepth:91,tremoloDepth:92,chorusDepth:93,detuneDepth:94,phaserDepth:95,dataIncrement:96,dataDecrement:97,NRPNLsb:98,NRPNMsb:99,RPNLsb:100,RPNMsb:101,allSoundOff:120,resetAllControllers:121,localControlOnOff:122,allNotesOff:123,omniModeOff:124,omniModeOn:125,monoModeOn:126,polyModeOn:127};var Ro=class{constructor(){this.events={noteoff:{},noteon:{},pitchwheel:{},controllerchange:{},programchange:{},channelpressure:{},polypressure:{},drumchange:{},stopall:{},newchannel:{},mutechannel:{},presetlistchange:{},allcontrollerreset:{},soundfonterror:{},synthdisplay:{}},this.timeDelay=0}addEvent(e,t,i){this.events[e][t]=i}removeEvent(e,t){delete this.events[e][t]}callEvent(e,t){this.events[e]&&(this.timeDelay>0?setTimeout(()=>{Object.values(this.events[e]).forEach(i=>{try{i(t)}catch(n){console.error(`Error while executing an event callback for ${e}:`,n)}})},this.timeDelay*1e3):Object.values(this.events[e]).forEach(i=>{try{i(t)}catch(n){console.error(`Error while executing an event callback for ${e}:`,n)}}))}};var Xe={nodesAmount:4,defaultDelay:.03,delayVariation:.01,stereoDifference:.02,oscillatorFrequency:.2,oscillatorFrequencyVariation:.05,oscillatorGain:.003},Ao=class{constructor(e,t=Xe){let i=e.context;this.input=i.createChannelSplitter(2);let n=i.createChannelMerger(2),s=[],A=[],g=t.oscillatorFrequency,r=t.defaultDelay;for(let l=0;l<t.nodesAmount;l++)this.createChorusNode(g,r-t.stereoDifference,s,0,n,0,i,t),this.createChorusNode(g,r+t.stereoDifference,A,1,n,1,i,t),g+=t.oscillatorFrequencyVariation,r+=t.delayVariation;n.connect(e),this.merger=n,this.chorusLeft=s,this.chorusRight=A}delete(){this.input.disconnect(),delete this.input,this.merger.disconnect(),delete this.merger;for(let e of this.chorusLeft)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain;for(let e of this.chorusRight)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain}createChorusNode(e,t,i,n,s,A,g,r){let l=g.createOscillator();l.type="sine",l.frequency.value=e;let u=g.createGain();u.gain.value=r.oscillatorGain;let d=g.createDelay();d.delayTime.value=t,l.connect(u),u.connect(d.delayTime),l.start(g.currentTime),this.input.connect(d,n),d.connect(s,0,A),i.push({oscillator:l,oscillatorGain:u,delay:d})}};function vn(o,e=void 0){let t=o.createConvolver();if(e)t.buffer=e;else{let i=new URL("impulse_response_2.flac",import.meta.url);fetch(i).then(async n=>{let s=await n.arrayBuffer();t.buffer=await o.decodeAudioData(s)})}return t}var ae={noteOff:0,noteOn:1,ccChange:2,programChange:3,channelPressure:4,polyPressure:5,killNote:6,ccReset:7,setChannelVibrato:8,soundFontManager:9,stopAll:10,killNotes:11,muteChannel:12,addNewChannel:13,customcCcChange:14,debugMessage:15,systemExclusive:16,setMasterParameter:17,setDrums:18,pitchWheel:19,transpose:20,highPerformanceMode:21,lockController:22,sequencerSpecific:23,requestSynthesizerSnapshot:24,setLogLevel:25,keyModifierManager:26,setEffectsGain:27,destroyWorklet:28},ro={mainVolume:0,masterPan:1,voicesCap:2,interpolationType:3},ve=-1,Mt={channelProperties:0,eventCall:1,reportedCurrentTime:2,sequencerSpecific:3,synthesizerSnapshot:4,ready:5,soundfontError:6,identify:7};var Aa=!1,ra=!0,Fi=!1;function v(...o){Aa&&console.info(...o)}function W(...o){ra&&console.warn(...o)}function Ne(...o){Fi&&console.group(...o)}function Ee(...o){Fi&&console.groupCollapsed(...o)}function j(){Fi&&console.groupEnd()}var xn={chorusEnabled:!0,chorusConfig:Xe,reverbEnabled:!0,reverbImpulseResponse:void 0,audioNodeCreators:void 0};var ao={reloadSoundFont:0,addNewSoundFont:2,deleteSoundFont:3,rearrangeSoundFonts:4};var Lo=class{constructor(e){this.soundfontList=[{id:"main",bankOffset:0}],this._port=e.worklet.port,this.synth=e}_sendToWorklet(e,t){this._port.postMessage({messageType:ae.soundFontManager,messageData:[e,t]})}async addNewSoundFont(e,t,i=0){if(this.soundfontList.find(n=>n.id===t)!==void 0)throw new Error("Cannot overwrite the existing soundfont. Use soundfontManager.delete(id) instead.");this._sendToWorklet(ao.addNewSoundFont,[e,t,i]),await new Promise(n=>this.synth.resolveWhenReady=n),this.soundfontList.push({id:t,bankOffset:i})}deleteSoundFont(e){if(this.soundfontList.length===0){W("1 soundfont left. Aborting!");return}if(this.soundfontList.findIndex(t=>t.id===e)===-1){W(`No soundfont with id of "${e}" found. Aborting!`);return}this._sendToWorklet(ao.deleteSoundFont,e)}rearrangeSoundFonts(e){this._sendToWorklet(ao.rearrangeSoundFonts,e),this.soundfontList.sort((t,i)=>e.indexOf(t.id)-e.indexOf(i.id))}async reloadManager(e){this._sendToWorklet(ao.reloadSoundFont,e),await new Promise(t=>this.synth.resolveWhenReady=t)}};var I={INVALID:-1,startAddrsOffset:0,endAddrOffset:1,startloopAddrsOffset:2,endloopAddrsOffset:3,startAddrsCoarseOffset:4,modLfoToPitch:5,vibLfoToPitch:6,modEnvToPitch:7,initialFilterFc:8,initialFilterQ:9,modLfoToFilterFc:10,modEnvToFilterFc:11,endAddrsCoarseOffset:12,modLfoToVolume:13,unused1:14,chorusEffectsSend:15,reverbEffectsSend:16,pan:17,unused2:18,unused3:19,unused4:20,delayModLFO:21,freqModLFO:22,delayVibLFO:23,freqVibLFO:24,delayModEnv:25,attackModEnv:26,holdModEnv:27,decayModEnv:28,sustainModEnv:29,releaseModEnv:30,keyNumToModEnvHold:31,keyNumToModEnvDecay:32,delayVolEnv:33,attackVolEnv:34,holdVolEnv:35,decayVolEnv:36,sustainVolEnv:37,releaseVolEnv:38,keyNumToVolEnvHold:39,keyNumToVolEnvDecay:40,instrument:41,reserved1:42,keyRange:43,velRange:44,startloopAddrsCoarseOffset:45,keyNum:46,velocity:47,initialAttenuation:48,reserved2:49,endloopAddrsCoarseOffset:50,coarseTune:51,fineTune:52,sampleID:53,sampleModes:54,reserved3:55,scaleTuning:56,exclusiveClass:57,overridingRootKey:58,unused5:59,endOper:60},z=[];z[I.startAddrsOffset]={min:0,max:32768,def:0};z[I.endAddrOffset]={min:-32768,max:32768,def:0};z[I.startloopAddrsOffset]={min:-32768,max:32768,def:0};z[I.endloopAddrsOffset]={min:-32768,max:32768,def:0};z[I.startAddrsCoarseOffset]={min:0,max:32768,def:0};z[I.modLfoToPitch]={min:-12e3,max:12e3,def:0};z[I.vibLfoToPitch]={min:-12e3,max:12e3,def:0};z[I.modEnvToPitch]={min:-12e3,max:12e3,def:0};z[I.initialFilterFc]={min:1500,max:13500,def:13500};z[I.initialFilterQ]={min:0,max:960,def:0};z[I.modLfoToFilterFc]={min:-12e3,max:12e3,def:0};z[I.modEnvToFilterFc]={min:-12e3,max:12e3,def:0};z[I.endAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[I.modLfoToVolume]={min:-960,max:960,def:0};z[I.chorusEffectsSend]={min:0,max:1e3,def:0};z[I.reverbEffectsSend]={min:0,max:1e3,def:0};z[I.pan]={min:-500,max:500,def:0};z[I.delayModLFO]={min:-12e3,max:5e3,def:-12e3};z[I.freqModLFO]={min:-16e3,max:4500,def:0};z[I.delayVibLFO]={min:-12e3,max:5e3,def:-12e3};z[I.freqVibLFO]={min:-16e3,max:4500,def:0};z[I.delayModEnv]={min:-32768,max:5e3,def:-32768};z[I.attackModEnv]={min:-32768,max:8e3,def:-32768};z[I.holdModEnv]={min:-12e3,max:5e3,def:-12e3};z[I.decayModEnv]={min:-12e3,max:8e3,def:-12e3};z[I.sustainModEnv]={min:0,max:1e3,def:0};z[I.releaseModEnv]={min:-7200,max:8e3,def:-12e3};z[I.keyNumToModEnvHold]={min:-1200,max:1200,def:0};z[I.keyNumToModEnvDecay]={min:-1200,max:1200,def:0};z[I.delayVolEnv]={min:-12e3,max:5e3,def:-12e3};z[I.attackVolEnv]={min:-12e3,max:8e3,def:-12e3};z[I.holdVolEnv]={min:-12e3,max:5e3,def:-12e3};z[I.decayVolEnv]={min:-12e3,max:8e3,def:-12e3};z[I.sustainVolEnv]={min:0,max:1440,def:0};z[I.releaseVolEnv]={min:-7200,max:8e3,def:-12e3};z[I.keyNumToVolEnvHold]={min:-1200,max:1200,def:0};z[I.keyNumToVolEnvDecay]={min:-1200,max:1200,def:0};z[I.startloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[I.keyNum]={min:-1,max:127,def:-1};z[I.velocity]={min:-1,max:127,def:-1};z[I.initialAttenuation]={min:-250,max:1440,def:0};z[I.endloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};z[I.coarseTune]={min:-120,max:120,def:0};z[I.fineTune]={min:-12700,max:12700,def:0};z[I.scaleTuning]={min:0,max:1200,def:100};z[I.exclusiveClass]={min:0,max:99999,def:0};z[I.overridingRootKey]={min:-1,max:127,def:-1};z[I.sampleModes]={min:0,max:3,def:0};var q=class{generatorType=I.INVALID;generatorValue=0;constructor(e=I.INVALID,t=0,i=!0){if(this.generatorType=e,t===void 0)throw new Error("No value provided.");if(this.generatorValue=Math.round(t),i){let n=z[e];n!==void 0&&(this.generatorValue=Math.max(n.min,Math.min(n.max,this.generatorValue)))}}};var de={noController:0,noteOnVelocity:2,noteOnKeyNum:3,polyPressure:10,channelPressure:13,pitchWheel:14,pitchWheelRange:16,link:127},Ye={linear:0,concave:1,convex:2,switch:3},Z=class o{currentValue=0;constructor(e){this.sourceEnum=e.srcEnum,this.modulatorDestination=e.dest,this.secondarySourceEnum=e.secSrcEnum,this.transformAmount=e.amt,this.transformType=e.transform,this.modulatorDestination>58&&(this.modulatorDestination=I.INVALID),this.sourcePolarity=this.sourceEnum>>9&1,this.sourceDirection=this.sourceEnum>>8&1,this.sourceUsesCC=this.sourceEnum>>7&1,this.sourceIndex=this.sourceEnum&127,this.sourceCurveType=this.sourceEnum>>10&3,this.secSrcPolarity=this.secondarySourceEnum>>9&1,this.secSrcDirection=this.secondarySourceEnum>>8&1,this.secSrcUsesCC=this.secondarySourceEnum>>7&1,this.secSrcIndex=this.secondarySourceEnum&127,this.secSrcCurveType=this.secondarySourceEnum>>10&3,this.isEffectModulator=(this.sourceEnum===219||this.sourceEnum===221)&&this.secondarySourceEnum===0&&(this.modulatorDestination===I.reverbEffectsSend||this.modulatorDestination===I.chorusEffectsSend)}static copy(e){return new o({srcEnum:e.sourceEnum,secSrcEnum:e.secondarySourceEnum,transform:e.transformType,amt:e.transformAmount,dest:e.modulatorDestination})}static isIdentical(e,t,i=!1){return e.sourceEnum===t.sourceEnum&&e.modulatorDestination===t.modulatorDestination&&e.secondarySourceEnum===t.secondarySourceEnum&&e.transformType===t.transformType&&(!i||e.transformAmount===t.transformAmount)}sumTransform(e){return new o({srcEnum:this.sourceEnum,secSrcEnum:this.secondarySourceEnum,dest:this.modulatorDestination,transform:this.transformType,amt:this.transformAmount+e.transformAmount})}debugString(){function e(n,s){return Object.keys(n).find(A=>n[A]===s)}let t=e(Ye,this.sourceCurveType);t+=this.sourcePolarity===0?" unipolar ":" bipolar ",t+=this.sourceDirection===0?"forwards ":"backwards ",this.sourceUsesCC?t+=e(R,this.sourceIndex):t+=e(de,this.sourceIndex);let i=e(Ye,this.secSrcCurveType);return i+=this.secSrcPolarity===0?" unipolar ":" bipolar ",i+=this.secSrcCurveType===0?"forwards ":"backwards ",this.secSrcUsesCC?i+=e(R,this.secSrcIndex):i+=e(de,this.secSrcIndex),`Modulator:
        Source: ${t}
        Secondary source: ${i}
        Destination: ${e(I,this.modulatorDestination)}
        Trasform amount: ${this.transformAmount}
        Transform type: ${this.transformType}
        

`}},Ri=960,Li=Ye.concave;function $e(o,e,t,i,n){return o<<10|e<<9|t<<8|i<<7|n}var aa=[new Z({srcEnum:$e(Li,0,1,0,de.noteOnVelocity),dest:I.initialAttenuation,amt:Ri,secSrcEnum:0,transform:0}),new Z({srcEnum:129,dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Li,0,1,1,R.mainVolume),dest:I.initialAttenuation,amt:Ri,secSrcEnum:0,transform:0}),new Z({srcEnum:13,dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new Z({srcEnum:526,dest:I.fineTune,amt:12700,secSrcEnum:16,transform:0}),new Z({srcEnum:650,dest:I.pan,amt:500,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Li,0,1,1,R.expressionController),dest:I.initialAttenuation,amt:Ri,secSrcEnum:0,transform:0}),new Z({srcEnum:219,dest:I.reverbEffectsSend,amt:200,secSrcEnum:0,transform:0}),new Z({srcEnum:221,dest:I.chorusEffectsSend,amt:200,secSrcEnum:0,transform:0})],la=[new Z({srcEnum:$e(Ye.linear,0,0,0,de.polyPressure),dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Ye.linear,0,0,1,R.tremoloDepth),dest:I.modLfoToVolume,amt:24,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Ye.linear,1,0,1,R.releaseTime),dest:I.releaseVolEnv,amt:1200,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Ye.linear,1,0,1,R.brightness),dest:I.initialFilterFc,amt:6e3,secSrcEnum:0,transform:0}),new Z({srcEnum:$e(Ye.linear,1,0,1,R.timbreHarmonicContent),dest:I.initialFilterQ,amt:250,secSrcEnum:0,transform:0})],Go=aa.concat(la);var Ft=128,Mn=147,ca=new Int16Array(Mn).fill(0),xe=(o,e)=>ca[o]=e<<7;xe(R.mainVolume,100);xe(R.balance,64);xe(R.expressionController,127);xe(R.pan,64);xe(R.timbreHarmonicContent,64);xe(R.releaseTime,64);xe(R.attackTime,64);xe(R.brightness,64);xe(R.soundController6,64);xe(R.soundController7,64);xe(R.soundController8,64);xe(R.soundController9,64);xe(R.generalPurposeController6,64);xe(R.generalPurposeController8,64);xe(Ft+de.pitchWheel,64);xe(Ft+de.pitchWheelRange,2);var To={channelTuning:0,channelTransposeFine:1,modulationMultiplier:2,masterTuning:3,channelTuningSemitones:4},Fn=Object.keys(To).length,ga=new Float32Array(Fn);ga[To.modulationMultiplier]=1;var Rn={velocityOverride:128};var No=class{velocity=-1;patch={bank:-1,program:-1};constructor(e=-1,t=-1,i=-1){this.velocity=e,this.patch={bank:t,program:i}}},Uo={addMapping:0,deleteMapping:1,clearMappings:2};var qo=class{constructor(e){this.synth=e,this._keyModifiers=[]}_sendToWorklet(e,t){this.synth.post({messageType:ae.keyModifierManager,messageData:[e,t]})}addModifier(e,t,i){let n=i?.velocity??-1,s=i?.patch?.program??-1,A=i?.patch?.bank??-1,g=new No(n,A,s);this._keyModifiers[e]===void 0&&(this._keyModifiers[e]=[]),this._keyModifiers[e][t]=g,this._sendToWorklet(Uo.addMapping,[e,t,g])}getModifier(e,t){return this._keyModifiers?.[e]?.[t]}deleteModifier(e,t){this._sendToWorklet(Uo.deleteMapping,[e,t]),this._keyModifiers[e]?.[t]!==void 0&&(this._keyModifiers[e][t]=void 0)}clearModifiers(){this._sendToWorklet(Uo.clearMappings,void 0),this._keyModifiers=[]}};var da="spessasynth-worklet-system",Gi=350,Ue=9,ha=16;var Jt=class{constructor(e,t,i=!0,n=void 0,s=xn){v("%cInitializing SpessaSynth synthesizer...",f.info),this.context=e.context,this.targetNode=e;let A=n?.oneOutput===!0;this.eventHandler=new Ro,this._voiceCap=Gi,this._destroyed=!1,this._outputsAmount=ha,this.channelsAmount=this._outputsAmount,this.resolveWhenReady=void 0,this.isReady=new Promise(l=>this.resolveWhenReady=l),this.channelProperties=[];for(let l=0;l<this.channelsAmount;l++)this.addNewChannel(!1);this.channelProperties[Ue].isDrum=!0,this._voicesAmount=0,this._highPerformanceMode=!1;let g=Array(this._outputsAmount+2).fill(2),r=this._outputsAmount+2;A&&(r=1,g=[32]),n?.snapshot?.effectsConfig!==void 0?(this.effectsConfig=n.snapshot.effectsConfig,delete n.snapshot.effectsConfig):this.effectsConfig=s;try{let l=s?.audioNodeCreators?.worklet;l||(l=(u,d,a)=>new AudioWorkletNode(u,d,a)),this.worklet=l(this.context,da,{outputChannelCount:g,numberOfOutputs:r,processorOptions:{midiChannels:this._outputsAmount,soundfont:t,enableEventSystem:i,startRenderingData:n}})}catch(l){throw console.error(l),new Error("Could not create the audioWorklet. Did you forget to addModule()?")}if(this.worklet.port.onmessage=l=>this.handleMessage(l.data),this.soundfontManager=new Lo(this),this.keyModifierManager=new qo(this),this._snapshotCallback=void 0,this.sequencerCallbackFunction=void 0,A)this.worklet.connect(e,0);else{let l=this.effectsConfig?.reverbEnabled??!0,u=this.effectsConfig?.chorusEnabled??!0;l&&(this.reverbProcessor=vn(this.context,this.effectsConfig.reverbImpulseResponse),this.reverbProcessor.connect(e),this.worklet.connect(this.reverbProcessor,0)),u&&(this.chorusProcessor=new Ao(e,this.effectsConfig.chorusConfig),this.worklet.connect(this.chorusProcessor.input,1));for(let d=2;d<this.channelsAmount+2;d++)this.worklet.connect(e,d)}this.eventHandler.addEvent("newchannel","synth-new-channel",()=>{this.channelsAmount++})}get voiceCap(){return this._voiceCap}set voiceCap(e){this._setMasterParam(ro.voicesCap,e),this._voiceCap=e}get highPerformanceMode(){return this._highPerformanceMode}set highPerformanceMode(e){this._highPerformanceMode=e}get currentTime(){return this.context.currentTime}get voicesAmount(){return this._voicesAmount}setLogLevel(e,t,i,n){this.post({channelNumber:ve,messageType:ae.setLogLevel,messageData:[e,t,i,n]})}_setMasterParam(e,t){this.post({channelNumber:ve,messageType:ae.setMasterParameter,messageData:[e,t]})}setInterpolationType(e){this._setMasterParam(ro.interpolationType,e)}handleMessage(e){let t=e.messageData;switch(e.messageType){case Mt.channelProperties:this.channelProperties=t,this._voicesAmount=this.channelProperties.reduce((i,n)=>i+n.voicesAmount,0);break;case Mt.eventCall:this.eventHandler.callEvent(t.eventName,t.eventData);break;case Mt.sequencerSpecific:this.sequencerCallbackFunction&&this.sequencerCallbackFunction(t.messageType,t.messageData);break;case Mt.synthesizerSnapshot:this._snapshotCallback&&this._snapshotCallback(t);break;case Mt.ready:this.resolveWhenReady();break;case Mt.soundfontError:W(new Error(t)),this.eventHandler.callEvent("soundfonterror",t);break}}async getSynthesizerSnapshot(){return new Promise(e=>{this._snapshotCallback=t=>{this._snapshotCallback=void 0,t.effectsConfig=this.effectsConfig,e(t)},this.post({messageType:ae.requestSynthesizerSnapshot,messageData:void 0,channelNumber:ve})})}addNewChannel(e=!0){this.channelProperties.push({voicesAmount:0,pitchBend:0,pitchBendRangeSemitones:0,isMuted:!1,isDrum:!1}),e&&this.post({channelNumber:0,messageType:ae.addNewChannel,messageData:null})}setVibrato(e,t){this.post({channelNumber:e,messageType:ae.setChannelVibrato,messageData:t})}connectIndividualOutputs(e){if(e.length!==this._outputsAmount)throw new Error(`input nodes amount differs from the system's outputs amount!
            Expected ${this._outputsAmount} got ${e.length}`);for(let t=0;t<this._outputsAmount;t++)this.worklet.connect(e[t],t+2)}disableGSNRPparams(){this.setVibrato(ve,{depth:0,rate:-1,delay:0})}debugMessage(){v(this),this.post({channelNumber:0,messageType:ae.debugMessage,messageData:void 0})}noteOn(e,t,i,n=!1){this.post({channelNumber:e,messageType:ae.noteOn,messageData:[t,i,n]})}noteOff(e,t,i=!1){i?this.post({channelNumber:e,messageType:ae.killNote,messageData:t}):this.post({channelNumber:e,messageType:ae.noteOff,messageData:t})}stopAll(e=!1){this.post({channelNumber:ve,messageType:ae.stopAll,messageData:e?1:0})}controllerChange(e,t,i,n=!1){if(t>127||t<0)throw new Error(`Invalid controller number: ${t}`);i=Math.floor(i),t=Math.floor(t),this.post({channelNumber:e,messageType:ae.ccChange,messageData:[t,i,n]})}resetControllers(){this.post({channelNumber:ve,messageType:ae.ccReset,messageData:void 0})}channelPressure(e,t){this.post({channelNumber:e,messageType:ae.channelPressure,messageData:t})}polyPressure(e,t,i){this.post({channelNumber:e,messageType:ae.polyPressure,messageData:[t,i]})}post(e){if(this._destroyed)throw new Error("This synthesizer instance has been destroyed!");this.worklet.port.postMessage(e)}pitchWheel(e,t,i){this.post({channelNumber:e,messageType:ae.pitchWheel,messageData:[t,i]})}transpose(e){this.transposeChannel(ve,e,!1)}transposeChannel(e,t,i=!1){this.post({channelNumber:e,messageType:ae.transpose,messageData:[t,i]})}setMainVolume(e){this._setMasterParam(ro.mainVolume,e)}setMasterPan(e){this._setMasterParam(ro.masterPan,e)}setPitchBendRange(e,t){this.controllerChange(e,R.RPNMsb,0),this.controllerChange(e,R.dataEntryMsb,t),this.controllerChange(e,R.RPNMsb,127),this.controllerChange(e,R.RPNLsb,127),this.controllerChange(e,R.dataEntryMsb,0)}programChange(e,t,i=!1){this.post({channelNumber:e,messageType:ae.programChange,messageData:[t,i]})}velocityOverride(e,t){this.post({channelNumber:e,messageType:ae.ccChange,messageData:[Rn.velocityOverride,t,!0]})}lockController(e,t,i){this.post({channelNumber:e,messageType:ae.lockController,messageData:[t,i]})}muteChannel(e,t){this.post({channelNumber:e,messageType:ae.muteChannel,messageData:t})}async reloadSoundFont(e){W("reloadSoundFont is deprecated. Please use the soundfontManager property instead."),await this.soundfontManager.reloadManager(e)}systemExclusive(e){this.post({channelNumber:ve,messageType:ae.systemExclusive,messageData:Array.from(e)})}setDrums(e,t){this.post({channelNumber:e,messageType:ae.setDrums,messageData:t})}sendMessage(e,t=0){let i=bn(e[0]);switch(i.channel+=t,i.status){case N.noteOn:let n=e[2];n>0?this.noteOn(i.channel,e[1],n):this.noteOff(i.channel,e[1]);break;case N.noteOff:this.noteOff(i.channel,e[1]);break;case N.pitchBend:this.pitchWheel(i.channel,e[2],e[1]);break;case N.controllerChange:this.controllerChange(i.channel,e[1],e[2]);break;case N.programChange:this.programChange(i.channel,e[1]);break;case N.polyPressure:this.polyPressure(i.channel,e[0],e[1]);break;case N.channelPressure:this.channelPressure(i.channel,e[1]);break;case N.systemExclusive:this.systemExclusive(new F(e.slice(1)));break;case N.reset:this.stopAll(!0),this.resetControllers();break;default:break}}setReverbResponse(e){this.reverbProcessor.buffer=e,this.effectsConfig.reverbImpulseResponse=e}setChorusConfig(e){this.worklet.disconnect(this.chorusProcessor.input),this.chorusProcessor.delete(),delete this.chorusProcessor,this.chorusProcessor=new Ao(this.targetNode,e),this.worklet.connect(this.chorusProcessor.input,1),this.effectsConfig.chorusConfig=e}setEffectsGain(e,t){this.post({messageType:ae.setEffectsGain,messageData:[e,t]})}destroy(){this.reverbProcessor.disconnect(),this.chorusProcessor.delete(),this.post({messageType:ae.destroyWorklet,messageData:void 0}),this.worklet.disconnect(),delete this.worklet,delete this.reverbProcessor,delete this.chorusProcessor,this._destroyed=!0}reverbateEverythingBecauseWhyNot(){for(let e=0;e<this.channelsAmount;e++)this.controllerChange(e,R.reverbDepth,127),this.lockController(e,R.reverbDepth,!0);return"That's the spirit!"}};function Ia(){let o=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(o=!0)}(navigator.userAgent||navigator.vendor||window.opera),o}var qe=Ia();function Ln(){let o=i=>{this.pressedKeys.delete(i),this.releaseNote(i,this.channel),this.synth.noteOff(this.channel,i)},e=(i,n)=>{let s;if(qe)s=127;else{let g=this.keys[0].getBoundingClientRect();if(this.keyboard.classList.contains("sideways")){let r=n.clientX-g.left,l=g.width;s=Math.floor((l-r)/l*127)}else{let r=n.clientY-g.top,l=g.height;s=Math.floor(r/l*127)}}this.onNotePressed&&this.onNotePressed(i,s),this.synth.noteOn(this.channel,i,s,this.enableDebugging)},t=i=>{let n=i.touches?Array.from(i.touches):[i],s=new Set;n.forEach(A=>{let g=document.elementFromPoint(A.clientX,A.clientY),r=parseInt(g.id.replace("note",""));s.add(r),!(isNaN(r)||r<0||this.pressedKeys.has(r))&&(this.pressedKeys.add(r),e(r,A))}),this.pressedKeys.forEach(A=>{s.has(A)||o(A)})};qe||(document.addEventListener("mousedown",i=>{this.mouseHeld=!0,t(i)}),document.addEventListener("mouseup",()=>{this.mouseHeld=!1,this.pressedKeys.forEach(i=>{o(i)})}),this.keyboard.onmousemove=i=>{this.mouseHeld&&t(i)},this.keyboard.onmouseleave=()=>{this.pressedKeys.forEach(i=>{o(i)})}),this.keyboard.ontouchstart=t.bind(this),this.keyboard.ontouchend=t.bind(this),this.keyboard.ontouchmove=t.bind(this)}var Gn=20,lo=class{onNotePressed=void 0;constructor(e,t){this.mouseHeld=!1,this.pressedKeys=new Set,this.mode="light",this.enableDebugging=!1,this.sizeChangeAnimationId=-1,this.modeChangeAnimationId=-1,this._keyRange={min:0,max:127},document.addEventListener("keydown",i=>{i.key==="Shift"&&(this.synth.controllerChange(this.channel,R.sustainPedal,127),this.keyboard.style.filter="brightness(0.5)")}),document.addEventListener("keyup",i=>{i.key==="Shift"&&(this.synth.controllerChange(this.channel,R.sustainPedal,0),this.keyboard.style.filter="")}),this.synth=t,this.channel=0,this.channelColors=e,this._shown=!0,this._createKeyboard(),this.synth.eventHandler.addEvent("noteon","keyboard-note-on",i=>{this.pressNote(i.midiNote,i.channel,i.velocity)}),this.synth.eventHandler.addEvent("noteoff","keyboard-note-off",i=>{this.releaseNote(i.midiNote,i.channel)}),this.synth.eventHandler.addEvent("stopall","keyboard-stop-all",()=>{this.clearNotes()}),this.synth.eventHandler.addEvent("mutechannel","keyboard-mute-channel",i=>{if(i.isMuted)for(let n=0;n<128;n++)this.releaseNote(n,i.channel)})}get shown(){return this._shown}set shown(e){e===!0?this.keyboard.style.display="":this.keyboard.style.display="none",this._shown=e}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this.setKeyRange(e,!0)}_createKeyboard(){this.keyboard=document.getElementById("keyboard"),this.keyboard.innerHTML="",this.keys=[],this.keyColors=[];for(let e=this._keyRange.min;e<this._keyRange.max+1;e++){let t=this._createKey(e);this.keyColors.push([]),this.keyboard.appendChild(t),this.keys.push(t)}this._handlePointers(),this.mode==="dark"&&(this.mode="light",this.toggleMode(!1))}_createKey(e){function t(s){let A=s%12;return A===1||A===3||A===6||A===8||A===10}let i=document.createElement("div");if(i.classList.add("key"),i.id=`note${e}`,t(e))i.classList.add("sharp_key");else{i.classList.add("flat_key");let s=!1,A=!1;e>=0&&(s=t(e-1)),e<127&&(A=t(e+1)),A&&s?i.classList.add("between_sharps"):s?i.classList.add("left_sharp"):A&&i.classList.add("right_sharp")}return i}toggleMode(e=!0){if(this.mode==="light"?this.mode="dark":this.mode="light",!e){this.keys.forEach(i=>{i.classList.contains("flat_key")&&i.classList.toggle("flat_dark_key")});return}this.modeChangeAnimationId&&clearTimeout(this.modeChangeAnimationId),this.keyboard.classList.add("mode_transform"),document.body.scrollHeight<=window.innerHeight&&document.body.classList.add("no_scroll"),this.modeChangeAnimationId=setTimeout(()=>{this.keys.forEach(i=>{i.classList.contains("flat_key")&&i.classList.toggle("flat_dark_key")}),this.keyboard.classList.remove("mode_transform"),setTimeout(()=>document.body.classList.remove("no_scroll"),500)},500)}setKeyRange(e,t=!0){Math.abs(e.max-e.min)<12&&(e.min-=6,e.max=e.min+12);let n=900/(e.max-e.min+5),s=document.styleSheets[0].cssRules,A;for(let g of s)if(g.selectorText==="#keyboard .key"){A=g;break}if(A.style.setProperty("--pressed-transform-skew",`${8e-4/(n/7)}`),t){this.sizeChangeAnimationId&&clearTimeout(this.sizeChangeAnimationId);let g=getComputedStyle(this.keyboard),r=parseFloat(g.getPropertyValue("--current-min-height").replace(/[^\d.]+/g,"")),l=this.keyboard.getBoundingClientRect().height,u=n/r,d=l*u-l,a=(this._keyRange.min+this._keyRange.max)/2,c=(e.min+e.max)/2;this._keyRange=e;let m=this.keys.find(S=>S.classList.contains("sharp_key")).getBoundingClientRect().width,B=(a-c)*m,E=parseFloat(g.getPropertyValue("--key-border-radius").replace(/[^\d.]+/g,""));this.keyboard.style.marginTop=`${d}px`,this.keyboard.style.transition="",this.keyboard.style.transform=`scale(${u}) translateX(${B}px)`,this.keyboard.style.setProperty("--key-border-radius",`${E/u}vmin`),this.sizeChangeAnimationId=setTimeout(()=>{this.keyboard.style.setProperty("--current-min-height",`${n}`),this.keyboard.style.transition="none",this.keyboard.style.transform="",this.keyboard.style.marginTop="",this.keyboard.style.setProperty("--key-border-radius",""),this._createKeyboard(),setTimeout(()=>this.keyboard.style.transition="",75)},500)}else this.keyboard.style.setProperty("--current-min-height",`${n}`),this._keyRange=e,this._createKeyboard()}selectChannel(e){this.channel=e}pressNote(e,t,i){let n=this.keys[e-this._keyRange.min];if(n===void 0)return;n.classList.add("pressed");let s=n.classList.contains("sharp_key"),A=i/127,g=this.channelColors[t%16].match(/\d+(\.\d+)?/g).map(parseFloat),r;if(!s&&this.mode==="light"?r=`rgba(${g.slice(0,3).map(u=>255-(255-u)*A).join(", ")}, ${g[3]})`:r=`rgba(${g.slice(0,3).map(u=>u*A).join(", ")}, ${g[3]})`,n.style.background=r,this.mode==="dark"){let l=Gn*A;n.style.boxShadow=`${r} 0px 0px ${l}px ${l/5}px`}this.keyColors[e-this._keyRange.min].push(this.channelColors[t%16])}releaseNote(e,t){let i=this.keys[e-this._keyRange.min];if(i===void 0)return;t%=this.channelColors.length;let n=this.keyColors[e-this._keyRange.min];if(!n)return;let s=n.findLastIndex(g=>g===this.channelColors[t]);if(s===-1)return;n.splice(s,1);let A=n[n.length-1]||"";i.style.background=A,this.mode==="dark"&&A!==""&&(i.style.boxShadow=`0px 0px ${Gn}px ${A}`),n.length<1&&(i.classList.remove("pressed"),i.style.background="",i.style.boxShadow="")}clearNotes(){this.keys.forEach((e,t)=>{e.classList.remove("pressed"),e.style.background="",e.style.boxShadow="",this.keyColors[t]=[]})}};lo.prototype._handlePointers=Ln;function Rt(o,e){let t=o.replace(/[^\d,]/g,"").split(",");return`rgb(${e(parseInt(t[0]))}, ${e(parseInt(t[1]))}, ${e(parseInt(t[2]))})`}var ua="#000";function Tn(o,e,t){o.forEach(i=>{if(i.pressedProgress===0)return;e.fillStyle=i.color;let n=i.pressedProgress*i.velocity;if(e.globalAlpha=.5*n,t){e.fillRect(i.xPos,i.yPos-i.height*n,i.width,i.height*(n*2+1)),e.globalAlpha=1;return}e.fillRect(i.xPos-i.width*n,i.yPos,i.width*(n*2+1),i.height),e.globalAlpha=1}),o.forEach(i=>{e.fillStyle=i.color,e.save(),e.translate(i.xPos,i.yPos),e.fillRect(0,0,i.width,i.height),e.restore(),e.strokeStyle=ua,e.lineWidth=i.stroke,e.strokeRect(i.xPos,i.yPos,i.width,i.height)})}var Ti=!1;function Nn(o=!0,e=!1){let t=(this.seq===void 0||this?.seq?.paused===!0)&&this.synth.voicesAmount===0&&!e,i=!1;if(!this.renderBool||t)if(Ti){o&&requestAnimationFrame(this.render.bind(this));return}else Ti=!0,i=!0;else Ti=!1;if(o&&this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderAnalysers&&!this.synth.highPerformanceMode&&this.renderWaveforms(i),this.renderNotes&&this.noteTimes){let A=this.computeNotePositions(this.synth.highPerformanceMode);this.synth.highPerformanceMode||Tn(A,this.drawingContext,this.sideways)}let n=performance.now()-this.frameTimeStart;this.frameTimeStart=performance.now();let s=1e3/n;this.drawingContext.textBaseline="hanging",this.drawingContext.textAlign="end",this.drawingContext.font=`${_o}px system-ui`,this.drawingContext.fillStyle="white",this.drawingContext.strokeStyle="white",this.drawingContext.fillText(`${this.notesOnScreen} notes`,this.canvas.width,_o*2+5),this.drawingContext.fillText(this.version,this.canvas.width,5),this.drawingContext.fillText(Math.round(s).toString()+" FPS",this.canvas.width,_o+5),this.onRender&&this.onRender(),o&&requestAnimationFrame(this.render.bind(this))}function Un(o=!1){this.notesOnScreen=0;let e=this.sideways?this.canvas.height:this.canvas.width,t=this.sideways?this.canvas.width:this.canvas.height,i=this.keyRange.max-this.keyRange.min,n=e/(i+1),s=n-Gt*2,A=this.noteFallingTimeMs/1e3,g=this.noteAfterTriggerTimeMs/1e3,r=this.seq.currentHighResolutionTime-this.timeOffset,l=r-g,u=A+g,d=l+u,a=_n/u,c=[];this.synth.channelProperties.forEach(B=>{if(this.showVisualPitch){let E=B.pitchBend-8192+this.visualPitchBendOffset;c.push(B.pitchBendRangeSemitones*(E/8192*n))}else c.push(0)});let m=[];return this.noteTimes.forEach((B,E)=>{if(B.renderStartIndex>=B.notes.length||!this.renderChannels[E])return;let S=B.renderStartIndex,y=B.notes,w=y[S],k=-1;for(;w.start<=d&&(S++,!(this.notesOnScreen>Hn));){let D=w.start+w.length;if(D>l&&w.length>0){let h=w.length/u*t-Gt*2;if(this.notesOnScreen<1e3||h>a){k===-1&&(k=S-1);let x=(w.start-l)/u*t,G;if(this._notesFall?G=t-h-x+Gt:G=x+Gt,w.midiNote<this.keyRange.min||w.midiNote>this.keyRange.max){if(S>=y.length)break;w=y[S];continue}let U=w.midiNote-this.keyRange.min,O=n*U+Gt,H,X,ie,T;if(this.sideways?(H=G,X=O,T=s,ie=h):(X=G,H=O,ie=s,T=h),this.notesOnScreen++,o)this.drawingContext.fillStyle=this.plainColors[E],this.drawingContext.fillRect(H+Lt+Gt,X+Lt,ie-Lt*2,T-Lt*2);else{let K;if(w.start>r||D<r)this.sideways?this.drawActiveNotes?K=this.sidewaysDarkerColors[E]:K=this.sidewaysChannelColors[E]:this.drawActiveNotes?K=this.darkerColors[E]:K=this.channelColors[E],m.push({xPos:H,yPos:X,height:T,width:ie,stroke:Lt,pressedProgress:0,velocity:w.velocity,color:K});else{this.sideways?(this.showVisualPitch&&(X+=c[E]),K=this.sidewaysChannelColors[E]):(this.showVisualPitch&&(H+=c[E]),K=this.channelColors[E]);let ge;this.drawActiveNotes?ge=1+(w.start-r)/(w.length*qn):ge=0,m.push({xPos:H,yPos:X,height:T,width:ie,stroke:Lt,pressedProgress:ge,velocity:w.velocity,color:K})}}}}if(S>=y.length)break;w=y[S]}k>-1&&(B.renderStartIndex=k)}),m.sort((B,E)=>E.height-B.height),m}function Pn(o=!1){let e=this.canvas.width/4,t=this.canvas.height/4;this.channelAnalysers.forEach((i,n)=>{let s=n%4,A=Math.floor(n/4),g=()=>{let c=this.canvas.width/4,m=this.canvas.height/4,B=c*s,E=m*A+m/2;this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[n],this.drawingContext.beginPath(),this.drawingContext.moveTo(B,E),this.drawingContext.lineTo(B+c,E),this.drawingContext.stroke()};if(o){g();return}let r=new Float32Array(i.frequencyBinCount);if(i.getFloatTimeDomainData(r),!r.some(c=>c!==0)){g();return}let u=e*s,d=t*A+t/2,a=this.waveMultiplier*t;if(this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[n],this.drawingContext.beginPath(),this._stabilizeWaveforms){let c=r.length/4,m=e/c,B=Math.floor(c/2),E=r.length-B;for(let k=E;k>=1;k--)if(r[k-1]<0&&r[k]>=0){E=k;break}let S=u,y=E-B,w=E+B;for(let k=y;k<w;k++)this.drawingContext.lineTo(S,d+r[k]*a),S+=m}else{let c=e/r.length,m=u;for(let B=0;B<r.length;B++)this.drawingContext.lineTo(m,d+r[B]*a),m+=c}this.drawingContext.stroke(),n++})}function Yn(o){for(let e of this.channelAnalysers)e.disconnect(),this.channelAnalysers.splice(0,1);this.channelAnalysers=[];for(let e=0;e<o.channelsAmount;e++){let t=new AnalyserNode(o.context,{fftSize:this._normalAnalyserFft,smoothingTimeConstant:.4});this.channelAnalysers.push(t)}o.eventHandler.addEvent("mutechannel","renderer-mute-channel",e=>{this.renderChannels[e.channel]=!e.isMuted}),this.updateFftSize()}function Vn(){for(let o=0;o<this.channelAnalysers.length;o++){let e=this.synth.channelProperties[o].isDrum,t=e?this._drumAnalyserFft:this._normalAnalyserFft,i=e?4/2:4;this.channelAnalysers[o].fftSize=Math.min(32768,this._stabilizeWaveforms?t*i:t)}}function Jn(o){o.connectIndividualOutputs(this.channelAnalysers),o.eventHandler.addEvent("drumchange","renderer-drum-change",()=>{setTimeout(this.updateFftSize.bind(this),100)})}function Kn(){for(let o of this.channelAnalysers)o.disconnect();v("%cAnalysers disconnected!",f.recognized)}function zn(o){this.seq=o,this.seq.addOnTimeChangeEvent(()=>this.resetIndexes(),"renderer-time-change"),this.seq.addOnSongChangeEvent(async e=>{if(this.calculateNoteTimes(await this.seq.getMIDI()),this.resetIndexes(),e.RMIDInfo?.IPIC!==void 0){let t=new Blob([e.RMIDInfo?.IPIC.buffer]),i=URL.createObjectURL(t),n=this.canvas.classList.contains("light_mode")?0:.9;this.canvas.style.background=`linear-gradient(rgba(0, 0, 0, ${n}), rgba(0, 0, 0, ${n})), center center / cover url("${i}")`}else this.canvas.style.background=""},"renderer-song-change")}function Wn(){this.noteTimes&&this.noteTimes.forEach(o=>o.renderStartIndex=0)}function co(o,e){let t=0;for(let i=8*(e-1);i>=0;i-=8)t|=o[o.currentIndex++]<<i;return t>>>0}function go(o,e){let t=new Array(e).fill(0);for(let i=e-1;i>=0;i--)t[i]=o&255,o>>=8;return t}var Kt=.02;function Zn(o){function e(u){return u.messageData=new F(u.messageData.buffer),u.messageData.currentIndex=0,6e7/co(u.messageData,3)}let t=[],n=o.tracks.flat();n.sort((u,d)=>u.ticks-d.ticks);for(let u=0;u<16;u++)t.push({renderStartIndex:0,notes:[]});let s=0,A=60/(120*o.timeDivision),g=0,r=0,l=[];for(let u=0;u<16;u++)l.push([]);for(;g<n.length;){let u=n[g],d=u.messageStatusByte>>4,a=u.messageStatusByte&15;if(d===8){let c=l[a].findIndex(B=>B.midiNote===u.messageData[0]),m=l[a][c];if(m){let B=s-m.start;m.length=B<Kt&&a===Ue?Kt:B,l[a].splice(c,1)}r--}else if(d===9)if(u.messageData[1]===0){let c=l[a].findIndex(B=>B.midiNote===u.messageData[0]),m=l[a][c];if(m){let B=s-m.start;m.length=B<Kt&&a===Ue?Kt:B,l[a].splice(c,1)}r--}else{let c={midiNote:u.messageData[0],start:s,length:-1,velocity:u.messageData[1]/127};t[a].notes.push(c),l[a].push(c),r++}else u.messageStatusByte===81&&(A=60/(e(u)*o.timeDivision));if(++g>=n.length)break;s+=A*(n[g].ticks-u.ticks)}r>0&&l.forEach((u,d)=>{u.forEach(a=>{let c=s-a.start;a.length=c<Kt&&d===Ue?Kt:c})}),this.noteTimes=t,v("%cFinished loading note times and ready to render the sequence!",f.info)}var ma=1024,Ca=4096,pa=2,Ea=2,Ho=.6,Po=.5,Lt=1,Gt=1,_o=12,qn=.6,_n=2,Hn=81572,_e=class{onRender;constructor(e,t,i,n=""){this.noteFallingTimeMs=1e3,this.noteAfterTriggerTimeMs=0,this._keyRange={min:0,max:127},this.version="v"+n,this.visualPitchBendOffset=0,this.lineThickness=Ea,this._normalAnalyserFft=ma,this._drumAnalyserFft=Ca,this.waveMultiplier=pa,this._notesFall=!0,this.sideways=!1,this._renderBool=!0,this.renderAnalysers=!0,this.renderNotes=!0,this.drawActiveNotes=!0,this.showVisualPitch=!0,this._stabilizeWaveforms=!0,this.renderChannels=Array(16).fill(!0),this.canvas=i,this.drawingContext=this.canvas.getContext("2d"),this.plainColors=e,this.computeColors(),this.synth=t,this.notesOnScreen=0,this.timeOffset=0,this.channelAnalysers=[],this.createChannelAnalysers(t),this.connectChannelAnalysers(t)}get stabilizeWaveforms(){return this._stabilizeWaveforms}set stabilizeWaveforms(e){this._stabilizeWaveforms=e,this.updateFftSize()}get direction(){return this._notesFall?"down":"up"}set direction(e){this._notesFall=e==="down"}get normalAnalyserFft(){return this._normalAnalyserFft}set normalAnalyserFft(e){this._normalAnalyserFft=e,this.updateFftSize()}get drumAnalyserFft(){return this._drumAnalyserFft}set drumAnalyserFft(e){this._drumAnalyserFft=e,this.updateFftSize()}get renderBool(){return this._renderBool}set renderBool(e){this._renderBool=e,e===!0?this.connectChannelAnalysers(this.synth):this.disconnectChannelAnalysers()}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this._keyRange=e}toggleDarkMode(){this.canvas.classList.toggle("light_mode")}computeColors(){this.channelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Rt(e,i=>i*Po)),t.addColorStop(1,e),t}),this.darkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Rt(e,i=>i*Po*Ho)),t.addColorStop(1,Rt(e,i=>i*Ho)),t}),this.sidewaysChannelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Rt(e,i=>i*Po)),t.addColorStop(1,e),t}),this.sidewaysDarkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Rt(e,i=>i*Po*Ho)),t.addColorStop(1,Rt(e,i=>i*Ho)),t})}};_e.prototype.render=Nn;_e.prototype.computeNotePositions=Un;_e.prototype.createChannelAnalysers=Yn;_e.prototype.updateFftSize=Vn;_e.prototype.connectChannelAnalysers=Jn;_e.prototype.disconnectChannelAnalysers=Kn;_e.prototype.connectSequencer=zn;_e.prototype.calculateNoteTimes=Zn;_e.prototype.resetIndexes=Wn;_e.prototype.renderWaveforms=Pn;function L(o,e){let t=0;for(let i=0;i<e;i++)t|=o[o.currentIndex++]<<i*8;return t>>>0}function be(o,e,t){for(let i=0;i<t;i++)o[o.currentIndex++]=e>>i*8&255}function _(o,e){o[o.currentIndex++]=e&255,o[o.currentIndex++]=e>>8}function $(o,e){be(o,e,4)}function mt(o,e){let t=e<<8|o;return t>32767?t-65536:t}function jn(o){return o>127?o-256:o}function le(o,e,t=void 0,i=!0){if(t){let n=o.slice(o.currentIndex,o.currentIndex+e);return o.currentIndex+=e,new TextDecoder(t.replace(/[^\x20-\x7E]/g,"")).decode(n.buffer)}else{let n=!1,s="";for(let A=0;A<e;A++){let g=o[o.currentIndex++];if(!n){if((g<32||g>127)&&g!==10){if(i){n=!0;continue}else if(g===0){n=!0;continue}}s+=String.fromCharCode(g)}}return s}}function Tt(o,e=0){let t=o.length;e>0&&(t=e);let i=new F(t);return Qe(i,o,e),i}function At(o){return Tt(o,o.length+1)}function Qe(o,e,t=0){t>0&&e.length>t&&(e=e.slice(0,t));for(let i=0;i<e.length;i++)o[o.currentIndex++]=e.charCodeAt(i);if(t>e.length)for(let i=0;i<t-e.length;i++)o[o.currentIndex++]=0;return o}var ce=class{constructor(e,t,i){this.header=e,this.size=t,this.chunkData=i}};function se(o,e=!0,t=!1){let i=le(o,4),n=L(o,4),s;return e&&(s=new F(o.buffer.slice(o.currentIndex,o.currentIndex+n))),(e||t)&&(o.currentIndex+=n),n%2!==0&&o[o.currentIndex]===0&&o.currentIndex++,new ce(i,n,s)}function Ie(o,e=void 0){let t=8+o.size;o.size%2!==0&&t++,e&&(t+=e.length);let i=new F(t);return e&&(i.set(e,i.currentIndex),i.currentIndex+=e.length),Qe(i,o.header),$(i,t-8-(e?.length||0)),i.set(o.chunkData,i.currentIndex),i}function V(o,e,t=!1,i=!1){if(t){let l=new Uint8Array(e.length+1);l.set(e),e=l}let n=8,s=n+e.length,A=e.length;s%2!==0&&s++;let g=o;i&&(s+=4,A+=4,n+=4,g="LIST");let r=new F(s);return Qe(r,g),$(r,A),i&&Qe(r,o),r.set(e,n),r}function He(o,e){return o.find(t=>t.header!=="LIST"?!1:(t.chunkData.currentIndex=0,le(t.chunkData,4)===e))}function Oo(o){let e=[o&127];for(o>>=7;o>0;)e.unshift(o&127|128),o>>=7;return e}function Yo(o){if(!o.tracks)throw new Error("MIDI has no tracks!");let e=[];for(let n of o.tracks){let s=[],A=0,g;for(let r of n){let l=r.ticks-A,u;r.messageStatusByte<=N.keySignature||r.messageStatusByte===N.sequenceSpecific?u=[255,r.messageStatusByte,...Oo(r.messageData.length),...r.messageData]:r.messageStatusByte===N.systemExclusive?u=[240,...Oo(r.messageData.length),...r.messageData]:(u=[],g!==r.messageStatusByte&&(g=r.messageStatusByte,u.push(r.messageStatusByte)),u.push(...r.messageData)),s.push(...Oo(l)),s.push(...u),A+=l}e.push(new Uint8Array(s))}function t(n,s){for(let A=0;A<n.length;A++)s.push(n.charCodeAt(A))}let i=[];t("MThd",i),i.push(...go(6,4)),i.push(0,o.format),i.push(...go(o.tracksAmount,2)),i.push(...go(o.timeDivision,2));for(let n of e)t("MTrk",i),i.push(...go(n.length,4)),i.push(...n);return new Uint8Array(i)}function Ui(o){return new Re(o,N.systemExclusive,new F([65,16,66,18,64,0,127,0,65,247]))}function Ni(o,e,t,i){return new Re(i,N.controllerChange|o%16,new F([e,t]))}function Ba(o,e){let t=16|[1,2,3,4,5,6,7,8,0,9,10,11,12,13,14,15][o%16],i=[65,16,66,18,64,t,21,1],s=128-(64+t+21+1)%128;return new Re(e,N.systemExclusive,new F([...i,s,247]))}function fa(o,e=[],t=[],i=[],n=[]){Ee("%cApplying changes to the MIDI file...",f.info);let s=(a,c)=>{o.tracks.forEach((m,B)=>{if(o.midiPorts[B]===c)for(let E=m.length-1;E>=0;E--)m[E].messageStatusByte>=128&&m[E].messageStatusByte<240&&(m[E].messageStatusByte&15)===a&&m.splice(E,1)})};i.forEach(a=>{let c=a%16,m=a-c,B=o.midiPortChannelOffsets.findIndex(E=>E===m);s(c,B),v(`%cRemoving channel %c${a}%c!`,f.info,f.recognized,f.info)});let A=!1,g="gs",r=[],l=[];o.tracks.forEach((a,c)=>{a.forEach(m=>{let B=m.messageStatusByte&240;B===N.controllerChange?r.push({track:c,message:m,channel:m.messageStatusByte&15}):B===N.programChange?l.push({track:c,message:m,channel:m.messageStatusByte&15}):m.messageStatusByte===N.systemExclusive&&(m.messageData[0]===67&&m.messageData[2]===76&&m.messageData[5]===126&&m.messageData[6]===0?(v("%cXG system on detected",f.info),g="xg",A=!0):m.messageData[0]===67&&m.messageData[2]===76&&m.messageData[3]===8&&m.messageData[5]===3&&l.push({track:c,message:m,channel:m.messageData[4]}))})});let u=(a,c,m)=>o.tracks.reduce((B,E,S)=>{if(o.usedChannelsOnTrack[S].has(a)&&o.midiPorts[S]===c){let y;m?y=E.findIndex(w=>(w.messageStatusByte&240)===N.noteOn):y=E.findIndex(w=>w.messageStatusByte>128&&w.messageStatusByte<240&&(w.messageStatusByte&15)===a&&!(w.messageStatusByte&N.controllerChange===240&&(w.messageData[0]===R.resetAllControllers||w.messageData[0]===R.allNotesOff||w.messageData[0]===R.allSoundOff))),y!==-1&&B.push({index:y,track:S})}return B},[]),d=(a,c,m)=>{let B=r.filter(E=>E.channel===a&&E.message.messageData[0]===m&&o.midiPorts[E.track]===c);for(let E=0;E<B.length;E++){let S=B[E];o.tracks[S.track].splice(o.tracks[S.track].indexOf(S.message),1),r.splice(r.indexOf(S),1)}};t.forEach(a=>{let c=a.channel,m=c%16,B=c-m,E=o.midiPortChannelOffsets.findIndex(h=>h===B),S=a.controllerValue,y=a.controllerNumber;d(m,E,y),v(`%cNo controller %c${y}%c on channel %c${c}%c found. Adding it!`,f.info,f.unrecognized,f.info,f.value,f.info);let w=u(m,E,!0);if(w.length===0){W("Program change but no notes... ignoring!");return}let k=w.reduce((h,x)=>o.tracks[x.track][x.index].ticks<o.tracks[h.track][h.index].ticks?x:h),D=Ni(m,y,S,o.tracks[k.track][k.index].ticks);o.tracks[k.track].splice(k.index,0,D)}),e.forEach(a=>{let c=a.channel%16,m=a.channel-c,B=o.midiPortChannelOffsets.findIndex(U=>U===m),E=a.isDrum?0:a.bank,S=a.program,y=l.filter(U=>o.midiPorts[U.track]===B&&U.channel===c);if(d(c,B,R.bankSelect),d(c,B,R.lsbForControl0BankSelect),(a.isDrum||E>0)&&!A&&(o.tracks.forEach(U=>{for(let O=0;O<U.length;O++){let H=U[O];if(H.messageStatusByte===N.systemExclusive)if(H.messageData[0]===65&&H.messageData[2]===66&&H.messageData[6]===127){A=!0,v("%cGS on detected!",f.recognized);break}else H.messageData[0]===126&&H.messageData[2]===9&&(v("%cGM/2 on detected, removing!",f.info),U.splice(O,1),O--)}}),!A)){let U=0;o.tracks[0][0].messageStatusByte===N.trackName&&U++,o.tracks[0].splice(U,0,Ui(0)),v("%cGS on not detected. Adding it.",f.info),A=!0}for(let U of y)o.tracks[U.track].splice(o.tracks[U.track].indexOf(U.message),1);let w=u(c,B,m>0);if(w.length===0){W("Program change but no notes... ignoring!");return}let k=w.reduce((U,O)=>o.tracks[O.track][O.index].ticks<o.tracks[U.track][U.index].ticks?O:U),D=k.index,h=o.tracks[k.track][k.index].ticks;a.isDrum&&(g==="gs"&&c!==Ue?(v(`%cAdding GS Drum change on track %c${k.track}`,f.recognized,f.value),o.tracks[k.track].splice(D,0,Ba(a.channel,h)),D++):g==="xg"&&(v(`%cAdding XG Drum change on track %c${k.track}`,f.recognized,f.value),E=127)),v(`%cSetting %c${a.channel}%c to %c${E}:${S}%c. Track num: %c${k.track}`,f.info,f.recognized,f.info,f.recognized,f.info,f.recognized);let x=Ni(c,R.bankSelect,E,h);if(o.tracks[k.track].splice(D,0,x),D++,!a.isDrum&&g==="xg"){let U=Ni(c,R.lsbForControl0BankSelect,E,h);o.tracks[k.track].splice(D,0,U),D++}let G=new Re(h,N.programChange|c,new F([S]));o.tracks[k.track].splice(D,0,G)});for(let a of n){let c=a.channel%16,m=Math.floor(a.channel/16),B=Math.trunc(a.keyShift),E=a.keyShift-B;if(v(`%cTransposing channel %c${a.channel}%c by %c${a.keyShift}%c semitones`,f.info,f.recognized,f.info,f.value,f.info),B!==0&&o.tracks.forEach((S,y)=>{if(o.midiPorts[y]!==m||!o.usedChannelsOnTrack[y].has(c))return;let w=N.noteOn|c,k=N.noteOff|c,D=N.polyPressure|c;S.forEach(h=>{h.messageStatusByte!==w&&h.messageStatusByte!==k&&h.messageStatusByte!==D||(h.messageData[0]=Math.max(0,Math.min(127,h.messageData[0]+B)))})}),E!==0){let S=o.tracks.find((H,X)=>o.usedChannelsOnTrack[X].has(a.channel));if(S===void 0){W(`Channel ${a.channel} unused but transpose requested???`);continue}let y=N.noteOn|a.channel%16,w=S.findIndex(H=>H.messageStatusByte===y);if(w===-1){W(`No notes on channel ${a.channel} but transpose requested???`);continue}let k=S[w].ticks,D=E*64+64,h=N.controllerChange|a.channel%16,x=new Re(k,h,new F([R.RPNMsb,0])),G=new Re(k,h,new F([R.RPNLsb,1])),U=new Re(k,h,new F([R.dataEntryMsb,D])),O=new Re(k,h,new F([R.lsbForControl6DataEntry,0]));S.splice(w,0,O),S.splice(w,0,U),S.splice(w,0,G),S.splice(w,0,x)}}j()}function Ct(o,e){let t=[],i=[],n=[],s=[];e.channelSnapshots.forEach((A,g)=>{if(A.isMuted){i.push(g);return}let r=A.channelTransposeKeyShift+A.customControllers[To.channelTransposeFine]/100;r!==0&&t.push({channel:g,keyShift:r}),A.lockPreset&&n.push({channel:g,program:A.program,bank:A.bank,isDrum:A.drumChannel}),A.lockedControllers.forEach((l,u)=>{if(!l||u>127||u===R.bankSelect)return;let d=A.midiControllers[u]>>7;s.push({channel:g,controllerNumber:u,controllerValue:d})})}),fa(o,n,s,i,t)}var fe={name:"INAM",album:"IPRD",album2:"IALB",artist:"IART",genre:"IGNR",picture:"IPIC",copyright:"ICOP",creationDate:"ICRD",comment:"ICMT",engineer:"IENG",software:"ISFT",encoding:"IENC",midiEncoding:"MENC",bankOffset:"DBNK"},pt="utf-8",Qa="Created using SpessaSynth";function Vo(o,e,t,i=0,n="Shift_JIS",s={},A=!0){if(Ne("%cWriting the RMIDI File...",f.info),v(`%cConfiguration: Bank offset: %c${i}%c, encoding: %c${n}`,f.info,f.value,f.info,f.value),v("metadata",s),v("Initial bank offset",e.bankOffset),A){let S=function(){let D=0,h=1/0;return e.tracks.forEach((x,G)=>{B[G]>=x.length||x[B[G]].ticks<h&&(D=G,h=x[B[G]].ticks)}),D},c="gm",m=[],B=Array(e.tracks.length).fill(0),E=e.tracks.length,y=Array(e.tracks.length).fill(0),w=16+e.midiPortChannelOffsets.reduce((D,h)=>h>D?h:D),k=[];for(let D=0;D<w;D++)k.push({program:0,drums:D%16===Ue,lastBank:void 0,hasBankSelect:!1});for(;E>0;){let D=S(),h=e.tracks[D];if(B[D]>=h.length){E--;continue}let x=h[B[D]];B[D]++;let G=e.midiPortChannelOffsets[y[D]];if(x.messageStatusByte===N.midiPort){y[D]=x.messageData[0];continue}let U=x.messageStatusByte&240;if(U!==N.controllerChange&&U!==N.programChange&&U!==N.systemExclusive)continue;if(U===N.systemExclusive){if(x.messageData[0]!==65||x.messageData[2]!==66||x.messageData[3]!==18||x.messageData[4]!==64||!(x.messageData[5]&16)||x.messageData[6]!==21){x.messageData[0]===67&&x.messageData[2]===76&&x.messageData[5]===126&&x.messageData[6]===0?c="xg":x.messageData[0]===65&&x.messageData[2]===66&&x.messageData[6]===127?c="gs":x.messageData[0]===126&&x.messageData[2]===9&&(c="gm",m.push({tNum:D,e:x}));continue}let X=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][x.messageData[5]&15]+G;k[X].drums=!!(x.messageData[7]>0&&x.messageData[5]>>4);continue}let O=(x.messageStatusByte&15)+G,H=k[O];if(U===N.programChange){H.drums?t.presets.findIndex(T=>T.program===x.messageData[0]&&T.bank===128)===-1&&(x.messageData[0]=t.presets.find(T=>T.bank===128)?.program||0):t.presets.findIndex(T=>T.program===x.messageData[0]&&T.bank!==128)===-1&&(x.messageData[0]=t.presets.find(T=>T.bank!==128)?.program||0),H.program=x.messageData[0];let X=Math.max(0,H.lastBank?.messageData[1]-e.bankOffset),ie=H.drums?128:X;if(H.lastBank===void 0)continue;if(c==="xg"&&H.drums&&(k[O].lastBank.messageData[1]=127),t.presets.findIndex(T=>T.bank===ie&&T.program===x.messageData[0])===-1){let T=t.presets.find(K=>K.program===x.messageData[0])?.bank+i||i;H.lastBank.messageData[1]=T,v(`%cNo preset %c${ie}:${x.messageData[0]}%c. Changing bank to ${T}.`,f.info,f.recognized,f.info)}else{let K=(ie===128?c==="xg"?127:0:X)+i;H.lastBank.messageData[1]=K,v(`%cPreset %c${ie}:${x.messageData[0]}%c exists. Changing bank to ${K}.`,f.info,f.recognized,f.info)}continue}x.messageData[0]===R.bankSelect&&(H.hasBankSelect=!0,c==="xg"&&(H.drums=x.messageData[1]===120||x.messageData[1]===126||x.messageData[1]===127),H.lastBank=x)}if(k.forEach((D,h)=>{if(D.hasBankSelect===!0)return;let x=h%16,G=N.programChange|x,U=Math.floor(h/16)*16,O=e.midiPortChannelOffsets.indexOf(U),H=e.tracks.find((K,ge)=>e.midiPorts[ge]===O&&e.usedChannelsOnTrack[ge].has(x));if(H===void 0)return;let X=H.findIndex(K=>K.messageStatusByte===G);if(X===-1){let K=H.findIndex(Se=>Se.messageStatusByte>128&&Se.messageStatusByte<240&&(Se.messageStatusByte&15)===x);if(K===-1)return;let ge=H[K].ticks,je=t.getPreset(0,0).program;H.splice(K,0,new Re(ge,N.programChange|x,new F([je]))),X=K}v(`%cAdding bank select for %c${h}`,f.info,f.recognized);let ie=H[X].ticks,T=t.getPreset(0,D.program)?.bank+i||i;H.splice(X,0,new Re(ie,N.controllerChange|x,new F([R.bankSelect,T])))}),c!=="gs"&&c!=="xg"){for(let h of m)e.tracks[h.tNum].splice(e.tracks[h.tNum].indexOf(h.e),1);let D=0;e.tracks[0][0].messageStatusByte===N.trackName&&D++,e.tracks[0].splice(D,0,Ui(0))}}let g=new F(Yo(e).buffer),r=[Tt("INFO")],l=new TextEncoder;if(r.push(V(fe.software,l.encode("SpessaSynth"),!0)),s.name!==void 0?(r.push(V(fe.name,l.encode(s.name),!0)),n=pt):r.push(V(fe.name,e.rawMidiName,!0)),s.creationDate!==void 0)n=pt,r.push(V(fe.creationDate,l.encode(s.creationDate),!0));else{let c=new Date().toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});r.push(V(fe.creationDate,At(c),!0))}if(s.comment!==void 0&&(n=pt,r.push(V(fe.comment,l.encode(s.comment)))),s.engineer!==void 0&&r.push(V(fe.engineer,l.encode(s.engineer),!0)),s.album!==void 0&&(n=pt,r.push(V(fe.album,l.encode(s.album),!0)),r.push(V(fe.album2,l.encode(s.album),!0))),s.artist!==void 0&&(n=pt,r.push(V(fe.artist,l.encode(s.artist),!0))),s.genre!==void 0&&(n=pt,r.push(V(fe.genre,l.encode(s.genre),!0))),s.picture!==void 0&&r.push(V(fe.picture,new Uint8Array(s.picture))),s.copyright!==void 0)n=pt,r.push(V(fe.copyright,l.encode(s.copyright),!0));else{let c=e.copyright.length>0?e.copyright:Qa;r.push(V(fe.copyright,At(c)))}let u=new F(2);be(u,i,2),r.push(V(fe.bankOffset,u)),s.midiEncoding!==void 0&&(r.push(V(fe.midiEncoding,l.encode(s.midiEncoding))),n=pt),r.push(V(fe.encoding,At(n)));let d=ue(r),a=ue([Tt("RMID"),V("data",g),V("LIST",d),o]);return v("%cFinished!",f.info),j(),V("RIFF",a)}var ho=class{timeDivision=0;duration=0;tempoChanges=[{ticks:0,tempo:120}];copyright="";tracksAmount=0;lyrics=[];lyricsTicks=[];firstNoteOn=0;keyRange={min:0,max:127};lastVoiceEventTick=0;midiPorts=[0];midiPortChannelOffsets=[0];usedChannelsOnTrack=[];loop={start:0,end:0};midiName="";midiNameUsesFileName=!1;fileName="";rawMidiName=void 0;format=0;RMIDInfo={};bankOffset=0;isKaraokeFile=!1};var Io=class o extends ho{embeddedSoundFont=void 0;tracks=[];static copyFrom(e){let t=new o;return t.midiName=e.midiName,t.midiNameUsesFileName=e.midiNameUsesFileName,t.fileName=e.fileName,t.timeDivision=e.timeDivision,t.duration=e.duration,t.copyright=e.copyright,t.tracksAmount=e.tracksAmount,t.firstNoteOn=e.firstNoteOn,t.keyRange={...e.keyRange},t.lastVoiceEventTick=e.lastVoiceEventTick,t.loop={...e.loop},t.format=e.format,t.bankOffset=e.bankOffset,t.isKaraokeFile=e.isKaraokeFile,t.tempoChanges=[...e.tempoChanges],t.lyrics=e.lyrics.map(i=>new Uint8Array(i)),t.lyricsTicks=[...e.lyricsTicks],t.midiPorts=[...e.midiPorts],t.midiPortChannelOffsets=[...e.midiPortChannelOffsets],t.usedChannelsOnTrack=e.usedChannelsOnTrack.map(i=>new Set(i)),t.rawMidiName=e.rawMidiName?new Uint8Array(e.rawMidiName):void 0,t.embeddedSoundFont=e.embeddedSoundFont?e.embeddedSoundFont.slice():void 0,t.RMIDInfo={...e.RMIDInfo},t.tracks=e.tracks.map(i=>[...i]),t}flush(){let e=[];for(let n of this.tracks){n.sort((A,g)=>A.ticks-g.ticks);let s=n.find(A=>(A.messageStatusByte&240)===N.noteOn);s&&e.push(s.ticks)}this.firstNoteOn=Math.min(...e),this.lastVoiceEventTick=0,this.tempoChanges=[{ticks:0,tempo:120}],this.midiPorts=[],this.midiPortChannelOffsets=[];let t=0;this.usedChannelsOnTrack=this.tracks.map(()=>new Set),this.tracks.forEach((n,s)=>{this.midiPorts.push(-1),n.forEach(A=>{if(A.messageStatusByte>=128&&A.messageStatusByte<240&&A.ticks>this.lastVoiceEventTick&&(this.lastVoiceEventTick=A.ticks),A.messageStatusByte===N.setTempo)this.tempoChanges.push({ticks:A.ticks,tempo:6e7/co(A.messageData,3)});else if((A.messageStatusByte&240)===N.noteOn)this.usedChannelsOnTrack[s].add(A.messageData[0]);else if(A.messageStatusByte===N.midiPort){let g=A.messageData[0];this.midiPorts[s]=g,this.midiPortChannelOffsets[g]===void 0&&(this.midiPortChannelOffsets[g]=t,t+=16)}})}),this.loop={start:this.firstNoteOn,end:this.lastVoiceEventTick},this.tempoChanges.reverse(),this.duration=zt(this.lastVoiceEventTick,this);let i=0;for(let n of this.midiPorts)if(n!==-1){i=n;break}this.midiPorts=this.midiPorts.map(n=>n===-1?i:n),this.midiPortChannelOffsets.length===0&&(this.midiPortChannelOffsets=[0])}};function zt(o,e){let t=0;for(;o>0;){let i=e.tempoChanges.find(s=>s.ticks<o),n=o-i.ticks;t+=n*60/(i.tempo*e.timeDivision),o-=n}return t}var Me={loadNewSongList:0,pause:1,stop:2,play:3,setTime:4,changeMIDIMessageSending:5,setPlaybackRate:6,setLoop:7,changeSong:8,getMIDI:9,setSkipToFirstNote:10,setPreservePlaybackState:11},ct={midiEvent:0,songChange:1,textEvent:2,timeChange:3,pause:4,getMIDI:5,midiError:6,tempoChange:7};var Xn={duration:99999,firstNoteOn:0,loop:{start:0,end:123456},lastVoiceEventTick:123456,lyrics:[],copyright:"",midiPorts:[],midiPortChannelOffsets:[],tracksAmount:0,tempoChanges:[{ticks:0,tempo:120}],fileName:"NOT_LOADED.mid",midiName:"Loading...",rawMidiName:new Uint8Array([76,111,97,100,105,110,103,46,46,46]),usedChannelsOnTrack:[],timeDivision:0,keyRange:{min:0,max:127},isEmbedded:!1,RMIDInfo:{},bankOffset:0,midiNameUsesFileName:!1,format:0};var ya={skipToFirstNoteOn:!0,autoPlay:!0,preservePlaybackState:!1},Jo=class{onError;midiData;onSongChange={};onTextEvent;onTimeChange={};onSongEnded={};onTempoChange={};currentTempo=120;songIndex=0;_getMIDIResolve=void 0;hasDummyData=!0;isFinished=!1;duration=0;pausedTime=void 0;constructor(e,t,i=ya){this.ignoreEvents=!1,this.synth=t,this.highResTimeOffset=0,this.absoluteStartTime=this.synth.currentTime,this.synth.sequencerCallbackFunction=this._handleMessage.bind(this),this._skipToFirstNoteOn=i?.skipToFirstNoteOn??!0,this._preservePlaybackState=i?.preservePlaybackState??!1,this._skipToFirstNoteOn===!1&&this._sendMessage(Me.setSkipToFirstNote,!1),this._preservePlaybackState===!0&&this._sendMessage(Me.setPreservePlaybackState,!0),this.loadNewSongList(e,i?.autoPlay??!0),window.addEventListener("beforeunload",this.resetMIDIOut.bind(this))}_loop=!0;get loop(){return this._loop}set loop(e){this._sendMessage(Me.setLoop,e),this._loop=e}_playbackRate=1;get playbackRate(){return this._playbackRate}set playbackRate(e){this._sendMessage(Me.setPlaybackRate,e),this.highResTimeOffset*=e/this._playbackRate,this._playbackRate=e}get skipToFirstNoteOn(){return this._skipToFirstNoteOn}set skipToFirstNoteOn(e){this._skipToFirstNoteOn=e,this._sendMessage(Me.setSkipToFirstNote,this._skipToFirstNoteOn)}get preservePlaybackState(){return this._preservePlaybackState}set preservePlaybackState(e){this._preservePlaybackState=e,this._sendMessage(Me.setPreservePlaybackState,e)}get currentTime(){return this.pausedTime!==void 0?this.pausedTime:(this.synth.currentTime-this.absoluteStartTime)*this._playbackRate}set currentTime(e){this._preservePlaybackState||this.unpause(),this._sendMessage(Me.setTime,e)}get currentHighResolutionTime(){if(this.pausedTime!==void 0)return this.pausedTime;let e=this.highResTimeOffset,t=this.absoluteStartTime,i=(performance.now()/1e3-t)*this._playbackRate,n=e+i,s=this.currentTime,A=.01*this._playbackRate,g=s-n;return this.highResTimeOffset+=g*A,n=this.highResTimeOffset+i,n}get paused(){return this.pausedTime!==void 0}addOnSongChangeEvent(e,t){this.onSongChange[t]=e}addOnSongEndedEvent(e,t){this.onSongEnded[t]=e}addOnTimeChangeEvent(e,t){this.onTimeChange[t]=e}addOnTempoChangeEvent(e,t){this.onTempoChange[t]=e}resetMIDIOut(){if(this.MIDIout){for(let e=0;e<16;e++)this.MIDIout.send([N.controllerChange|e,120,0]),this.MIDIout.send([N.controllerChange|e,123,0]);this.MIDIout.send([N.reset])}}_sendMessage(e,t=void 0){this.synth.post({channelNumber:-1,messageType:ae.sequencerSpecific,messageData:{messageType:e,messageData:t}})}nextSong(){this._sendMessage(Me.changeSong,!0)}previousSong(){this._sendMessage(Me.changeSong,!1)}_callEvents(e,t){Object.entries(e).forEach(i=>{try{i[1](t)}catch(n){W(`Failed to execute callback for ${i[0]}:`,n)}})}_handleMessage(e,t){if(!this.ignoreEvents)switch(e){default:break;case ct.midiEvent:let i=t;if(this.MIDIout&&i[0]>=128){this.MIDIout.send(i);return}break;case ct.songChange:let n=t[0];this.songIndex=t[1],this.midiData=n,this.hasDummyData=!1,this.absoluteStartTime=0,this.duration=this.midiData.duration,this._callEvents(this.onSongChange,n),t[2]===!0&&this.unpause();break;case ct.textEvent:this.onTextEvent&&this.onTextEvent(...t);break;case ct.timeChange:let s=this.synth.currentTime-t;this._callEvents(this.onTimeChange,s),this._recalculateStartTime(s),this.paused&&this._preservePlaybackState?this.pausedTime=s:this.unpause();break;case ct.pause:this.pausedTime=this.currentTime,this.isFinished=t,this.isFinished&&this._callEvents(this.onSongEnded,void 0);break;case ct.midiError:if(this.onError)this.onError(t);else throw new Error("Sequencer error: "+t);return;case ct.getMIDI:this._getMIDIResolve&&this._getMIDIResolve(Io.copyFrom(t));break;case ct.tempoChange:this.currentTempo=t,this.onTempoChange&&this._callEvents(this.onTempoChange,this.currentTempo)}}_recalculateStartTime(e){this.absoluteStartTime=this.synth.currentTime-e/this._playbackRate,this.highResTimeOffset=(this.synth.currentTime-performance.now()/1e3)*this._playbackRate}async getMIDI(){return new Promise(e=>{this._getMIDIResolve=e,this._sendMessage(Me.getMIDI,void 0)})}loadNewSongList(e,t=!0){this.pause(),this.midiData=Xn,this.hasDummyData=!0,this.duration=99999,this._sendMessage(Me.loadNewSongList,[e,t]),this.songIndex=0,this.songsAmount=e.length,this.songsAmount>1&&(this.loop=!1),t===!1&&(this.pausedTime=this.currentTime)}connectMidiOutput(e){this.resetMIDIOut(),this.MIDIout=e,this._sendMessage(Me.changeMIDIMessageSending,e!==void 0),this.currentTime-=.1}pause(){if(this.paused){W("Already paused");return}this.pausedTime=this.currentTime,this._sendMessage(Me.pause)}unpause(){this.pausedTime=void 0,this.isFinished=!1}play(e=!1){this.isFinished&&(e=!0),this._recalculateStartTime(this.pausedTime||0),this.unpause(),this._sendMessage(Me.play,e)}stop(){this._sendMessage(Me.stop)}};var uo=["Shift_JIS","windows-1250","utf-8","utf-16","utf-16le","utf-16be","latin1","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","EUC-JP","ISO-2022-JP","EUC-KR","Big5","GB18030"];function $n(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' viewBox='0 0 16 16'>
        <path d='m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z'/>
    </svg>`}function Nt(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor'  viewBox='0 0 16 16'>
        <path d='M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z'/>
    </svg>`}function es(o){return`<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' viewBox='0 0 100 100'>
	<path d='M83.729,23.57c-0.007-0.562-0.32-1.084-0.825-1.337c-0.503-0.259-1.107-0.212-1.568,0.114l-5.944,4.262l-0.468,0.336
		c-6.405-6.391-15.196-10.389-24.938-10.389c-13.284,0-24.878,7.354-30.941,18.201l0.024,0.013
		c-0.548,1.183-0.124,2.607,1.026,3.271c0.001,0,0.001,0,0.002,0.001l8.136,4.697c1.218,0.704,2.777,0.287,3.48-0.932
		c0.006-0.011,0.009-0.023,0.015-0.034c3.591-6.404,10.438-10.747,18.289-10.747c4.879,0,9.352,1.696,12.914,4.5l-1.001,0.719
		l-5.948,4.262c-0.455,0.327-0.696,0.89-0.611,1.447c0.081,0.558,0.471,1.028,1.008,1.208l25.447,8.669
		c0.461,0.162,0.966,0.084,1.367-0.203c0.399-0.29,0.629-0.746,0.627-1.23L83.729,23.57z'/>
	<path d='M79.904,61.958c0,0-0.001,0-0.002-0.001l-8.136-4.697c-1.218-0.704-2.777-0.287-3.48,0.932
		c-0.006,0.011-0.009,0.023-0.015,0.034c-3.591,6.404-10.438,10.747-18.289,10.747c-4.879,0-9.352-1.696-12.914-4.5l1.001-0.719
		l5.948-4.262c0.455-0.327,0.696-0.89,0.611-1.447c-0.081-0.558-0.471-1.028-1.008-1.208l-25.447-8.669
		c-0.461-0.162-0.966-0.084-1.367,0.203c-0.399,0.29-0.629,0.746-0.627,1.23l0.092,26.828c0.007,0.562,0.32,1.084,0.825,1.337
		c0.503,0.259,1.107,0.212,1.568-0.114l5.944-4.262l0.468-0.336c6.405,6.391,15.196,10.389,24.938,10.389
		c13.284,0,24.878-7.354,30.941-18.201L80.93,65.23C81.478,64.046,81.055,62.623,79.904,61.958z'/>
</svg>`}function ts(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-text-center' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z'/>
</svg>`}function os(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-skip-end-fill' viewBox='0 0 16 16'>
  <path d='M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z'/>
</svg>`}function is(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-skip-start-fill' viewBox='0 0 16 16'>
  <path d='M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z'/>
</svg>`}function mo(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-volume-up-fill' viewBox='0 0 16 16'>
  <path d='M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z'/>
  <path d='M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z'/>
  <path d='M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z'/>
</svg>`}function Wt(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-mic' viewBox='0 0 16 16'>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
  <path d='M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3'/>
</svg>`}function ns(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.9}' height='${o*.9}' fill='currentColor' class='bi bi-mic-fill' viewBox='0 0 16 16'>
  <path d='M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z'/>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
</svg>`}function ss(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' style='color: red;' class='bi bi-volume-mute-fill' viewBox='0 0 16 16'>
  <path style='color: red;' fill='currentColor' d='M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z'/>
</svg>`}function Ko(o){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${o}" height="${o}" class="bi bi-drum-fill" fill="currentColor">
    <path d="M494,12L258.3,123.8c-6.8-4.6-15.1-7.3-24-7.3c-23.6,0-42.6,19.1-42.6,42.6s19.1,42.6,42.6,42.6
    		c22.4,0,40.9-17.3,42.6-39.3l129.2-61.3c38.7,16.3,62.6,37.6,62.6,57.9c0,40.2-91.1,85.2-213.1,85.2s-213.1-45-213.1-85.2
    		s91.1-85.2,213.1-85.2c3.7,0,7-0.1,10.7,0l75.2-35.3c-26.7-4.5-55.3-7.3-85.9-7.3C109.9,31.3,0,86.2,0,159.1v213.1
    		c0,21.1,9.5,40.4,24,55.9c14.5,15.6,34.2,28.1,57.3,38.6c46.1,21,107.1,33.3,174.4,33.3s128.3-12.3,174.4-33.3
    		c23.1-10.5,42.8-23.1,57.3-38.6c14.5-15.6,24-34.9,24-55.9V159.1c0-31.5-20.8-59.4-55.9-81.2L512,50.6L494,12z M42.6,231.7
    		c21.6,16.3,50.7,29.7,85.2,39.3v168.4c-10.7-3.3-20.4-7.2-29.3-11.3c-19.3-8.8-34-19.4-43.3-29.3c-9.2-9.9-12.7-18.2-12.7-26.6
    		V231.7z M468.7,231.7v140.5c0,8.4-3.4,16.7-12.7,26.6c-9.2,9.9-24,20.5-43.3,29.3c-8.9,4.1-18.6,8-29.3,11.3V271
    		C418,261.4,447.1,248,468.7,231.7z M170.4,280.3c26.5,4.4,55,6.7,85.2,6.7s58.8-2.2,85.2-6.7v169.1c-26.2,4.9-54.9,8-85.2,8
    		s-59-3.1-85.2-8V280.3z"/>
   </svg>`}function zo(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-music-note" viewBox="0 0 16 16">
  <path d="M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z"/>
  <path fill-rule="evenodd" d="M9 3v10H8V3h1z"/>
  <path d="M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z"/>
</svg>`}function As(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-gear-fill' viewBox='0 0 16 16'>
  <path d='M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z'/>
</svg>`}function rs(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-music-note-beamed' viewBox='0 0 16 16'>
  <path d='M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13s1.12-2 2.5-2 2.5.896 2.5 2m9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2'/>
  <path fill-rule='evenodd' d='M14 11V2h1v9zM6 3v10H5V3z'/>
  <path d='M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4z'/>
</svg>`}function as(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-chevron-down' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708'/>
</svg>`}function Co(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-lock-fill' viewBox='0 0 16 16'>
  <path d='M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2'/>
</svg>`}function qi(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o*.8}' height='${o*.8}' fill='currentColor' class='bi bi-unlock-fill' viewBox='0 0 16 16'>
  <path d='M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2'/>
</svg>`}function ls(o){return`<svg xmlns='http://www.w3.org/2000/svg' width='${o}' height='${o}' fill='currentColor' class='bi bi-hourglass' viewBox='0 0 16 16'>
      <path d='M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5m2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2z'/>
    </svg>`}function po(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`}function _i(o){return`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
  <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
</svg>`}function Zt(o,e){let t=document.createElement("div");return t.classList.add("control_buttons"),t.title=o,t.innerHTML=e,t}var ye={synthesizerUIShow:"s",settingsShow:"r",blackMidiMode:"b",midiPanic:"backspace",playPause:" ",toggleLoop:"l",toggleLyrics:"t",seekBackwards:"arrowleft",seekForwards:"arrowright",previousSong:"[",nextSong:"]",toggleSubtitles:"Escape",cinematicMode:"c",videoMode:"v"};function cs(){navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.currentSongTitle,artist:"SpessaSynth"}),navigator.mediaSession.setActionHandler("play",()=>{this.seqPlay()}),navigator.mediaSession.setActionHandler("pause",()=>{this.seqPause()}),navigator.mediaSession.setActionHandler("stop",()=>{this.seq.currentTime=0,this.seqPause()}),navigator.mediaSession.setActionHandler("seekbackward",o=>{this.seq.currentTime-=o.seekOffset||10}),navigator.mediaSession.setActionHandler("seekforward",o=>{this.seq.currentTime+=o.seekOffset||10}),navigator.mediaSession.setActionHandler("seekto",o=>{this.seq.currentTime=o.seekTime}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.switchToPreviousSong()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.switchToNextSong()}),navigator.mediaSession.playbackState="playing")}function gs(o=!0){if(this.seq?.hasDummyData===!0)this.currentSongTitle=this.locale.getLocaleString("locale.synthInit.genericLoading");else if(this.seq.midiData.midiNameUsesFileName)this.currentSongTitle=Fo(this.seq.midiData.fileName);else{let e=this.infoDecoder.decode(this.seq.midiData.rawMidiName.buffer).replace(/\0$/,"");this.currentSongTitle=Fo(e)}if(this.seq.midiData&&(this.loadLyricData(),this.setLyricsText(this.lyricsIndex),o&&(this.rawOtherTextEvents=[])),this.synthDisplayMode.enabled===!1?this.mainTitleMessageDisplay.innerText=this.currentSongTitle:this.mainTitleMessageDisplay.innerText=this.decodeTextFix(this.synthDisplayMode.currentEncodedText.buffer),document.title=this.currentSongTitle+" - SpessaSynth",this.musicModeUI.setTitle(this.currentSongTitle),!!navigator.mediaSession)try{navigator.mediaSession.setPositionState({duration:this.seq.duration,playbackRate:this.seq.playbackRate,position:this.seq.currentTime})}catch{}}function Sa(o){let e=[],t="",i=!1;for(let n=0;n<o.length;n++){let s=o[n];s==="{"?(t&&(e.push(t),t=""),i=!0,t+=s):s==="}"?(t+=s,e.push(t),t="",i=!1):t+=s}return t&&e.push(t),e}function ds(o){let e=o.slice(2),t=255-parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);return`rgba(${parseInt(e.slice(6),16)}, ${n}, ${i}, ${t/255})`}var Wo=class{text=[];textClean="";layer=0;startSeconds=0;endSeconds=0;styleName="";styleData={};marginLeft=0;marginRight=0;marginVertical=0;element=void 0;primaryColor;secondaryColor;constructor(e,t,i,n,s,A,g,r,l){this.text=Sa(e);let u=[];this.text.forEach(d=>{d.startsWith("{")||u.push(d)}),this.textClean=u.join(""),this.startSeconds=i,this.endSeconds=n,this.styleName=s,this.styleData=l.find(d=>d.Name===this.styleName),this.marginLeft=A||parseInt(this.styleData.MarginL),this.marginRight=g||parseInt(this.styleData.MarginR),this.marginVertical=r||parseInt(this.styleData.MarginV),this.primaryColor=ds(this.styleData.PrimaryColour),this.secondaryColor=ds(this.styleData.SecondaryColour)}hide(){this.element!==void 0&&this.element.remove(),this.element=void 0}updateHighlights(e){let t=0,i=0,n=0,s=e-this.startSeconds,A=!1,g=0;for(let r of this.text)if(r.startsWith("{")){let l=r.startsWith("{\\K")||r.startsWith("{\\kf");if(!l&&!r.startsWith("{\\k"))continue;let u=parseInt(r.slice(3,-1))/100;l?(g=u,A=!0):t+=u,i=u}else{let l=this.textChunks[n];if(A){if(A=!1,t>s)l.style.cssText="",l.style.backgroundImage="",l.style.backgroundClip="",l.style.color=this.secondaryColor;else{let u=s-t,d=Math.min(100,u/g*100);l.style.color="transparent",l.style.backgroundImage=`linear-gradient(90deg, ${this.primaryColor} 50%, ${this.secondaryColor} 50%)`,l.style.backgroundPosition=`${100-d}%`,l.style.backgroundSize="200% 100%",l.style.backgroundClip="text"}t+=g}else l.style.backgroundImage="",l.style.backgroundClip="",t-i>s?l.style.color=this.secondaryColor:l.style.color=this.primaryColor;n++}}show(e,t,i,n,s){if(this.element!==void 0){this.updateHighlights(n);return}this.element=document.createElement("div"),this.element.classList.add("ass_renderer_element");let A=parseInt(this.styleData.Alignment);if(this.text[0].startsWith("{\\an"))A=parseInt(this.text[0][4]);else if(this.text[0].startsWith("{\\a"))switch(parseInt(this.text[0][3])){case 1:A=1;break;case 2:A=2;break;case 3:A=3;break;case 5:A=7;break;case 6:A=8;break;case 7:A=9;break;case 9:A=4;break;case 10:A=5;break;case 11:A=6;break;default:A=5;break}let g=this.marginLeft/e*100,r=this.marginRight/e*100,l=this.marginVertical/t*100;switch(A){case 1:this.element.style.left=`${g}%`,this.element.style.bottom=`${l}%`;break;case 2:this.element.style.left=`calc(50% + ${g}% - ${r}%)`,this.element.style.bottom=`${l}%`,this.element.style.transform="translateX(-50%)";break;case 3:this.element.style.right=`${r}%`,this.element.style.bottom=`${l}%`;break;case 4:this.element.style.left=`${g}%`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translateY(-50%)";break;case 5:this.element.style.left=`calc(50% + ${g}% - ${r}%)`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translate(-50%, -50%)";break;case 6:this.element.style.right=`${r}%`,this.element.style.top=`calc(50% + ${l}% - ${l}%)`,this.element.style.transform="translateY(-50%)";break;case 7:this.element.style.left=`${g}%`,this.element.style.top=`${l}%`;break;case 8:this.element.style.left=`calc(50% + ${g}% - ${r}%)`,this.element.style.top=`${l}%`,this.element.style.transform="translateX(-50%)";break;case 9:this.element.style.right=`${r}%`,this.element.style.top=`${l}%`;break;default:this.element.style.left=`${g}%`,this.element.style.bottom=`${l}%`;break}this.element.style.color=this.secondaryColor,this.element.style.zIndex=(this.layer+99999).toString();let u=`${this.styleData.Fontname}, "${s}", sans-serif`,d=this.styleData.Fontsize;this.text[0].startsWith("{\\fs")&&(d=this.text[0].slice(4,-1)),this.element.style.fontFamily=u,this.element.style.fontSize=`${parseFloat(d)/t*.8*window.screen.height}px`,this.styleData.Bold==="1"&&(this.element.style.fontWeight="bold"),this.styleData.Italic==="1"&&(this.element.style.fontStyle="italic"),this.styleData.Underline==="1"&&(this.element.style.textDecoration="underline"),this.styleData.StrikeOut==="1"&&(this.element.style.textDecoration="line-through"),this.textChunks=[];for(let c of this.text)if(!c.startsWith("{")){let m=document.createElement("span");m.textContent=c.replaceAll("\\N",`
`).replaceAll("\\h"," ").replaceAll("\\n",`
`),m.style.color=this.secondaryColor,this.element.appendChild(m),this.textChunks.push(m)}i.appendChild(this.element),this.element.offsetHeight;let a=this.element.getBoundingClientRect();for(let c of i.children){if(c===this.element)continue;let m=c.getBoundingClientRect(),B=i.getBoundingClientRect();a.top<m.bottom&&a.bottom>m.top&&(m.top-B.top>a.height?(this.element.style.top="",this.element.style.bottom=`${B.bottom-m.top}px`):(this.element.style.top=`${m.top+m.height}px`,this.element.style.bottom=""))}}};var Hi=384,Pi=288;function hs(o){let[e,t,i]=o.split(":"),[n,s]=i.split(".");return parseInt(e)*3600+parseInt(t)*60+parseInt(n)+parseInt(s)/100}var Oi=class{type;data},Zo=class{type;contents=[];constructor(e,t){this.type=e,this.contents=t}getContent(e,t=""){return this.contents.find(i=>i.type===e)?.data||t}},jo=class{visible;subData=[];resolutionX=Hi;resolutionY=Pi;kerning=!0;styles=[];events=[];fonts=[];timer=1;constructor(e,t,i){this.seq=e,this.screen=t,this.init(),i.onRender=this.tick.bind(this),document.addEventListener("keydown",n=>{n.key===ye.toggleSubtitles&&this.setVisibility(!this.visible)})}tick(){if(!this.visible){for(let t of this.events)t.hide();return}let e=this.seq.currentTime*this.timer;for(let t of this.events)(t.startSeconds>e||t.endSeconds<=e)&&t.hide();this.screen.offsetHeight;for(let t of this.events)t.startSeconds<=e&&t.endSeconds>e&&t.show(this.resolutionX,this.resolutionY,this.screen,e,this.firstEmbeddedFontName)}init(){this.visible=!1,this.subData=[],this.resolutionX=Hi,this.resolutionY=Pi,this.kerning=!0,this.styles=[],this.events=[],this.fonts=[],this.screen.innerHTML=""}setVisibility(e){this.visible=e,this.tick(),setTimeout(()=>this.tick(),10)}_getSection(e,t=!1){let i=e.toLowerCase(),n=this.subData.find(s=>s.type.toLowerCase()===i);if(!n&&t)throw new Error(`Section ${e} not found!`);return n}loadASSSubtitles(e){this.init();let t=e.replaceAll(`\r
`,`
`).split(`
`),i=!1,n="",s="",A=[];for(let a of t)if(a.startsWith("[")&&!i)n=a,i=!0;else if(a.length===0&&i)i=!1,this.subData.push(new Zo(n,A)),A=[];else if(n==="[Fonts]")if(!a.startsWith("fontname: "))this.fonts.find(c=>c.name===s).data+=a;else{let c=a.split(/: (.*)/s)[1];this.fonts.push({name:c,data:"",dataDecoded:void 0}),s=c}else if(!a.startsWith("!")&&!a.startsWith(";")){let c=a.split(/: (.*)/s),m=new Oi;m.type=c[0],m.data=c[1],A.push(m)}i&&this.subData.push(new Zo(n,A));let g=this._getSection("[Script Info]",!0);this.resolutionX=parseInt(g.getContent("PlayResX",Hi.toString())),this.resolutionY=parseInt(g.getContent("PlayResY",Pi.toString())),this.kerning=g.getContent("Kerning","yes")==="yes",this.timer=parseFloat(g.getContent("Timer","100"))/100;let r=this._getSection("[V4+ Styles]",!0),l=r.getContent("Format","").split(", ");for(let a of r.contents){if(a.type!=="Style")continue;let c=a.data.split(",");if(c.length!==l.length)throw new Error(`Format and style data counts do not match. Expected ${l.length} got ${c.length}`);let m={};for(let B=0;B<c.length;B++)m[l[B]]=c[B];this.styles.push(m)}let u=this._getSection("[Events]",!0),d=u.getContent("Format","").split(", ");for(let a of u.contents){if(a.type!=="Dialogue")continue;let c=[],m=a.data;for(let S=0;S<d.length-1;S++){let y=m.indexOf(",");c.push(m.substring(0,y)),m=m.substring(y+1)}if(c.push(m),c.length!==d.length)throw new Error(`Format and dialogue data counts do not match. Expected ${d.length} got ${c.length}`);let B={};for(let S=0;S<c.length;S++)B[d[S]]=c[S];let E=new Wo(B.Text||"",parseInt(B.Layer)||0,B.Start?hs(B.Start):0,B.End?hs(B.End):0,B.Style||"",parseInt(B.MarginL)||0,parseInt(B.MarginR)||0,parseInt(B.MarginV)||0,this.styles);this.events.push(E)}for(let a of this.fonts){let c=a.data,m=[];for(let y=0;y<c.length;y+=4){let k=c.slice(y,y+4).split("").map(G=>G.charCodeAt(0)-33),D=k[0]<<2|k[1]>>4,h=(k[1]&15)<<4|k[2]>>2,x=(k[2]&3)<<6|k[3];y+1<c.length&&m.push(D),y+2<c.length&&m.push(h),y+3<c.length&&m.push(x)}a.dataDecoded=new Uint8Array(m);let B=new Blob([a.dataDecoded]),E=URL.createObjectURL(B),S=document.createElement("style");S.innerHTML=`@font-face {
                font-family: "${a.name}";
                src: url("${E}");
            }`,document.head.appendChild(S)}this.firstEmbeddedFontName=this.fonts[0]?.name||"sans-serif",v("Subtitles:",this.styles,this.events,this.fonts),this.screen.style.fontKerning=this.kerning?"normal":"none"}};function Is(){this.lyricsElement={};let o=document.createElement("div");o.classList.add("lyrics");let e=document.createElement("div");e.classList.add("lyrics_title_wrapper"),o.append(e),this.lyricsElement.titleWrapper=e;let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent","locale.sequencerController.lyrics.title"),t.classList.add("lyrics_title"),e.appendChild(t),this.lyricsElement.title=t;let i=document.createElement("select");uo.forEach(u=>{let d=document.createElement("option");d.innerText=u,d.value=u,i.appendChild(d)}),i.value=this.encoding,i.onchange=()=>this.changeEncoding(i.value),i.classList.add("lyrics_selector"),this.encodingSelector=i,e.appendChild(i);let n=document.createElement("p");n.classList.add("lyrics_text"),o.appendChild(n);let s=document.createElement("details"),A=document.createElement("summary");this.locale.bindObjectProperty(A,"textContent","locale.sequencerController.lyrics.otherText.title"),s.appendChild(A);let g=document.createElement("div");g.innerText="",s.appendChild(g),o.appendChild(s),this.subtitleManager=new jo(this.seq,document.getElementsByClassName("ass_renderer_field")[0],this.renderer);let r=document.createElement("input");r.type="file",r.accept=".ass",r.id="subtitle_upload",r.classList.add("hidden"),o.appendChild(r),r.onchange=async()=>{if(r.files[0]===void 0)return;let u=r.files[0];this.subtitleManager.loadASSSubtitles(await u.text()),this.subtitleManager.setVisibility(!0),this.toggleLyrics()};let l=document.createElement("label");l.htmlFor="subtitle_upload",l.classList.add("general_button"),this.locale.bindObjectProperty(l,"textContent","locale.sequencerController.lyrics.subtitles.title"),this.locale.bindObjectProperty(l,"title","locale.sequencerController.lyrics.subtitles.description"),o.appendChild(l),this.lyricsElement.text={main:n,other:g,subtitleButton:l,separateLyrics:[]},this.lyricsElement.mainDiv=o,this.lyricsElement.selector=i,this.controls.appendChild(o),this.requiresTextUpdate=!0}function us(o){if(!(this.currentLyricsString.length<2||o<0||o>this.currentLyricsString.length)){this.lyricsIndex=o;for(let e=0;e<o;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_gray"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_highlight");if(o<this.currentLyricsString.length){for(let e=o;e<this.lyricsElement.text.separateLyrics.length;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_highlight"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_gray");this.lyricsElement.text.separateLyrics[o].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}}function ms(){let o="";for(let e of this.rawOtherTextEvents)o+=`<span><pre>${Object.keys(N).find(t=>N[t]===e.type).replace(/([a-z])([A-Z])/g,"$1 $2")}:</pre> <i>${this.decodeTextFix(e.data.buffer)}</i></span><br>`;this.lyricsElement.text.other.innerHTML=o}var et=32,Cs="#ccc",ps="#555",wa="#333",ka="#ddd",Da="Shift_JIS",gt=class{constructor(e,t,i,n){this.iconColor=Cs,this.iconDisabledColor=ps,this.controls=e,this.encoding=Da,this.decoder=new TextDecoder(this.encoding),this.infoDecoder=new TextDecoder(this.encoding),this.hasInfoDecoding=!1,this.lyricsIndex=0,this.requiresTextUpdate=!1,this.rawOtherTextEvents=[],this.mode="dark",this.locale=t,this.currentSongTitle="",this.currentLyrics=[],this.currentLyricsString=[],this.musicModeUI=i,this.renderer=n,this.mainTitleMessageDisplay=document.getElementById("title"),this.synthDisplayMode={enabled:!1,currentEncodedText:new Uint8Array(0)};let s=null;n.synth.eventHandler.addEvent("synthdisplay","sequi-synth-display",A=>{if(A.displayType===0||A.displayType===1){this.mainTitleMessageDisplay.classList.add("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display");let g=A.displayData;A.displayType===1&&(g=g.slice(1));let r=this.decodeTextFix(g.buffer);if(A.displayType===1){let l=A.displayData[0];this.mainTitleMessageDisplay.classList.add("xg_sysex_display");let u=l&15;for(let d=0;d<u;d++)r=" "+r;r.length>=16&&(r=r.slice(0,16)+`
`+r.slice(16)),(l&16)>1&&(r=`
`+r)}r.trim().length===0?this.mainTitleMessageDisplay.innerText="\u200E ":this.mainTitleMessageDisplay.innerText=r,this.synthDisplayMode.enabled=!0,this.synthDisplayMode.currentEncodedText=g,s!==null&&clearTimeout(s),s=setTimeout(()=>{this.synthDisplayMode.enabled=!1,this.restoreDisplay()},5e3)}})}toggleDarkMode(){if(this.mode==="dark"?(this.mode="light",this.iconColor=wa,this.iconDisabledColor=ka):(this.mode="dark",this.iconColor=Cs,this.iconDisabledColor=ps),!this.seq){this.requiresThemeUpdate=!0;return}this.progressBar.classList.toggle("note_progress_light"),this.progressBarBackground.classList.toggle("note_progress_background_light"),this.lyricsElement.mainDiv.classList.toggle("lyrics_light"),this.lyricsElement.titleWrapper.classList.toggle("lyrics_light"),this.lyricsElement.selector.classList.toggle("lyrics_light")}seqPlay(e=!0){e&&this.seq.play(),this.playPause.innerHTML=Nt(et),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing")}seqPause(e=!0){e&&this.seq.pause(),this.playPause.innerHTML=$n(et),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused")}switchToNextSong(){this.seq.nextSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}switchToPreviousSong(){this.seq.previousSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}decodeTextFix(e){let t=0;for(;;)try{return this.decoder.decode(e)}catch{t++,this.changeEncoding(uo[t]),this.encodingSelector.value=uo[t]}}connectSequencer(e){this.seq=e,this.createControls(),this.setSliderInterval(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seq.onTextEvent=(t,i,n)=>{switch(i){default:return;case N.text:case N.copyright:case N.cuePoint:case N.trackName:case N.instrumentName:case N.programName:case N.marker:this.rawOtherTextEvents.push({type:i,data:t}),this.requiresTextUpdate=!0;return;case N.lyric:this.setLyricsText(n);break}},this.seq.addOnTimeChangeEvent(()=>{this.seqPlay(!1)},"sequi-time-change"),this.seq.addOnSongChangeEvent(t=>{if(this.synthDisplayMode.enabled=!1,this.lyricsIndex=0,this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seqPlay(!1),this.seq.songsAmount>1&&(this.seq.loop=!1,this.loopButton.firstElementChild.setAttribute("fill",this.iconDisabledColor)),this.restoreDisplay(),this.hasInfoDecoding=this.seq.midiData.RMIDInfo?.[fe.encoding]!==void 0,t.isEmbedded){let i=(g,r,l,u="")=>this.seq.midiData.RMIDInfo?.[g]===void 0?r:u+l.decode(this.seq.midiData.RMIDInfo?.[g]).replace(/\0$/,""),n=new TextDecoder,s=i(fe.midiEncoding,this.encoding,n),A=i(fe.encoding,"utf-8",n);this.infoDecoder=new TextDecoder(A),this.changeEncoding(s)}},"sequi-song-change"),this.requiresThemeUpdate&&this.mode==="light"&&(this.mode="dark",this.toggleDarkMode())}restoreDisplay(){let e=this.currentSongTitle;this.seq||(e=this.locale.getLocaleString("locale.titleMessage")),this.mainTitleMessageDisplay.innerText=e,this.mainTitleMessageDisplay.classList.remove("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display")}changeEncoding(e){this.encoding=e,this.decoder=new TextDecoder(e),this.hasInfoDecoding||(this.infoDecoder=new TextDecoder(e)),this.updateOtherTextEvents(),this.lyricsElement.text.separateLyrics.forEach((t,i)=>{this.currentLyrics[i]!==void 0&&(t.innerText=this.decodeTextFix(this.currentLyrics[i].buffer))}),this.lyricsElement.selector.value=e,this.updateTitleAndMediaStatus(!1),this.setLyricsText(this.lyricsIndex)}createControls(){this.progressTime=document.createElement("p"),this.progressTime.id="note_time",this.progressTime.onclick=d=>{d.preventDefault();let a=e.getBoundingClientRect(),c=d.clientX-a.left,m=a.width;this.seq.currentTime=c/m*this.seq.duration,i.innerHTML=Nt(et)},this.createLyrics();let e=document.createElement("div");e.id="note_progress_background",this.progressBarBackground=e,this.progressBar=document.createElement("div"),this.progressBar.id="note_progress",this.progressBar.min="0",this.progressBar.max=this.seq.duration.toString();let t=document.createElement("div"),i=Zt("Play/Pause",Nt(et));this.playPause=i,this.locale.bindObjectProperty(i,"title","locale.sequencerController.playPause");let n=()=>{this.seq.paused?this.seqPlay():this.seqPause()};i.onclick=n;let s=Zt("Previous song",is(et));this.locale.bindObjectProperty(s,"title","locale.sequencerController.previousSong"),s.onclick=()=>this.switchToPreviousSong();let A=Zt("Next song",os(et));this.locale.bindObjectProperty(A,"title","locale.sequencerController.nextSong"),A.onclick=()=>this.switchToNextSong();let g=Zt("Loop this",es(et));this.locale.bindObjectProperty(g,"title","locale.sequencerController.loopThis");let r=()=>{this.seq.loop?this.seq.loop=!1:(this.seq.loop=!0,this.seq.currentTime>=this.seq.duration&&(this.seq.currentTime=0)),g.firstElementChild.setAttribute("fill",this.seq.loop?this.iconColor:this.iconDisabledColor)};g.onclick=r,this.loopButton=g;let l=Zt("Show lyrics",ts(et));this.locale.bindObjectProperty(l,"title","locale.sequencerController.lyrics.show"),l.firstElementChild.setAttribute("fill",this.iconDisabledColor);let u=()=>{this.lyricsElement.mainDiv.classList.toggle("lyrics_show"),l.firstElementChild.setAttribute("fill",this.lyricsElement.mainDiv.classList.contains("lyrics_show")?this.iconColor:this.iconDisabledColor)};this.toggleLyrics=u,l.onclick=u,document.addEventListener("keydown",d=>{switch(d.key.toLowerCase()){case ye.playPause:d.preventDefault(),n();break;case ye.toggleLoop:d.preventDefault(),r();break;case ye.toggleLyrics:d.preventDefault(),u();break;default:break}}),t.appendChild(s),t.appendChild(g),t.appendChild(i),t.appendChild(l),t.appendChild(A),this.controls.appendChild(e),e.appendChild(this.progressBar),this.controls.appendChild(this.progressTime),this.controls.appendChild(t),document.addEventListener("keydown",d=>{switch(d.key.toLowerCase()){case ye.seekBackwards:d.preventDefault(),this.seq.currentTime-=5,i.innerHTML=Nt(et);break;case ye.seekForwards:d.preventDefault(),this.seq.currentTime+=5,i.innerHTML=Nt(et);break;case ye.previousSong:this.switchToPreviousSong();break;case ye.nextSong:this.switchToNextSong();break;default:if(!isNaN(parseFloat(d.key))){d.preventDefault();let a=parseInt(d.key);0<=a&&a<=9&&(this.seq.currentTime=this.seq.duration*(a/10),i.innerHTML=Nt(et))}break}})}_updateInterval(){this.progressBar.style.width=`${this.seq.currentTime/this.seq.duration*100}%`;let e=xt(this.seq.currentTime),t=xt(this.seq.duration);this.progressTime.innerText=`${e.time} / ${t.time}`,this.requiresTextUpdate&&(this.updateOtherTextEvents(),this.requiresTextUpdate=!1)}setSliderInterval(){setInterval(this._updateInterval.bind(this),100)}loadLyricData(){if(this.currentLyrics=this.seq.midiData.lyrics,this.currentLyricsString=this.currentLyrics.map(e=>this.decodeTextFix(e.buffer)),this.currentLyrics.length===0)this.currentLyricsString=[this.locale.getLocaleString("locale.sequencerController.lyrics.noLyrics")];else{let e=!0;for(let t=1;t<this.currentLyricsString.length-1;t+=2){let i=this.currentLyricsString[t],n=this.currentLyricsString[t+1];if(i.trim()===""||n.trim()===""){t-=1;continue}if(i.trim()!==n.trim()){e=!1;break}}if(e)for(let t=0;t<this.currentLyricsString.length;t+=2){if(this.currentLyricsString[t]===`
`){t-=1;continue}this.currentLyricsString[t]=""}}this.currentLyricsString=this.currentLyricsString.map(e=>e.replace("/",`
`)),this.lyricsElement.text.main.innerHTML="",this.lyricsElement.text.separateLyrics=[];for(let e of this.currentLyricsString){let t=document.createElement("span");t.innerText=e,t.classList.add("lyrics_text_gray"),this.lyricsElement.text.main.appendChild(t),this.lyricsElement.text.separateLyrics.push(t)}}};gt.prototype.createNavigatorHandler=cs;gt.prototype.updateTitleAndMediaStatus=gs;gt.prototype.createLyrics=Is;gt.prototype.setLyricsText=us;gt.prototype.updateOtherTextEvents=ms;function Es(){this.controllers.forEach(o=>{o.voiceMeter.hide(),o.pitchWheel.hide(),o.pan.hide(),o.expression.hide(),o.volume.hide(),o.mod.hide(),o.chorus.hide(),o.reverb.hide(),o.brightness.hide()})}function Bs(){this.controllers.forEach(o=>{o.voiceMeter.show(),o.pitchWheel.show(),o.pan.show(),o.expression.show(),o.volume.show(),o.mod.show(),o.chorus.show(),o.reverb.show(),o.brightness.show()})}function fs(){this.mainControllerDiv.classList.toggle("synthui_controller_light"),this.mainButtons.forEach(o=>{o.classList.toggle("synthui_button"),o.classList.toggle("synthui_button_light")}),this.mainMeters.forEach(o=>{o.toggleMode(!0)}),this.controllers.forEach(o=>{o.voiceMeter.toggleMode(),o.pitchWheel.toggleMode(),o.pan.toggleMode(),o.expression.toggleMode(),o.volume.toggleMode(),o.mod.toggleMode(),o.chorus.toggleMode(),o.reverb.toggleMode(),o.brightness.toggleMode(),o.preset.toggleMode(),o.drumsToggle.classList.toggle("mute_button_light"),o.muteButton.classList.toggle("mute_button_light")})}var We=class{constructor(e="none",t,i,n,s=0,A=100,g=!1,r=void 0,l=void 0,u=void 0){if(this.meterText="",i.bindObjectProperty(this,"meterText",t+".title"),this.min=s,this.max=A,this.currentValue=-1,this.isShown=!0,this.isVisualValueSet=!0,this.isLocked=!1,this.lockCallback=l,this.unlockCallback=u,this.div=document.createElement("div"),this.div.classList.add("voice_meter"),this.div.classList.add("controller_element"),e!=="none"&&e!==""&&(this.div.style.borderColor=e),i.bindObjectProperty(this.div,"title",t+".description",n),this.bar=document.createElement("div"),this.bar.classList.add("voice_meter_bar"),this.bar.style.background=e,this.div.appendChild(this.bar),this.text=document.createElement("p"),this.text.classList.add("voice_meter_text"),this.div.appendChild(this.text),this.isActive=!1,g){if(r===void 0)throw new Error("No editable function given!");this.div.onmousedown=d=>{d.preventDefault(),d.button===0?this.isActive=!0:this.lockMeter()},this.div.onmousemove=d=>{if(!this.isActive)return;let a=d.currentTarget.getBoundingClientRect(),c=a.left,m=a.width,B=d.clientX-c,E=Math.max(0,Math.min(1,B/m));r(E*(A-s)+s)},this.div.onmouseup=()=>this.isActive=!1,this.div.onmouseleave=d=>{this.div.onmousemove(d),this.isActive=!1},this.text.oncontextmenu=d=>{d.preventDefault()},this.div.onclick=d=>{d.preventDefault(),this.isActive=!0,this.div.onmousemove(d),this.isActive=!1,qe&&this.lockMeter()},this.div.classList.add("editable")}}lockMeter(){this.lockCallback!==void 0&&(this.isLocked?(this.text.classList.remove("locked_meter"),this.unlockCallback()):(this.text.classList.add("locked_meter"),this.lockCallback()),this.isLocked=!this.isLocked)}toggleMode(e=!1){e&&(this.bar.classList.toggle("voice_meter_light_color"),this.div.classList.toggle("voice_meter_light_color")),this.text.classList.toggle("voice_meter_text_light")}show(){if(this.isShown=!0,!this.isVisualValueSet){let e=Math.max(0,Math.min((this.currentValue-this.min)/(this.max-this.min),1));this.bar.style.width=`${e*100}%`,this.text.textContent=this.meterText+(Math.round(this.currentValue*100)/100).toString(),this.isVisualValueSet=!0}}hide(){this.isShown=!1}update(e,t=!1){if(!(e===this.currentValue&&t===!1))if(this.currentValue=e,this.isShown){let i=Math.max(0,Math.min((e-this.min)/(this.max-this.min),1));this.bar.style.width=`${i*100}%`,this.text.textContent=this.meterText+(Math.round(e*100)/100).toString(),this.isVisualValueSet=!0}else this.isVisualValueSet=!1}};var Qs=["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Honky-tonk Piano","Electric Piano 1","Electric Piano 2","Harpsichord","Clavi","Celesta","Glockenspiel","Music Box","Vibraphone","Marimba","Xylophone","Tubular Bells","Dulcimer","Drawbar Organ","Percussive Organ","Rock Organ","Church Organ","Reed Organ","Accordion","Harmonica","Tango Accordion","Acoustic Guitar (nylon)","Acoustic Guitar (steel)","Electric Guitar (jazz)","Electric Guitar (clean)","Electric Guitar (muted)","Overdriven Guitar","Distortion Guitar","Guitar Harmonics","Acoustic Bass","Electric Bass (finger)","Electric Bass (pick)","Fretless Bass","Slap Bass 1","Slap Bass 2","Synth Bass 1","Synth Bass 2","Violin","Viola","Cello","Contrabass","Tremolo Strings","Pizzicato Strings","Orchestral Harp","Timpani","String Ensemble 1","String Ensemble 2","Synth Strings 1","Synth Strings 2","Choir Aahs","VoiceGroup Oohs","Synth Choir","Orchestra Hit","Trumpet","Trombone","Tuba","Muted Trumpet","French Horn","Brass Section","Synth Brass 1","Synth Brass 2","Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Oboe","English Horn","Bassoon","Clarinet","Piccolo","Flute","Recorder","Pan Flute","Blown Bottle","Shakuhachi","Whistle","Ocarina","Lead 1 (square)","Lead 2 (sawtooth)","Lead 3 (calliope)","Lead 4 (chiff)","Lead 5 (charang)","Lead 6 (voice)","Lead 7 (fifths)","Lead 8 (bass + lead)","Pad 1 (new age)","Pad 2 (warm)","Pad 3 (polysynth)","Pad 4 (choir)","Pad 5 (bowed)","Pad 6 (metallic)","Pad 7 (halo)","Pad 8 (sweep)","FX 1 (rain)","FX 2 (soundtrack)","FX 3 (crystal)","FX 4 (atmosphere)","FX 5 (brightness)","FX 6 (goblins)","FX 7 (echoes)","FX 8 (sci-fi)","Sitar","Banjo","Shamisen","Koto","Kalimba","Bagpipe","Fiddle","Shanai","Tinkle Bell","Agogo","Steel Drums","Woodblock","Taiko Drum","Melodic Tom","Synth Drum","Reverse Cymbal","Guitar Fret Noise","Breath Noise","Seashore","Bird Tweet","Telephone Ring","Attack Helicopter","Applause","Gunshot"];var Xo=class{constructor(e,t,i,n,s=void 0,A=void 0){this.elements=e.map(g=>({name:g.name,program:g.program,bank:g.bank,stringified:`${g.bank.toString().padStart(3,"0")}:${g.program.toString().padStart(3,"0")} ${g.name}`})),this.elements.length>0?this.value=`${this.elements[0].bank}:${this.elements[0].program}`:this.value="",this.mainButton=document.createElement("button"),this.mainButton.classList.add("voice_selector"),this.mainButton.classList.add("controller_element"),t.bindObjectProperty(this.mainButton,"title",i+".description",n),this.locale=t,this.localePath=i,this.localeArgs=n,this.reload(),this.mainButton.onclick=()=>{this.showSelectionMenu()},this.editCallback=s,this.selectionMenu=void 0,this.lockCallback=A,this.locked=!1,this.isWindowShown=!1}showSelectionMenu(){this.selectionMenu=document.createElement("div"),this.selectionMenu.classList.add("voice_selector_wrapper"),document.getElementsByClassName("spessasynth_main")[0].appendChild(this.selectionMenu);let e=document.createElement("div");e.classList.add("voice_selector_window");let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent",this.localePath+".selectionPrompt",this.localeArgs),e.appendChild(t);let i=document.createElement("div");i.classList.add("voice_selector_search_wrapper"),e.appendChild(i);let n=document.createElement("input");n.type="text",this.locale.bindObjectProperty(n,"placeholder",this.localePath+".searchPrompt"),i.appendChild(n),n.onkeydown=l=>l.stopPropagation();let s=document.createElement("div");s.innerHTML=this.locked?Co(we):qi(we),this.locale.bindObjectProperty(s,"title",re+"channelController.presetReset.description",this.localeArgs),s.classList.add("voice_reset"),this.mainButton.classList.contains("voice_selector_light")&&s.classList.add("voice_reset_light"),s.onclick=()=>{this.locked=!this.locked,this.lockCallback(this.locked),this.mainButton.classList.toggle("locked_selector"),this.locked?s.innerHTML=Co(we):s.innerHTML=qi(we)},i.appendChild(s),this.presetLock=s;let A=document.createElement("div");A.classList.add("voice_selector_table_wrapper"),e.appendChild(A);let r=this.generateTable(A,this.elements).querySelector(".voice_selector_selected");n.oninput=l=>{l.stopPropagation();let u=n.value,d=this.elements.filter(B=>B.stringified.search(new RegExp(u,"i"))>=0);if(d.length===this.elements.length||d.length===0)return;A.replaceChildren();let a=this.generateTable(A,d),c=a.querySelector(".voice_selector_selected");if(c){r=c;return}let m=a.querySelector(".voice_selector_option");m.classList.add("voice_selector_selected"),r=m},n.addEventListener("keydown",l=>{switch(l.key){case"Enter":let u=r.getAttribute("bank"),d=r.getAttribute("program"),a=`${u}:${d}`;if(this.value===a){this.hideSelectionMenu();return}this.editCallback(a),this.locked=!0,this.presetLock.innerHTML=Co(we),this.hideSelectionMenu();break;case"ArrowDown":let c=r.nextElementSibling;for(;c;){if(c.classList.contains("voice_selector_option")){r.classList.remove("voice_selector_selected"),c.classList.add("voice_selector_selected"),r=c;return}c=c.nextElementSibling}break;case"ArrowUp":let m=r.previousElementSibling;for(;m;){if(m.classList.contains("voice_selector_option")){r.classList.remove("voice_selector_selected"),m.classList.add("voice_selector_selected"),r=m;return}m=m.previousElementSibling}break}}),e.onclick=l=>{l.stopPropagation()},this.selectionMenu.appendChild(e),this.selectionMenu.onclick=l=>{l.stopPropagation(),this.hideSelectionMenu()},this.isWindowShown=!0,qe||n.focus()}generateTable(e,t){let i=document.createElement("table");i.classList.add("voice_selector_table");let n=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]),A=-20;for(let g of t){let r=document.createElement("tr"),l=g.program;if(r.classList.add("voice_selector_option"),r.setAttribute("program",l.toString()),r.setAttribute("bank",g.bank.toString()),l===s&&g.bank===n&&(r.classList.add("voice_selector_selected"),setTimeout(()=>{r.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},20)),r.onclick=()=>{let B=`${g.bank}:${l}`;if(this.value===B){this.hideSelectionMenu();return}this.editCallback(B),this.locked=!0,this.presetLock.innerHTML=Co(we),this.hideSelectionMenu()},l!==A&&(A=l,g.bank!==128)){let B=document.createElement("tr"),E=document.createElement("th");E.colSpan="3",E.textContent=Qs[A],B.appendChild(E),i.appendChild(B)}let u=`${g.program.toString().padStart(3,"0")}`,d=`${g.bank.toString().padStart(3,"0")}`,a=document.createElement("td");a.classList.add("voice_selector_preset_name"),a.textContent=g.name;let c=document.createElement("td");a.classList.add("voice_selector_preset_program"),c.textContent=u;let m=document.createElement("td");a.classList.add("voice_selector_preset_program"),m.textContent=d,r.appendChild(m),r.appendChild(c),r.appendChild(a),i.appendChild(r)}return e.appendChild(i),i}hideSelectionMenu(){document.getElementsByClassName("spessasynth_main")[0].removeChild(this.selectionMenu),this.selectionMenu=void 0,this.isWindowShown=!1}toggleMode(){this.mainButton.classList.toggle("voice_selector_light")}reload(e=this.elements){if(this.elements=e.map(t=>({name:t.name,program:t.program,bank:t.bank,stringified:`${t.bank.toString().padStart(3,"0")}:${t.program.toString().padStart(3,"0")} ${t.name}`})),this.elements.length>0){let t=this.elements[0],i=t.bank,n=parseInt(this.value.split(":")[1]),s=n;this.elements.find(A=>A.program===n)===void 0&&(s=t.program),this.mainButton.textContent=this.getString(`${i}:${s}`)}}set(e){if(this.value=e,this.reload(),this.mainButton.textContent=this.getString(this.value),this.isWindowShown){let t=this.selectionMenu.getElementsByClassName("voice_selector_selected")[0];t!==void 0&&t.classList.remove("voice_selector_selected");let i=this.selectionMenu.getElementsByClassName("voice_selector_table")[0],n=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]);for(let A of i.rows){if(A.cells.length===1)continue;let g=parseInt(A.cells[0].textContent),r=parseInt(A.cells[1].textContent);g===n&&r===s&&(A.classList.add("voice_selector_selected"),A.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))}}}getString(e){let t=e.split(":"),i=parseInt(t[0]),n=parseInt(t[1]),s=this.elements.find(A=>A.bank===i&&A.program===n);return s?i===128||this.elements.filter(A=>A.program===n&&A.bank!==128).length<2?`${n}. ${s.name}`:`${i}:${n} ${s.name}`:""}};var we=32;function ys(o){this.soloChannels=new Set;let e=document.createElement("div");e.classList.add("channel_controller");let t=new We(this.channelColors[o%this.channelColors.length],re+"channelController.voiceMeter",this.locale,[o+1],0,100);t.bar.classList.add("voice_meter_bar_smooth"),e.appendChild(t.div);let i=new We(this.channelColors[o%this.channelColors.length],re+"channelController.pitchBendMeter",this.locale,[o+1],-8192,8191,!0,y=>{let w=i.isLocked;w&&this.synth.lockController(o,Ft+de.pitchWheel,!1),y=Math.round(y)+8192;let k=y>>7,D=y&127;this.synth.pitchWheel(o,k,D),w&&this.synth.lockController(o,Ft+de.pitchWheel,!0)},()=>this.synth.lockController(o,Ft+de.pitchWheel,!0),()=>this.synth.lockController(o,Ft+de.pitchWheel,!1));i.update(0),e.appendChild(i.div);let n=(y,w,k)=>{k.isLocked?(this.synth.lockController(o,y,!1),this.synth.controllerChange(o,y,w),this.synth.lockController(o,y,!0)):this.synth.controllerChange(o,y,w)},s=(y,w,k)=>{let D=new We(this.channelColors[o%this.channelColors.length],re+w,this.locale,[o+1],0,127,!0,h=>n(y,Math.round(h),D),()=>this.synth.lockController(o,y,!0),()=>this.synth.lockController(o,y,!1));return D.update(k),D},A=s(R.pan,"channelController.panMeter",64);e.appendChild(A.div);let g=s(R.expressionController,"channelController.expressionMeter",127);e.appendChild(g.div);let r=s(R.mainVolume,"channelController.volumeMeter",100);e.appendChild(r.div);let l=s(R.modulationWheel,"channelController.modulationWheelMeter",0);e.appendChild(l.div);let u=s(R.chorusDepth,"channelController.chorusMeter",0);e.appendChild(u.div);let d=s(R.reverbDepth,"channelController.reverbMeter",0);e.appendChild(d.div);let a=s(R.brightness,"channelController.filterMeter",64);e.appendChild(a.div);let c=new We(this.channelColors[o%this.channelColors.length],re+"channelController.transposeMeter",this.locale,[o+1],-36,36,!0,y=>{y=Math.round(y),this.synth.transposeChannel(o,y,!0),c.update(y)});c.update(0),e.appendChild(c.div);let m=new Xo([],this.locale,re+"channelController.presetSelector",[o+1],async y=>{let w=y.split(":");this.synth.lockController(o,ve,!1),this.synth.controllerChange(o,R.bankSelect,parseInt(w[0]),!0),this.synth.programChange(o,parseInt(w[1]),!0),m.mainButton.classList.add("locked_selector"),this.synth.lockController(o,ve,!0)},y=>this.synth.lockController(o,ve,y));e.appendChild(m.mainButton);let B=document.createElement("div");B.innerHTML=Wt(we),this.locale.bindObjectProperty(B,"title",re+"channelController.soloButton.description",[o+1]),B.classList.add("controller_element"),B.classList.add("mute_button"),B.onclick=()=>{if(this.soloChannels.has(o)?this.soloChannels.delete(o):this.soloChannels.add(o),this.soloChannels.size===0||this.soloChannels.size>=this.synth.channelsAmount){for(let y=0;y<this.synth.channelsAmount;y++)this.controllers[y].soloButton.innerHTML=Wt(we),this.synth.muteChannel(y,this.controllers[y].muteButton.hasAttribute("is_muted"));this.soloChannels.size>=this.synth.channelsAmount&&this.soloChannels.clear();return}for(let y=0;y<this.synth.channelsAmount;y++)this.soloChannels.has(y)?(this.controllers[y].soloButton.innerHTML=ns(we),this.synth.muteChannel(y,this.controllers[y].muteButton.hasAttribute("is_muted"))):(this.controllers[y].soloButton.innerHTML=Wt(we),this.synth.muteChannel(y,!0))},e.appendChild(B);let E=document.createElement("div");E.innerHTML=mo(we),this.locale.bindObjectProperty(E,"title",re+"channelController.muteButton.description",[o+1]),E.classList.add("controller_element"),E.classList.add("mute_button"),E.onclick=()=>{if(E.hasAttribute("is_muted")){E.removeAttribute("is_muted");let y=this.soloChannels.size===0||this.soloChannels.has(o);this.synth.muteChannel(o,!y),E.innerHTML=mo(we)}else this.synth.muteChannel(o,!0),E.setAttribute("is_muted","true"),E.innerHTML=ss(we)},e.appendChild(E);let S=document.createElement("div");return S.innerHTML=o===Ue?Ko(we):zo(we),this.locale.bindObjectProperty(S,"title",re+"channelController.drumToggleButton.description",[o+1]),S.classList.add("controller_element"),S.classList.add("mute_button"),S.onclick=()=>{m.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(o,ve,!1),m.mainButton.classList.remove("locked_selector")),this.synth.setDrums(o,!this.synth.channelProperties[o].isDrum)},e.appendChild(S),{controller:e,voiceMeter:t,pitchWheel:i,pan:A,expression:g,volume:r,mod:l,chorus:u,reverb:d,brightness:a,preset:m,drumsToggle:S,soloButton:B,muteButton:E,transpose:c}}function Ss(){let o=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.controllers=[];for(let e=0;e<this.synth.channelsAmount;e++){let t=this.createChannelController(e);this.controllers.push(t),o.appendChild(t.controller)}this.setEventListeners(),setInterval(this.updateVoicesAmount.bind(this),100),this.hideControllers()}function Ze(o){return o.parentElement.nextElementSibling}function ws(o){let e=o.getElementsByTagName("spessarange");for(let t of e)t.parentElement.insertBefore(Yi(t,!0),t);for(;e.length>0;)e[0].parentNode.removeChild(e[0])}function Yi(o,e=!0){let t=document.createElement("div");t.classList.add("settings_slider_wrapper");let i=o.getAttribute("min"),n=o.getAttribute("max"),s=o.getAttribute("value"),A=o.getAttribute("units"),g=o.getAttribute("input_id"),r=document.createElement("input");r.classList.add("settings_slider"),r.type="range",r.id=g,r.min=i,r.max=n,r.value=s;let l;e&&(l=document.createElement("span"),l.textContent=s+A);let u=document.createElement("div");u.classList.add("settings_visual_wrapper");let d=document.createElement("div");d.classList.add("settings_slider_progress"),u.appendChild(d);let a=document.createElement("div");return a.classList.add("settings_slider_thumb"),u.appendChild(a),u.appendChild(r),r.addEventListener("input",()=>{let c=parseInt(u.style.getPropertyValue("--visual-width").replace("%","")),m=Math.round((r.value-r.min)/(r.max-r.min)*100);Math.abs((c-m)/100)>.05?u.classList.add("settings_slider_transition"):u.classList.remove("settings_slider_transition"),u.style.setProperty("--visual-width",`${m}%`)}),u.style.setProperty("--visual-width",`${(r.value-r.min)/(r.max-r.min)*100}%`),t.appendChild(u),e&&t.appendChild(l),t}function dt(o,e,t){if(e.textContent&&(o.textContent=e.textContent),e.translatePathTitle){if(!t)throw new Error("Translate path title provided but no locale provided.");t.bindObjectProperty(o,"textContent",e.translatePathTitle+".title",e?.translatePathTitleProps),t.bindObjectProperty(o,"title",e.translatePathTitle+".description",e?.translatePathTitleProps)}}function ks(o,e){switch(o.type){case"button":let t=document.createElement("button");return dt(t,o,e),Et(o,[t]),t;case"text":let i=document.createElement("p");return dt(i,o,e),Et(o,[i]),i;case"input":let n=document.createElement("div");n.classList.add("notification_input_wrapper");let s=document.createElement("input");dt(s,o,e),s.addEventListener("keydown",k=>k.stopPropagation());let A=document.createElement("label");return dt(A,o,e),Et(o,[s,A]),n.append(A),n.appendChild(s),n;case"select":let g=document.createElement("div");g.classList.add("notification_input_wrapper");let r=document.createElement("select");if(o.selectOptions===void 0)throw new Error("Select but no options given?");for(let k of Object.entries(o.selectOptions)){let D=document.createElement("option");D.value=k[0],D.textContent=k[1],r.appendChild(D)}let l=document.createElement("label");return dt(l,o,e),Et(o,[r,l]),g.appendChild(l),g.appendChild(r),g;case"file":let u=document.createElement("label");u.classList.add("notification_input_wrapper");let d=document.createElement("input");d.type="file";let a=document.createElement("label");a.classList.add("notification_file_button"),dt(a,o,e);let c=document.createElement("label");return dt(c,o,e),Et(o,[a,d,c]),a.appendChild(d),u.append(c),u.appendChild(a),u;case"progress":let m=document.createElement("div");m.classList.add("notification_progress_background");let B=document.createElement("div");return B.classList.add("notification_progress"),Et(o,[B,m]),m.appendChild(B),m;case"toggle":return ba(o,e);case"range":let E=document.createElement("input");E.type="range";let S=document.createElement("label");Et(o,[E,S]),dt(S,o,e);let y=Yi(E,!1),w=document.createElement("div");return w.classList.add("notification_slider_wrapper"),w.appendChild(S),w.appendChild(y),w}}function Et(o,e){if(o.attributes)for(let[t,i]of Object.entries(o.attributes))for(let n of e)t.startsWith("onchange")?n[t]=i:n.setAttribute(t,i);if(o.listeners)for(let[t,i]of Object.entries(o.listeners))for(let n of e)n.addEventListener(t,i)}function ba(o,e){let t=document.createElement("label");t.classList.add("notification_switch_wrapper");let i=document.createElement("label");dt(i,o,e);let n=document.createElement("input");n.type="checkbox",Et(o,[i,n]);let s=document.createElement("div");s.classList.add("notification_switch"),s.appendChild(n);let A=document.createElement("div");return A.classList.add("notification_switch_slider"),s.appendChild(A),t.appendChild(i),t.appendChild(s),t}var va=13,xa=0,Eo={};function Ae(o,e,t=va,i=!0,n=void 0,s=void 0,A=void 0){let g=document.createElement("div"),r=xa++;g.classList.add("notification"),g.innerHTML=`
    <div class='top'>
        <h2 class='notification_title'>${o}</h2>
        <span class='close_btn'>\xD7</span>
    </div>`;let l=document.createElement("div");if(l.classList.add("notification_content"),s)for(let[d,a]of Object.entries(s))l.style[d]=a;g.appendChild(l);for(let d of e){let a=ks(d,n);d.onClick&&(a.onclick=()=>d.onClick({div:g,id:r},a)),l.appendChild(a)}i?g.getElementsByClassName("close_btn")[0].onclick=()=>{oe(r)}:g.getElementsByClassName("close_btn")[0].style.display="none",setTimeout(()=>{g.classList.add("drop")},75);let u=setTimeout(()=>{oe(r)},t*1e3+75);return document.getElementsByClassName("notification_field")[0].appendChild(g),Eo[r]={div:g,timeout:u,onclose:A},{div:g,id:r}}function oe(o){if(Eo[o]===void 0)return;let e=Eo[o],t=e.div;clearTimeout(Eo[o].timeout),t.classList.remove("drop"),setTimeout(()=>t.parentElement.removeChild(t),500),e.onclose&&e.onclose(),Eo[o]=void 0}var Fe={nodesAmount:Xe.nodesAmount,defaultDelay:Xe.defaultDelay,delayVariation:Xe.delayVariation,stereoDifference:Xe.stereoDifference,oscillatorFrequency:Xe.oscillatorFrequency,oscillatorFrequencyVariation:Xe.oscillatorFrequencyVariation,oscillatorGain:Xe.oscillatorGain};function Ds(o,e,t){let i=e+"effectsConfig.",n=Ae(o.getLocaleString(i+"button.title"),[{type:"button",translatePathTitle:e+"disableCustomVibrato",onClick:(s,A)=>{t.disableGSNRPparams(),A.parentNode.removeChild(A)}},{type:"text",translatePathTitle:i+"reverbConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"file",translatePathTitle:i+"reverbConfig.impulseResponse",attributes:{accept:"audio/*"},listeners:{input:async s=>{if(s.target.files.length===0)return;s.stopImmediatePropagation(),s.preventDefault();let A=s.target.parentElement.parentElement;A.textContent=o.getLocaleString("locale.synthInit.genericLoading");let g=await t.context.decodeAudioData(await s.target.files[0].arrayBuffer());t.setReverbResponse(g),A.textContent=o.getLocaleString("locale.synthInit.done"),v("%cReverb response set!",f.info)}}},{type:"text",translatePathTitle:i+"chorusConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"input",translatePathTitle:i+"chorusConfig.nodesAmount",attributes:{type:"number",min:"0",value:Fe.nodesAmount,setting:"nodes"}},{type:"input",translatePathTitle:i+"chorusConfig.defaultDelay",attributes:{type:"number",min:"0",value:Fe.defaultDelay,setting:"delay"}},{type:"input",translatePathTitle:i+"chorusConfig.delayVariation",attributes:{type:"number",min:"0",value:Fe.delayVariation,setting:"delay-var"}},{type:"input",translatePathTitle:i+"chorusConfig.stereoDifference",attributes:{type:"number",min:"0",value:Fe.stereoDifference,setting:"stereo"}},{type:"input",translatePathTitle:i+"chorusConfig.oscillatorFrequency",attributes:{type:"number",min:"0",value:Fe.oscillatorFrequency,setting:"osc-freq"}},{type:"input",translatePathTitle:i+"chorusConfig.frequencyVariation",attributes:{type:"number",min:"0",value:Fe.oscillatorFrequencyVariation,setting:"freq-var"}},{type:"input",translatePathTitle:i+"chorusConfig.oscillatorGain",attributes:{type:"number",min:"0",value:Fe.oscillatorGain,setting:"osc-gain"}},{type:"button",translatePathTitle:i+"chorusConfig.apply",onClick:s=>{Fe.nodesAmount=parseFloat(s.div.querySelector("input[setting='nodes']").value),Fe.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Fe.delayVariation=parseFloat(s.div.querySelector("input[setting='delay-var']").value),Fe.stereoDifference=parseFloat(s.div.querySelector("input[setting='stereo']").value),Fe.oscillatorFrequency=parseFloat(s.div.querySelector("input[setting='osc-freq']").value),Fe.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Fe.oscillatorFrequencyVariation=parseFloat(s.div.querySelector("input[setting='freq-var']").value),Fe.oscillatorGain=parseFloat(s.div.querySelector("input[setting='osc-gain']").value),t.setChorusConfig(Fe)}}],999999,!0,o);return n.div.onclick=s=>s.stopImmediatePropagation(),n}var pe="locale.synthesizerController.keyModifiers.";async function bs(o,e){return new Promise(t=>{let i=Ae(o.getLocaleString(pe+"selectKey.title"),[{type:"text",textContent:o.getLocaleString(pe+"selectKey.prompt")}],999999,!1,o);e.onNotePressed=n=>{oe(i.id),e.onNotePressed=void 0,t(n)}})}async function vs(o,e,t,i){let n=await bs(e,t),s=(a,c,m,B)=>{let E={type:"number",min:c.toString(),max:m.toString(),value:B.toString()};return E[a]="true",E},A={};A.unchanged=e.getLocaleString(pe+"modifyKey.preset.unchanged");for(let a of i.toSorted((c,m)=>c.presetName<m.presetName?-1:c.presetName>m.presetName?1:0))A[a.presetName]=a.presetName;let g=o.keyModifierManager.getModifier(t.channel,n),r=g?.velocity??-1,l=Ae(e.getLocaleString(pe+"modifyKey.title"),[{type:"text",translatePathTitle:pe+"selectedKey",translatePathTitleProps:[n.toString()]},{type:"button",textContent:e.getLocaleString(pe+"selectKey.change"),onClick:async a=>{oe(a.id),await vs(o,e,t,i)}},{type:"input",translatePathTitle:pe+"selectedChannel",attributes:s("chan",0,(o.channelsAmount-1).toString(),t.channel.toString())},{type:"input",translatePathTitle:pe+"modifyKey.velocity",attributes:s("vel",0,127,r)},{type:"select",translatePathTitle:pe+"modifyKey.preset",attributes:{"preset-selector":"true"},selectOptions:A},{type:"button",translatePathTitle:pe+"modifyKey.apply",onClick:a=>{let c=parseInt(a.div.querySelector("input[chan]").value)??-1,m=parseInt(a.div.querySelector("input[vel]").value)??-1,B=a.div.querySelector("select[preset-selector]").value,E=-1,S=-1;if(B!=="unchanged"){let y=i.find(w=>w.presetName===B);E=y.bank,S=y.program}o.keyModifierManager.addModifier(c,n,{velocity:m,patch:{program:S,bank:E}}),oe(a.id)}}],99999,!0,e),u=g?.patch?.program??-1,d=g?.patch?.bank??-1;d!==-1&&u!==-1&&(l.div.querySelector("select[preset-selector]").value=i.find(a=>a.bank===d&&a.program===u).presetName)}async function xs(o,e,t){let i=await bs(e,t);Ae(e.getLocaleString(pe+"removeModification.title"),[{type:"text",translatePathTitle:pe+"selectedKey",translatePathTitleProps:[i.toString()]},{type:"button",textContent:e.getLocaleString(pe+"selectKey.change"),onClick:async n=>{oe(n.id),await xs(o,e,t)}},{type:"input",translatePathTitle:pe+"selectedChannel",attributes:{chan:"true",type:"number",value:t.channel.toString(),min:"0",max:(o.channelsAmount-1).toString()}},{type:"button",translatePathTitle:pe+"removeModification.remove",onClick:n=>{let s=parseInt(n.div.querySelector("input[chan]").value)??-1;o.keyModifierManager.deleteModifier(s,i),oe(n.id)}}],99999,!0,e)}function Ms(o,e,t,i){Ae(e.getLocaleString(pe+"mainTitle"),[{type:"text",textContent:e.getLocaleString(pe+"detailedDescription"),attributes:{style:"white-space: pre; font-style: italic;"}},{type:"text",textContent:e.getLocaleString(pe+"prompt")},{type:"button",translatePathTitle:pe+"modifyKey",onClick:n=>{oe(n.id),vs(o,e,t,i).then()}},{type:"button",translatePathTitle:pe+"removeModification",onClick:n=>{oe(n.id),xs(o,e,t).then()}},{type:"button",translatePathTitle:pe+"resetModifications",onClick:n=>{oe(n.id),Ae(e.getLocaleString(pe+"resetModifications.confirmation.title"),[{type:"text",textContent:e.getLocaleString(pe+"resetModifications.confirmation.description")},{type:"button",textContent:e.getLocaleString("locale.yes"),onClick:s=>{oe(s.id),o.keyModifierManager.clearModifiers()}},{type:"button",textContent:e.getLocaleString("locale.no"),onClick:s=>{oe(s.id)}}],99999,!0,e)}}],9999999,!0,e)}function Fs(){let o=document.createElement("div");o.classList.add("controls_wrapper"),this.voiceMeter=new We("",re+"mainVoiceMeter",this.locale,[],0,Gi),this.voiceMeter.bar.classList.add("voice_meter_bar_smooth"),this.voiceMeter.div.classList.add("main_controller_element"),this.volumeController=new We("",re+"mainVolumeMeter",this.locale,[],0,200,!0,l=>{this.synth.setMainVolume(Math.round(l)/100),this.volumeController.update(l)}),this.volumeController.bar.classList.add("voice_meter_bar_smooth"),this.volumeController.div.classList.add("main_controller_element"),this.volumeController.update(100),this.panController=new We("",re+"mainPanMeter",this.locale,[],-1,1,!0,l=>{this.synth.setMasterPan(l),this.panController.update(l)}),this.panController.bar.classList.add("voice_meter_bar_smooth"),this.panController.div.classList.add("main_controller_element"),this.panController.update(0),this.transposeController=new We("",re+"mainTransposeMeter",this.locale,[],-12,12,!0,l=>{this.synth.transpose(Math.round(l*2)/2),this.transposeController.update(Math.round(l*2)/2)}),this.transposeController.bar.classList.add("voice_meter_bar_smooth"),this.transposeController.div.classList.add("main_controller_element"),this.transposeController.update(0);let e=document.createElement("button");this.locale.bindObjectProperty(e,"textContent",re+"midiPanic.title"),this.locale.bindObjectProperty(e,"title",re+"midiPanic.description"),e.classList.add("synthui_button"),e.classList.add("main_controller_element"),e.onclick=()=>this.synth.stopAll(!0);let t=document.createElement("button");this.locale.bindObjectProperty(t,"textContent",re+"systemReset.title"),this.locale.bindObjectProperty(t,"title",re+"systemReset.description"),t.classList.add("synthui_button"),t.classList.add("main_controller_element"),t.onclick=()=>{this.controllers.forEach((l,u)=>{l.pitchWheel.isLocked&&l.pitchWheel.lockMeter(),l.pan.isLocked&&l.pan.lockMeter(),l.expression.isLocked&&l.expression.lockMeter(),l.volume.isLocked&&l.volume.lockMeter(),l.mod.isLocked&&l.mod.lockMeter(),l.chorus.isLocked&&l.chorus.lockMeter(),l.reverb.isLocked&&l.reverb.lockMeter(),l.brightness.isLocked&&l.brightness.lockMeter(),l.preset.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(u,ve,!1),l.preset.mainButton.classList.remove("locked_selector")),this.synth.transposeChannel(u,0,!0),l.transpose.update(0),l.soloButton.innerHTML=Wt(we),l.muteButton.innerHTML=mo(we),this.synth.muteChannel(u,!1)}),this.synth.resetControllers()};let i=document.createElement("button");this.locale.bindObjectProperty(i,"textContent",re+"blackMidiMode.title"),this.locale.bindObjectProperty(i,"title",re+"blackMidiMode.description"),i.classList.add("synthui_button"),i.classList.add("main_controller_element"),i.onclick=()=>{this.synth.highPerformanceMode=!this.synth.highPerformanceMode};let n=document.createElement("button");this.locale.bindObjectProperty(n,"textContent",re+"keyModifiers.button.title"),this.locale.bindObjectProperty(n,"title",re+"keyModifiers.button.description"),n.classList.add("synthui_button"),n.classList.add("main_controller_element"),n.onclick=()=>{Ms(this.synth,this.locale,this.keyboard,this.presetList)};let s=document.createElement("button");this.locale.bindObjectProperty(s,"textContent",re+"effectsConfig.button.title"),this.locale.bindObjectProperty(s,"title",re+"effectsConfig.button.description"),s.classList.add("synthui_button"),s.classList.add("main_controller_element"),s.onclick=()=>{if(this.effectsConfigWindow!==void 0){oe(this.effectsConfigWindow),this.effectsConfigWindow=void 0;return}this.effectsConfigWindow=Ds(this.locale,re,this.synth).id};let A=document.createElement("select");A.classList.add("main_controller_element"),A.classList.add("synthui_button"),this.locale.bindObjectProperty(A,"title",re+"interpolation.description");{let l=document.createElement("option");l.value="0",this.locale.bindObjectProperty(l,"textContent",re+"interpolation.linear"),A.appendChild(l);let u=document.createElement("option");u.value="1",this.locale.bindObjectProperty(u,"textContent",re+"interpolation.nearestNeighbor"),A.appendChild(u);let d=document.createElement("option");d.value="2",d.selected=!0,this.locale.bindObjectProperty(d,"textContent",re+"interpolation.cubic"),A.appendChild(d),A.onchange=()=>{this.synth.setInterpolationType(parseInt(A.value))}}let g=document.createElement("div");g.classList.add("synthui_controller"),this.uiDiv.appendChild(g);let r=document.createElement("button");this.locale.bindObjectProperty(r,"textContent",re+"toggleButton.title"),this.locale.bindObjectProperty(r,"title",re+"toggleButton.description"),r.classList.add("synthui_button"),r.onclick=()=>{this.hideOnDocClick=!1,this.toggleVisibility()},o.appendChild(this.volumeController.div),o.appendChild(this.panController.div),o.appendChild(this.transposeController.div),o.appendChild(e),o.appendChild(t),o.appendChild(i),o.appendChild(n),o.appendChild(s),o.appendChild(A),this.mainMeters=[this.volumeController,this.panController,this.transposeController,this.voiceMeter],this.mainButtons=[e,t,i,n,s,r,A],this.uiDiv.appendChild(this.voiceMeter.div),this.uiDiv.appendChild(r),g.appendChild(o),this.mainControllerDiv=g,this.mainControllerDiv.onclick=l=>l.stopPropagation(),document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.effectsConfigWindow!==void 0&&(oe(this.effectsConfigWindow),this.effectsConfigWindow=void 0),g.classList.remove("synthui_controller_show"),this.isShown=!1,this.hideControllers()})}function Rs(){let o=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.synth.eventHandler.addEvent("programchange","synthui-program-change",e=>{this.controllers[e.channel].preset.set(`${e.bank}:${e.program}`)}),this.synth.eventHandler.addEvent("allcontrollerreset","synthui-all-controller-reset",()=>{for(let e of this.controllers)e.pan.update(64),e.mod.update(0),e.chorus.update(0),e.pitchWheel.update(0),e.expression.update(127),e.volume.update(100),e.reverb.update(0),e.brightness.update(64)}),this.synth.eventHandler.addEvent("controllerchange","synthui-controller-change",e=>{let t=e.controllerNumber,i=e.channel,n=e.controllerValue,s=this.controllers[i];if(s!==void 0)switch(t){default:break;case R.expressionController:s.expression.update(n);break;case R.mainVolume:s.volume.update(n);break;case R.pan:s.pan.update(n);break;case R.modulationWheel:s.mod.update(n);break;case R.chorusDepth:s.chorus.update(n);break;case R.reverbDepth:s.reverb.update(n);break;case R.brightness:s.brightness.update(n)}}),this.synth.eventHandler.addEvent("pitchwheel","synthui-pitch-wheel",e=>{let t=e.MSB<<7|e.LSB;this.controllers[e.channel].pitchWheel.update(t-8192)}),this.synth.eventHandler.addEvent("drumchange","synthui-drum-change",e=>{this.controllers[e.channel].drumsToggle.innerHTML=e.isDrumChannel?Ko(32):zo(32),this.controllers[e.channel].preset.reload(e.isDrumChannel?this.percussionList:this.instrumentList)}),this.synth.eventHandler.addEvent("newchannel","synthui-new-channel",()=>{let e=this.createChannelController(this.controllers.length);this.controllers.push(e),o.appendChild(e.controller),this.hideControllers()})}var re="locale.synthesizerController.",tt=class{constructor(e,t,i){this.channelColors=e;let n=t;this.uiDiv=document.createElement("div"),this.uiDiv.classList.add("wrapper"),n.appendChild(this.uiDiv),this.uiDiv.style.visibility="visible",this.isShown=!1,this.animationId=-1,this.locale=i,this.hideOnDocClick=!0,this.effectsConfigWindow=void 0}connectKeyboard(e){this.keyboard=e}connectSynth(e){this.synth=e,this.getInstrumentList(),this.createMainSynthController(),this.createChannelControllers(),document.addEventListener("keydown",t=>{switch(t.key.toLowerCase()){case ye.synthesizerUIShow:t.preventDefault(),this.toggleVisibility();break;case ye.settingsShow:this.isShown=!0,this.toggleVisibility();break;case ye.blackMidiMode:t.preventDefault(),this.synth.highPerformanceMode=!this.synth.highPerformanceMode;break;case ye.midiPanic:t.preventDefault(),this.synth.stopAll(!0);break}}),this.locale.onLocaleChanged.push(()=>{this.voiceMeter.update(this.voiceMeter.currentValue,!0),this.volumeController.update(this.volumeController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.transposeController.update(this.transposeController.currentValue,!0);for(let t of this.controllers)t.voiceMeter.update(t.voiceMeter.currentValue,!0),t.pitchWheel.update(t.pitchWheel.currentValue,!0),t.pan.update(t.pan.currentValue,!0),t.volume.update(t.volume.currentValue,!0),t.expression.update(t.expression.currentValue,!0),t.mod.update(t.mod.currentValue,!0),t.chorus.update(t.chorus.currentValue,!0),t.reverb.update(t.reverb.currentValue,!0),t.brightness.update(t.brightness.currentValue,!0),t.transpose.update(t.transpose.currentValue,!0)})}toggleVisibility(){this.animationId!==-1&&clearTimeout(this.animationId);let e=document.getElementsByClassName("synthui_controller")[0];this.isShown=!this.isShown,this.isShown?(e.style.display="block",document.getElementsByClassName("top_part")[0].classList.add("synthui_shown"),this.showControllers(),setTimeout(()=>{e.classList.add("synthui_controller_show")},75)):(this.effectsConfigWindow!==void 0&&(oe(this.effectsConfigWindow),this.effectsConfigWindow=void 0),document.getElementsByClassName("top_part")[0].classList.remove("synthui_shown"),this.hideControllers(),e.classList.remove("synthui_controller_show"),this.animationId=setTimeout(()=>{e.style.display="none"},200))}updateVoicesAmount(){this.voiceMeter.update(this.synth.voicesAmount),this.controllers.forEach((e,t)=>{let i=this.synth.channelProperties[t].voicesAmount;e.voiceMeter.update(i),i<1&&this.synth.voicesAmount>0?e.controller.classList.add("no_voices"):e.controller.classList.remove("no_voices")})}getInstrumentList(){this.synth.eventHandler.addEvent("presetlistchange","synthui-preset-list-change",e=>{let t=e;this.presetList=t,this.instrumentList=t.filter(i=>i.bank!==128).sort((i,n)=>i.program===n.program?i.bank-n.bank:i.program-n.program).map(i=>({name:i.presetName,bank:i.bank,program:i.program})),this.percussionList=t.filter(i=>i.bank===128).sort((i,n)=>i.program-n.program).map(i=>({name:i.presetName,bank:i.bank,program:i.program})),this.percussionList.length===0?this.percussionList=this.instrumentList:this.instrumentList.length===0&&(this.instrumentList=this.percussionList),this.controllers.forEach((i,n)=>{let s=this.synth.channelProperties[n].isDrum?this.percussionList:this.instrumentList;i.preset.reload(s),i.preset.set(`${s[0].bank}:${s[0].program}`)})})}};tt.prototype.hideControllers=Es;tt.prototype.showControllers=Bs;tt.prototype.toggleDarkMode=fs;tt.prototype.createChannelController=ys;tt.prototype.createChannelControllers=Ss;tt.prototype.createMainSynthController=Fs;tt.prototype.setEventListeners=Rs;var Bo=null,$o=class{constructor(){}async createMIDIDeviceHandler(){if(this.selectedInput=Bo,this.selectedOutput=Bo,navigator.requestMIDIAccess)try{let e=await navigator.requestMIDIAccess({sysex:!0,software:!0});return this.inputs=e.inputs,this.outputs=e.outputs,v("%cMIDI handler created!",f.recognized),!0}catch(e){return W("Could not get MIDI Devices:",e),this.inputs=[],this.outputs=[],!1}else return W("Web MIDI Api not supported!",f.unrecognized),this.inputs=[],this.outputs=[],!1}connectMIDIOutputToSeq(e,t){this.selectedOutput=e,t.connectMidiOutput(e),v(`%cPlaying MIDI to %c${e.name}`,f.info,f.recognized)}disconnectSeqFromMIDI(e){this.selectedOutput=Bo,e.connectMidiOutput(void 0),v("%cDisconnected from MIDI out.",f.info)}connectDeviceToSynth(e,t){this.selectedInput=e,e.onmidimessage=i=>{t.sendMessage(i.data)},v(`%cListening for messages on %c${e.name}`,f.info,f.recognized)}disconnectDeviceFromSynth(e){this.selectedInput=Bo,e.onmidimessage=void 0,v(`%cDisconnected from %c${e.name}`,f.info,f.recognized)}disconnectAllDevicesFromSynth(){this.selectedInput=Bo;for(let e of this.inputs)e[1].onmidimessage=void 0}};var ei=class{constructor(e){window.addEventListener("message",t=>{if(typeof t.data!="string")return;let i=t.data.split(",");if(i[0]!=="midi")return;i.shift();let n=i.map(s=>parseInt(s,16));e.sendMessage(n)}),v("%cWeb MIDI Link handler created!",f.recognized)}};var Bt="midi range";function Ls(o,e,t){let i=0,n=this.htmlControls.keyboard,s=[],A=[],g,r=a=>{let c=A[a],m=c.drum?128:c.bank,B=g.find(E=>E.bank===m&&E.program===c.program);B||(B=g[0]),s[a].textContent=": "+B.presetName},l=()=>{if(g)for(let a=0;a<s.length;a++)r(a)},u=()=>{let a=document.createElement("option");a.value=i.toString();let c=document.createElement("p");this.locale.bindObjectProperty(c,"textContent","locale.settings.keyboardSettings.selectedChannel.channelOption",[i+1]);let m=document.createElement("p");m.textContent=": not ",s.push(m),A.push({program:0,bank:0,drum:i%16===9}),l(),a.appendChild(c),a.appendChild(m),a.style.background=e.channelColors[i%e.channelColors.length],a.style.color="rgb(0, 0, 0)",n.channelSelector.appendChild(a),i++},d=this.synthui.synth;d.eventHandler.addEvent("presetlistchange","settings-preset-list-change",a=>{g=a,l()}),d.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),d.eventHandler.addEvent("programchange","settings-program-change",a=>{let c=A[a.channel];c.bank=a.bank,c.program=a.program,r(a.channel)}),d.eventHandler.addEvent("drumchange","settings-drum-change",a=>{A[a.channel].drum=a.isDrumChannel,r(a.channel)});for(let a=0;a<e.synth.channelsAmount;a++)u();n.channelSelector.onchange=()=>{o.selectChannel(parseInt(n.channelSelector.value))},n.sizeSelector.onchange=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{n.sizeSelector.value===Bt?(this.autoKeyRange=!0,this?.sequi?.seq&&(o.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,o.keyRange=this.keyboardSizes[n.sizeSelector.value],t.keyRange=this.keyboardSizes[n.sizeSelector.value]),this._saveSettings()},600);return}n.sizeSelector.value===Bt?(this.autoKeyRange=!0,this?.sequi?.seq&&(o.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,o.keyRange=this.keyboardSizes[n.sizeSelector.value],t.keyRange=this.keyboardSizes[n.sizeSelector.value]),this._saveSettings()},this.addSequencer=a=>{a.addOnSongChangeEvent(c=>{this.autoKeyRange&&(o.keyRange=c.keyRange,t.keyRange=c.keyRange),c.RMIDInfo?.IPIC!==void 0&&this.musicMode.visible===!1&&this.toggleMusicPlayerMode().then()},"settings-keyboard-handler-song-change")},e.synth.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),e.synth.eventHandler.addEvent("programchange","settings-keyboard-program-change",a=>{a.userCalled&&(o.selectChannel(a.channel),n.channelSelector.value=a.channel)}),e.synth.eventHandler.addEvent("mutechannel","settings-keuboard-mute-channel",a=>{if(a.isMuted&&a.channel===o.channel){let c=0;for(;e.synth.channelProperties[c].isMuted;)if(c++,e.synth.channelProperties[c]===void 0)return;c<e.synth.channelsAmount&&(o.selectChannel(c),n.channelSelector.value=c)}}),n.modeSelector.onclick=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{o.toggleMode(),this._saveSettings()},600);return}o.toggleMode(),this._saveSettings()},n.showSelector.onclick=()=>{o.shown=!o.shown,this._saveSettings()}}var Gs=`
<h1 translate-path='locale.settings.mainTitle'></h1>
<div class='settings_groups_parent'>
    <div class='settings_group'>
        <h2 translate-path='locale.settings.rendererSettings.title'></h2>
        <label translate-path-title='locale.settings.rendererSettings.noteFallingTime'></label>
        <spessarange min='1' max='9999' value='1000' class='settings_slider' input_id='note_time_slider' units='ms'></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.noteAfterTriggerTime'></label>
        <spessarange min='0' max='9999' value='0' class='settings_slider' input_id='note_after_time_slider' units='ms'></spessarange>
        
        
        <label translate-path-title='locale.settings.rendererSettings.waveformThickness'></label>
        <spessarange min='0' max='10' value='2' class='settings_slider' input_id='analyser_thickness_slider' units='px'></spessarange>
        
        <label 
        translate-path-title='locale.settings.rendererSettings.waveformSampleSize'></label>
        <spessarange min='5' max='15' value='10' class='settings_slider' input_id='analyser_fft_slider' units=''></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.waveformAmplifier'></label>
        <spessarange min='-10' max='10' value='2' class='settings_slider' input_id='wave_multiplier_slider' units=''></spessarange>
        
        <div class='switch_label'>
            <label for='analyser_toggler' translate-path-title='locale.settings.rendererSettings.toggleWaveformsRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='analyser_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='note_toggler' translate-path-title='locale.settings.rendererSettings.toggleNotesRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='active_note_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingActiveNotes'></label>
            <label class='switch'>
                <input type='checkbox' checked id='active_note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='visual_pitch_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingVisualPitch'></label>
            <label class='switch'>
                <input type='checkbox' checked id='visual_pitch_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='stabilize_waveforms_toggler' translate-path-title='locale.settings.rendererSettings.toggleStabilizeWaveforms'></label>
            <label class='switch'>
                <input type='checkbox' checked id='stabilize_waveforms_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>


    <div class='settings_group'>
        <h2 translate-path='locale.settings.keyboardSettings.title'></h2>
        <label for='channel_selector' translate-path-title='locale.settings.keyboardSettings.selectedChannel'></label>
        <select id='channel_selector'>
        </select>
        
        <label for='keyboard_size_selector' translate-path-title='locale.settings.keyboardSettings.keyboardSize'></label>
        <select id='keyboard_size_selector'>
            <option value='full' translate-path='locale.settings.keyboardSettings.keyboardSize.full'></option>
            <option value='piano' translate-path='locale.settings.keyboardSettings.keyboardSize.piano'></option>
            <option value='5 octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.fiveOctaves'></option>
            <option value='two octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.twoOctaves'></option>
            <option value='${Bt}' translate-path='locale.settings.keyboardSettings.keyboardSize.useSongKeyRange'></option>
        </select>
        
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' id='mode_selector'>
                <span class='switch_slider'></span>
            </label>
        </div>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.show'></label>
            <label class='switch'>
                <input type='checkbox' checked id='keyboard_show'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>
    
    
    <div class='settings_group' id='midi_settings'>
        <h2 translate-path='locale.settings.midiSettings.title'></h2>
        <label for='midi_input_selector' translate-path-title='locale.settings.midiSettings.midiInput'></label>
        <select id='midi_input_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiInput.disabled'></option>
        </select>
        
        <label for='midi_output_selector' translate-path-title='locale.settings.midiSettings.midiOutput'></label>
        <select id='midi_output_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiOutput.disabled'></option>
        </select>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.midiSettings.reminder'></h4>
    </div>
    
    
    <div class='settings_group'>
        <h2 translate-path='locale.settings.interfaceSettings.title'></h2>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.interfaceSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' checked id='toggle_mode_button'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <label for='language_selector' translate-path-title='locale.settings.interfaceSettings.selectLanguage'></label>
        <select id='language_selector'>
         <option value='help-translate' translate-path='locale.settings.interfaceSettings.selectLanguage.helpTranslate'></option>
        <!-- will be added via javascript -->
        </select>
        
        <label for='layout_selector' translate-path-title='locale.settings.interfaceSettings.layoutDirection'></label>
        <select id='layout_selector'>
            <option value='downwards' selected translate-path='locale.settings.interfaceSettings.layoutDirection.values.downwards'></option>
            <option value='upwards' translate-path='locale.settings.interfaceSettings.layoutDirection.values.upwards'></option>
            <option value='left' translate-path='locale.settings.interfaceSettings.layoutDirection.values.leftToRight'></option>
            <option value='right' translate-path='locale.settings.interfaceSettings.layoutDirection.values.rightToLeft'></option>
        </select>
        
        <h3><a href='https://github.com/spessasus/SpessaSynth/wiki/How-To-Use-App' target='_blank' translate-path-title='locale.synthesizerController.helpButton'></a></h3>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.interfaceSettings.reminder'></h4>
    </div>
</div>
`;async function Ts(){let o=await window.savedSettings;if(!o.interface)return;v("Loading saved settings...",o);let e=this.htmlControls.renderer,t=this.renderer,i=o.renderer;t.noteFallingTimeMs=i.noteFallingTimeMs??1e3,e.noteTimeSlider.value=i.noteFallingTimeMs,e.noteTimeSlider.dispatchEvent(new Event("input")),Ze(e.noteTimeSlider).innerText=`${i.noteFallingTimeMs}ms`,t.noteAfterTriggerTimeMs=i.noteAfterTriggerTimeMs??0,e.noteAfterTriggerTimeSlider.value=i.noteAfterTriggerTimeMs,e.noteAfterTriggerTimeSlider.dispatchEvent(new Event("input")),Ze(e.noteAfterTriggerTimeSlider).innerText=`${i.noteAfterTriggerTimeMs}ms`,e.analyserThicknessSlider.value=i.waveformThickness??2,e.analyserThicknessSlider.dispatchEvent(new Event("input")),t.lineThickness=i.waveformThickness,Ze(e.analyserThicknessSlider).innerText=`${i.waveformThickness}px`;let n=i.sampleSize??10;e.analyserFftSlider.value=Math.log2(n),e.analyserFftSlider.dispatchEvent(new Event("input")),t.normalAnalyserFft=n,t.drumAnalyserFft=Math.pow(2,Math.min(15,Math.log2(n)+2)),t.updateFftSize(),this.setTimeDelay(n),Ze(e.analyserFftSlider).innerText=`${n}`,t.waveMultiplier=i.amplifier??2,e.waveMultiplierSlizer.value=i.amplifier,e.waveMultiplierSlizer.dispatchEvent(new Event("input")),Ze(e.waveMultiplierSlizer).innerText=i.amplifier.toString();let s=this.htmlControls.renderer;t.renderAnalysers=i.renderWaveforms??!0,s.analyserToggler.checked=i.renderWaveforms??!0,t.renderNotes=i.renderNotes??!0,s.noteToggler.checked=i.renderNotes??!0,t.drawActiveNotes=i.drawActiveNotes??!0,s.activeNoteToggler.checked=i.drawActiveNotes??!0,t.showVisualPitch=i.showVisualPitch??!0,s.visualPitchToggler.checked=i.showVisualPitch??!0,t.stabilizeWaveforms=i.stabilizeWaveforms??!0,s.stabilizeWaveformsToggler.checked=i.stabilizeWaveforms??!0,t.keyRange=i.keyRange??{min:0,max:128};let A=this.htmlControls.keyboard,g=this.midiKeyboard,r=o.keyboard;g.setKeyRange(r.keyRange??{min:0,max:128},!1),r.autoRange?(A.sizeSelector.value=Bt,this.autoKeyRange=!0):(this.autoKeyRange=!1,A.sizeSelector.value=Object.keys(this.keyboardSizes).find(l=>this.keyboardSizes[l].min===r.keyRange.min&&this.keyboardSizes[l].max===r.keyRange.max)),r.mode==="dark"&&(g.toggleMode(!1),this.htmlControls.keyboard.modeSelector.checked=!0),r.show===!1&&(g.shown=!1,this.htmlControls.keyboard.showSelector.checked=!1),this.locale.changeGlobalLocale(o.interface.language,!0),setTimeout(()=>{this.htmlControls.interface.languageSelector.value=o.interface.language},100),o.interface.mode==="light"?(this._toggleDarkMode(),this.htmlControls.interface.themeSelector.checked=!1):this.htmlControls.interface.themeSelector.checked=!0,this.htmlControls.interface.layoutSelector.value=o.interface.layout||"downwards",this._changeLayout(o.interface.layout||"downwards")}function Ns(){window.saveSettings&&window.saveSettings(this._serializeSettings())}function Us(){return{renderer:{noteFallingTimeMs:this.renderer.noteFallingTimeMs,noteAfterTriggerTimeMs:this.renderer.noteAfterTriggerTimeMs,waveformThickness:this.renderer.lineThickness,sampleSize:this.renderer.normalAnalyserFft,amplifier:this.renderer.waveMultiplier,renderWaveforms:this.renderer.renderAnalysers,renderNotes:this.renderer.renderNotes,drawActiveNotes:this.renderer.drawActiveNotes,showVisualPitch:this.renderer.showVisualPitch,stabilizeWaveforms:this.renderer.stabilizeWaveforms,keyRange:this.renderer.keyRange},keyboard:{selectedChannel:this.midiKeyboard.channel,keyRange:this.midiKeyboard.keyRange,mode:this.midiKeyboard.mode,autoRange:this.htmlControls.keyboard.sizeSelector.value===Bt,show:this.htmlControls.keyboard.showSelector.checked===!0},midi:{input:this.midiDeviceHandler.selectedInput===null?null:this.midiDeviceHandler.selectedInput.name,output:this.midiDeviceHandler.selectedOutput===null?null:this.midiDeviceHandler.selectedOutput.name},interface:{mode:this.mode,language:this.htmlControls.interface.languageSelector.value,layout:this.htmlControls.interface.layoutSelector.value}}}function qs(){let o=this.htmlControls.interface.themeSelector;o.onclick=()=>{this._toggleDarkMode(),this._saveSettings()};let e=this.htmlControls.interface.languageSelector;for(let[i,n]of Object.entries(this.locales)){let s=document.createElement("option");s.value=i,s.textContent=n.localeName,e.appendChild(s)}e.value=this.locale.localeCode,e.onchange=()=>{if(e.value==="help-translate"){window.open("https://github.com/spessasus/SpessaSynth/blob/master/src/website/js/locale/locale_files/README.md"),e.value=this.locale.localeCode;return}this.locale.changeGlobalLocale(e.value),this._saveSettings()};let t=this.htmlControls.interface.layoutSelector;t.onchange=()=>{this._changeLayout(t.value),this._saveSettings(),t.blur()}}function _s(o){let e=document.getElementById("keyboard_canvas_wrapper"),t=document.getElementById("note_canvas"),i=document.getElementById("keyboard");switch(o){case"downwards":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),i.classList.remove("sideways"),this.renderer.direction="down",this.renderer.sideways=!1;break;case"upwards":e.classList.add("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),i.classList.remove("sideways"),this.renderer.direction="up",this.renderer.sideways=!1;break;case"left":e.classList.remove("upwards"),e.classList.add("left_to_right"),e.classList.remove("right_to_left"),t.classList.add("sideways"),i.classList.add("sideways"),this.renderer.direction="up",this.renderer.sideways=!0;break;case"right":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.add("right_to_left"),t.classList.add("sideways"),i.classList.add("sideways"),this.renderer.direction="down",this.renderer.sideways=!0}}var ti={start:"#101010",end:"#212121"},oi={start:"#bbb",end:"#f0f0f0"},Hs="#eee",Ps="#333",ii={start:"#222",end:"#333"},ni={start:"#ccc",end:"#fff"},rt=.2;function Os(){this.mode==="dark"?(this.mode="light",this.renderer.drawActiveNotes=!1):(this.renderer.drawActiveNotes=!0,this.mode="dark"),this.renderer.toggleDarkMode(),this.synthui.toggleDarkMode(),this.sequi.toggleDarkMode(),this.musicMode.toggleDarkMode(),document.getElementsByClassName("spessasynth_main")[0].classList.toggle("light_mode"),document.getElementsByClassName("top_part")[0].classList.toggle("top_part_light"),this.mainDiv.classList.toggle("settings_menu_light");let o=document.styleSheets[0].cssRules;for(let e of o)if(e.selectorText==="*"){this.mode==="dark"?(at(Ps,Hs,rt,e,"--font-color"),at(ni.start,ii.start,rt,e,"--top-buttons-color-start"),at(ni.end,ii.end,rt,e,"--top-buttons-color-end"),at(oi.start,ti.start,rt,e,"--top-color-start"),at(oi.end,ti.end,rt,e,"--top-color-end")):(at(Hs,Ps,rt,e,"--font-color"),at(ii.start,ni.start,rt,e,"--top-buttons-color-start"),at(ii.end,ni.end,rt,e,"--top-buttons-color-end"),at(ti.start,oi.start,rt,e,"--top-color-start"),at(ti.end,oi.end,rt,e,"--top-color-end"));break}document.body.style.background=this.mode==="dark"?"black":"white"}var jt={};function at(o,e,t,i,n){jt[n]&&(clearInterval(jt[n]),jt[n]=void 0);function s(d){d.length===4&&(d=`#${d[1]}${d[1]}${d[2]}${d[2]}${d[3]}${d[3]}`);let a=parseInt(d.slice(1),16);return{r:a>>16&255,g:a>>8&255,b:a&255}}function A(d,a,c){return d+(a-d)*c}let g=s(o),r=s(e),l=performance.now()/1e3;function u(){let a=performance.now()/1e3-l,c=Math.min(a/t,1),m=Math.round(A(g.r,r.r,c)),B=Math.round(A(g.g,r.g,c)),E=Math.round(A(g.b,r.b,c));i.style.setProperty(n,`rgb(${m}, ${B}, ${E})`),c>=1&&(clearInterval(jt[n]),jt[n]=void 0)}jt[n]=setInterval(u,1e3/60)}function Ys(o){let e=this.htmlControls.renderer;e.noteTimeSlider.addEventListener("input",()=>{o.noteFallingTimeMs=e.noteTimeSlider.value,Ze(e.noteTimeSlider).innerText=`${e.noteTimeSlider.value}ms`}),e.noteTimeSlider.onchange=()=>{this._saveSettings()},e.noteAfterTriggerTimeSlider.addEventListener("input",()=>{o.noteAfterTriggerTimeMs=e.noteAfterTriggerTimeSlider.value,Ze(e.noteAfterTriggerTimeSlider).innerText=`${e.noteAfterTriggerTimeSlider.value}ms`}),e.noteAfterTriggerTimeSlider.onchange=()=>{this._saveSettings()},e.analyserThicknessSlider.addEventListener("input",()=>{o.lineThickness=parseInt(e.analyserThicknessSlider.value),Ze(e.analyserThicknessSlider).innerText=`${e.analyserThicknessSlider.value}px`}),e.analyserThicknessSlider.onchange=()=>{this._saveSettings()},e.analyserFftSlider.addEventListener("input",()=>{let t=Math.pow(2,parseInt(e.analyserFftSlider.value));o.normalAnalyserFft=t,o.drumAnalyserFft=Math.pow(2,Math.min(15,parseInt(e.analyserFftSlider.value)+2)),o.updateFftSize(),this.setTimeDelay(t),Ze(e.analyserFftSlider).innerText=`${t}`}),e.analyserFftSlider.onchange=()=>{this._saveSettings()},e.waveMultiplierSlizer.addEventListener("input",()=>{o.waveMultiplier=parseInt(e.waveMultiplierSlizer.value),Ze(e.waveMultiplierSlizer).innerText=e.waveMultiplierSlizer.value}),e.waveMultiplierSlizer.onchange=()=>{this._saveSettings()},e.analyserToggler.onclick=()=>{o.renderAnalysers=!o.renderAnalysers,this._saveSettings()},e.noteToggler.onclick=()=>{o.renderNotes=!o.renderNotes,this._saveSettings()},e.activeNoteToggler.onclick=()=>{o.drawActiveNotes=!o.drawActiveNotes,this._saveSettings()},e.visualPitchToggler.onclick=()=>{o.showVisualPitch=!o.showVisualPitch,this._saveSettings()},e.stabilizeWaveformsToggler.onclick=()=>{o.stabilizeWaveforms=!o.stabilizeWaveforms,this._saveSettings()}}function Vs(o,e,t){o.createMIDIDeviceHandler().then(i=>{i?(this._createMidiInputHandler(o,t.synth),this._createMidiOutputHandler(o,e)):(qe||Ae(this.locale.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.locale.getLocaleString("locale.warnings.noMidiSupport")}]),document.getElementById("midi_settings").style.display="none")})}function Js(o,e){if(o.inputs.length<1)return;let t=this.htmlControls.midi.inputSelector;for(let i of o.inputs){let n=document.createElement("option");n.value=i[0],n.innerText=i[1].name,t.appendChild(n)}if(t.onchange=()=>{t.value==="-1"?o.disconnectAllDevicesFromSynth():o.connectDeviceToSynth(o.inputs.get(t.value),e),this._saveSettings()},o.inputs.size>0){let i=o.inputs.entries().next().value;o.connectDeviceToSynth(i[1],e),t.value=i[0]}}function Ks(o,e){if(!o.outputs){setTimeout(()=>{this._createMidiOutputHandler(o,e)},1e3);return}if(o.outputs.length<1)return;let t=this.htmlControls.midi.outputSelector;for(let i of o.outputs){let n=document.createElement("option");n.value=i[0],n.innerText=i[1].name,t.appendChild(n)}t.onchange=()=>{if(!e.seq){setTimeout(t.onchange,1e3);return}t.value==="-1"?o.disconnectSeqFromMIDI(e.seq):o.connectMIDIOutputToSeq(o.outputs.get(t.value),e.seq),this._saveSettings()}}var zs={title:"Renderer settings",noteFallingTime:{title:"Note falling time (milliseconds)",description:"How fast the notes fall (visually)"},noteAfterTriggerTime:{title:"Note after trigger time (milliseconds)",description:"How long the notes fall after they get triggered. Zero means that they trigger at the bottom."},waveformThickness:{title:"Waveform line thickness (px)",description:"How thick the waveform lines are"},waveformSampleSize:{title:"Waveform sample size",description:"How detailed the waveforms are (Note: high values might impact performance). Also note that high values will add a delay to the audio to sync the waveforms with the audio."},waveformAmplifier:{title:"Waveform amplifier",description:"How vibrant the waveforms are"},toggleWaveformsRendering:{title:"Enable waveforms rendering",description:"Enable rendering the channel waveforms (colorful lines showing audio)"},toggleNotesRendering:{title:"Enable notes rendering",description:"Enable rendering of the falling notes when playing a MIDI file"},toggleDrawingActiveNotes:{title:"Enable drawing active notes",description:"Enable notes lighting up and glowing when they get pressed"},toggleDrawingVisualPitch:{title:"Enable drawing visual pitch",description:"Enable notes sliding left or right when the pitch wheel is applied"},toggleStabilizeWaveforms:{title:"Stabilize waveforms",description:"Enable oscilloscope triggering"}};var Ws={title:"MIDI Keyboard settings",selectedChannel:{title:"Selected channel",description:"The channel keyboard sends messages to",channelOption:"Channel {0}"},keyboardSize:{title:"Keyboard size",description:"The range of keys shown on the keyboard. Adjusts the MIDI note size accordingly",full:"128 keys (full)",piano:"88 keys (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Use song's key range",twoOctaves:"Two octaves"},toggleTheme:{title:"Use dark theme",description:"Use the dark MIDI keyboard theme"},show:{title:"Show",description:"Show/hide MIDI keyboard"}};var Zs={title:"MIDI settings",midiInput:{title:"MIDI input",description:"The port to listen on for MIDI messages",disabled:"Disabled"},midiOutput:{title:"MIDI output",description:"The port to play the MIDI file to",disabled:"Use SpessaSynth"},reminder:{title:"Note that you need to RESTART YOUR BROWSER after connecting a new MIDI device for it to show up here.",description:"Also note that Safari does not support WebMIDI, so you will need to use a different browser if you are on Mac."}};var js={toggleButton:"Settings",mainTitle:"Program settings",rendererSettings:zs,keyboardSettings:Ws,midiSettings:Zs,interfaceSettings:{title:"Interface settings",toggleTheme:{title:"Use dark theme",description:"Enable the dark theme for the interface"},selectLanguage:{title:"Language",description:"Change the program language",helpTranslate:"Translate SpessaSynth"},layoutDirection:{title:"Layout direction",description:"The layout direction of the renderer and keyboard",values:{downwards:"Downwards",upwards:"Upwards",leftToRight:"Left to right",rightToLeft:"Right to left"}},reminder:{title:"Did you know that you can hover over the settings to get more information?",description:"Like this one!"}}};var Xs={toggleButton:{title:"Toggle music player mode",description:"Toggle the simplified UI version, hiding the keyboard and note visualizations"},currentlyPlaying:"Currently playing:",nothingPlaying:"Nothing is playing",nothingPlayingCopyright:"Upload a MIDI!"};var $s={voiceMeter:{title:"Voices: ",description:"The current amount of voices playing on channel {0}"},pitchBendMeter:{title:"Pitch: ",description:"The current pitch bend applied to channel {0}"},panMeter:{title:"Pan: ",description:"The current stereo panning applied to channel {0} (right-click to lock)"},expressionMeter:{title:"Expression: ",description:"The current expression (loudness) of channel {0} (right-click to lock)"},volumeMeter:{title:"Volume: ",description:"The current volume of channel {0} (right-click to lock)"},modulationWheelMeter:{title:"Mod wheel: ",description:"The current modulation (usually vibrato) depth of channel {0} (right-click to lock)"},chorusMeter:{title:"Chorus: ",description:"The current level of chorus effect applied to channel {0} (right-click to lock)"},reverbMeter:{title:"Reverb: ",description:"The current level of reverb effect applied to channel {0} (right-click to lock)"},filterMeter:{title:"Filter: ",description:"The current level of low-pass filter cutoff applied to channel {0} (right-click to lock)"},transposeMeter:{title:"Transpose: ",description:"The current transposition (key shift) of channel {0}"},presetSelector:{description:"Change the patch (instrument) channel {0} is using",selectionPrompt:"Change instrument for channel {0}",searchPrompt:"Search..."},presetReset:{description:"Unlock channel {0} to allow program changes"},soloButton:{description:"Solo on channel {0}"},muteButton:{description:"Mute/unmute channel {0}"},drumToggleButton:{description:"Toggle drums on channel {0}"}};var eA={button:{title:"Effects config",description:"Configure the chorus and reverb effects and the custom vibrato"},reverbConfig:{title:"Reverb configuration",description:"Configure the reverb processor",impulseResponse:{title:"Impulse response",description:"Select impulse response for the convolver reverb"}},chorusConfig:{title:"Chorus configuration",description:"Configure the chorus processor",nodesAmount:{title:"Nodes amount",description:"The amount of delay nodes (for each stereo channel) to use"},defaultDelay:{title:"Delay (s)",description:"The delay time for the first node in seconds"},delayVariation:{title:"Delay increment (s)",description:"The amount to increment each delay node after the first one in seconds"},stereoDifference:{title:"Stereo difference (s)",description:"The difference of delays between two channels (added to the left channel and subtracted from the right)"},oscillatorFrequency:{title:"LFO frequency (Hz)",description:"The first delay node's LFO frequency, in Hz. The LFO controls delay time."},frequencyVariation:{title:"LFO increment (Hz)",description:"The amount to increment each LFO's frequency after the first one, in Hz"},oscillatorGain:{title:"LFO gain (s)",description:"How much will LFO alter the delay in delay nodes, in seconds"},apply:{title:"Apply",description:"Apply the selected settings"}}};var tA={button:{title:"Key Modifiers",description:"Modify individual key parameters"},mainTitle:"Key Modification editor",detailedDescription:`This menu allows you to modify a MIDI note on a given channel.
Currently you can modify its velocity and assign a patch (instrument) it uses.
 This is especially useful for drums.`,prompt:"What would you like to do?",selectKey:{prompt:"Press the key you want to modify on the keyboard.",title:"Select key",change:"Change key"},selectedChannel:{title:"Selected channel",description:"The channel to which the key you want to modify belongs"},selectedKey:{title:"Selected key: {0}",description:"You have selected the MIDI note number {0}"},modifyKey:{title:"Modify a key",description:"Modify a single key on a given channel",velocity:{title:"Velocity override",description:"The velocity to use on this key, ignoring the MIDI velocity. Leave at -1 for unchanged"},preset:{title:"Preset override",description:"The preset to use on this key.",unchanged:"Unchanged"},apply:{title:"Apply",description:"Apply the selected modifier"}},removeModification:{title:"Remove modification",description:"Remove modification from a single key on a given channel",remove:{title:"Remove",description:"Remove this key modifier"}},resetModifications:{title:"Reset changes",description:"Clear and reset all key modifications from all channels",confirmation:{title:"Confirm your actions",description:"Are you sure you want to remove ALL modifications?"}}};var oA={toggleButton:{title:"Synthesizer controller",description:"Show the synthesizer controller"},mainVoiceMeter:{title:"Voices: ",description:"The total amount of voices currently playing"},mainVolumeMeter:{title:"Volume: ",description:"The current master volume of the synthesizer"},mainPanMeter:{title:"Pan: ",description:"The current master stereo panning of the synthesizer"},mainTransposeMeter:{title:"Transpose: ",description:"Transposes the synthesizer (in semitones or keys)"},midiPanic:{title:"MIDI Panic",description:"Stops all voices immediately"},systemReset:{title:"System reset",description:"Resets all controllers to their default values"},blackMidiMode:{title:"Black MIDI mode",description:"Toggles the High Performance Mode, simplifying the look and killing the notes faster"},disableCustomVibrato:{title:"Disable custom vibrato",description:"Disables the custom (NRPN) Vibrato permamently. Reload the website to reenable it"},helpButton:{title:"Help",description:"Opens an external website with the usage guide"},interpolation:{description:"Select the synthesizer's interpolation method",linear:"Linear Interpolation",nearestNeighbor:"Nearest neighbor",cubic:"Cubic Interpolation"},channelController:$s,effectsConfig:eA,keyModifiers:tA};var iA={previousSong:"Previous song",nextSong:"Next song",loopThis:"Loop this song",playPause:"Play/pause",lyrics:{show:"Show lyrics",title:"Decoded text",noLyrics:"No lyrics available...",otherText:{title:"Other text"},subtitles:{title:"Upload ASS subtitles",description:"Upload your own subtitles in the (.ass) format"}}};var nA={button:{title:"Save Audio",description:"Save the composition to various formats"},formats:{title:"Choose format",formats:{wav:{button:{title:"WAV audio (.wav)",description:"Export the song with modifications as a .wav audio file"},options:{title:"WAV export options",confirm:"Export",normalizeVolume:{title:"Normalize volume",description:"Keep the volume at the same level, no matter how loud or quiet the MIDI is. Recommended."},additionalTime:{title:"Additional time (s)",description:"Additional time at the end of the song to allow for the sound to fade. (seconds)"},sampleRate:{title:"Sample rate",description:"Output file sample rate in Hz. Leave as is unless you know what you're doing."},separateChannels:{title:"Separate channels",description:"Save each channel as a separate file. Useful for things like oscilloscope viewers. Note that this disables reverb and chorus.",saving:{title:"Channel files",save:"Save channel {0}"}},loopCount:{title:"Loop count",description:"The amount of times to loop the song"}},exportMessage:{message:"Exporting WAV audio...",estimated:"Remaining:",convertWav:"Converting to wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Export the MIDI file with the controller and instrument changes applied"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Export a SoundFont2 file"},options:{title:"SF export options",confirm:"Export",trim:{title:"Trim",description:"Export the soundfont trimmed to only use instruments and samples that the MIDI file uses"},compress:{title:"Compress",description:"Compress samples with lossy Ogg Vorbis compression if uncompressed. Significantly reduces the file size.If the soundfont was already compressed, it won't be uncompressed even if this option is disabled"},quality:{title:"Compression quality",description:"The quality of compression. Higher is better"}}},dls:{button:{title:"DLS (.dls)",description:"Export the SoundFont as DLS"},warning:{title:"DLS Export warning",message:"DLS export is limited and may produce broken files with large and complex SoundFonts.",details:"More info",confirm:"Export anyways"}},rmidi:{button:{title:"Embedded MIDI (.rmi)",description:"Export the modified MIDI with the embedded trimmed soundfont as a single file. Note that this format isn't widely supported"},progress:{title:"Exporting embeded MIDI...",loading:"Loading Soundfont and MIDI...",modifyingMIDI:"Modifying MIDI...",modifyingSoundfont:"Trimming Soundfont... (this may take a while!)",saving:"Saving RMIDI...",done:"Done!"},options:{title:"RMIDI export options",confirm:"Export",compress:{title:"Compress",description:"Compress the Soundfont with lossy Ogg Vorbis compression. Significantly reduces the file size. Recommended."},quality:{title:"Compression quality",description:"The quality of compression. Higher is better."},bankOffset:{title:"Bank offset",description:"The bank offset of the file. Value of 0 is recommended. Only change if you know what you're doing."},adjust:{title:"Adjust MIDI",description:"Adjusts the MIDI file to the SoundFont. Leave this on unless you know what you're doing."}}}},metadata:{songTitle:{title:"Title:",description:"The song's title"},album:{title:"Album:",description:"The song's album"},artist:{title:"Artist:",description:"The song's artist"},albumCover:{title:"Album cover:",description:"The song's album cover"},creationDate:{title:"Created:",description:"The song's creation date"},genre:{title:"Genre:",description:"The song's genre"},comment:{title:"Comment:",description:"The song's comment"},duration:{title:"Duration:",description:"The song's duration"}}}};var sA={localeName:"English",titleMessage:"SpessaSynth: SoundFont2 Javascript Synthesizer",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript Synthesizer Online Demo",synthInit:{genericLoading:"Loading...",loadingSoundfont:"Loading SoundFont...",loadingBundledSoundfont:"Loading bundled SoundFont...",startingSynthesizer:"Starting Synthesizer...",savingSoundfont:"Saving SoundFont for reuse...",noWebAudio:"Your browser does not support Web Audio.",done:"Ready!"},midiUploadButton:"Upload your MIDI files",exportAudio:nA,error:"Error",yes:"Yes",no:"No",demoSoundfontUploadButton:"Upload the soundfont",demoGithubPage:"Project's page",demoDownload:{main:"Download",downloadLocal:{title:"Download Local Edition",description:"Download SpessaSynth: Local Edition to use offline on your computer"}},demoSongButton:"Demo Song",credits:"Credits",dropPrompt:"Drop files here...",warnings:{outOfMemory:"Your browser ran out of memory. Consider using Firefox or SF3 soundfont instead. (see console for error).",noMidiSupport:"No MIDI ports detected, this functionality will be disabled.",chromeMobile:"SpessaSynth performs poorly on Chrome Mobile. Consider using Firefox Android instead.",warning:"Warning"},hideTopBar:{title:"Hide top bar",description:"Hide the top (title) bar to provide a more seamless experience"},convertDls:{title:"DLS Conversion",message:"Looks like you've uploaded a DLS file. Do you want to convert it to SF2?"},musicPlayerMode:Xs,settings:js,synthesizerController:oA,sequencerController:iA};var AA={title:"Ustawienia wizualizacji",noteFallingTime:{title:"Czas spadania nut (ms)",description:"Jak szybko spadaj\u0105 z g\xF3ry nuty (w milisekundach)"},noteAfterTriggerTime:{title:"Czas po aktywacji nuty (ms)",description:"Jak d\u0142ugo nuty spadaj\u0105 po aktywacji. Zero oznacza, \u017Ce aktywuj\u0105 si\u0119 na dole."},waveformThickness:{title:"Grubo\u015B\u0107 lini fal (px)",description:"Jak grube s\u0105 linie fal d\u017Awi\u0119kowych"},waveformSampleSize:{title:"Rozmiar pr\xF3bki fali",description:"Jak szczeg\xF3\u0142owe s\u0105 linie fal d\u017Awi\u0119kowcyh (Uwaga: wysokie warto\u015Bci mog\u0105 pogorszy\u0107 wydajno\u015B\u0107) Pami\u0119taj, \u017Ce wysokie warto\u015Bci dodadz\u0105 op\xF3\u017Anienie do d\u017Awi\u0119ku, aby zsynchronizowa\u0107 fale z d\u017Awi\u0119kiem."},waveformAmplifier:{title:"Wzmacniasz fal",description:"Jak '\u017Cywe' s\u0105 fale. Kontroluje ich amplitud\u0119"},toggleWaveformsRendering:{title:"W\u0142\u0105cz rysowanie fal",description:"W\u0142\u0105cz rysowanie fal d\u017Awi\u0119kowych (16-tu kolorowych linii z ty\u0142u)"},toggleNotesRendering:{title:"W\u0142\u0105cz rysowanie nut",description:"W\u0142\u0105cz rysowanie spadaj\u0105cych nut podczas odtwarzania pliku MIDI"},toggleDrawingActiveNotes:{title:"W\u0142\u0105cz rysowanie aktywnych nut",description:"W\u0142\u0105cz efekt pod\u015Bwietlania si\u0119 nut przy aktywacji"},toggleDrawingVisualPitch:{title:"W\u0142\u0105cz wizualizacj\u0119 wysoko\u015Bci tonu",description:"W\u0142\u0105cz przesuwanie nut w lewo lub w prawo gdy wysoko\u015B\u0107 nut jest zmieniana"},toggleStabilizeWaveforms:{title:"W\u0142\u0105cz stabilizacj\u0119 fal",description:"W\u0142\u0105cz stabilizowanie fal d\u017Awi\u0119kowych"}};var rA={title:"Ustawienia pianina",selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142, do kt\xF3rego b\u0119dzie pod\u0142\u0105czone pianino",channelOption:"Kana\u0142 {0}"},keyboardSize:{title:"Rozmiar pianina",description:"Zakres klawiszy widocznych na pianine. Dostosowuje r\xF3wnie\u017C szeroko\u015B\u0107 wizualizowanych nut",full:"128 klawiszy (pe\u0142en zakres)",piano:"88 klawiszy (fortepian)",fiveOctaves:"5 oktaw",twoOctaves:"Dwie oktawy",useSongKeyRange:"U\u017Cyj zakresu utworu"},toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw wbudowanego pianina"},show:{title:"Poka\u017C",description:"Poka\u017C/ukryj pianino"}};var aA={title:"Ustawienia MIDI",midiInput:{title:"Wej\u015Bcie MIDI",description:"Port MIDI, kt\xF3ry b\u0119dzie nas\u0142uchiwany",disabled:"Wy\u0142\u0105czony"},midiOutput:{title:"Wyj\u015Bcie MIDI",description:"Port MIDI, do kt\xF3rego b\u0119dzie grany utw\xF3r",disabled:"U\u017Cyj SpessaSynth"},reminder:{title:"Zauwa\u017C, \u017Ce po pod\u0142\u0105czeniu nowego urz\u0105dzenia MIDI MUSISZ ZRESTARTOWA\u0106 PRZEGL\u0104DARK\u0118, aby pojawi\u0142o si\u0119 ono tutaj.",description:"Zauwa\u017C r\xF3wnie\u017C, \u017Ce Safari nie obs\u0142uguje WebMIDI, wi\u0119c musisz u\u017Cy\u0107 innej przegl\u0105darki, je\u015Bli jeste\u015B na Macu."}};var lA={toggleButton:"Ustawienia",mainTitle:"Ustawienia programu",rendererSettings:AA,keyboardSettings:rA,midiSettings:aA,interfaceSettings:{title:"Ustawienia interfejsu",toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw programu"},selectLanguage:{title:"J\u0119zyk",description:"Zmie\u0144 j\u0119zyk programu",helpTranslate:"Przet\u0142umacz SpessaSynth"},layoutDirection:{title:"Uk\u0142ad",description:"Kierunek uk\u0142adu wizualizacji i pianina",values:{downwards:"W d\xF3\u0142",upwards:"W g\xF3r\u0119",leftToRight:"Od lewej do prawej",rightToLeft:"Od prawej do lewej"}},reminder:{title:"Czy wiedzia\u0142e\u015B, \u017Ce mo\u017Cesz najecha\u0107 na ustawienia, aby uzyska\u0107 wi\u0119cej informacji?",description:"Tak jak ta!"}}};var cA={toggleButton:{title:"Prze\u0142\u0105cz tryb odtwarzania muzyki",description:"Prze\u0142\u0105cz uproszczon\u0105 wersj\u0119 interfejsu, ukrywaj\u0105c pianino i wizualizacj\u0119 nut"},currentlyPlaying:"Teraz gramy:",nothingPlaying:"Nic teraz nie gra",nothingPlayingCopyright:"Wgraj jakie\u015B MIDI!"};var gA={voiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Aktualna ilo\u015B\u0107 d\u017Awi\u0119k\xF3w na kanale {0}"},pitchBendMeter:{title:"Wysoko\u015B\u0107: ",description:"Aktualna wysoko\u015B\u0107 tonu na kanale {0}"},panMeter:{title:"Stereo: ",description:"Aktualny efekt stereo na kanale {0} (kliknij prawym aby zablokowa\u0107)"},expressionMeter:{title:"Ekspresja: ",description:"Aktualna ekspresja (g\u0142o\u015Bno\u015Bc) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},volumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Aktualna g\u0142o\u015Bno\u015B\u0107 kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},modulationWheelMeter:{title:"Modulacja: ",description:"Aktualna g\u0142\u0119boko\u015B\u0107 modulacji (zazwyczaj vibrato) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},chorusMeter:{title:"Ch\xF3r: ",description:"Aktualny efekt ch\xF3ru na kanale {0} (kliknij prawym aby zablokowa\u0107)"},reverbMeter:{title:"Pog\u0142os: ",description:"Aktualny efekt pog\u0142osu na kanale {0} (kliknij prawym aby zablokowa\u0107)"},filterMeter:{title:"Filtr: ",description:"Aktualny poziom filtra niskopasmowego na kanale {0} (kliknij prawym aby zablokowa\u0107)"},transposeMeter:{title:"Transpozycja: ",description:"Aktualna transpozycja (przesuni\u0119cie klawiszy) kana\u0142u {0}"},presetSelector:{description:"Zmie\u0144 patch (instrument), kt\xF3rego u\u017Cywa kana\u0142 {0}",selectionPrompt:"Zmie\u0144 instrument kana\u0142u {0}",searchPrompt:"Wyszukaj..."},presetReset:{description:"Odblokuj kana\u0142 {0}, aby program m\xF3g\u0142 go zmienia\u0107"},soloButton:{description:"Solo na kanale {0}"},muteButton:{description:"Wycisz/odcisz kana\u0142 {0}"},drumToggleButton:{description:"Prze\u0142\u0105cz perkusj\u0119 na kanale {0}"}};var dA={button:{title:"Konfiguracja efekt\xF3w",description:"Skonfiguruj efekt pog\u0142osu i ch\xF3ru oraz wy\u0142\u0105cz niestandardowe wibrato"},reverbConfig:{title:"Konfiguracja pog\u0142osu",description:"Skonfiguruj procesor pog\u0142osu",impulseResponse:{title:"Impuls pog\u0142osu",description:"Wybierz impuls kszta\u0142tuj\u0105cy d\u017Awi\u0119k pog\u0142osu"}},chorusConfig:{title:"Konfiguracja ch\xF3ru",description:"Skonfiguruj procesor efektu ch\xF3ru",nodesAmount:{title:"Ilo\u015B\u0107 w\u0119z\u0142\xF3w",description:"Ilo\u015B\u0107 li\u0144 op\xF3\u017Aniaj\u0105cych dla ka\u017Cdego kana\u0142u stereo"},defaultDelay:{title:"Op\xF3\u017Anienie (s)",description:"Op\xF3\u017Anienie pierwszej linii, w sekundach"},delayVariation:{title:"Przyrost op\xF3\u017Anienia (s)",description:"Przyrost op\xF3\u017Anienia ka\u017Cdej kolejnej linii w sekundach"},stereoDifference:{title:"R\xF3\u017Cnica stereo (s)",description:"R\xF3\u017Cnica op\xF3\u017Anie\u0144 w kana\u0142ach stereo (dodane do lewego kana\u0142u i odj\u0119te od prawego sekundy)"},oscillatorFrequency:{title:"Cz\u0119stotliwo\u015B\u0107 LFO (Hz)",description:"Cz\u0119stotliwo\u015B\u0107 pierwszego LFO kontroluj\u0105cego op\xF3\u017Anienie pierwszej linii w Hz."},frequencyVariation:{title:"Przyrost LFO (Hz)",description:"Przyrost cz\u0119stotliwo\u015Bci LFO ka\u017Cdej kolejnej linii w Hz"},oscillatorGain:{title:"Si\u0142a LFO (s)",description:"Jak bardzo LFO b\u0119dzie wp\u0142ywa\u0107 na op\xF3\u017Anienie linii, w sekundach"},apply:{title:"Zastosuj",description:"Zastosuj wybrane ustawienia"}}};var hA={button:{title:"Modyfikacja klawiszy",description:"Zmodyfikuj indywidualne parametry klawiszy."},mainTitle:"Edytor modyfikacji klawiszy",detailedDescription:`To menu pozwala Ci na modyfikacj\u0119 danych klawiszy na danym kanale.
Aktualnie mo\u017Cesz nadpisa\u0107 si\u0142\u0119 nacisku oraz przypisa\u0107 instrument do danego klawisza.
To jest szczeg\xF3lnie przydatne w przypadku perkusji.`,prompt:"Co chcesz teraz zrobi\u0107?",selectKey:{prompt:"Naci\u015Bnij klawisz kt\xF3ry chcesz zmodyfikowa\u0107.",title:"Wybierz klawisz",change:"Zmie\u0144 klawisz"},selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142 do kt\xF3rego nale\u017Cy klawisz kt\xF3ry chcesz zmodyfikowa\u0107."},selectedKey:{title:"Wybrany klawisz: {0}",description:"Wybra\u0142e\u015B/a\u015B klawisz MIDI o numerze {0}."},modifyKey:{title:"Zmodyfikuj klawisz",description:"Zmodyfikuj pojedynczy klawisz na danym kanale",velocity:{title:"Si\u0142a nacisku",description:"Si\u0142a nacisku dla tego klawisza. Pozostaw -1 dla braku zmian."},preset:{title:"Nadpisanie instrumentu",description:"Instrument dla tego klawisza.",unchanged:"Bez zmian"},apply:{title:"Zastosuj",description:"Zastosuj modyfikacj\u0119"}},removeModification:{title:"Usu\u0144 modyfikacj\u0119",description:"Usu\u0144 modyfikacj\u0119 z klawisza na danym kanale.",remove:{title:"Usu\u0144",description:"Usu\u0144 ten modyfikator."}},resetModifications:{title:"Zresetuj zmiany",description:"Wyczy\u015B\u0107 i usu\u0144 wszystkie zastosowane zmiany",confirmation:{title:"Potwierdzenie",description:"Jeste\u015B pewien, \u017Ce chcesz usun\u0105\u0107 WSZYSTKIE zmiany?"}}};var IA={toggleButton:{title:"Kontroler syntezatora",description:"Poka\u017C kontroler syntezatora"},mainVoiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Ca\u0142kowita ilo\u015B\u0107 aktualnie odtwarzanych d\u017Awi\u0119k\xF3w"},mainVolumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Aktualna g\u0142o\u015Bno\u015B\u0107 syntezatora"},mainPanMeter:{title:"Stereo: ",description:"Aktualna pozycja stereo syntezatora"},mainTransposeMeter:{title:"Transpozycja: ",description:"Transpozycjonuje syntezator (w semitonach)"},midiPanic:{title:"MIDI Panic",description:"Zatrzymuje wszystkie d\u017Awi\u0119ki"},systemReset:{title:"Reset systemu",description:"Resetuje wszystkie kontroleru do ich domy\u015Blnych warto\u015Bci"},blackMidiMode:{title:"Tryb black MIDI",description:"Prze\u0142\u0105cza tryb wysokiej wydajno\u015Bci, upraszczaj\u0105c wygl\u0105d i pogarszaj\u0105c jako\u015B\u0107 d\u017Awi\u0119ku"},disableCustomVibrato:{title:"Wy\u0142\u0105cz niestandardowe vibrato",description:"Wy\u0142\u0105cza niestandardowe (NRPN) vibrato. Wymaga prze\u0142adowania strony aby je ponownie w\u0142\u0105czy\u0107"},helpButton:{title:"Pomoc",description:"Poka\u017C instrukcj\u0119 obs\u0142ugi"},interpolation:{description:"Wybierz metod\u0119 interpolacji",linear:"Interpolacja liniowa",nearestNeighbor:"Najbli\u017Cszy s\u0105siad",cubic:"Interpolacja Sze\u015Bcienna"},channelController:gA,effectsConfig:dA,keyModifiers:hA};var uA={previousSong:"Poprzedni utw\xF3r",nextSong:"Nast\u0119pny utw\xF3r",loopThis:"Odtwarzaj w p\u0119tli",playPause:"Odtw\xF3rz/wstrzymaj",lyrics:{show:"Poka\u017C tekst",title:"Odczytany tekst",noLyrics:"Brak dost\u0119pnego tekstu...",otherText:{title:"Inny tekst"},subtitles:{title:"Wgraj napisy ASS",description:"Wgraj swoje w\u0142asne napisy w formacie ASS (.ass)"}}};var mA={button:{title:"Zapisz",description:"Zapisz w r\xF3\u017Cnych formatach"},formats:{title:"Wybierz format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Eksportuj utw\xF3r ze zmianami jako plik audio .wav"},options:{title:"Opcje eksportu audio",confirm:"Eksportuj",normalizeVolume:{title:"Normalizuj g\u0142o\u015Bno\u015B\u0107",description:"Eksportuj audio z tak\u0105 sam\u0105 g\u0142o\u015Bno\u015Bci\u0105, niezale\u017Cnie od g\u0142o\u015Bno\u015Bci MIDI."},additionalTime:{title:"Dodatkowy czas (s)",description:"Dodatkowy czas na ko\u0144cu utworu aby pozwoli\u0107 na wyciszenie si\u0119 d\u017Awi\u0119ku. (sekundy)"},sampleRate:{title:"Cz\u0119stotliwo\u015B\u0107",description:"Cz\u0119stotliwo\u015B\u0107 pr\xF3bkowania d\u017Awi\u0119ku. Pozostaw bez zmian, chyba \u017Ce wiesz, co robisz."},separateChannels:{title:"Rozdziel kana\u0142y",description:"Zapisz ka\u017Cdy kana\u0142 w osobnym pliuku. Przydatne dla rzeczy jak widok oscyloskopowy. Nale\u017Cy pami\u0119ta\u0107 \u017Ce to wy\u0142\u0105cza ekfet pog\u0142osu i ch\xF3ru",saving:{title:"Pliki audio kana\u0142\xF3w",save:"Zapisz kana\u0142 {0}"}},loopCount:{title:"Ilo\u015B\u0107 p\u0119tli",description:"Ilo\u015B\u0107 razy zap\u0119tlenia utworu"}},exportMessage:{message:"Eksportowanie audio...",estimated:"Pozosta\u0142o:",convertWav:"Konwertowanie do wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Eksportuj plik MIDI wraz ze zmianami instrument\xF3w i kontroler\xF3w"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Eksportuj SoundFont"},options:{title:"Opcje eksportu soundfonta",confirm:"Eksportuj",trim:{title:"Zmniejsz",description:"Zmniejsz SoundFont aby zawiera\u0142 tylko klawisze u\u017Cyte w MIDI"},compress:{title:"Kompresuj",description:"Zkompresuj pr\xF3bki kt\xF3re nie s\u0105 zkompresowane przy u\u017Cyciu stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku.Je\u015Bli soundfont by\u0142 ju\u017C skompresowany, nie zostanie zdekompresowany nawet gdy ta opcja jest wy\u0142\u0105czona"},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"}}},dls:{button:{title:"DLS (.dls)",description:"Eksportuj SoundFonta jako DLS"},warning:{title:"Ostrze\u017Cenie DLS",message:"Eksport do formatu DLS jest ograniczony i mo\u017Ce utworzy\u0107 uszkodzone pliki.",details:"Wi\u0119cej informacji",confirm:"Eksportuj i tak"}},rmidi:{button:{title:"Osadzone MIDI (.rmi)",description:"Eksportuj zmodyfikowane MIDI wraz ze zmniejszonym soundfontem jako jeden plik. Uwaga: ten format nie jest szeroko wspierany"},progress:{title:"Exportowanie osadzonego MIDI...",loading:"Wczytywanie soundfonta i MIDI...",modifyingMIDI:"Modyfikowanie MIDI...",modifyingSoundfont:"Zmniejszanie Soundfonta... (troch\u0119 to zajmie!)",saving:"Zapisywanie RMIDI...",done:"Gotowe!"},options:{title:"Opcje eksportu RMIDI",confirm:"Eksportuj",compress:{title:"Kompresuj",description:"Skompresuj osadzonego soundfonta za pomoc\u0105 stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku. Zalecane."},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"},bankOffset:{title:"Przesuni\u0119cie banku",description:"Przesuni\u0119cie banku w pliku. Zalecane 0. Zmie\u0144 tylko je\u015Bli wiesz co robisz."},adjust:{title:"Dostosuj MIDI",description:"Dostosuj MIDI do SoundFonta. Pozostaw w\u0142\u0105czone, chyba \u017Ce wiesz co robisz."}}}},metadata:{songTitle:{title:"Tytu\u0142:",description:"Tytu\u0142 utworu"},album:{title:"Album:",description:"Album utworu"},artist:{title:"Tw\xF3rca:",description:"Tw\xF3rca utworu"},albumCover:{title:"Ok\u0142adka albumu:",description:"Ok\u0142adka albumu utworu"},creationDate:{title:"Stworzono:",description:"Data stworzenia utworu"},genre:{title:"Gatunek:",description:"Gatunek utworu"},comment:{title:"Komentarz:",description:"Komentarz do utworu"},duration:{title:"Czas trwania:",description:"Czas trwania utworu"}}}};var CA={localeName:"Polski",titleMessage:"SpessaSynth: JavaScriptowy Syntezator SoundFont2",demoTitleMessage:"SpessaSynth: JavaScriptowy Syntezator SF2/DLS Wersja Demo",synthInit:{genericLoading:"Wczytywanie...",loadingSoundfont:"Wczytywanie SoundFonta...",loadingBundledSoundfont:"Wczytywanie wbudowanego SoundFonta...",startingSynthesizer:"Uruchamianie syntezatora...",savingSoundfont:"Zapisywanie SoundFonta do przegl\u0105darki...",noWebAudio:"Twoja przegl\u0105darka nie wspiera Web Audio.",done:"Gotowe!"},midiUploadButton:"Wgraj Twoje pliki MIDI",midiRenderButton:{title:"Eksportuj audio",description:"Zapisz audio do pliku WAV lub MIDI"},exportAudio:mA,yes:"Tak",no:"Nie",error:"B\u0142\u0105d",demoSoundfontUploadButton:"Wgraj SoundFonta",demoGithubPage:"Strona projektu",demoDownload:{main:"Pobierz",downloadLocal:{title:"Pobierz Edycj\u0119 Lokaln\u0105",description:"Pobierz SpessaSynth: Edycja Lokalna aby u\u017Cywa\u0107 jej na swoim komputerze bez internetu"}},demoSongButton:"Piosenka demo",credits:"Tw\xF3rcy",dropPrompt:"Upu\u015B\u0107 pliki tutaj...",warnings:{outOfMemory:"Twojej przegl\u0105darce sko\u0144czy\u0142a si\u0119 pami\u0119\u0107. Rozwa\u017C u\u017Cycie Firefoxa albo plik\xF3w SF3. (Zobacz b\u0142\u0105d w konsoli)",noMidiSupport:"Nie wykryto MIDI. Korzystanie z port\xF3w MIDI nie b\u0119dzie dost\u0119pne.",chromeMobile:"SpessaSynth dzia\u0142a wolno na Chromie na telefon. Rozwa\u017C u\u017Cycie Firefoxa Android.",warning:"Uwaga"},hideTopBar:{title:"Ukryj g\xF3rny pasek",description:"Ukryj pasek tytu\u0142owy w celu poprawy widoczno\u015Bci na pionowych ekranach"},convertDls:{title:"Konwersja DLS",message:"Wygl\u0105da na to, \u017Ce wgra\u0142e\u015B plik DLS. Czy chcesz przekonwertowa\u0107 go do SF2?"},musicPlayerMode:cA,settings:lA,synthesizerController:IA,sequencerController:uA};var pA={title:"\u30EC\u30F3\u30C0\u30E9\u30FC\u8A2D\u5B9A",noteFallingTime:{title:"\u30CE\u30FC\u30C8\u306E\u843D\u4E0B\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09",description:"\u30CE\u30FC\u30C8\u304C\u843D\u3061\u308B\u901F\u3055\uFF08\u8996\u899A\u7684\u306B\uFF09"},waveformThickness:{title:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09",description:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055"},waveformSampleSize:{title:"\u6CE2\u5F62\u306E\u30B5\u30F3\u30D7\u30EB\u30B5\u30A4\u30BA",description:"\u6CE2\u5F62\u306E\u8A73\u7D30\u5EA6\uFF08\u6CE8\uFF1A\u9AD8\u3044\u5024\u306F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u306B\u5F71\u97FF\u3092\u4E0E\u3048\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\uFF09 \u9AD8\u3044\u5024\u306F\u3001\u6CE2\u5F62\u3092\u30AA\u30FC\u30C7\u30A3\u30AA\u3068\u540C\u671F\u3055\u305B\u308B\u305F\u3081\u306B\u30AA\u30FC\u30C7\u30A3\u30AA\u306B\u9045\u5EF6\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"},waveformAmplifier:{title:"\u6CE2\u5F62\u306E\u5897\u5E45\u5668",description:"\u6CE2\u5F62\u306E\u9BAE\u3084\u304B\u3055"},toggleWaveformsRendering:{title:"\u6CE2\u5F62\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"\u30C1\u30E3\u30F3\u30CD\u30EB\u6CE2\u5F62\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059\uFF08\u30AA\u30FC\u30C7\u30A3\u30AA\u3092\u8868\u793A\u3059\u308B\u30AB\u30E9\u30D5\u30EB\u306A\u7DDA\uFF09"},toggleNotesRendering:{title:"\u30CE\u30FC\u30C8\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u969B\u306E\u843D\u4E0B\u30CE\u30FC\u30C8\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingActiveNotes:{title:"\u30A2\u30AF\u30C6\u30A3\u30D6\u30CE\u30FC\u30C8\u306E\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048",description:"\u30CE\u30FC\u30C8\u304C\u62BC\u3055\u308C\u305F\u3068\u304D\u306B\u5149\u308A\u8F1D\u304F\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingVisualPitch:{title:"\u30D3\u30B8\u30E5\u30A2\u30EB\u30D4\u30C3\u30C1\u63CF\u753B\u306E\u5207\u308A\u66FF\u3048",description:"\u30D4\u30C3\u30C1\u30DB\u30A4\u30FC\u30EB\u304C\u9069\u7528\u3055\u308C\u305F\u3068\u304D\u306B\u30CE\u30FC\u30C8\u304C\u5DE6\u53F3\u306B\u30B9\u30E9\u30A4\u30C9\u3059\u308B\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleStabilizeWaveforms:{title:"\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B",description:"\u30AA\u30FC\u30C7\u30A3\u30AA\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B\u8A2D\u5B9A\u3092\u5207\u308A\u66FF\u3048\u3001\u6CE2\u5F62\u3092\u56FA\u5B9A\u3057\u307E\u3059\u3002"}};var EA={title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u8A2D\u5B9A",selectedChannel:{title:"\u9078\u629E\u3055\u308C\u305F\u30C1\u30E3\u30F3\u30CD\u30EB",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u304C\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u9001\u4FE1\u3059\u308B\u30C1\u30E3\u30F3\u30CD\u30EB",channelOption:"\u30C1\u30E3\u30F3\u30CD\u30EB {0}"},keyboardSize:{title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u30B5\u30A4\u30BA",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306B\u8868\u793A\u3055\u308C\u308B\u30AD\u30FC\u306E\u7BC4\u56F2\u3002MIDI\u30CE\u30FC\u30C8\u306E\u30B5\u30A4\u30BA\u306B\u5FDC\u3058\u3066\u8ABF\u6574\u3055\u308C\u307E\u3059",full:"128\u30AD\u30FC\uFF08\u5168\u4F53\uFF09",piano:"88\u30AD\u30FC\uFF08\u30D4\u30A2\u30CE\uFF09",fiveOctaves:"5\u30AA\u30AF\u30BF\u30FC\u30D6",useSongKeyRange:"\u66F2\u306E\u30AD\u30FC\u7BC4\u56F2\u3092\u4F7F\u7528",twoOctaves:"\u30AA\u30AF\u30BF\u30FC\u30D6"},toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},show:{title:"\u8868\u793A",description:"MIDI\u30AD\u30FC\u30DC\u30FC\u30C9\u3092\u8868\u793A/\u975E\u8868\u793A"}};var BA={title:"MIDI\u8A2D\u5B9A",midiInput:{title:"MIDI\u5165\u529B",description:"MIDI\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53D7\u4FE1\u3059\u308B\u30DD\u30FC\u30C8",disabled:"\u7121\u52B9"},midiOutput:{title:"MIDI\u51FA\u529B",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u30DD\u30FC\u30C8",disabled:"SpessaSynth\u3092\u4F7F\u7528"},reminder:{title:"\u65B0\u3057\u3044MIDI\u30C7\u30D0\u30A4\u30B9\u3092\u63A5\u7D9A\u3057\u305F\u5F8C\u3001\u3053\u3053\u306B\u8868\u793A\u3059\u308B\u306B\u306F\u30D6\u30E9\u30A6\u30B6\u3092\u518D\u8D77\u52D5\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",description:"\u307E\u305F\u3001Safari\u306FWebMIDI\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001Mac\u306E\u5834\u5408\u306F\u5225\u306E\u30D6\u30E9\u30A6\u30B6\u3092\u4F7F\u7528\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}};var fA={toggleButton:"\u8A2D\u5B9A",mainTitle:"\u30D7\u30ED\u30B0\u30E9\u30E0\u8A2D\u5B9A",rendererSettings:pA,keyboardSettings:EA,midiSettings:BA,interfaceSettings:{title:"\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u8A2D\u5B9A",toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},selectLanguage:{title:"\u8A00\u8A9E",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u8A00\u8A9E\u3092\u5909\u66F4\u3057\u307E\u3059"},layoutDirection:{title:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u65B9\u5411",description:"\u30EC\u30F3\u30C0\u30E9\u30FC\u3068\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u65B9\u5411",values:{downwards:"\u4E0B\u5411\u304D",upwards:"\u4E0A\u5411\u304D",leftToRight:"\u5DE6\u304B\u3089\u53F3",rightToLeft:"\u53F3\u304B\u3089\u5DE6"}},reminder:{title:"\u8A2D\u5B9A\u306B\u30AB\u30FC\u30BD\u30EB\u3092\u5408\u308F\u305B\u308B\u3068\u3001\u8A73\u7D30\u60C5\u5831\u3092\u8868\u793A\u3067\u304D\u308B\u3053\u3068\u3092\u77E5\u3063\u3066\u3044\u307E\u3057\u305F\u304B\uFF1F",description:"\u3053\u306E\u3088\u3046\u306B\uFF01"}}};var QA={toggleButton:{title:"\u97F3\u697D\u30D7\u30EC\u30A4\u30E4\u30FC\u30E2\u30FC\u30C9\u306E\u5207\u308A\u66FF\u3048",description:"\u7C21\u7565\u5316\u3055\u308C\u305FUI\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u5207\u308A\u66FF\u3048\u3001\u30AD\u30FC\u30DC\u30FC\u30C9\u3068\u30CE\u30FC\u30C8\u306E\u8996\u899A\u5316\u3092\u96A0\u3057\u307E\u3059"},currentlyPlaying:"\u518D\u751F\u4E2D:",nothingPlaying:"\u518D\u751F\u3057\u3066\u3044\u308B\u3082\u306E\u306F\u3042\u308A\u307E\u305B\u3093",nothingPlayingCopyright:"MIDI\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u304F\u3060\u3055\u3044\uFF01"};var yA={voiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u73FE\u5728\u306E\u6570"},pitchBendMeter:{title:"\u30D4\u30C3\u30C1: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30D4\u30C3\u30C1\u30D9\u30F3\u30C9"},panMeter:{title:"\u30D1\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},expressionMeter:{title:"\u30A8\u30AF\u30B9\u30D7\u30EC\u30C3\u30B7\u30E7\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u8868\u73FE\uFF08\u97F3\u91CF\uFF09\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},volumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u97F3\u91CF\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},modulationWheelMeter:{title:"\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\u30DB\u30A4\u30FC\u30EB: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\uFF08\u901A\u5E38\u306F\u30D3\u30D6\u30E9\u30FC\u30C8\uFF09\u306E\u6DF1\u3055\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},chorusMeter:{title:"\u30B3\u30FC\u30E9\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B3\u30FC\u30E9\u30B9\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},reverbMeter:{title:"\u30EA\u30D0\u30FC\u30D6: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30EA\u30D0\u30FC\u30D6\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},filterMeter:{title:"\u30D5\u30A3\u30EB\u30BF\u30FC: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u30ED\u30FC\u30D1\u30B9\u30D5\u30A3\u30EB\u30BF\u30FC\u306E\u30AB\u30C3\u30C8\u30AA\u30D5\u306E\u73FE\u5728\u306E\u30EC\u30D9\u30EB (\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF)"},transposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u79FB\u8ABF\uFF08\u30AD\u30FC\u30B7\u30D5\u30C8\uFF09"},presetSelector:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u304C\u4F7F\u7528\u3059\u308B\u30D1\u30C3\u30C1\uFF08\u697D\u5668\uFF09\u3092\u5909\u66F4",selectionPrompt:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u697D\u5668\u3092\u5909\u66F4\u3059\u308B",searchPrompt:"\u691C\u7D22..."},presetReset:{description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u5909\u66F4\u3092\u8A31\u53EF\u3059\u308B\u305F\u3081\u306B\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u30ED\u30C3\u30AF\u3092\u89E3\u9664"},soloButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u5358\u72EC\u518D\u751F"},muteButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u30DF\u30E5\u30FC\u30C8/\u30DF\u30E5\u30FC\u30C8\u89E3\u9664"},drumToggleButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u30C9\u30E9\u30E0\u3092\u5207\u308A\u66FF\u3048"}};var SA={toggleButton:{title:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u8868\u793A"},mainVoiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u73FE\u5728\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u7DCF\u6570"},mainVolumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30DC\u30EA\u30E5\u30FC\u30E0"},mainPanMeter:{title:"\u30D1\u30F3: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0"},mainTransposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u79FB\u8ABF\u3057\u307E\u3059\uFF08\u30BB\u30DF\u30C8\u30FC\u30F3\u307E\u305F\u306F\u30AD\u30FC\uFF09"},midiPanic:{title:"MIDI\u30D1\u30CB\u30C3\u30AF",description:"\u3059\u3079\u3066\u306E\u30DC\u30A4\u30B9\u3092\u5373\u5EA7\u306B\u505C\u6B62"},systemReset:{title:"\u30B7\u30B9\u30C6\u30E0\u30EA\u30BB\u30C3\u30C8",description:"\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u306B\u30EA\u30BB\u30C3\u30C8"},blackMidiMode:{title:"\u30D6\u30E9\u30C3\u30AFMIDI\u30E2\u30FC\u30C9",description:"\u9AD8\u6027\u80FD\u30E2\u30FC\u30C9\u3092\u5207\u308A\u66FF\u3048\u3001\u898B\u305F\u76EE\u3092\u7C21\u7D20\u5316\u3057\u3001\u30CE\u30FC\u30C8\u3092\u901F\u304F\u6D88\u53BB"},disableCustomVibrato:{title:"\u30AB\u30B9\u30BF\u30E0\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u7121\u52B9\u5316",description:"\u30AB\u30B9\u30BF\u30E0\uFF08NRPN\uFF09\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u6C38\u4E45\u306B\u7121\u52B9\u5316\u3002\u518D\u5EA6\u6709\u52B9\u5316\u3059\u308B\u306B\u306F\u30A6\u30A7\u30D6\u30B5\u30A4\u30C8\u3092\u30EA\u30ED\u30FC\u30C9"},helpButton:{title:"\u30D8\u30EB\u30D7",description:"\u4F7F\u7528\u30AC\u30A4\u30C9\u3092\u8868\u793A\u3057\u307E\u3059"},interpolation:{description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u88DC\u9593\u65B9\u6CD5\u3092\u9078\u629E",linear:"\u30EA\u30CB\u30A2",nearestNeighbor:"\u306A\u3057"},channelController:yA};var wA={previousSong:"\u524D\u306E\u66F2",nextSong:"\u6B21\u306E\u66F2",loopThis:"\u3053\u306E\u66F2\u3092\u30EB\u30FC\u30D7",playPause:"\u518D\u751F/\u4E00\u6642\u505C\u6B62",lyrics:{show:"\u6B4C\u8A5E\u3092\u8868\u793A",title:"\u30C7\u30B3\u30FC\u30C9\u3055\u308C\u305F\u30C6\u30AD\u30B9\u30C8",noLyrics:"\u6B4C\u8A5E\u304C\u3042\u308A\u307E\u305B\u3093...",otherText:{title:"\u305D\u306E\u4ED6\u306E\u30C6\u30AD\u30B9\u30C8"}}};var kA={button:{title:"\u97F3\u58F0\u3092\u4FDD\u5B58",description:"\u97F3\u58F0\u3092WAV\u3001MIDI\u3001SF2\u3001\u307E\u305F\u306FRMI\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58"},formats:{title:"\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u3092\u9078\u629E",formats:{wav:{button:{title:"WAV\u97F3\u58F0 (.wav)",description:"\u5909\u66F4\u3092\u52A0\u3048\u305F\u66F2\u3092.wav\u30AA\u30FC\u30C7\u30A3\u30AA\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"WAV\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",normalizeVolume:{title:"\u97F3\u91CF\u306E\u6B63\u898F\u5316",description:"MIDI\u306E\u97F3\u91CF\u306B\u304B\u304B\u308F\u3089\u305A\u3001\u97F3\u91CF\u3092\u4E00\u5B9A\u306B\u4FDD\u3061\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},additionalTime:{title:"\u8FFD\u52A0\u6642\u9593\uFF08\u79D2\uFF09",description:"\u97F3\u304C\u30D5\u30A7\u30FC\u30C9\u30A2\u30A6\u30C8\u3059\u308B\u305F\u3081\u306B\u66F2\u306E\u6700\u5F8C\u306B\u8FFD\u52A0\u3059\u308B\u6642\u9593\u3067\u3059\u3002\uFF08\u79D2\uFF09"},separateChannels:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5206\u5272",description:"\u5404\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5225\u3005\u306E\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58\u3057\u307E\u3059\u3002\u30AA\u30B7\u30ED\u30B9\u30B3\u30FC\u30D7\u30D3\u30E5\u30FC\u30A2\u306A\u3069\u306B\u4FBF\u5229\u3067\u3059\u3002\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u4F7F\u7528\u3059\u308B\u3068\u30EA\u30D0\u30FC\u30D6\u3084\u30B3\u30FC\u30E9\u30B9\u304C\u7121\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",saving:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u30D5\u30A1\u30A4\u30EB",save:"\u30C1\u30E3\u30F3\u30CD\u30EB{0}\u3092\u4FDD\u5B58"}},loopCount:{title:"\u30EB\u30FC\u30D7\u56DE\u6570",description:"\u66F2\u3092\u30EB\u30FC\u30D7\u3059\u308B\u56DE\u6570"}},exportMessage:{message:"WAV\u97F3\u58F0\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",estimated:"\u6B8B\u308A\u6642\u9593:",convertWav:"WAV\u306B\u5909\u63DB\u4E2D..."}},midi:{button:{title:"MIDI (.mid)",description:"\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3068\u697D\u5668\u306E\u5909\u66F4\u304C\u9069\u7528\u3055\u308C\u305FMIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"}},soundfont:{button:{title:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8 (.sf2)",description:"SoundFont2\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"SF\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",trim:{title:"\u30C8\u30EA\u30DF\u30F3\u30B0",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3067\u4F7F\u7528\u3055\u308C\u3066\u3044\u308B\u697D\u5668\u3068\u30B5\u30F3\u30D7\u30EB\u3060\u3051\u306B\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},compress:{title:"\u5727\u7E2E",description:"\u672A\u5727\u7E2E\u306E\u5834\u5408\u306F\u3001Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u30B5\u30F3\u30D7\u30EB\u3092\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u304C\u3059\u3067\u306B\u5727\u7E2E\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u7121\u52B9\u306B\u3057\u3066\u3082\u518D\u5727\u7E2E\u3055\u308C\u308B\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059"}}},rmidi:{button:{title:"\u57CB\u3081\u8FBC\u307FMIDI (.rmi)",description:"\u5909\u66F4\u3055\u308C\u305FMIDI\u3068\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u30921\u3064\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u57CB\u3081\u8FBC\u3093\u3067\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059\u3002\u3053\u306E\u5F62\u5F0F\u306F\u5E83\u304F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044"},progress:{title:"\u57CB\u3081\u8FBC\u307E\u308C\u305FMIDI\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u4E2D...",loading:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3068MIDI\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",modifyingMIDI:"MIDI\u3092\u4FEE\u6B63\u4E2D...",modifyingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u4E2D...",saving:"RMIDI\u3092\u4FDD\u5B58\u4E2D...",done:"\u5B8C\u4E86\u3057\u307E\u3057\u305F\uFF01"},options:{title:"RMIDI\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",compress:{title:"\u5727\u7E2E",description:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059\u3002"},bankOffset:{title:"\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8",description:"\u30D5\u30A1\u30A4\u30EB\u306E\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8\u3067\u3059\u30020\u306E\u5024\u304C\u63A8\u5968\u3055\u308C\u307E\u3059\u3002\u5909\u66F4\u306F\u614E\u91CD\u306B\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002"},adjust:{title:"MIDI\u3092\u8ABF\u6574",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306B\u5408\u308F\u305B\u3066\u8ABF\u6574\u3057\u307E\u3059\u3002\u7279\u5225\u306A\u7406\u7531\u304C\u306A\u3044\u9650\u308A\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u30AA\u30F3\u306E\u307E\u307E\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}}}},metadata:{songTitle:{title:"\u30BF\u30A4\u30C8\u30EB:",description:"\u66F2\u306E\u30BF\u30A4\u30C8\u30EB"},album:{title:"\u30A2\u30EB\u30D0\u30E0:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0"},artist:{title:"\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8:",description:"\u66F2\u306E\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8"},albumCover:{title:"\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC"},creationDate:{title:"\u4F5C\u6210\u65E5:",description:"\u66F2\u306E\u4F5C\u6210\u65E5"},genre:{title:"\u30B8\u30E3\u30F3\u30EB:",description:"\u66F2\u306E\u30B8\u30E3\u30F3\u30EB"},comment:{title:"\u30B3\u30E1\u30F3\u30C8:",description:"\u66F2\u306E\u30B3\u30E1\u30F3\u30C8"},duration:{title:"\u9577\u3055:",description:"\u66F2\u306E\u9577\u3055"}}}};var DA={localeName:"\u65E5\u672C\u8A9E",titleMessage:"SpessaSynth: SoundFont2 Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC \u30AA\u30F3\u30E9\u30A4\u30F3\u30C7\u30E2",synthInit:{genericLoading:"\u8AAD\u307F\u8FBC\u307F\u4E2D...",loadingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",loadingBundledSoundfont:"\u30D0\u30F3\u30C9\u30EB\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",startingSynthesizer:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u8D77\u52D5\u3057\u3066\u3044\u307E\u3059...",savingSoundfont:"\u518D\u5229\u7528\u306E\u305F\u3081\u306B\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",noWebAudio:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u306FWeb Audio\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002",done:"\u6E96\u5099\u5B8C\u4E86\uFF01"},midiUploadButton:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",exportAudio:kA,yes:"\u306F\u3044",no:"\u3044\u3044\u3048",error:"\u30A8\u30E9\u30FC",demoSoundfontUploadButton:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",demoGithubPage:"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u30DA\u30FC\u30B8",demoSongButton:"\u30C7\u30E2\u30BD\u30F3\u30B0",credits:"\u30AF\u30EA\u30A8\u30A4\u30BF\u30FC",dropPrompt:"\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7...",warnings:{noMidiSupport:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306FMIDI\u5165\u529B\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3053\u306E\u6A5F\u80FD\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002Chrome\u307E\u305F\u306FFirefox\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",outOfMemory:`\u30D6\u30E9\u30A6\u30B6\u306E\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u307E\u3057\u305F\u3002Firefox\u3084SF3\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306E\u4F7F\u7528\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002

\uFF08\u30A8\u30E9\u30FC\u306B\u3064\u3044\u3066\u306F\u30B3\u30F3\u30BD\u30FC\u30EB\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF09\u3002`,chromeMobile:`SpessaSynth\u306FChrome Mobile\u3067\u306E\u52D5\u4F5C\u304C\u826F\u304F\u3042\u308A\u307E\u305B\u3093\u3002

\u4EE3\u308F\u308A\u306BFirefox Android\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002`,warning:"\u6CE8\u610F"},hideTopBar:{title:"\u30C8\u30C3\u30D7\u30D0\u30FC\u3092\u96A0\u3059",description:"\u30C8\u30C3\u30D7\uFF08\u30BF\u30A4\u30C8\u30EB\uFF09\u30D0\u30FC\u3092\u96A0\u3057\u3066\u3001\u3088\u308A\u30B7\u30FC\u30E0\u30EC\u30B9\u306A\u4F53\u9A13\u3092\u63D0\u4F9B\u3057\u307E\u3059"},convertDls:{title:"DLS\u5909\u63DB",message:"DLS\u30D5\u30A1\u30A4\u30EB\u304C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3055\u308C\u305F\u3088\u3046\u3067\u3059\u3002\u3053\u308C\u3092SF2\u306B\u5909\u63DB\u3057\u307E\u3059\u304B\uFF1F"},musicPlayerMode:QA,settings:fA,synthesizerController:SA,sequencerController:wA};var bA={title:"Configuration de l'affichage",noteFallingTime:{title:"Temps de descente des cascades (millisecondes)",description:"D\xE9finition de la vitesse \xE0 laquelle les notes tombent sur le clavier (visuellement)"},noteAfterTriggerTime:{title:"Dur\xE9e apr\xE8s le d\xE9clenchement d'une note (millisecondes)",description:"Dur\xE9e de la chute des notes apr\xE8s leur d\xE9clenchement. Z\xE9ro signifie qu'elles se d\xE9clenchent en bas"},waveformThickness:{title:"\xC9paisseur du trait des formes d'ondes (pixels)",description:"D\xE9finition de l'\xE9paisseur du trait des formes d'ondes"},waveformSampleSize:{title:"R\xE9solution des formes d'ondes",description:"D\xE9finition du niveau de d\xE9tail des formes d'ondes (note : une valeur \xE9lev\xE9e peut diminuer les performances)"},waveformAmplifier:{title:"Amplification des formes d'ondes",description:"Cette option permet d'obtenir des formes d'ondes \xE9voluant avec plus ou moins d'amplitude"},toggleWaveformsRendering:{title:"Visibilit\xE9 des formes d'ondes",description:"Active ou non le rendu des formes d'ondes (les lignes color\xE9es r\xE9agissant avec l'audio)"},toggleNotesRendering:{title:"Visibilit\xE9 des cascades",description:"Active ou non le rendu des chutes de notes sur le clavier lors de la lecture d'un fichier MIDI"},toggleDrawingActiveNotes:{title:"Visibilit\xE9 des notes actives",description:"Active ou non les lumi\xE8res lorsque les touches sont appuy\xE9es"},toggleDrawingVisualPitch:{title:"Rendu visuel du pitch bend",description:"Active ou non le glissement vers la droite ou vers la gauche des notes lorsque le pitch bend est utilis\xE9"},toggleStabilizeWaveforms:{title:"Stabilisation des formes d'ondes",description:"Active ou non la stabilisation des formes d'ondes comme sur un oscilloscope"}};var vA={title:"Configuration du clavier MIDI",selectedChannel:{title:"S\xE9lection du canal",description:"Le canal sur lequel le clavier envoie des messages",channelOption:"Canal {0}"},keyboardSize:{title:"Taille du clavier",description:"Choix de l'\xE9tendue de notes sur le clavier, ajustant la largeur des touches en cons\xE9quence",full:"128 notes (complet)",piano:"88 notes (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Utiliser l'\xE9tendue de notes du morceau",twoOctaves:"2 octaves"},toggleTheme:{title:"Th\xE8me sombre",description:"Utiliser le th\xE8me sombre du clavier MIDI"},show:{title:"Visibilit\xE9",description:"Montrer / cacher le clavier MIDI"}};var xA={title:"Configuration MIDI",midiInput:{title:"Entr\xE9e MIDI",description:"Le port \xE0 \xE9couter pour recevoir les messages MIDI",disabled:"D\xE9sactiv\xE9"},midiOutput:{title:"Sortie MIDI",description:"Le port utilis\xE9 pour jouer les fichiers MIDI",disabled:"Utilisation de SpessaSynth"},reminder:{title:"Notez que vous devez REDEMARRER VOTRE NAVIGATEUR apr\xE8s avoir connect\xE9 un nouveau p\xE9riph\xE9rique MIDI pour qu'il apparaisse ici.",description:"Notez \xE9galement que Safari ne prend pas en charge WebMIDI, vous devrez donc utiliser un navigateur diff\xE9rent si vous \xEAtes sur Mac."}};var MA={toggleButton:"Configurations",mainTitle:"Configuration du synth\xE9tiseur",rendererSettings:bA,keyboardSettings:vA,midiSettings:xA,interfaceSettings:{title:"Configuration de l'interface",toggleTheme:{title:"Th\xE8me sombre",description:"Active ou non le th\xE8me sombre pour l'interface"},selectLanguage:{title:"Langue",description:"Change la langue de l'interface",helpTranslate:"Traduire SpessaSynth"},layoutDirection:{title:"Orientation de la mise en page",description:"Orientation du rendu des notes et du clavier",values:{downwards:"Vers le bas",upwards:"Vers le haut",leftToRight:"De gauche \xE0 droite",rightToLeft:"De droite \xE0 gauche"}},reminder:{title:"Saviez-vous que vous pouvez survoler les param\xE8tres pour obtenir plus d'informations ?",description:"Comme ceci !"}}};var FA={toggleButton:{title:"Activer / d\xE9sactiver le mode lecteur de musique",description:"Cette option permet de simplifier l'interface, en masquant le clavier et l'animation des notes"},currentlyPlaying:"Lecture en cours :",nothingPlaying:"Aucune lecture en cours",nothingPlayingCopyright:"Chargez un fichier MIDI !"};var RA={voiceMeter:{title:"Voix : ",description:"Le nombre actuel de voix sur le canal {0}"},pitchBendMeter:{title:"Pitch : ",description:"La valeur actuelle du pitch bend sur le canal {0}"},panMeter:{title:"Balance : ",description:"La valeur actuelle de la panoramique st\xE9r\xE9o sur le canal {0} (clic droit pour verrouiller)"},expressionMeter:{title:"Expression : ",description:"La valeur actuelle de l'expression (force) du canal {0} (clic droit pour verrouiller)"},volumeMeter:{title:"Volume : ",description:"Le volume actuel du canal 0} (clic droit pour verrouiller)"},modulationWheelMeter:{title:"Molette de modulation : ",description:"La valeur actuelle de la quantit\xE9 de modulation (g\xE9n\xE9ralement utilis\xE9e pour le vibrato) du canal {0} (clic droit pour verrouiller)"},chorusMeter:{title:"Chorus : ",description:"Le niveau actuel de l'effet de chorus appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},reverbMeter:{title:"R\xE9verb\xE9ration : ",description:"Le niveau actuel de r\xE9verb\xE9ration appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},filterMeter:{title:"Filtre : ",description:"La hauteur actuelle du filtre passe-bas appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},transposeMeter:{title:"Transposition : ",description:"La transposition actuelle (d\xE9calage de notes) du canal {0}"},presetSelector:{description:"Changer l'instrument que le canal {0} utilise",selectionPrompt:"Changer l'instrument du canal {0}",searchPrompt:"Chercher..."},presetReset:{description:"D\xE9verrouiller le canal {0} pour permettre un changement de programme"},soloButton:{description:"Solo du canal {0}"},muteButton:{description:"Rendre ou non le canal {0} muet"},drumToggleButton:{description:"Activer les percussions sur le canal {0}"}};var LA={button:{title:"Configuration des effets",description:"Configure les effets de chorus et de r\xE9verb\xE9ration ainsi que le vibrato personnalis\xE9"},reverbConfig:{title:"Configuration de la r\xE9verb\xE9ration",description:"Configure l'effet de r\xE9verb\xE9ration",impulseResponse:{title:"Response impulsionnelle",description:"S\xE9lectionnez la r\xE9ponse impulsionnelle pour la r\xE9verb\xE9ration \xE0 convolution"}},chorusConfig:{title:"Configuration du chorus",description:"Configure l'effet de chorus",nodesAmount:{title:"Nombre de lignes de retard",description:"Nombre de lignes de retard (pour chaque canal st\xE9r\xE9o) \xE0 utiliser"},defaultDelay:{title:"D\xE9lai (s)",description:"Dur\xE9e en secondes de la premi\xE8re ligne de retard"},delayVariation:{title:"Augmentation du d\xE9lai (s)",description:"Dur\xE9e \xE0 ajouter en secondes pour chaque ligne de retard apr\xE8s la premi\xE8re"},stereoDifference:{title:"Diff\xE9rence st\xE9r\xE9o (s)",description:"Diff\xE9rence du d\xE9lai entre 2 canaux (ajout\xE9 au canal de gauche et soustrait au canal de droite)"},oscillatorFrequency:{title:"Fr\xE9quence LFO (Hz)",description:"Fr\xE9quence de l'oscillateur (LFO) de la premi\xE8re ligne de retard, en Hz. Le LFO contr\xF4le la dur\xE9e du retard."},frequencyVariation:{title:"Augmentation LFO (Hz)",description:"Quantit\xE9 \xE0 ajouter \xE0 la fr\xE9quence d'oscillation de chaque ligne de retard apr\xE8s la premi\xE8re, en Hz"},oscillatorGain:{title:"Gain LFO (s)",description:"Combien l'oscillateur modifie-t-il le d\xE9lai des lignes de retard, en secondes "},apply:{title:"Valider",description:"Sauvegarde les param\xE8tres des effets"}}};var GA={button:{title:"Modificateur de notes",description:"Permet de modifier des notes, individuellement"},mainTitle:"\xC9diteur de modifications de notes",detailedDescription:`Ce menu vous permet de modifier une note MIDI d'un canal choisi.
Vous pouvez actuellement modifier sa v\xE9locit\xE9 et assigner un patch (instrument).
Cette fonction est particuli\xE8rement utile pour les percussions.`,prompt:"Que voulez-vous faire ?",selectKey:{prompt:"Appuyez sur la note que vous voulez modifier sur le clavier.",title:"S\xE9lectionner une note",change:"Changer la note"},selectedChannel:{title:"Canal s\xE9lectionn\xE9",description:"Le canal auquel appartient la note \xE0 modifier"},selectedKey:{title:"Note s\xE9lectionn\xE9e : {0}",description:"Vous avez s\xE9lectionn\xE9 la note MIDI {0}"},modifyKey:{title:"Modifier une note",description:"Modifie une note d'un canal choisi",velocity:{title:"Forcer la v\xE9locit\xE9",description:"V\xE9locit\xE9 \xE0 utiliser pour cette note, ignorant la v\xE9locit\xE9 indiqu\xE9e par les signaux MIDI. La valeur -1 d\xE9sactive le for\xE7age"},preset:{title:"Forcer le preset",description:"Preset \xE0 utiliser pour cette note",unchanged:"Inchang\xE9"},apply:{title:"Valider",description:"Sauvegarder les modificateurs"}},removeModification:{title:"Enlever un modificateur",description:"Enlever un modificateur s'appliquant \xE0 une note pour un canal donn\xE9",remove:{title:"Enlever",description:"Enlever ce modificateur de note"}},resetModifications:{title:"Tout r\xE9initialiser",description:"Enlever tous les modificateurs de notes pour tous les canaux",confirmation:{title:"Confirmation",description:"\xCAtes-vous s\xFBr(e) de bien vouloir supprimer tous les modificateurs ?"}}};var TA={toggleButton:{title:"Contr\xF4leurs du synth\xE9tiseur",description:"Affiche les contr\xF4leurs du synth\xE9tiseur"},mainVoiceMeter:{title:"Voix : ",description:"Le nombre total de voix jou\xE9es actuellement"},mainVolumeMeter:{title:"Volume : ",description:"Le volume global actuel du synth\xE9tiseur"},mainPanMeter:{title:"Balance : ",description:"La panoramique globale actuelle du synth\xE9tiseur"},mainTransposeMeter:{title:"Transposition : ",description:"Pour transposer le synth\xE9tiseur (en demi-tons ou notes)"},midiPanic:{title:"Panique MIDI",description:"Stoppe toutes les voix imm\xE9diatement"},systemReset:{title:"R\xE9initialisation du syst\xE8me",description:"R\xE9initialise tous les contr\xF4leurs \xE0 leur valeur par d\xE9faut"},blackMidiMode:{title:"Mode Black MIDI",description:"Active le mode haute performance, en simplifiant l'apparence g\xE9n\xE9rale et en arr\xEAtant les notes plus rapidement"},disableCustomVibrato:{title:"D\xE9sactiver le vibrato personnalis\xE9",description:`D\xE9sactive le vibrato personnalis\xE9 (NRPN) de mani\xE8re permanente
Un rechargement de la page web sera n\xE9cessaire pour le r\xE9activer`},helpButton:{title:"Aide",description:"Ouvre une page web pour afficher un guide"},interpolation:{description:"S\xE9lection de la m\xE9thode d'interpolation du synth\xE9tiseur",linear:"Interpolation lin\xE9aire",nearestNeighbor:"Aucune (valeur la plus proche)",cubic:"Interpolation cubique"},channelController:RA,effectsConfig:LA,keyModifiers:GA};var NA={previousSong:"Morceau pr\xE9c\xE9dent",nextSong:"Morceau suivant",loopThis:"Lire ce morceau en boucle",playPause:"Lecture / pause",lyrics:{show:"Montrer les paroles",title:"Texte d\xE9cod\xE9",noLyrics:"Paroles indisponibles...",otherText:{title:"Autre texte"},subtitles:{title:"Charger des sous-titres ASS",description:"Chargez vos propres sous-titres au format .ass"}}};var UA={button:{title:"Sauvegarder l'audio",description:"Sauvegarder la composition dans diff\xE9rents formats"},formats:{title:"Choix du format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Exporter le morceau avec les modifications dans un fichier audio .wav"},options:{title:"Options de l'exportation WAV",confirm:"Exporter",normalizeVolume:{title:"Normaliser le volume",description:"Pour garder le volume \xE0 un niveau constant, peu importe comment est jou\xE9 le morceau MIDI (option recommand\xE9e)"},additionalTime:{title:"Dur\xE9e additionnelle (s)",description:"Dur\xE9e additionnelle \xE0 la fin du morceau pour donner le temps au son de disparaitre, en secondes"},sampleRate:{title:"Fr\xE9quence d'\xE9chantillonnage",description:"Fr\xE9quence d'\xE9chantillonnage du fichier de sortie en Hz (ne changez ce param\xE8tre que si vous savez ce que vous faites)"},separateChannels:{title:"S\xE9paration des canaux",description:"Pour sauvegarder chaque canal dans un fichier s\xE9par\xE9, utile par exemple pour des affichage de type oscilloscope (cette option d\xE9sactive la r\xE9verb\xE9ration et l'effet de chorus)",saving:{title:"Fichiers des canaux",save:"Sauvegarder le canal {0}"}},loopCount:{title:"Nombre de r\xE9p\xE9titions",description:"Nombre de fois que le morceau est r\xE9p\xE9t\xE9 apr\xE8s la premi\xE8re lecture"}},exportMessage:{message:"Exportation de l'audio en cours...",estimated:"Temps restant :",convertWav:"Conversion dans le format WAV..."}},midi:{button:{title:"MIDI (.mid)",description:"Exporter le fichier MIDI en incluant les modifications des contr\xF4leurs et des instruments"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exporter une banque de sons au format SoundFont2"},options:{title:"Options de l'exportation SoundFont2",confirm:"Exporter",trim:{title:"All\xE9ger",description:"Exporter la banque de sons avec seulement les instruments et \xE9chantillons utilis\xE9s par le fichier MIDI"},compress:{title:"Compresser",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier
Note : si la banque de sons \xE9tait d\xE9j\xE0 compress\xE9e, cette option ne d\xE9compressera pas m\xEAme en \xE9tant d\xE9sactiv\xE9e`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"}}},dls:{button:{title:"DLS (.dls)",description:"Exporte la soundfont au format DLS"},warning:{title:"Avertissement concernant l'exportation DLS",message:"L'exportation DLS est limit\xE9e et peut produire des fichiers corrompus avec des soundfonts lourdes et complexes.",details:"Plus d'info",confirm:"Continuer l'exportation"}},rmidi:{button:{title:"MIDI embarqu\xE9 (.rmi)",description:`Exporter le fichier MIDI modifi\xE9 avec la banque de sons all\xE9g\xE9e dans un seul fichier
Note : ce format n'est pas support\xE9 par tous les lecteurs MIDI`},progress:{title:"Exportation du fichier MIDI embarqu\xE9...",loading:"Chargement de la banque de sons et du fichier MIDI...",modifyingMIDI:"Modification MIDI...",modifyingSoundfont:"All\xE8gement de la banque de sons...",saving:"Cr\xE9ation du fichier RMIDI...",done:"Termin\xE9 !"},options:{title:"Options de l'exportation RMIDI",confirm:"Exporter",compress:{title:"Compression",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier (option recommand\xE9e)`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"},bankOffset:{title:"D\xE9calage de banque",description:`D\xE9calage des num\xE9ros de banque dans le fichier
(une valeur de 0 est recommand\xE9e sauf cas particulier)`},adjust:{title:"Ajustement MIDI",description:`Ajuste le fichier MIDI \xE0 la banque de sons
(il est conseill\xE9 de laisser cette option activ\xE9e sauf cas particulier)`}}}},metadata:{songTitle:{title:"Titre :",description:"Le titre du morceau"},album:{title:"Album :",description:"Le nom de l'album dans lequel se trouve le morceau"},artist:{title:"Artiste :",description:"Le ou les artiste(s) du morceau"},albumCover:{title:"Pochette d'album :",description:"La pochette de l'album dans lequel se trouve le morceau"},creationDate:{title:"Date de cr\xE9ation :",description:"La date de cr\xE9ation du morceau"},genre:{title:"Genre :",description:"Le genre du morceau"},comment:{title:"Commentaire :",description:"Le commentaire li\xE9 au morceau"},duration:{title:"Dur\xE9e :",description:"La dur\xE9e du morceau"}}}};var qA={localeName:"Fran\xE7ais",titleMessage:"SpessaSynth : synth\xE9tiseur compatible SF2, \xE9crit en javascript",demoTitleMessage:"SpessaSynth : d\xE9mo en ligne du synth\xE9tiseur compatible SF2/DLS",synthInit:{genericLoading:"Chargement...",loadingSoundfont:"Chargement de la banque de sons...",loadingBundledSoundfont:"Chargement de la banque de sons int\xE9gr\xE9e...",startingSynthesizer:"D\xE9marrage du synth\xE9tiseur...",savingSoundfont:"Sauvegarde de la banque de sons pour une utilisation ult\xE9rieure...",noWebAudio:"Votre navigateur ne supporte pas l'audio par le web.",done:"Pr\xEAt !"},midiUploadButton:"Charger des fichiers MIDI",exportAudio:UA,yes:"Oui",no:"Non",error:"Erreur",demoSoundfontUploadButton:"Charger une banque de sons",demoGithubPage:"Page du projet",demoSongButton:"Morceau d\xE9mo",credits:"Cr\xE9dits",dropPrompt:"Rel\xE2chez les fichiers ici...",warnings:{outOfMemory:"Votre navigateur est \xE0 cours de m\xE9moire. L'usage de Firefox ou des banques de sons au format SF3 est recommand\xE9 (voir la console pour plus de d\xE9tails concernant l'erreur).",noMidiSupport:"Aucun port MIDI d\xE9tect\xE9, cette fonctionnalit\xE9 sera d\xE9sactiv\xE9e.",chromeMobile:"Les performances de SpessaSynth sont basses sur Chrome pour mobile. L'usage de Firefox est recommand\xE9.",warning:"Attention"},hideTopBar:{title:"Masquer la barre sup\xE9rieure",description:"Masquer la barre sup\xE9rieure (titre) pour offrir une meilleure exp\xE9rience"},convertDls:{title:"Conversion DLS",message:"Le fichier charg\xE9 semble \xEAtre au format DLS. Voulez-vous le convertir au format SF2 ?"},musicPlayerMode:FA,settings:MA,synthesizerController:TA,sequencerController:NA};var _A={title:"Configura\xE7\xF5es do Renderizador",noteFallingTime:{title:"Tempo de queda da nota (milissegundos)",description:"A velocidade com que as notas caem (visualmente)"},waveformThickness:{title:"Espessura da linha da forma de onda (px)",description:"A espessura das linhas da forma de onda"},waveformSampleSize:{title:"Tamanho da amostra da forma de onda",description:"O qu\xE3o detalhadas s\xE3o as formas de onda (Nota: valores altos podem impactar o desempenho) Tamb\xE9m observe que valores altos adicionar\xE3o um atraso ao \xE1udio para sincronizar as formas de onda com o \xE1udio."},waveformAmplifier:{title:"Amplificador de forma de onda",description:"O qu\xE3o vibrantes s\xE3o as formas de onda"},toggleWaveformsRendering:{title:"Habilitar renderiza\xE7\xE3o de formas de onda",description:"Habilitar a renderiza\xE7\xE3o das formas de onda do canal (linhas coloridas mostrando o \xE1udio)"},toggleNotesRendering:{title:"Habilitar renderiza\xE7\xE3o de notas",description:"Habilitar a renderiza\xE7\xE3o das notas caindo ao reproduzir um arquivo MIDI"},toggleDrawingActiveNotes:{title:"Habilitar desenho de notas ativas",description:"Habilitar o destaque e o brilho das notas quando pressionadas"},toggleDrawingVisualPitch:{title:"Habilitar desenho de altura visual",description:"Habilitar o deslizamento das notas para a esquerda ou direita quando o wheel de pitch \xE9 aplicado"},toggleStabilizeWaveforms:{title:"Estabilizar formas de onda",description:"Habilitar o disparo do oscilosc\xF3pio"}};var HA={title:"Configura\xE7\xF5es do Teclado MIDI",selectedChannel:{title:"Canal selecionado",description:"O canal para o qual o teclado envia mensagens",channelOption:"Canal {0}"},keyboardSize:{title:"Tamanho do teclado",description:"A faixa de teclas mostradas no teclado. Ajusta o tamanho das notas MIDI de acordo",full:"128 teclas (completo)",piano:"88 teclas (piano)",fiveOctaves:"5 oitavas",useSongKeyRange:"Usar a faixa de notas da m\xFAsica",twoOctaves:"Duas oitavas"},toggleTheme:{title:"Usar tema escuro",description:"Usar o tema escuro do teclado MIDI"},show:{title:"Mostrar",description:"Mostrar/ocultar o teclado MIDI"}};var PA={title:"Configura\xE7\xF5es MIDI",midiInput:{title:"Entrada MIDI",description:"A porta para escutar mensagens MIDI",disabled:"Desativado"},midiOutput:{title:"Sa\xEDda MIDI",description:"A porta para reproduzir o arquivo MIDI",disabled:"Usar SpessaSynth"},reminder:{title:"Note que voc\xEA precisa REINICIAR O NAVEGADOR ap\xF3s conectar um novo dispositivo MIDI para que ele apare\xE7a aqui.",description:"Tamb\xE9m note que o Safari n\xE3o suporta WebMIDI, ent\xE3o voc\xEA precisar\xE1 usar um navegador diferente se estiver no Mac."}};var OA={toggleButton:"Configura\xE7\xF5es",mainTitle:"Configura\xE7\xF5es do Programa",rendererSettings:_A,keyboardSettings:HA,midiSettings:PA,interfaceSettings:{title:"Configura\xE7\xF5es da Interface",toggleTheme:{title:"Usar tema escuro",description:"Ativar o tema escuro para a interface"},selectLanguage:{title:"Idioma",description:"Alterar o idioma do programa",helpTranslate:"Traduzir o SpessaSynth"},layoutDirection:{title:"Dire\xE7\xE3o do layout",description:"A dire\xE7\xE3o do layout do renderizador e do teclado",values:{downwards:"Para baixo",upwards:"Para cima",leftToRight:"Da esquerda para a direita",rightToLeft:"Da direita para a esquerda"}},reminder:{title:"Voc\xEA sabia que pode passar o mouse sobre as configura\xE7\xF5es para obter mais informa\xE7\xF5es?",description:"Como esta!"}}};var YA={toggleButton:{title:"Trocar o modo do reprodutor de m\xFAsica",description:"Ir para a vers\xE3o simplificada, ocultando o teclado e as visualiza\xE7\xF5es de notas"},currentlyPlaying:"Tocando agora:",nothingPlaying:"Nada est\xE1 tocando",nothingPlayingCopyright:"Envie um MIDI!"};var VA={voiceMeter:{title:"Vozes: ",description:"A quantidade atual de vozes tocando no canal {0}"},pitchBendMeter:{title:"Pitch: ",description:"O desvio de pitch atual aplicado ao canal {0}"},panMeter:{title:"Pan: ",description:"O panning est\xE9reo atual aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},expressionMeter:{title:"Express\xE3o: ",description:"A express\xE3o (volume) atual do canal {0} (clique com o bot\xE3o direito para travar)"},volumeMeter:{title:"Volume: ",description:"O volume atual do canal {0} (clique com o bot\xE3o direito para travar)"},modulationWheelMeter:{title:"Roda de modula\xE7\xE3o: ",description:"A profundidade de modula\xE7\xE3o (geralmente vibrato) atual do canal {0} (clique com o bot\xE3o direito para travar)"},chorusMeter:{title:"Chorus: ",description:"O n\xEDvel atual do efeito de chorus aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},reverbMeter:{title:"Reverb: ",description:"O n\xEDvel atual do efeito de reverb aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},filterMeter:{title:"Filtro: ",description:"O n\xEDvel atual do corte do filtro passa-baixo aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},transposeMeter:{title:"Transposi\xE7\xE3o: ",description:"A transposi\xE7\xE3o (mudan\xE7a de tonalidade) atual do canal {0}"},presetSelector:{description:"Mudar o patch (instrumento) que o canal {0} est\xE1 usando",selectionPrompt:"Mudar instrumento para o canal {0}",searchPrompt:"Pesquisar..."},presetReset:{description:"Destravar o canal {0} para permitir altera\xE7\xF5es de programa"},soloButton:{description:"Solo no canal {0}"},muteButton:{description:"Silenciar/desmutar o canal {0}"},drumToggleButton:{description:"Alternar bateria no canal {0}"}};var JA={button:{title:"Configura\xE7\xF5es de Efeitos",description:"Configure os efeitos de chorus e reverb, al\xE9m do vibrato personalizado"},reverbConfig:{title:"Configura\xE7\xE3o do Reverb",description:"Configure o processador de reverb",impulseResponse:{title:"Resposta ao impulso",description:"Selecione a resposta ao impulso para o reverb convolver"}},chorusConfig:{title:"Configura\xE7\xE3o do Chorus",description:"Configure o processador de chorus",nodesAmount:{title:"Quantidade de n\xF3s",description:"A quantidade de n\xF3s de atraso (para cada canal est\xE9reo) a serem usados"},defaultDelay:{title:"Atraso (s)",description:"O tempo de atraso para o primeiro n\xF3 em segundos"},delayVariation:{title:"Incremento de atraso (s)",description:"A quantidade para incrementar cada n\xF3 de atraso ap\xF3s o primeiro em segundos"},stereoDifference:{title:"Diferen\xE7a est\xE9reo (s)",description:"A diferen\xE7a de atrasos entre dois canais (adicionada ao canal esquerdo e subtra\xEDda do direito)"},oscillatorFrequency:{title:"Frequ\xEAncia do LFO (Hz)",description:"A frequ\xEAncia do LFO do primeiro n\xF3 de atraso, em Hz. O LFO controla o tempo de atraso."},frequencyVariation:{title:"Incremento do LFO (Hz)",description:"A quantidade para incrementar a frequ\xEAncia de cada LFO ap\xF3s o primeiro, em Hz"},oscillatorGain:{title:"Ganho do LFO (s)",description:"Quanto o LFO alterar\xE1 o atraso nos n\xF3s de atraso, em segundos"},apply:{title:"Aplicar",description:"Aplicar as configura\xE7\xF5es selecionadas"}}};var KA={toggleButton:{title:"Controlador de Sintetizador",description:"Mostra o controlador do sintetizador"},mainVoiceMeter:{title:"Voices: ",description:"A quantidade total de vozes atualmente tocando"},mainVolumeMeter:{title:"Volume: ",description:"O volume mestre atual do sintetizador"},mainPanMeter:{title:"Pan: ",description:"A panor\xE2mica est\xE9reo mestre atual do sintetizador"},mainTransposeMeter:{title:"Transposi\xE7\xE3o: ",description:"Transp\xF5e o sintetizador (em semitons ou teclas)"},midiPanic:{title:"P\xE2nico MIDI",description:"Para todas as vozes imediatamente"},systemReset:{title:"Reiniciar Sistema",description:"Redefine todos os controladores para seus valores padr\xE3o"},blackMidiMode:{title:"Modo Black MIDI",description:"Ativa o Modo de Alto Desempenho, simplificando a apar\xEAncia e eliminando as notas mais rapidamente"},disableCustomVibrato:{title:"Desativar vibrato personalizado",description:"Desativa permanentemente o vibrato personalizado (NRPN). Recarregue o site para reativ\xE1-lo"},helpButton:{title:"Ajuda",description:"Abre um site externo com o guia de uso"},interpolation:{description:"Selecione o m\xE9todo de interpola\xE7\xE3o do sintetizador",linear:"Interpola\xE7\xE3o Linear",nearestNeighbor:"Vizinho mais pr\xF3ximo",cubic:"Interpola\xE7\xE3o C\xFAbica"},channelController:VA,effectsConfig:JA};var zA={previousSong:"M\xFAsica anterior",nextSong:"Pr\xF3xima m\xFAsica",loopThis:"Repetir esta m\xFAsica",playPause:"Pausar/reproduzir",lyrics:{show:"Mostrar letras",title:"Texto decodificado",noLyrics:"Sem letras dispon\xEDveis...",otherText:{title:"Outro texto"}}};var WA={button:{title:"Salvar \xC1udio",description:"Salvar a composi\xE7\xE3o em v\xE1rios formatos"},formats:{title:"Escolher formato",formats:{wav:{button:{title:"\xC1udio WAV (.wav)",description:"Exportar a m\xFAsica com modifica\xE7\xF5es como um arquivo de \xE1udio .wav"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o WAV",confirm:"Exportar",normalizeVolume:{title:"Normalizar volume",description:"Mant\xE9m o volume no mesmo n\xEDvel, independentemente de qu\xE3o alto ou baixo est\xE1 o MIDI. Recomendado."},additionalTime:{title:"Tempo adicional (s)",description:"Tempo extra no final da m\xFAsica para o som se dissipar. (em segundos)"},separateChannels:{title:"Separar canais",description:"Salva cada canal como um arquivo separado. \xDAtil para visualizadores de oscilosc\xF3pio. Note que isto desativa reverb e chorus.",saving:{title:"Arquivos de canal",save:"Salvar canal {0}"}},loopCount:{title:"Quantidade de repeti\xE7\xF5es",description:"N\xFAmero de vezes que a m\xFAsica ser\xE1 repetida"}},exportMessage:{message:"Exportando \xE1udio WAV...",estimated:"Restante:",convertWav:"Convertendo para wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Exportar o arquivo MIDI com as altera\xE7\xF5es de controlador e instrumento aplicadas"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exportar um arquivo SoundFont2"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o SF",confirm:"Exportar",trim:{title:"Cortar",description:"Exportar o SoundFont apenas com os instrumentos e amostras utilizados pelo arquivo MIDI"},compress:{title:"Comprimir",description:"Comprimir as amostras com compress\xE3o Ogg Vorbis com perdas, se n\xE3o comprimidas. Reduz bastante o tamanho do arquivo. Se o SoundFont j\xE1 estava comprimido, n\xE3o ser\xE1 descomprimido, mesmo se esta op\xE7\xE3o estiver desativada."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor"}}},rmidi:{button:{title:"MIDI Embutido (.rmi)",description:"Exportar o MIDI modificado com o SoundFont recortado embutido como um \xFAnico arquivo. Observe que este formato n\xE3o \xE9 amplamente suportado."},progress:{title:"Exportando MIDI embutido...",loading:"Carregando SoundFont e MIDI...",modifyingMIDI:"Modificando MIDI...",modifyingSoundfont:"Cortando SoundFont...",saving:"Salvando RMIDI...",done:"Pronto!"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o RMIDI",confirm:"Exportar",compress:{title:"Comprimir",description:"Comprimir o SoundFont com Ogg Vorbis com perdas. Reduz bastante o tamanho do arquivo. Recomendado."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor."},bankOffset:{title:"Deslocamento do banco",description:"O deslocamento do banco do arquivo. Valor 0 \xE9 recomendado. Alterar somente se souber o que est\xE1 fazendo."},adjust:{title:"Ajustar MIDI",description:"Ajusta o arquivo MIDI ao SoundFont. Mantenha ativado, a menos que tenha certeza do que est\xE1 fazendo."}}}},metadata:{songTitle:{title:"T\xEDtulo:",description:"T\xEDtulo da m\xFAsica"},album:{title:"\xC1lbum:",description:"\xC1lbum da m\xFAsica"},artist:{title:"Artista:",description:"Artista da m\xFAsica"},albumCover:{title:"Capa do \xE1lbum:",description:"Capa do \xE1lbum da m\xFAsica"},creationDate:{title:"Criado em:",description:"Data de cria\xE7\xE3o da m\xFAsica"},genre:{title:"G\xEAnero:",description:"G\xEAnero da m\xFAsica"},comment:{title:"Coment\xE1rio:",description:"Coment\xE1rio da m\xFAsica"},duration:{title:"Dura\xE7\xE3o:",description:"Dura\xE7\xE3o da m\xFAsica"}}}};var ZA={localeName:"Portugu\xEAs (Brasil)",titleMessage:"SpessaSynth: Sintetizador JavaScript SoundFont2",demoTitleMessage:"SpessaSynth: Demo Online do Sintetizador JavaScript SF2/DLS",synthInit:{genericLoading:"Carregando...",loadingSoundfont:"Carregando SoundFont...",loadingBundledSoundfont:"Carregando SoundFont embutida...",startingSynthesizer:"Iniciando sintetizador...",savingSoundfont:"Salvando SoundFont para reutiliza\xE7\xE3o...",noWebAudio:"Seu navegador n\xE3o suporta Web Audio.",done:"Pronto!"},midiUploadButton:"Envie seus arquivos MIDI",exportAudio:WA,yes:"Sim",no:"N\xE3o",demoSoundfontUploadButton:"Envie a SoundFont",demoGithubPage:"P\xE1gina do projeto",demoSongButton:"M\xFAsica de demonstra\xE7\xE3o",credits:"Cr\xE9ditos",dropPrompt:"Solte os arquivos aqui...",warnings:{outOfMemory:"Seu navegador ficou sem mem\xF3ria. Tente usar o Firefox ou uma SoundFont SF3 (veja o console para detalhes).",noMidiSupport:"Nenhuma porta MIDI detectada, essa fun\xE7\xE3o ser\xE1 desativada.",chromeMobile:"SpessaSynth pode ter um desempenho reduzido no Chrome Mobile. Considere usar o Firefox para Android.",warning:"Aten\xE7\xE3o"},hideTopBar:{title:"Ocultar barra superior",description:"Oculte a barra de t\xEDtulo para uma experi\xEAncia mais imersiva"},convertDls:{title:"Convers\xE3o DLS",message:"Parece que voc\xEA enviou um arquivo DLS. Quer converter para SF2?"},musicPlayerMode:YA,settings:OA,synthesizerController:KA,sequencerController:zA};var Vi="en",Ut={en:sA,pl:CA,ja:DA,fr:qA,pt:ZA};var Ma=.2,Fa={2048:.05,4096:.27,8192:.34,16384:.37151927437641724,32768:.48},Le=class{addSequencer;constructor(e,t,i,n,s,A,g,r,l){this.delay=l,this.mode="dark",this.autoKeyRange=!1,this.renderer=n,this.midiKeyboard=s,this.midiDeviceHandler=A,this.synthui=t,this.sequi=i,this.locale=r,this.musicMode=g,this.locales=Ut,this.keyboardSizes={full:{min:0,max:127},piano:{min:21,max:108},"5 octaves":{min:36,max:96},"two octaves":{min:53,max:77}};let u=document.createElement("div");u.style.position="relative",u.classList.add("seamless_button"),u.classList.add("settings_button"),e.appendChild(u);let d=document.createElement("div");d.classList.add("seamless_button"),this.locale.bindObjectProperty(d,"innerText","locale.musicPlayerMode.toggleButton.title"),this.locale.bindObjectProperty(d,"title","locale.musicPlayerMode.toggleButton.description"),e.appendChild(d);let a=document.createElement("div");a.classList.add("seamless_button"),this.locale.bindObjectProperty(a,"innerText","locale.hideTopBar.title"),this.locale.bindObjectProperty(a,"title","locale.hideTopBar.description"),e.appendChild(a);let c=document.getElementsByClassName("show_top_button")[0];c.innerHTML=as(20);let m=document.createElement("span");this.locale.bindObjectProperty(m,"innerText","locale.settings.toggleButton"),u.appendChild(m);let B=document.createElement("div");B.innerHTML=As(24),B.classList.add("gear"),u.appendChild(B),this.mainDiv=document.createElement("div"),this.mainDiv.classList.add("settings_menu"),this.visible=!1,this.animationId=-1,u.onclick=()=>this.setVisibility(!this.visible),e.appendChild(this.mainDiv),d.onclick=this.toggleMusicPlayerMode.bind(this),a.onclick=this.hideTopPart.bind(this),this.hideOnDocClick=!0,this.mainDiv.onclick=()=>{this.hideOnDocClick=!1},document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.setVisibility(!1)}),this.mainDiv.innerHTML=Gs,ws(this.mainDiv);for(let S of this.mainDiv.querySelectorAll("*[translate-path]"))this.locale.bindObjectProperty(S,"textContent",S.getAttribute("translate-path"));for(let S of this.mainDiv.querySelectorAll("*[translate-path-title]")){let y=S.getAttribute("translate-path-title");if(this.locale.bindObjectProperty(S,"textContent",y+".title"),this.locale.bindObjectProperty(S,"title",y+".description"),S.tagName==="LABEL"){let w=S.getAttribute("for");if(w){let k=document.getElementById(w);k&&this.locale.bindObjectProperty(k,"title",y+".description")}}}this.getHtmlControls(),document.addEventListener("keydown",S=>{switch(S.key.toLowerCase()){case ye.settingsShow:this.setVisibility(!this.visible);break;case ye.synthesizerUIShow:this.setVisibility(!1)}}),window.savedSettings?this._loadSettings().then(()=>{this.createHandlers(n,s,A,i,t)}):this.createHandlers(n,s,A,i,t),this.topPartVisible=!0;let E=!1;window.addEventListener("resize",()=>{let S=window.screen.height,y=window.screen.width,w=window.outerHeight,k=window.outerWidth,D;D=y===k&&S===w,D!==E&&(E=D,D?this.hideTopPart():this.showTopPart())}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement===null?this.showTopPart():this.hideTopPart()})}async toggleMusicPlayerMode(){this.musicMode.visible===!1&&this.hideTopPart(),this.musicMode.setVisibility(!this.musicMode.visible,document.getElementById("keyboard_canvas_wrapper")),this.renderer.renderBool=!this.musicMode.visible}showTopPart(){if(this.topPartVisible===!0)return;this.topPartVisible=!0;let e=document.getElementsByClassName("top_part")[0],t=document.getElementsByClassName("show_top_button")[0];e.style.display="",setTimeout(()=>{e.classList.remove("top_part_hidden")},75),t.classList.remove("shown"),t.style.display="none"}hideTopPart(){if(this.topPartVisible===!1)return;this.topPartVisible=!1;let e=document.getElementsByClassName("top_part")[0];e.classList.add("top_part_hidden"),setTimeout(()=>{e.style.display="none"},200);let t=document.getElementsByClassName("show_top_button")[0];t.style.display="flex",setTimeout(()=>{t.classList.add("shown")},75),t.onclick=this.showTopPart.bind(this)}setVisibility(e){this.animationId&&clearTimeout(this.animationId),e?(this.mainDiv.style.display="block",setTimeout(()=>{document.getElementsByClassName("top_part")[0].classList.add("settings_shown"),this.mainDiv.classList.add("settings_menu_show")},75),this.hideOnDocClick=!1):(document.getElementsByClassName("top_part")[0].classList.remove("settings_shown"),this.mainDiv.classList.remove("settings_menu_show"),this.animationId=setTimeout(()=>{this.mainDiv.style.display="none"},Ma*1e3)),this.visible=e}createHandlers(e,t,i,n,s){this._createRendererHandler(e),this._createMidiSettingsHandler(i,n,s),this._createKeyboardHandler(t,s,e),this._createInterfaceSettingsHandler()}getHtmlControls(){this.htmlControls={renderer:{noteTimeSlider:document.getElementById("note_time_slider"),noteAfterTriggerTimeSlider:document.getElementById("note_after_time_slider"),analyserToggler:document.getElementById("analyser_toggler"),noteToggler:document.getElementById("note_toggler"),activeNoteToggler:document.getElementById("active_note_toggler"),visualPitchToggler:document.getElementById("visual_pitch_toggler"),stabilizeWaveformsToggler:document.getElementById("stabilize_waveforms_toggler"),analyserThicknessSlider:document.getElementById("analyser_thickness_slider"),analyserFftSlider:document.getElementById("analyser_fft_slider"),waveMultiplierSlizer:document.getElementById("wave_multiplier_slider")},keyboard:{channelSelector:document.getElementById("channel_selector"),modeSelector:document.getElementById("mode_selector"),sizeSelector:document.getElementById("keyboard_size_selector"),showSelector:document.getElementById("keyboard_show")},midi:{outputSelector:document.getElementById("midi_output_selector"),inputSelector:document.getElementById("midi_input_selector")},interface:{themeSelector:document.getElementById("toggle_mode_button"),languageSelector:document.getElementById("language_selector"),layoutSelector:document.getElementById("layout_selector")}}}setTimeDelay(e){let t;e>=2048?t=Fa[e]:t=0,this.delay.delayTime.value=t,this.renderer.timeOffset=t,this.synthui.synth.eventHandler.timeDelay=t}};Le.prototype._toggleDarkMode=Os;Le.prototype._createInterfaceSettingsHandler=qs;Le.prototype._changeLayout=_s;Le.prototype._createRendererHandler=Ys;Le.prototype._createMidiSettingsHandler=Vs;Le.prototype._createMidiInputHandler=Js;Le.prototype._createMidiOutputHandler=Ks;Le.prototype._createKeyboardHandler=Ls;Le.prototype._loadSettings=Ts;Le.prototype._serializeSettings=Us;Le.prototype._saveSettings=Ns;var jA=.5,si=class{constructor(e,t){this.mainDiv=e,this.mainDiv.innerHTML=`
        <div id='player_info_background_image'></div>
        <div class='player_info_wrapper'>
            <div class='player_info_note_icon'>
                ${rs("100%")}
                <img src='' alt='' style='display: none'>
            </div>
            <div class='player_info_details_wrapper'>
                <p style='font-size: small'><i translate-path='locale.musicPlayerMode.currentlyPlaying'></i></p>
                <h2  id='player_info_title' translate-path='locale.musicPlayerMode.nothingPlaying'></h2>
                
                <div class='player_info_detail_element'>
                    <i id='player_info_detail' translate-path='locale.musicPlayerMode.nothingPlayingCopyright'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.artist'></b><i id='player_info_artist'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.album'></b><i id='player_info_album'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.genre'></b><i id='player_info_genre'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.creationDate'></b><i id='player_info_creation'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.comment'></b><i id='player_info_comment'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.duration'></b><i id='player_info_time'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <pre id='player_info_file_name'></pre>
                </div>
            </div>
        </div>`;for(let i of this.mainDiv.querySelectorAll("*[translate-path]"))t.bindObjectProperty(i,"textContent",i.getAttribute("translate-path"));for(let i of this.mainDiv.querySelectorAll("*[translate-path-title]"))t.bindObjectProperty(i,"textContent",i.getAttribute("translate-path-title")+".title"),t.bindObjectProperty(i,"title",i.getAttribute("translate-path-title")+".description");this.timeoutId=-1,this.visible=!1,this.locale=t}toggleDarkMode(){this.mainDiv.getElementsByClassName("player_info_wrapper")[0].classList.toggle("light_mode")}setTitle(e){document.getElementById("player_info_title").textContent=e}connectSequencer(e){this.seq=e,this.seq.addOnSongChangeEvent(t=>{let i=t.copyright,n=(c,m,B=!0)=>{let E=document.getElementById(c),S=m.trim().split(`
`);if(S.length>1){E.parentElement.classList.remove("hidden"),E.innerHTML="";for(let y of S){let w=document.createElement("span");w.textContent=y,E.appendChild(w),E.appendChild(document.createElement("br"))}E.removeChild(E.lastChild);return}if(m.length>0)if(E.parentElement.classList.remove("hidden"),E.innerHTML="",m.length>30&&B){E.classList.add("marquee");let y=document.createElement("span");y.textContent=m,E.appendChild(y)}else E.textContent=m;else E.parentElement.classList.add("hidden")};n("player_info_detail",i),n("player_info_time",xt(this.seq.duration).time),n("player_info_file_name",t.fileName,!1);let s=(c,m,B,E="")=>this.seq.midiData.RMIDInfo?.[c]===void 0?m:E+B.decode(this.seq.midiData.RMIDInfo?.[c]).replace(/\0$/,""),A=s("IENC","ascii",new TextDecoder),g=new TextDecoder(A);n("player_info_album",s("IPRD","",g)),n("player_info_artist",s("IART","",g)),n("player_info_genre",s("IGNR","",g)),n("player_info_creation",s("ICRD","",g)+s("ICRT","",g,`
`)),n("player_info_comment",s("ICMT","",g));let r=this.mainDiv.getElementsByTagName("svg")[0],l=this.mainDiv.getElementsByTagName("img")[0],u=document.getElementById("player_info_background_image");if(!t.isEmbedded){r.style.display="",l.style.display="none",u.style.setProperty("--bg-image","undefined");return}if(t.RMIDInfo.IPIC===void 0){r.style.display="",l.style.display="none",u.style.setProperty("--bg-image","undefined");return}r.style.display="none",l.style.display="";let d=new Blob([t.RMIDInfo.IPIC.buffer]),a=URL.createObjectURL(d);l.src=a,u.style.setProperty("--bg-image",`url('${a}')`)},"player-js-song-change")}setVisibility(e,t){if(e===this.visible)return;this.visible=e,this.timeoutId&&clearTimeout(this.timeoutId);let i=this.mainDiv;if(e){t.classList.add("out_animation"),this.savedCKWrapperHeight=t.clientHeight;let n=t.clientHeight,s=t.getBoundingClientRect().top;i.style.position="absolute",i.style.top=`${s}px`,i.style.height=`${n}px`,i.style.display="flex",setTimeout(()=>{i.classList.add("player_info_show"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(async()=>{t.style.display="none",i.style.position="",i.style.top="",i.style.height="",document.body.style.overflow=""},jA*1e3)}else{let n=i.getBoundingClientRect().top;t.style.display="",t.style.position="absolute",t.style.top=`${n}px`,t.style.height=`${this.savedCKWrapperHeight}px`,i.classList.remove("player_info_show"),setTimeout(()=>{t.classList.remove("out_animation"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(()=>{i.style.display="none",t.style.position="",t.style.top="",t.style.height="",document.body.style.overflow=""},jA*1e3)}}};var Ai=class{onLocaleChanged=[];constructor(e){this.locale=Ut[e]||Ut[Vi],this.fallbackLocale=Ut[Vi],this.localeCode=e,this._boundObjectProperties=[]}getLocaleString(e,t=[]){let i=this._resolveLocalePath(e);return t.length>0?this._formatLocale(i,t):i}_applyPropertyInternal(e){if(e.isEdited)return;let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]=t}_validatePropertyIntegrity(e){let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]!==t&&(e.isEdited=!0)}_formatLocale(e,t){return e.replace(/{(\d+)}/g,(i,n)=>typeof t[n]<"u"?t[n]:i)}bindObjectProperty(e,t,i,n=[]){let s={object:e,propertyName:t,localePath:i,formattingArguments:n,isEdited:!1};this._applyPropertyInternal(s),this._boundObjectProperties.push(s)}_resolveLocalePath(e,t=!1){if(!e.startsWith("locale."))throw new Error(`Invalid locale path: ${e} (it should start with "locale.")`);let i=e.split("."),n=t?this.fallbackLocale:this.locale;for(let s=1;s<i.length;s++)if(n[i[s]]!==void 0)n=n[i[s]];else{if(t)throw new Error(`Invalid locale path: ${e}: part "${i[s]}" does not exist. Available paths: ${Object.keys(n).join(", ")}`);return console.warn(`Locale path "${e}" not translated in ${this.locale.localeName} (${this.localeCode}). Using ${this.fallbackLocale.localeName} instead.`),this._resolveLocalePath(e,!0)}if(typeof n!="string")throw new Error(`Invalid locale path: ${e}: value is not a string. Perhaps the path is incomplete`);return n}changeGlobalLocale(e,t=!1){document.documentElement.lang=e;let i=Ut[e];if(!i){W(`Locale ${e} not found. Not switching.`);return}this.localeCode=e,v("Changing locale to",i.localeName),t||this._boundObjectProperties.forEach(n=>{this._validatePropertyIntegrity(n)}),this.locale=i,this._boundObjectProperties.forEach(n=>{this._applyPropertyInternal(n)}),this.onLocaleChanged.forEach(n=>n())}};function Ji(o,e=!0,t=0,i={},n=void 0){let s=o.getChannelData(t),A=o.getChannelData(t+1),g=s.length,r=2,l=new F(0),u=Object.keys(i).length>0;if(u){let h=new TextEncoder,x=[Tt("INFO"),V("ICMT",h.encode("Created with SpessaSynth"),!0)];i.artist&&x.push(V("IART",h.encode(i.artist),!0)),i.album&&x.push(V("IPRD",h.encode(i.album),!0)),i.genre&&x.push(V("IGNR",h.encode(i.genre),!0)),i.title&&x.push(V("INAM",h.encode(i.title),!0)),l=V("LIST",ue(x))}let d=new F(0),a=n?.end!==void 0&&n?.start!==void 0;if(a){let h=Math.floor(n.start*o.sampleRate),x=Math.floor(n.end*o.sampleRate),G=new F(24);be(G,0,4),be(G,0,4),Qe(G,"data"),be(G,0,4),be(G,0,4),be(G,h,4);let U=new F(24);be(U,1,4),be(U,0,4),Qe(U,"data"),be(U,0,4),be(U,0,4),be(U,x,4);let O=ue([new F([2,0,0,0]),G,U]);d=V("cue ",O)}let c=44,m=g*2*r,B=c+m+l.length+d.length-8,E=new Uint8Array(c);E.set([82,73,70,70],0),E.set(new Uint8Array([B&255,B>>8&255,B>>16&255,B>>24&255]),4),E.set([87,65,86,69],8),E.set([102,109,116,32],12),E.set([16,0,0,0],16),E.set([1,0],20),E.set([2,0],22);let S=o.sampleRate;E.set(new Uint8Array([S&255,S>>8&255,S>>16&255,S>>24&255]),24);let y=S*2*r;E.set(new Uint8Array([y&255,y>>8&255,y>>16&255,y>>24&255]),28),E.set([4,0],32),E.set([16,0],34),E.set([100,97,116,97],36),E.set(new Uint8Array([m&255,m>>8&255,m>>16&255,m>>24&255]),40);let w=new Uint8Array(B+8),k=c;w.set(E,0);let D=32767;if(e){let h=s.map((x,G)=>Math.max(Math.abs(x),Math.abs(A[G]))).reduce((x,G)=>Math.max(x,G));D=h>0?32767/h:1}for(let h=0;h<g;h++){let x=Math.min(32767,Math.max(-32768,s[h]*D)),G=Math.min(32767,Math.max(-32768,A[h]*D));w[k++]=x&255,w[k++]=x>>8&255,w[k++]=G&255,w[k++]=G>>8&255}return u&&(w.set(l,k),k+=l.length),a&&w.set(d,k),new Blob([w.buffer],{type:"audio/wav"})}var XA=1e3;async function $A(o=!0,e=44100,t=2,i=!1,n={},s=0){if(this.isExporting=!0,!this.seq)throw new Error("No sequencer active");let A=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.message"),g=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.estimated"),r=manager.localeManager.getLocaleString("locale.synthInit.genericLoading"),l=Ae(A,[{type:"text",textContent:r},{type:"progress"}],9999999,!1),u=await this.seq.getMIDI(),d=zt(u.loop.start,u),a=zt(u.loop.end,u),c=a-d,m=u.duration+t+c*s,B=e*m,E;try{E=new OfflineAudioContext({numberOfChannels:i?32:2,sampleRate:e,length:B}),await E.audioWorklet.addModule(new URL(this.workletPath,import.meta.url))}catch(T){Ae("ERROR",[{type:"text",textContent:T}]);return}let S=await this.synth.getSynthesizerSnapshot(),y=this.soundFont,w,D={reverbEnabled:!0,chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:await E.decodeAudioData(this.impulseResponseRaw.slice(0,this.impulseResponseRaw.byteLength))};S.effectsConfig=D;try{w=new Jt(E.destination,y,!1,{parsedMIDI:u,snapshot:S,oneOutput:i,loopCount:s},D)}catch(T){throw Ae(this.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),T}let h=l.div.getElementsByTagName("p")[0],x=l.div.getElementsByClassName("notification_progress")[0],G=XA/1e3,U=w.currentTime,O=m,H=.1,X=setInterval(()=>{let T=w.currentTime-U;U=w.currentTime;let K=w.currentTime/m;x.style.width=`${K*100}%`;let ge=T/G,je=(1-K)/ge*m;je!==1/0&&(O=H*je+(1-H)*O,h.innerText=`${g} ${xt(O).time}`)},XA),ie=await E.startRendering();if(x.style.width="100%",clearInterval(X),h.innerText=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(T=>setTimeout(T,75)),i){let T="locale.exportAudio.formats.formats.wav.options.separateChannels.saving.",K=[],ge=new Set;for(let Se of u.usedChannelsOnTrack)Se.forEach(Pt=>ge.add(Pt));for(let Se=0;Se<16;Se++){let Pt=!0;for(let it=Se;it<S.channelSnapshots.length;it+=16)if(!S.channelSnapshots[it].isMuted){Pt=!1;break}!ge.has(Se)||Pt||K.push({type:"button",textContent:this.localeManager.getLocaleString(T+"save",[Se+1]),onClick:async(it,Ot)=>{let $t=Ot.textContent;Ot.textContent=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(eo=>setTimeout(eo,75));let rn=Ji(ie,!1,Se*2),an=`${Se+1} - ${S.channelSnapshots[Se].patchName}.wav`;this.saveBlob(rn,an),Ot.classList.add("green_button"),Ot.textContent=$t}})}let je=Ae(this.localeManager.getLocaleString(T+"title"),K,99999999,!0,void 0,{display:"flex",flexWrap:"wrap",flexDirection:"row"});je.div.style.width="30rem"}else{let T=zt(u.firstNoteOn,u),K=d-T,ge=a-T,je={start:K,end:ge};v(`%cWriting loop points: start %c${K}%c, end:%c${ge}`,f.info,f.recognized,f.info,f.recognized);let Se=Ji(ie,o,0,n,je);this.saveBlob(Se,`${this.seqUI.currentSongTitle||"unnamed_song"}.wav`)}oe(l.id),this.isExporting=!1}async function er(){if(this.isExporting)return;let o="locale.exportAudio.formats.formats.wav.options.",e="locale.exportAudio.formats.metadata.",t=(l,u,d)=>this.seq.midiData.RMIDInfo?.[l]===void 0?u:d.decode(this.seq.midiData.RMIDInfo?.[l]).replace(/\0$/,""),i=t("IENC","ascii",new TextDecoder),n=new TextDecoder(i),s=t("IPRD","",n),A=t("IART","",n),g=t("IGNR","",n),r=[{type:"toggle",translatePathTitle:o+"normalizeVolume",attributes:{"normalize-volume-toggle":"1",checked:"true"}},{type:"input",translatePathTitle:o+"additionalTime",attributes:{value:"2",type:"number","additional-time":"1"}},{type:"input",translatePathTitle:o+"sampleRate",attributes:{value:"44100",type:"number","sample-rate":"1"}},{type:"input",translatePathTitle:o+"loopCount",attributes:{value:"0",type:"number","loop-count":"1"}},{type:"toggle",translatePathTitle:o+"separateChannels",attributes:{"separate-channels-toggle":"1"}},{type:"input",translatePathTitle:e+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:e+"album",attributes:{value:s,name:"album",type:"text"}},{type:"input",translatePathTitle:e+"artist",attributes:{value:A,name:"artist",type:"text"}},{type:"input",translatePathTitle:e+"genre",attributes:{value:g,name:"genre",type:"text"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:l=>{oe(l.id);let u=l.div.querySelector("input[normalize-volume-toggle]").checked,d=l.div.querySelector("input[additional-time]").value,a=l.div.querySelector("input[sample-rate]").value,c=l.div.querySelector("input[loop-count]").value,m=l.div.querySelector("input[separate-channels-toggle]").checked,B=l.div.querySelector("input[name='artist']").value,E=l.div.querySelector("input[name='album']").value,S=l.div.querySelector("input[name='song_title']").value,y=l.div.querySelector("input[name='genre']").value,w={artist:B.length>0?B:void 0,album:E.length>0?E:void 0,title:S.length>0?S:void 0,genre:y.length>0?y:void 0};this._doExportAudioData(u,parseInt(a),parseInt(d),m,w,parseInt(c))}}];Ae(this.localeManager.getLocaleString(o+"title"),r,9999999,!0,this.localeManager)}async function tr(){let o=await this.seq.getMIDI();Ct(o,await this.synth.getSynthesizerSnapshot());let e=Yo(o),t=new Blob([e],{type:"audio/mid"});this.saveBlob(t,`${this.seqUI.currentSongTitle||"unnamed_song"}.mid`)}function or(o,e){Ee("%cSearching for all used programs and keys...",f.info);let t=16+o.midiPortChannelOffsets.reduce((d,a)=>a>d?a:d),i=[];for(let d=0;d<t;d++){let a=d%16===Ue?128:0;i.push({program:0,bank:a,drums:d%16===Ue,string:`${a}:0`})}function n(d){let a=e.getPreset(d.bank,d.program);d.bank=a.bank,d.program=a.program,d.string=d.bank+":"+d.program,s[d.string]||(v(`%cDetected a new preset: %c${d.string}`,f.info,f.recognized),s[d.string]=new Set)}let s={},A=Array(o.tracks.length).fill(0),g=o.tracks.length;function r(){let d=0,a=1/0;return o.tracks.forEach((c,m)=>{A[m]>=c.length||c[A[m]].ticks<a&&(d=m,a=c[A[m]].ticks)}),d}let l=o.midiPorts.slice(),u="gs";for(;g>0;){let d=r(),a=o.tracks[d];if(A[d]>=a.length){g--;continue}let c=a[A[d]];if(A[d]++,c.messageStatusByte===N.midiPort){l[d]=c.messageData[0];continue}let m=c.messageStatusByte&240;if(m!==N.noteOn&&m!==N.controllerChange&&m!==N.programChange&&m!==N.systemExclusive)continue;let B=(c.messageStatusByte&15)+o.midiPortChannelOffsets[l[d]]||0,E=i[B];switch(m){case N.programChange:E.program=c.messageData[0],n(E);break;case N.controllerChange:if(c.messageData[0]!==R.bankSelect||u==="gs"&&E.drums)continue;let S=c.messageData[1],y=Math.max(0,S-o.bankOffset);if(u==="xg"){let D=S===120||S===126||S===127;D!==E.drums?(E.drums=D,E.bank=E.drums?128:y,n(E)):E.bank=E.drums?128:y;continue}i[B].bank=y;break;case N.noteOn:if(c.messageData[1]===0)continue;n(E),s[E.string].add(`${c.messageData[0]}-${c.messageData[1]}`);break;case N.systemExclusive:if(c.messageData[0]!==65||c.messageData[2]!==66||c.messageData[3]!==18||c.messageData[4]!==64||!(c.messageData[5]&16)||c.messageData[6]!==21){c.messageData[0]===67&&c.messageData[2]===76&&c.messageData[5]===126&&c.messageData[6]===0&&(u="xg");continue}let w=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][c.messageData[5]&15]+o.midiPortChannelOffsets[l[d]],k=!!(c.messageData[7]>0&&c.messageData[5]>>4);E=i[w],E.drums=k,E.bank=k?128:0,n(E);break}}for(let d of Object.keys(s))s[d].size===0&&(v(`%cDetected change but no keys for %c${d}`,f.info,f.value),delete s[d]);return j(),s}function Xt(o,e){function t(n,s){let A=0;for(let g=0;g<n.instrumentZones.length;g++){let r=n.instrumentZones[g];if(r.isGlobal)continue;let l=r.keyRange,u=r.velRange,d=!1;for(let a of s)if(a.key>=l.min&&a.key<=l.max&&a.velocity>=u.min&&a.velocity<=u.max){d=!0;break}d||(v(`%c${r.sample.sampleName} %cremoved from %c${n.instrumentName}%c. Use count: %c${r.useCount-1}`,f.recognized,f.info,f.recognized,f.info,f.recognized),n.safeDeleteZone(g)&&(A++,g--,v(`%c${r.sample.sampleName} %cdeleted`,f.recognized,f.info)),r.sample.useCount<1&&o.deleteSample(r.sample))}return A}Ne("%cTrimming soundfont...",f.info);let i=or(e,o);Ee("%cModifying soundfont...",f.info),v("Detected keys for midi:",i);for(let n=0;n<o.presets.length;n++){let s=o.presets[n],A=s.bank+":"+s.program,g=i[A];if(g===void 0)v(`%cDeleting preset %c${s.presetName}%c and its zones`,f.info,f.recognized,f.info),o.deletePreset(s),n--;else{let r=[...g].map(u=>{let d=u.split("-");return{key:parseInt(d[0]),velocity:parseInt(d[1])}});Ee(`%cTrimming %c${s.presetName}`,f.info,f.recognized),v(`Keys for ${s.presetName}:`,r);let l=0;for(let u=0;u<s.presetZones.length;u++){let d=s.presetZones[u];if(d.isGlobal)continue;let a=d.keyRange,c=d.velRange,m=!1;for(let B of r)if(B.key>=a.min&&B.key<=a.max&&B.velocity>=c.min&&B.velocity<=c.max){m=!0;let E=t(d.instrument,r);v(`%cTrimmed off %c${E}%c zones from %c${d.instrument.instrumentName}`,f.info,f.recognized,f.info,f.recognized);break}m||(l++,s.deleteZone(u),d.instrument.useCount<1&&o.deleteInstrument(d.instrument),u--)}v(`%cTrimmed off %c${l}%c zones from %c${s.presetName}`,f.info,f.recognized,f.info,f.recognized),j()}}o.removeUnusedElements(),o.soundFontInfo.ICMT=`NOTE: This soundfont was trimmed by SpessaSynth to only contain presets used in "${e.midiName}"

`+o.soundFontInfo.ICMT,v("%cSoundfont modified!",f.recognized),j(),j()}function ir(){let o=4;for(let i of this.instruments)o+=i.instrumentZones.reduce((n,s)=>(s.generators=s.generators.filter(A=>A.generatorType!==I.sampleID&&A.generatorType!==I.keyRange&&A.generatorType!==I.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:I.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:I.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:I.sampleID,generatorValue:this.samples.indexOf(s.sample)}),s.generators.length*4+n),0);let e=new F(o),t=0;for(let i of this.instruments)for(let n of i.instrumentZones){n.generatorZoneStartIndex=t;for(let s of n.generators)_(e,s.generatorType),_(e,s.generatorValue),t++}return $(e,0),Ie(new ce("igen",e.length,e))}function nr(o,e,t,i,n){let s=this.samples.map((l,u)=>{t&&l.compressSample(i,n);let d=l.getRawData();return v(`%cEncoded sample %c${u}. ${l.sampleName}%c of %c${this.samples.length}%c. Compressed: %c${l.isCompressed}%c.`,f.info,f.recognized,f.info,f.recognized,f.info,l.isCompressed?f.recognized:f.unrecognized,f.info),d}),A=this.samples.reduce((l,u,d)=>l+s[d].length+46,0),g=new F(A);this.samples.forEach((l,u)=>{let d=s[u],a,c,m=d.length;l.isCompressed?(a=g.currentIndex,c=a+d.length):(a=g.currentIndex/2,c=a+d.length/2,m+=46),o.push(a),g.set(d,g.currentIndex),g.currentIndex+=m,e.push(c)});let r=Ie(new ce("smpl",g.length,g),new F([115,100,116,97]));return Ie(new ce("LIST",r.length,r))}function sr(o,e){let i=new F(46*(this.samples.length+1));return this.samples.forEach((n,s)=>{Qe(i,n.sampleName,20);let A=o[s];$(i,A);let g=e[s];$(i,g);let r=n.sampleLoopStartIndex+A,l=n.sampleLoopEndIndex+A;n.isCompressed&&(r-=A,l-=A),$(i,r),$(i,l),$(i,n.sampleRate),i[i.currentIndex++]=n.samplePitch,i[i.currentIndex++]=n.samplePitchCorrection,_(i,n.sampleLink),_(i,n.sampleType)}),Qe(i,"EOS",46),Ie(new ce("shdr",i.length,i))}function Ar(){let o=10;for(let i of this.instruments)o+=i.instrumentZones.reduce((n,s)=>s.modulators.length*10+n,0);let e=new F(o),t=0;for(let i of this.instruments)for(let n of i.instrumentZones){n.modulatorZoneStartIndex=t;for(let s of n.modulators)_(e,s.sourceEnum),_(e,s.modulatorDestination),_(e,s.transformAmount),_(e,s.secondarySourceEnum),_(e,s.transformType),t++}return be(e,0,10),Ie(new ce("imod",e.length,e))}function rr(){let o=this.instruments.reduce((s,A)=>A.instrumentZones.length*4+s,4),e=new F(o),t=0,i=0,n=0;for(let s of this.instruments){s.instrumentZoneIndex=t;for(let A of s.instrumentZones)A.zoneID=t,_(e,i),_(e,n),i+=A.generators.length,n+=A.modulators.length,t++}return _(e,i),_(e,n),Ie(new ce("ibag",e.length,e))}function ar(){let o=this.instruments.length*22+22,e=new F(o),t=0,i=0;for(let n of this.instruments)Qe(e,n.instrumentName,20),_(e,t),t+=n.instrumentZones.length,n.instrumentID=i,i++;return Qe(e,"EOI",20),_(e,t),Ie(new ce("inst",e.length,e))}function lr(){let o=4;for(let i of this.presets)o+=i.presetZones.reduce((n,s)=>(s.generators=s.generators.filter(A=>A.generatorType!==I.instrument&&A.generatorType!==I.keyRange&&A.generatorType!==I.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:I.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:I.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:I.instrument,generatorValue:this.instruments.indexOf(s.instrument)}),s.generators.length*4+n),0);let e=new F(o),t=0;for(let i of this.presets)for(let n of i.presetZones){n.generatorZoneStartIndex=t;for(let s of n.generators)_(e,s.generatorType),_(e,s.generatorValue);t+=n.generators.length}return _(e,0),_(e,0),Ie(new ce("pgen",e.length,e))}function cr(){let o=10;for(let i of this.presets)o+=i.presetZones.reduce((n,s)=>s.modulators.length*10+n,0);let e=new F(o),t=0;for(let i of this.presets)for(let n of i.presetZones){n.modulatorZoneStartIndex=t;for(let s of n.modulators)_(e,s.sourceEnum),_(e,s.modulatorDestination),_(e,s.transformAmount),_(e,s.secondarySourceEnum),_(e,s.transformType),t++}return be(e,0,10),Ie(new ce("pmod",e.length,e))}function gr(){let o=this.presets.reduce((s,A)=>A.presetZones.length*4+s,4),e=new F(o),t=0,i=0,n=0;for(let s of this.presets){s.presetZoneStartIndex=t;for(let A of s.presetZones)A.zoneID=t,_(e,i),_(e,n),i+=A.generators.length,n+=A.modulators.length,t++}return _(e,i),_(e,n),Ie(new ce("pbag",e.length,e))}function dr(){let o=this.presets.length*38+38,e=new F(o),t=0;for(let i of this.presets)Qe(e,i.presetName,20),_(e,i.program),_(e,i.bank),_(e,t),$(e,i.library),$(e,i.genre),$(e,i.morphology),t+=i.presetZones.length;return Qe(e,"EOP",20),_(e,0),_(e,0),_(e,t),$(e,0),$(e,0),$(e,0),Ie(new ce("phdr",e.length,e))}var Ra={compress:!1,compressionQuality:.5,compressionFunction:void 0};function hr(o=Ra){if(o.compress&&typeof o.compressionFunction!="function")throw new TypeError("No compression function supplied but compression enabled.");Ee("%cSaving soundfont...",f.info),v(`%cCompression: %c${o?.compress||"false"}%c quality: %c${o?.compressionQuality||"none"}`,f.info,f.recognized,f.info,f.recognized),v("%cWriting INFO...",f.info);let e=[];this.soundFontInfo.ISFT="SpessaSynth",o?.compress&&(this.soundFontInfo.ifil="3.0");for(let[k,D]of Object.entries(this.soundFontInfo))if(k==="ifil"||k==="iver"){let h=parseInt(D.split(".")[0]),x=parseInt(D.split(".")[1]),G=new F(4);_(G,h),_(G,x),e.push(Ie(new ce(k,4,G)))}else if(k==="DMOD")e.push(Ie(new ce(k,D.length,D)));else{let h=new F(D.length);Qe(h,D),e.push(Ie(new ce(k,D.length,h)))}let t=ue([new F([73,78,70,79]),...e]),i=Ie(new ce("LIST",t.length,t));v("%cWriting SDTA...",f.info);let n=[],s=[],A=nr.call(this,n,s,o?.compress,o?.compressionQuality??.5,o.compressionFunction);v("%cWriting PDTA...",f.info),v("%cWriting SHDR...",f.info);let g=sr.call(this,n,s);v("%cWriting IGEN...",f.info);let r=ir.call(this);v("%cWriting IMOD...",f.info);let l=Ar.call(this);v("%cWriting IBAG...",f.info);let u=rr.call(this);v("%cWriting INST...",f.info);let d=ar.call(this),a=lr.call(this);v("%cWriting PMOD...",f.info);let c=cr.call(this);v("%cWriting PBAG...",f.info);let m=gr.call(this);v("%cWriting PHDR...",f.info);let B=dr.call(this),E=ue([new F([112,100,116,97]),B,m,c,a,d,u,l,r,g]),S=Ie(new ce("LIST",E.length,E));v("%cWriting the output file...",f.info);let y=ue([new F([115,102,98,107]),i,A,S]),w=Ie(new ce("RIFF",y.length,y));return v(`%cSaved succesfully! Final file size: %c${w.length}`,f.info,f.recognized),j(),w}var fo=class{velRange={min:-1,max:127};keyRange={min:-1,max:127};isGlobal=!1;generators=[];modulators=[];get hasKeyRange(){return this.keyRange.min!==-1}get hasVelRange(){return this.velRange.min!==-1}getGeneratorValue(e,t){return this.generators.find(i=>i.generatorType===e)?.generatorValue??t}};var Ge=class extends fo{sample=void 0;useCount=0;deleteZone(){this.useCount--,!this.isGlobal&&this.sample.useCount--}},ft=class extends fo{instrument=void 0;deleteZone(){this.isGlobal||this.instrument.removeUseCount()}};var La=new Set([I.velRange,I.keyRange,I.instrument,I.exclusiveClass,I.endOper,I.sampleModes,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.initialAttenuation,I.fineTune,I.coarseTune,I.keyNumToVolEnvHold,I.keyNumToVolEnvDecay,I.keyNumToModEnvHold,I.keyNumToModEnvDecay]);function Ir(o,e=!0){function t(d,a){d.push(...a.filter(c=>!d.find(m=>m.generatorType===c.generatorType)))}function i(d,a){return{min:Math.max(d.min,a.min),max:Math.min(d.max,a.max)}}function n(d,a){d.push(...a.filter(c=>!d.find(m=>Z.isIdentical(c,m))))}let s=[],A=[],g=[],r={min:0,max:127},l={min:0,max:127},u=o.presetZones.find(d=>d.isGlobal);u&&(A.push(...u.generators),g.push(...u.modulators),r=u.keyRange,l=u.velRange);for(let d of o.presetZones){if(d.isGlobal)continue;let a=d.keyRange;d.hasKeyRange||(a=r);let c=d.velRange;d.hasVelRange||(c=l);let m=d.generators.map(h=>new q(h.generatorType,h.generatorValue));t(m,A);let B=[...d.modulators];n(B,g);let E=d.instrument.instrumentZones,S=[],y=[],w={min:0,max:127},k={min:0,max:127},D=E.find(h=>h.isGlobal);D&&(S.push(...D.generators),y.push(...D.modulators),w=D.keyRange,k=D.velRange);for(let h of E){if(h.isGlobal)continue;let x=h.keyRange;h.hasKeyRange||(x=w);let G=h.velRange;if(h.hasVelRange||(G=k),x=i(x,a),G=i(G,c),x.max<x.min||G.max<G.min)continue;let U=h.generators.map(T=>new q(T.generatorType,T.generatorValue));t(U,S);let O=[...h.modulators];n(O,y);let H=[...O];for(let T of B){let K=H.findIndex(ge=>Z.isIdentical(T,ge));K!==-1?H[K]=H[K].sumTransform(T):H.push(T)}let X=U.map(T=>new q(T.generatorType,T.generatorValue));for(let T of m){if(T.generatorType===I.velRange||T.generatorType===I.keyRange||T.generatorType===I.instrument||T.generatorType===I.endOper||T.generatorType===I.sampleModes)continue;let K=U.findIndex(ge=>ge.generatorType===T.generatorType);if(K!==-1){let ge=X[K].generatorValue+T.generatorValue;X[K]=new q(T.generatorType,ge)}else{let ge=z[T.generatorType].def+T.generatorValue;X.push(new q(T.generatorType,ge))}}X=X.filter(T=>T.generatorType!==I.sampleID&&T.generatorType!==I.keyRange&&T.generatorType!==I.velRange&&T.generatorType!==I.endOper&&T.generatorType!==I.instrument&&T.generatorValue!==z[T.generatorType].def);let ie=new Ge;ie.keyRange=x,ie.velRange=G,ie.keyRange.min===0&&ie.keyRange.max===127&&(ie.keyRange.min=-1),ie.velRange.min===0&&ie.velRange.max===127&&(ie.velRange.min=-1),ie.isGlobal=!1,ie.sample=h.sample,ie.generators=X,ie.modulators=H,s.push(ie)}}if(e){let d=new Ge;d.isGlobal=!0;for(let m=0;m<58;m++){if(La.has(m))continue;let B={},E=z[m]?.def||0;B[E]=0;for(let S of s){let y=S.generators.find(D=>D.generatorType===m);if(y){let D=y.generatorValue;B[D]===void 0?B[D]=1:B[D]++}else B[E]++;let w;switch(m){default:continue;case I.decayVolEnv:w=I.keyNumToVolEnvDecay;break;case I.holdVolEnv:w=I.keyNumToVolEnvHold;break;case I.decayModEnv:w=I.keyNumToModEnvDecay;break;case I.holdModEnv:w=I.keyNumToModEnvHold}if(S.generators.find(D=>D.generatorType===w)!==void 0){B={};break}}if(Object.keys(B).length>0){let S=Object.entries(B).reduce((w,k)=>w[1]<k[1]?k:w,[0,0]),y=parseInt(S[0]);y!==E&&d.generators.push(new q(m,y)),s.forEach(w=>{let k=w.generators.findIndex(D=>D.generatorType===m);k!==-1?w.generators[k].generatorValue===y&&w.generators.splice(k,1):y!==E&&w.generators.push(new q(m,E))})}}let c=s.find(m=>!m.isGlobal).modulators.map(m=>Z.copy(m));for(let m of c){let B=!0;for(let E of s){if(E.isGlobal||!B)continue;E.modulators.find(y=>Z.isIdentical(y,m))||(B=!1)}if(B===!0){d.modulators.push(Z.copy(m));for(let E of s){let S=E.modulators.find(y=>Z.isIdentical(y,m));S.transformAmount===m.transformAmount&&E.modulators.splice(E.modulators.indexOf(S),1)}}}s.splice(0,0,d)}return s}var ur=20;function ri(o,e,t,i,n,s,A){let g=A===0?0:1,r=new F(ur+g*16);$(r,ur),_(r,e),_(r,t);let l=i*.4,u=Math.floor(l*-65536);$(r,u),$(r,2);let d=s-n,a=0;switch(A){default:case 0:g=0;break;case 1:a=0,g=1;break;case 3:a=1,g=1}return $(r,g),g===1&&($(r,16),$(r,a),$(r,n),$(r,d)),V("wsmp",r)}var Y={none:0,modLfo:1,velocity:2,keyNum:3,volEnv:4,modEnv:5,pitchWheel:6,polyPressure:7,channelPressure:8,vibratoLfo:9,modulationWheel:129,volume:135,pan:138,expression:139,chorus:219,reverb:221,pitchWheelRange:256,fineTune:257,coarseTune:258},ai=new Z({srcEnum:219,dest:I.reverbEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),li=new Z({srcEnum:221,dest:I.chorusEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),ci=new Z({srcEnum:129,dest:I.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0}),gi=new Z({srcEnum:13,dest:I.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0});var M={none:0,gain:1,reserved:2,pitch:3,pan:4,keyNum:5,chorusSend:128,reverbSend:129,modLfoFreq:260,modLfoDelay:261,vibLfoFreq:276,vibLfoDelay:277,volEnvAttack:518,volEnvDecay:519,volEnvRelease:521,volEnvSustain:522,volEnvDelay:523,volEnvHold:524,modEnvAttack:778,modEnvDecay:779,modEnvRelease:781,modEnvSustain:782,modEnvDelay:783,modEnvHold:784,filterCutoff:1280,filterQ:1281};var Qo=class{source;control;destination;scale;transform;constructor(e,t,i,n,s){this.source=e,this.control=t,this.destination=i,this.scale=n,this.transform=s}writeArticulator(){let e=new F(12);return _(e,this.source),_(e,this.control),_(e,this.destination),_(e,this.transform),$(e,this.scale<<16),e}};function mr(o,e){if(o)switch(e){default:return;case R.modulationWheel:return Y.modulationWheel;case R.mainVolume:return Y.volume;case R.pan:return Y.pan;case R.expressionController:return Y.expression;case R.chorusDepth:return Y.chorus;case R.reverbDepth:return Y.reverb}else switch(e){default:return;case de.noteOnKeyNum:return Y.keyNum;case de.noteOnVelocity:return Y.velocity;case de.noController:return Y.none;case de.polyPressure:return Y.polyPressure;case de.channelPressure:return Y.channelPressure;case de.pitchWheel:return Y.pitchWheel;case de.pitchWheelRange:return Y.pitchWheelRange}}function Cr(o,e){switch(o){default:return;case I.initialAttenuation:return{dest:M.gain,amount:-e};case I.fineTune:return M.pitch;case I.pan:return M.pan;case I.keyNum:return M.keyNum;case I.reverbEffectsSend:return M.reverbSend;case I.chorusEffectsSend:return M.chorusSend;case I.freqModLFO:return M.modLfoFreq;case I.delayModLFO:return M.modLfoDelay;case I.delayVibLFO:return M.vibLfoDelay;case I.freqVibLFO:return M.vibLfoFreq;case I.delayVolEnv:return M.volEnvDelay;case I.attackVolEnv:return M.volEnvAttack;case I.holdVolEnv:return M.volEnvHold;case I.decayVolEnv:return M.volEnvDecay;case I.sustainVolEnv:return{dest:M.volEnvSustain,amount:1e3-e};case I.releaseVolEnv:return M.volEnvRelease;case I.delayModEnv:return M.modEnvDelay;case I.attackModEnv:return M.modEnvAttack;case I.holdModEnv:return M.modEnvHold;case I.decayModEnv:return M.modEnvDecay;case I.sustainModEnv:return{dest:M.modEnvSustain,amount:1e3-e};case I.releaseModEnv:return M.modEnvRelease;case I.initialFilterFc:return M.filterCutoff;case I.initialFilterQ:return M.filterQ}}function pr(o,e){switch(o){default:return;case I.modEnvToFilterFc:return{source:Y.modEnv,dest:M.filterCutoff,amt:e,isBipolar:!1};case I.modEnvToPitch:return{source:Y.modEnv,dest:M.pitch,amt:e,isBipolar:!1};case I.modLfoToFilterFc:return{source:Y.modLfo,dest:M.filterCutoff,amt:e,isBipolar:!0};case I.modLfoToVolume:return{source:Y.modLfo,dest:M.gain,amt:e,isBipolar:!0};case I.modLfoToPitch:return{source:Y.modLfo,dest:M.pitch,amt:e,isBipolar:!0};case I.vibLfoToPitch:return{source:Y.vibratoLfo,dest:M.pitch,amt:e,isBipolar:!0};case I.keyNumToVolEnvHold:return{source:Y.keyNum,dest:M.volEnvHold,amt:e,isBipolar:!0};case I.keyNumToVolEnvDecay:return{source:Y.keyNum,dest:M.volEnvDecay,amt:e,isBipolar:!0};case I.keyNumToModEnvHold:return{source:Y.keyNum,dest:M.modEnvHold,amt:e,isBipolar:!0};case I.keyNumToModEnvDecay:return{source:Y.keyNum,dest:M.modEnvDecay,amt:e,isBipolar:!0};case I.scaleTuning:return{source:Y.keyNum,dest:M.pitch,amt:e*128,isBipolar:!1}}}function Er(o){let e=Cr(o.generatorType,o.generatorValue),t=e,i=0,n=o.generatorValue;e?.amount!==void 0&&(n=e.amount,t=e.dest);let s=pr(o.generatorType,o.generatorValue);if(s!==void 0)n=s.amt,t=s.dest,i=s.source;else if(t===void 0){W(`Invalid generator type: ${o.generatorType}`);return}return new Qo(i,0,t,n,0)}function Br(o){if(o.transformType!==0){W("Other transform types are not supported.");return}let e=mr(o.sourceUsesCC,o.sourceIndex),t=o.sourceCurveType,i=o.sourcePolarity,n=o.sourceDirection;if(e===void 0){W(`Invalid source: ${o.sourceIndex}, CC: ${o.sourceUsesCC}`);return}o.modulatorDestination===I.initialAttenuation&&(n=n===1?0:1);let s=mr(o.secSrcUsesCC,o.secSrcIndex),A=o.secSrcCurveType,g=o.secSrcPolarity,r=o.secSrcDirection;if(s===void 0){W(`Invalid secondary source: ${o.secSrcIndex}, CC: ${o.secSrcUsesCC}`);return}let l=Cr(o.modulatorDestination,o.transformAmount),u=l,d=o.transformAmount;l?.dest!==void 0&&(u=l.dest,d=l.amount);let a=pr(o.modulatorDestination,o.transformAmount);if(a!==void 0)d=a.amt,s=e,A=t,g=i,r=n,t=Ye.linear,i=a.isBipolar?1:0,n=0,e=a.source,u=a.dest;else if(u===void 0){W(`Invalid destination: ${o.modulatorDestination}`);return}let c=0;return c|=A<<4,c|=g<<8,c|=r<<9,c|=t,c|=i<<14,c|=n<<15,new Qo(e,s,u,d,c)}var Ga=new Set([I.sampleModes,I.initialAttenuation,I.keyRange,I.velRange,I.sampleID,I.fineTune,I.coarseTune,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.overridingRootKey,I.exclusiveClass]);function di(o){for(let s=0;s<o.generators.length;s++){let A=o.generators[s];(A.generatorType===I.delayVolEnv||A.generatorType===I.attackVolEnv||A.generatorType===I.holdVolEnv||A.generatorType===I.decayVolEnv||A.generatorType===I.releaseVolEnv||A.generatorType===I.delayModEnv||A.generatorType===I.attackModEnv||A.generatorType===I.holdModEnv||A.generatorType===I.decayModEnv)&&(o.generators[s]=new q(A.generatorType,Math.min(A.generatorValue,6386),!1))}for(let s=0;s<o.generators.length;s++){let A=o.generators[s],g;switch(A.generatorType){default:continue;case I.keyNumToVolEnvDecay:g=I.decayVolEnv;break;case I.keyNumToVolEnvHold:g=I.holdVolEnv;break;case I.keyNumToModEnvDecay:g=I.decayModEnv;break;case I.keyNumToModEnvHold:g=I.holdModEnv}let r=o.generators.find(m=>m.generatorType===g);if(r===void 0)continue;let l=A.generatorValue*-128,u=60/128*l,d=r.generatorValue-u,a=o.generators.indexOf(A),c=o.generators.indexOf(r);o.generators[c]=new q(g,d,!1),o.generators[a]=new q(A.generatorType,l,!1)}let e=o.generators.reduce((s,A)=>{if(Ga.has(A.generatorType))return s;let g=Er(A);return g!==void 0?(s.push(g),v("%cSucceeded converting to DLS Articulator!",f.recognized)):W("Failed converting to DLS Articulator!"),s},[]),t=o.modulators.reduce((s,A)=>{if(Z.isIdentical(A,li,!0)||Z.isIdentical(A,ai,!0)||Z.isIdentical(A,ci,!0)||Z.isIdentical(A,gi,!0))return s;let g=Br(A);return g!==void 0?(s.push(g),v("%cSucceeded converting to DLS Articulator!",f.recognized)):W("Failed converting to DLS Articulator!"),s},[]);e.push(...t);let i=new F(8);$(i,8),$(i,e.length);let n=e.map(s=>s.writeArticulator());return V("art2",ue([i,...n]))}function fr(o,e){let t=new F(12);_(t,Math.max(o.keyRange.min,0)),_(t,o.keyRange.max),_(t,Math.max(o.velRange.min,0)),_(t,o.velRange.max),_(t,0);let i=o.getGeneratorValue(I.exclusiveClass,0);_(t,i),_(t,0);let n=V("rgnh",t),s=o.getGeneratorValue(I.overridingRootKey,o.sample.samplePitch);o.getGeneratorValue(I.scaleTuning,e.getGeneratorValue(I.scaleTuning,100))===0&&o.keyRange.max-o.keyRange.min===0&&(s=o.keyRange.min);let g=ri(o.sample,s,o.getGeneratorValue(I.fineTune,0)+o.getGeneratorValue(I.coarseTune,0)*100+o.sample.samplePitchCorrection,o.getGeneratorValue(I.initialAttenuation,0),o.sample.sampleLoopStartIndex+o.getGeneratorValue(I.startloopAddrsOffset,0)+o.getGeneratorValue(I.startloopAddrsCoarseOffset,0)*32768,o.sample.sampleLoopEndIndex+o.getGeneratorValue(I.endloopAddrsOffset,0)+o.getGeneratorValue(I.endloopAddrsCoarseOffset,0)*32768,o.getGeneratorValue(I.sampleModes,0)),r=new F(12);_(r,0),_(r,0),$(r,1),$(r,this.samples.indexOf(o.sample));let l=V("wlnk",r),u=new F(0);if(o.modulators.length+o.generators.length>0){let d=di(o);u=V("lar2",d,!1,!0)}return V("rgn2",ue([n,g,l,u]),!1,!0)}function Qr(o){Ee(`%cWriting %c${o.presetName}%c...`,f.info,f.recognized,f.info);let e=Ir(o),t=e.reduce((a,c)=>c.isGlobal?a:a+1,0),i=new F(12);$(i,t);let n=(o.bank&127)<<8;o.bank===128&&(n|=1<<31),$(i,n),$(i,o.program&127);let s=V("insh",i),A=new F(0),g=e.find(a=>a.isGlobal===!0);if(g){let a=di(g);A=V("lar2",a,!1,!0)}let r=ue(e.reduce((a,c)=>(c.isGlobal||a.push(fr.apply(this,[c,g])),a),[])),l=V("lrgn",r,!1,!0),u=V("INAM",At(o.presetName)),d=V("INFO",u,!1,!0);return j(),V("ins ",ue([s,l,A,d]),!1,!0)}function yr(){let o=ue(this.presets.map(e=>Qr.apply(this,[e])));return V("lins",o,!1,!0)}function Sr(o){let e=new F(18);_(e,1),_(e,1),$(e,o.sampleRate),$(e,o.sampleRate*2),_(e,2),_(e,16);let t=V("fmt ",e),i=1;o.sampleLoopStartIndex+Math.abs(o.getAudioData().length-o.sampleLoopEndIndex)<2&&(i=0);let n=ri(o,o.samplePitch,o.samplePitchCorrection,0,o.sampleLoopStartIndex,o.sampleLoopEndIndex,i),s=o.getAudioData(),A;if(o.isCompressed){let l=new Int16Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[u]*32768;A=V("data",new F(l.buffer))}else A=V("data",o.getRawData());let g=V("INAM",At(o.sampleName)),r=V("INFO",g,!1,!0);return v(`%cSaved %c${o.sampleName}%c succesfully!`,f.recognized,f.value,f.recognized),V("wave",ue([t,n,A,r]),!1,!0)}function wr(){let o=0,e=[],t=this.samples.map(i=>{let n=Sr(i);return e.push(o),o+=n.length,n});return{data:V("wvpl",ue(t),!1,!0),indexes:e}}function kr(){Ee("%cSaving DLS...",f.info);let o=new F(4);$(o,this.presets.length);let e=V("colh",o);Ee("%cWriting instruments...",f.info);let t=yr.apply(this);v("%cSuccess!",f.recognized),j(),Ee("%cWriting WAVE samples...",f.info);let i=wr.apply(this),n=i.data,s=i.indexes;v("%cSucceeded!",f.recognized),j();let A=new F(8+4*s.length);$(A,8),$(A,s.length);for(let d of s)$(A,d);let g=V("ptbl",A);this.soundFontInfo.ICMT=(this.soundFontInfo.ICMT||"Soundfont")+`
Converted from SF2 to DLS using SpessaSynth`,this.soundFontInfo.ISFT="SpessaSynth";let r=[];for(let[d,a]of Object.entries(this.soundFontInfo))d!=="ICMT"&&d!=="INAM"&&d!=="ICRD"&&d!=="IENG"&&d!=="ICOP"&&d!=="ISFT"&&d!=="ISBJ"||r.push(V(d,At(a),!0));let l=V("INFO",ue(r),!1,!0),u=new F(e.length+t.length+g.length+n.length+l.length+4);return Qe(u,"DLS "),u.set(ue([e,t,g,n,l]),4),v("%cSaved succesfully!",f.recognized),j(),V("RIFF",u)}var Ta=48e3,Qt=class{constructor(e,t,i,n,s,A,g,r){this.sampleName=e,this.sampleRate=t,this.samplePitch=i,this.samplePitchCorrection=n,this.sampleLink=s,this.sampleType=A,this.sampleLoopStartIndex=g,this.sampleLoopEndIndex=r,this.isCompressed=(A&16)>0,this.compressedData=void 0,this.useCount=0,this.sampleData=void 0}getRawData(){let e=new Uint8Array(this.sampleData.length*2);for(let t=0;t<this.sampleData.length;t++){let i=Math.floor(this.sampleData[t]*32768);e[t*2]=i&255,e[t*2+1]=i>>8&255}return e}resampleData(e){let t=this.getAudioData(),i=e/this.sampleRate,n=new Float32Array(Math.floor(t.length*i));for(let s=0;s<n.length;s++)n[s]=t[Math.floor(s*(1/i))];t=n,this.sampleRate=e,this.sampleLoopStartIndex=Math.floor(this.sampleLoopStartIndex*i),this.sampleLoopEndIndex=Math.floor(this.sampleLoopEndIndex*i),this.sampleData=t}compressSample(e,t){if(!this.isCompressed)try{let i=this.getAudioData();(this.sampleRate<8e3||this.sampleRate>96e3)&&(this.resampleData(Ta),i=this.getAudioData()),this.compressedData=t([i],1,this.sampleRate,e),this.sampleType|=16,this.isCompressed=!0}catch{W(`Failed to compress ${this.sampleName}. Leaving as uncompressed!`),this.isCompressed=!1,this.compressedData=void 0,this.sampleType&=239}}getAudioData(){return this.sampleData}};var yt=class{constructor(){this.instrumentName="",this.instrumentZones=[],this._useCount=0}get useCount(){return this._useCount}addUseCount(){this._useCount++,this.instrumentZones.forEach(e=>e.useCount++)}removeUseCount(){this._useCount--;for(let e=0;e<this.instrumentZones.length;e++)this.safeDeleteZone(e)&&e--}deleteInstrument(){this.instrumentZones.forEach(e=>e.deleteZone()),this.instrumentZones.length=0}safeDeleteZone(e){return this.instrumentZones[e].useCount--,this.instrumentZones[e].useCount<1?(this.deleteZone(e),!0):!1}deleteZone(e){this.instrumentZones[e].deleteZone(),this.instrumentZones.splice(e,1)}};var St=class{constructor(e){this.presetName="",this.program=0,this.bank=0,this.presetZones=[],this.sampleIDOffset=0,this.foundSamplesAndGenerators=[];for(let t=0;t<128;t++)this.foundSamplesAndGenerators[t]=[];this.library=0,this.genre=0,this.morphology=0,this.defaultModulators=e}deletePreset(){this.presetZones.forEach(e=>e.deleteZone()),this.presetZones.length=0}deleteZone(e){this.presetZones[e].deleteZone(),this.presetZones.splice(e,1)}preload(e,t){for(let i=e;i<t+1;i++)for(let n=0;n<128;n++)this.getSamplesAndGenerators(i,n).forEach(s=>{s.sample.isSampleLoaded||s.sample.getAudioData()})}preloadSpecific(e,t){this.getSamplesAndGenerators(e,t).forEach(i=>{i.sample.isSampleLoaded||i.sample.getAudioData()})}getSamplesAndGenerators(e,t){let i=this.foundSamplesAndGenerators[e][t];if(i)return i;if(this.presetZones.length<1)return[];function n(c,m){return m>=c.min&&m<=c.max}function s(c,m){c.push(...m.filter(B=>!c.find(E=>E.generatorType===B.generatorType)))}function A(c,m){c.push(...m.filter(B=>!c.find(E=>Z.isIdentical(B,E))))}let g=[],r=this.presetZones[0].isGlobal?[...this.presetZones[0].generators]:[],l=this.presetZones[0].isGlobal?[...this.presetZones[0].modulators]:[],u=this.presetZones[0].isGlobal?this.presetZones[0].keyRange:{min:0,max:127},d=this.presetZones[0].isGlobal?this.presetZones[0].velRange:{min:0,max:127};return this.presetZones.filter(c=>n(c.hasKeyRange?c.keyRange:u,e)&&n(c.hasVelRange?c.velRange:d,t)&&!c.isGlobal).forEach(c=>{if(c.instrument.instrumentZones.length<1)return;let m=c.generators,B=c.modulators,E=c.instrument.instrumentZones[0],S=E.isGlobal?[...E.generators]:[],y=E.isGlobal?[...E.modulators]:[],w=E.isGlobal?E.keyRange:{min:0,max:127},k=E.isGlobal?E.velRange:{min:0,max:127};c.instrument.instrumentZones.filter(h=>n(h.hasKeyRange?h.keyRange:w,e)&&n(h.hasVelRange?h.velRange:k,t)&&!h.isGlobal).forEach(h=>{let x=[...h.generators],G=[...h.modulators];s(m,r),s(x,S),A(B,l),A(G,y),A(G,this.defaultModulators);let U=[...G];for(let O=0;O<B.length;O++){let H=B[O],X=U.findIndex(ie=>Z.isIdentical(H,ie));X!==-1?U[X]=U[X].sumTransform(H):U.push(H)}g.push({instrumentGenerators:x,presetGenerators:m,modulators:U,sample:h.sample,sampleID:h.generators.find(O=>O.generatorType===I.sampleID).generatorValue})})}),this.foundSamplesAndGenerators[e][t]=g,g}};var wt=class o{constructor(e=void 0){this.soundFontInfo={},this.presets=[],this.samples=[],this.instruments=[],this.defaultModulators=Go.map(t=>Z.copy(t)),e?.presets&&(this.presets.push(...e.presets),this.soundFontInfo=e.info)}static mergeSoundfonts(...e){let t=e.shift(),i=t.presets;for(;e.length;)e.shift().presets.forEach(s=>{i.find(A=>A.bank===s.bank&&A.program===s.program)===void 0&&i.push(s)});return new o({presets:i,info:t.soundFontInfo})}static getDummySoundfontFile(){let e=new o,t=new Qt("Saw",44100,65,20,0,0,0,127);t.sampleData=new Float32Array(128);for(let l=0;l<128;l++)t.sampleData[l]=l/128*2-1;e.samples.push(t);let i=new Ge;i.isGlobal=!0,i.generators.push(new q(I.initialAttenuation,375)),i.generators.push(new q(I.releaseVolEnv,-1e3)),i.generators.push(new q(I.sampleModes,1));let n=new Ge;n.sample=t;let s=new Ge;s.sample=t,s.generators.push(new q(I.fineTune,-9));let A=new yt;A.instrumentName="Saw Wave",A.instrumentZones.push(i),A.instrumentZones.push(n),A.instrumentZones.push(s),e.instruments.push(A);let g=new ft;g.instrument=A;let r=new St(e.defaultModulators);return r.presetName="Saw Wave",r.presetZones.push(g),e.presets.push(r),e.soundFontInfo.ifil="2.1",e.soundFontInfo.isng="EMU8000",e.soundFontInfo.INAM="Dummy",e.write().buffer}removeUnusedElements(){this.instruments.forEach(e=>{e.useCount<1&&e.instrumentZones.forEach(t=>{t.isGlobal||t.sample.useCount--})}),this.instruments=this.instruments.filter(e=>e.useCount>0),this.samples=this.samples.filter(e=>e.useCount>0)}deleteInstrument(e){if(e.useCount>0)throw new Error(`Cannot delete an instrument that has ${e.useCount} usages.`);this.instruments.splice(this.instruments.indexOf(e),1),e.deleteInstrument(),this.removeUnusedElements()}deletePreset(e){e.deletePreset(),this.presets.splice(this.presets.indexOf(e),1),this.removeUnusedElements()}deleteSample(e){if(e.useCount>0)throw new Error(`Cannot delete sample that has ${e.useCount} usages.`);this.samples.splice(this.samples.indexOf(e),1),this.removeUnusedElements()}setSampleIDOffset(e){this.presets.forEach(t=>t.sampleIDOffset=e)}getPresetNoFallback(e,t,i=!1){let n=this.presets.find(s=>s.bank===e&&s.program===t);if(n)return n;if(i!==!1)return e===128?this.presets.find(s=>s.bank===128):this.presets.find(s=>s.program===t)}getPreset(e,t){let i=this.presets.find(n=>n.bank===e&&n.program===t);return i||(e===128?(i=this.presets.find(n=>n.bank===128&&n.program===t),i||(i=this.presets.find(n=>n.bank===128))):i=this.presets.find(n=>n.program===t&&n.bank!==128),i&&W(`%cPreset ${e}.${t} not found. Replaced with %c${i.presetName} (${i.bank}.${i.program})`,f.warn,f.recognized)),i||(W(`Preset ${t} not found. Defaulting to`,this.presets[0].presetName),i=this.presets[0]),i}getPresetByName(e){let t=this.presets.find(i=>i.presetName===e);return t||(W("Preset not found. Defaulting to:",this.presets[0].presetName),t=this.presets[0]),t}parsingError(e){throw new Error(`SF parsing error: ${e} The file may be corrupted.`)}destroySoundfont(){delete this.presets,delete this.instruments,delete this.samples}};wt.prototype.write=hr;wt.prototype.writeDLS=kr;function Dr(o){Ee("%cLoading instruments...",f.info);for(let e=0;e<this.instrumentAmount;e++)this.readDLSInstrument(se(o.chunkData));j()}var hi=class extends St{constructor(e,t){super(Go),this.program=t&127,this.bank=e>>8&127,e>>31&&(this.bank=128),this.DLSInstrument=new yt,this.DLSInstrument.addUseCount();let n=new ft;n.instrument=this.DLSInstrument,this.presetZones=[n]}};function br(o){this.verifyHeader(o,"LIST"),this.verifyText(le(o.chunkData,4),"ins ");let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(se(o.chunkData));let t=e.find(c=>c.header==="insh");if(!t)throw j(),new Error("No instrument header!");let i=L(t.chunkData,4),n=L(t.chunkData,4),s=L(t.chunkData,4),A=new hi(n,s),g="unnamedPreset",r=He(e,"INFO");if(r){let c=se(r.chunkData);for(;c.header!=="INAM";)c=se(r.chunkData);g=le(c.chunkData,c.chunkData.length).trim()}A.presetName=g,A.DLSInstrument.instrumentName=g,Ne(`%cParsing %c"${g}"%c...`,f.info,f.recognized,f.info);let l=He(e,"lrgn");if(!l)throw j(),new Error("No region list!");let u=new Ge;u.isGlobal=!0;let d=He(e,"lart"),a=He(e,"lar2");(a!==void 0||d!==void 0)&&this.readLart(d,a,u),u.generators=u.generators.filter(c=>c.generatorValue!==z[c.generatorType].def),u.modulators.find(c=>c.modulatorDestination===I.reverbEffectsSend)===void 0&&u.modulators.push(Z.copy(ai)),u.modulators.find(c=>c.modulatorDestination===I.chorusEffectsSend)===void 0&&u.modulators.push(Z.copy(li)),A.DLSInstrument.instrumentZones.push(u);for(let c=0;c<i;c++){let m=se(l.chunkData);this.verifyHeader(m,"LIST");let B=le(m.chunkData,4);B!=="rgn "&&B!=="rgn2"&&(j(),this.parsingError(`Invalid DLS region! Expected "rgn " or "rgn2" got "${B}"`));let E=this.readRegion(m);E&&A.DLSInstrument.instrumentZones.push(E)}this.presets.push(A),this.instruments.push(A.DLSInstrument),j()}function vr(o){let e,t=!1;switch(o){default:case Y.modLfo:case Y.vibratoLfo:case Y.coarseTune:case Y.fineTune:case Y.modEnv:return;case Y.keyNum:e=de.noteOnKeyNum;break;case Y.none:e=de.noController;break;case Y.modulationWheel:e=R.modulationWheel,t=!0;break;case Y.pan:e=R.pan,t=!0;break;case Y.reverb:e=R.reverbDepth,t=!0;break;case Y.chorus:e=R.chorusDepth,t=!0;break;case Y.expression:e=R.expressionController,t=!0;break;case Y.volume:e=R.mainVolume,t=!0;break;case Y.velocity:e=de.noteOnVelocity;break;case Y.polyPressure:e=de.polyPressure;break;case Y.channelPressure:e=de.channelPressure;break;case Y.pitchWheel:e=de.pitchWheel;break;case Y.pitchWheelRange:e=de.pitchWheelRange;break}if(e===void 0)throw new Error(`Unknown DLS Source: ${o}`);return{enum:e,isCC:t}}function Na(o,e){switch(o){default:case M.none:return;case M.pan:return I.pan;case M.gain:return{gen:I.initialAttenuation,newAmount:e*-1};case M.pitch:return I.fineTune;case M.keyNum:return I.overridingRootKey;case M.volEnvDelay:return I.delayVolEnv;case M.volEnvAttack:return I.attackVolEnv;case M.volEnvHold:return I.holdVolEnv;case M.volEnvDecay:return I.decayVolEnv;case M.volEnvSustain:return{gen:I.sustainVolEnv,newAmount:1e3-e};case M.volEnvRelease:return I.releaseVolEnv;case M.modEnvDelay:return I.delayModEnv;case M.modEnvAttack:return I.attackModEnv;case M.modEnvHold:return I.holdModEnv;case M.modEnvDecay:return I.decayModEnv;case M.modEnvSustain:return{gen:I.sustainModEnv,newAmount:(1e3-e)/10};case M.modEnvRelease:return I.releaseModEnv;case M.filterCutoff:return I.initialFilterFc;case M.filterQ:return I.initialFilterQ;case M.chorusSend:return I.chorusEffectsSend;case M.reverbSend:return I.reverbEffectsSend;case M.modLfoFreq:return I.freqModLFO;case M.modLfoDelay:return I.delayModLFO;case M.vibLfoFreq:return I.freqVibLFO;case M.vibLfoDelay:return I.delayVibLFO}}function Ua(o,e){return o===Y.vibratoLfo&&e===M.pitch?I.vibLfoToPitch:o===Y.modLfo&&e===M.pitch?I.modLfoToPitch:o===Y.modLfo&&e===M.filterCutoff?I.modLfoToFilterFc:o===Y.modLfo&&e===M.gain?I.modLfoToVolume:o===Y.modEnv&&e===M.filterCutoff?I.modEnvToFilterFc:o===Y.modEnv&&e===M.pitch?I.modEnvToPitch:void 0}function xr(o,e,t,i,n){let s=Ua(o,t),A,g,r=!1,l=!1,u=n;if(s===void 0){let S=Na(t,n);if(S===void 0){W(`Invalid destination: ${t}`);return}if(A=S,S.newAmount!==void 0&&(u=S.newAmount,A=S.gen),g=vr(o),g===void 0){W(`Invalid source: ${o}`);return}}else A=s,r=!0,g={enum:de.noController,isCC:!1},l=!0;let d=vr(e);if(d===void 0){W(`Invalid control: ${e}`);return}let a;if(l)a=0;else{let S=i&15,y=i>>10&15;y===Ye.linear&&S!==Ye.linear&&(y=S);let w=i>>14&1,k=i>>15&1;A===I.initialAttenuation&&n<0&&(k=1),a=$e(y,w,k,g.isCC,g.enum)}let c=i>>4&15,m=i>>8&1,B=i>>9&1,E=$e(c,m,B,d.isCC,d.enum);if(r){let S=E;E=a,a=S}return new Z({srcEnum:a,secSrcEnum:E,dest:A,transform:0,amt:u})}function Ki(o,e){let t=o.chunkData,i=[],n=[];L(t,4);let s=L(t,4);for(let A=0;A<s;A++){let g=L(t,2),r=L(t,2),l=L(t,2),u=L(t,2),a=(L(t,4)|0)>>16;if(g===0&&r===0&&u===0){let c;switch(l){case M.pan:c=new q(I.pan,a);break;case M.gain:c=new q(I.initialAttenuation,-a*10/.4);break;case M.filterCutoff:c=new q(I.initialFilterFc,a);break;case M.filterQ:c=new q(I.initialFilterQ,a);break;case M.modLfoFreq:c=new q(I.freqModLFO,a);break;case M.modLfoDelay:c=new q(I.delayModLFO,a);break;case M.vibLfoFreq:c=new q(I.freqVibLFO,a);break;case M.vibLfoDelay:c=new q(I.delayVibLFO,a);break;case M.volEnvDelay:c=new q(I.delayVolEnv,a);break;case M.volEnvAttack:c=new q(I.attackVolEnv,a);break;case M.volEnvHold:c=new q(I.holdVolEnv,a,!1);break;case M.volEnvDecay:c=new q(I.decayVolEnv,a,!1);break;case M.volEnvRelease:c=new q(I.releaseVolEnv,a);break;case M.volEnvSustain:let m=1e3-a;c=new q(I.sustainVolEnv,m);break;case M.modEnvDelay:c=new q(I.delayModEnv,a);break;case M.modEnvAttack:c=new q(I.attackModEnv,a);break;case M.modEnvHold:c=new q(I.holdModEnv,a,!1);break;case M.modEnvDecay:c=new q(I.decayModEnv,a,!1);break;case M.modEnvRelease:c=new q(I.releaseModEnv,a);break;case M.modEnvSustain:let B=1e3-a;c=new q(I.sustainModEnv,B);break;case M.reverbSend:c=new q(I.reverbEffectsSend,a);break;case M.chorusSend:c=new q(I.chorusEffectsSend,a);break;case M.pitch:let E=Math.floor(a/100),S=Math.floor(a-E*100);c=new q(I.fineTune,S),i.push(new q(I.coarseTune,E));break}c&&i.push(c)}else{let c=!0;if(r===Y.none)if(g===Y.modLfo&&l===M.pitch)i.push(new q(I.modLfoToPitch,a));else if(g===Y.modLfo&&l===M.gain)i.push(new q(I.modLfoToVolume,a));else if(g===Y.modLfo&&l===M.filterCutoff)i.push(new q(I.modLfoToFilterFc,a));else if(g===Y.vibratoLfo&&l===M.pitch)i.push(new q(I.vibLfoToPitch,a));else if(g===Y.modEnv&&l===M.pitch)i.push(new q(I.modEnvToPitch,a));else if(g===Y.modEnv&&l===M.filterCutoff)i.push(new q(I.modEnvToFilterFc,a));else if(g===Y.keyNum&&l===M.pitch)i.push(new q(I.scaleTuning,a/128));else if(g===Y.keyNum&&l===M.volEnvHold){i.push(new q(I.keyNumToVolEnvHold,a/-128));let m=Math.round(60/128*a);i.forEach(B=>{B.generatorType===I.holdVolEnv&&(B.generatorValue+=m)})}else if(g===Y.keyNum&&l===M.volEnvDecay){i.push(new q(I.keyNumToVolEnvDecay,a/-128));let m=Math.round(60/128*a);i.forEach(B=>{B.generatorType===I.decayVolEnv&&(B.generatorValue+=m)})}else if(g===Y.keyNum&&l===M.modEnvHold){i.push(new q(I.keyNumToModEnvHold,a/-128));let m=Math.round(60/128*a);i.forEach(B=>{B.generatorType===I.holdModEnv&&(B.generatorValue+=m)})}else if(g===Y.keyNum&&l===M.modEnvDecay){i.push(new q(I.keyNumToModEnvDecay,a/-128));let m=Math.round(60/128*a);i.forEach(B=>{B.generatorType===I.decayModEnv&&(B.generatorValue+=m)})}else c=!1;else c=!1;if(c===!1){let m=xr(g,r,l,u,a);m?(n.push(m),v("%cSucceeded converting to SF2 Modulator!",f.recognized)):W("Failed converting to SF2 Modulator!")}}}return e&&n.push(Z.copy(ci),Z.copy(gi)),{modulators:n,generators:i}}function Mr(o,e,t){if(o)for(;o.chunkData.currentIndex<o.chunkData.length;){let i=se(o.chunkData);this.verifyHeader(i,"art1");let n=Ki(i,!0);t.generators.push(...n.generators),t.modulators.push(...n.modulators)}if(e)for(;e.chunkData.currentIndex<e.chunkData.length;){let i=se(e.chunkData);this.verifyHeader(i,"art2");let n=Ki(i,!1);t.generators.push(...n.generators),t.modulators.push(...n.modulators)}}var Ii=class extends Ge{constructor(e,t){super(),this.keyRange=e,this.velRange=t,this.isGlobal=!0}setWavesample(e,t,i,n,s,A,g){t!==0&&this.generators.push(new q(I.sampleModes,t)),this.generators.push(new q(I.initialAttenuation,e)),this.isGlobal=!1,g-=s.samplePitchCorrection;let r=Math.trunc(g/100);r!==0&&this.generators.push(new q(I.coarseTune,r));let l=g-r*100;if(l!==0&&this.generators.push(new q(I.fineTune,l)),t!==0){let u=i.start-s.sampleLoopStartIndex,d=i.end-s.sampleLoopEndIndex;if(u!==0){let a=u%32768;this.generators.push(new q(I.startloopAddrsOffset,a));let c=Math.trunc(u/32768);c!==0&&this.generators.push(new q(I.startloopAddrsCoarseOffset,c))}if(d!==0){let a=d%32768;this.generators.push(new q(I.endloopAddrsOffset,a));let c=Math.trunc(d/32768);c!==0&&this.generators.push(new q(I.endloopAddrsCoarseOffset,c))}}n!==s.samplePitch&&this.generators.push(new q(I.overridingRootKey,n)),this.generators.push(new q(I.sampleID,A)),this.sample=s,s.useCount++}};function Fr(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(se(o.chunkData));let t=e.find(G=>G.header==="rgnh"),i=L(t.chunkData,2),n=L(t.chunkData,2),s=L(t.chunkData,2),A=L(t.chunkData,2),g=new Ii({min:i,max:n},{min:s,max:A});L(t.chunkData,2);let r=L(t.chunkData,2);r!==0&&g.generators.push(new q(I.exclusiveClass,r));let l=He(e,"lart"),u=He(e,"lar2");this.readLart(l,u,g),g.isGlobal=!1;let d=e.find(G=>G.header==="wsmp");L(d.chunkData,4);let a=L(d.chunkData,2),c=mt(d.chunkData[d.chunkData.currentIndex++],d.chunkData[d.chunkData.currentIndex++]),B=(L(d.chunkData,4)|0)/-655360;L(d.chunkData,4);let E=L(d.chunkData,4),S,y={start:0,end:0};if(E===0)S=0;else{L(d.chunkData,4),L(d.chunkData,4)===0?S=1:S=3,y.start=L(d.chunkData,4);let U=L(d.chunkData,4);y.end=y.start+U}let w=e.find(G=>G.header==="wlnk");if(w===void 0)return;L(w.chunkData,2),L(w.chunkData,2),L(w.chunkData,4);let k=L(w.chunkData,4),D=this.samples[k];if(D===void 0)throw new Error("Invalid sample ID!");let x=(B||D.sampleDbAttenuation)*10/.4;return g.setWavesample(x,S,y,a,D,k,c),g}var ui=class extends Qt{sampleDbAttenuation;sampleData;constructor(e,t,i,n,s,A,g,r){super(e,t,i,n,0,1,s,A),this.sampleData=g,this.sampleDbAttenuation=r}getAudioData(){return this.sampleData}getRawData(){if(this.isCompressed){if(!this.compressedData)throw new Error("Compressed but no data?? This shouldn't happen!!");return this.compressedData}return super.getRawData()}};var Rr={PCM:1,ALAW:6};function qa(o,e){let t=Math.pow(2,e*8-1),i=Math.pow(2,e*8),n,s=!1;e===1?(n=255,s=!0):n=t;let A=o.size/e,g=new Float32Array(A);for(let r=0;r<g.length;r++){let l=L(o.chunkData,e);s?g[r]=l/n-.5:(l>=t&&(l-=i),g[r]=l/n)}return g}function _a(o,e){let t=o.size/e,i=new Float32Array(t);for(let n=0;n<i.length;n++){let s=L(o.chunkData,e),A=s^85;A&=127;let g=A>>4,r=A&15;g>0&&(r+=16),r=(r<<4)+8,g>1&&(r=r<<g-1);let l=s>127?r:-r;i[n]=l/32678}return i}function Lr(o){Ee("%cLoading Wave samples...",f.recognized);let e=0;for(;o.chunkData.currentIndex<o.chunkData.length;){let t=se(o.chunkData);this.verifyHeader(t,"LIST"),this.verifyText(le(t.chunkData,4),"wave");let i=[];for(;t.chunkData.currentIndex<t.chunkData.length;)i.push(se(t.chunkData));let n=i.find(D=>D.header==="fmt ");if(!n)throw new Error("No fmt chunk in the wave file!");let s=L(n.chunkData,2),A=L(n.chunkData,2);if(A!==1)throw new Error(`Only mono samples are supported. Fmt reports ${A} channels`);let g=L(n.chunkData,4);L(n.chunkData,4),L(n.chunkData,2);let l=L(n.chunkData,2)/8,u=!1,d=i.find(D=>D.header==="data");d||this.parsingError("No data chunk in the WAVE chunk!");let a;switch(s){default:u=!0,a=new Float32Array(d.size/l);break;case Rr.PCM:a=qa(d,l);break;case Rr.ALAW:a=_a(d,l);break}let c=He(i,"INFO"),m=`Unnamed ${e}`;if(c){let D=se(c.chunkData);for(;D.header!=="INAM"&&c.chunkData.currentIndex<c.chunkData.length;)D=se(c.chunkData);D.header==="INAM"&&(m=le(D.chunkData,D.size).trim())}let B=60,E=0,S=0,y=a.length-1,w=0,k=i.find(D=>D.header==="wsmp");if(k){L(k.chunkData,4),B=L(k.chunkData,2),E=mt(k.chunkData[k.chunkData.currentIndex++],k.chunkData[k.chunkData.currentIndex++]);let D=Math.trunc(E/100);if(B+=D,E-=D*100,w=(L(k.chunkData,4)|0)/-655360,L(k.chunkData,4),L(k.chunkData,4)===1){L(k.chunkData,8),S=L(k.chunkData,4);let G=L(k.chunkData,4);y=S+G}}else W("No wsmp chunk in wave... using sane defaults.");u&&console.error(`Failed to load '${m}': Unsupported format: (${s})`),this.samples.push(new ui(m,g,B,E,S,y,a,w)),e++,v(`%cLoaded sample %c${m}`,f.info,f.recognized)}j()}var ht=class extends wt{constructor(e){super(),this.dataArray=new F(e),Ne("%cParsing DLS...",f.info),this.dataArray||(j(),this.parsingError("No data provided!"));let t=se(this.dataArray,!1);this.verifyHeader(t,"riff"),this.verifyText(le(this.dataArray,4).toLowerCase(),"dls ");let i=[];for(;this.dataArray.currentIndex<this.dataArray.length;)i.push(se(this.dataArray));this.soundFontInfo.ifil="2.1",this.soundFontInfo.isng="EMU8000",this.soundFontInfo.INAM="Unnamed DLS",this.soundFontInfo.IENG="Unknown",this.soundFontInfo.IPRD="SpessaSynth DLS",this.soundFontInfo.ICRD=new Date().toDateString();let n=He(i,"INFO");if(n)for(;n.chunkData.currentIndex<n.chunkData.length;){let r=se(n.chunkData);this.soundFontInfo[r.header]=le(r.chunkData,r.size)}this.soundFontInfo.ICMT=this.soundFontInfo.ICMT||"(No description)",this.soundFontInfo.ISBJ&&(this.soundFontInfo.ICMT+=`
`+this.soundFontInfo.ISBJ,delete this.soundFontInfo.ISBJ),this.soundFontInfo.ICMT+=`
Converted from DLS to SF2 with SpessaSynth`;for(let[r,l]of Object.entries(this.soundFontInfo))v(`%c"${r}": %c"${l}"`,f.info,f.recognized);let s=i.find(r=>r.header==="colh");s||(j(),this.parsingError("No colh chunk!")),this.instrumentAmount=L(s.chunkData,4),v(`%cInstruments amount: %c${this.instrumentAmount}`,f.info,f.recognized);let A=He(i,"wvpl");A||(j(),this.parsingError("No wvpl chunk!")),this.readDLSSamples(A);let g=He(i,"lins");g||(j(),this.parsingError("No lins chunk!")),this.readDLSInstrumentList(g),this.presets.sort((r,l)=>r.program-l.program+(r.bank-l.bank)),v(`%cParsing finished! %c"${this.soundFontInfo.INAM||"UNNAMED"}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,f.info,f.recognized,f.info,f.recognized,f.info,f.recognized,f.info,f.recognized,f.info),j()}verifyHeader(e,t){e.header.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`Invalid DLS chunk header! Expected "${t.toLowerCase()}" got "${e.header.toLowerCase()}"`))}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`FourCC error: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"`))}parsingError(e){throw new Error(`DLS parse error: ${e} The file may be corrupted.`)}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};ht.prototype.readDLSInstrumentList=Dr;ht.prototype.readDLSInstrument=br;ht.prototype.readRegion=Fr;ht.prototype.readLart=Mr;ht.prototype.readDLSSamples=Lr;var kt=kt!==void 0?kt:{},Gr=!1,Tr;kt.isInitialized=new Promise(o=>Tr=o);var Ha=function(o){var e,t,i,n,s,A,g,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=r.indexOf(o.charAt(u++)),s=r.indexOf(o.charAt(u++)),A=r.indexOf(o.charAt(u++)),g=r.indexOf(o.charAt(u++)),e=n<<2|s>>4,t=(15&s)<<4|A>>2,i=(3&A)<<6|g,l+=String.fromCharCode(e),A!==64&&(l+=String.fromCharCode(t)),g!==64&&(l+=String.fromCharCode(i));while(u<o.length);return l};(function(){var o,e,t,i,n,s,A,g,r,l,u,d,a,c,m,B,E,S,y,w,k,D,h=h!==void 0?h:{};h.wasmBinary=Uint8Array.from(Ha("AGFzbQEAAAABpQEYYAJ/fwF/YAF/AGAAAX9gBH9/f38AYAAAYAN/f38Bf2ABfwF/YAJ/fwBgBn9/f39/fwF/YAR/f39/AX9gBX9/f39/AX9gB39/f39/f38Bf2AGf39/f39/AGAIf39/f39/f38Bf2AFf39/f38AYAd/f39/f39/AGADf39/AGABfwF9YAF9AX1gAnx/AXxgAnx/AX9gA3x8fwF8YAJ8fAF8YAF8AXwCngIPA2VudgZtZW1vcnkCAIACA2VudgV0YWJsZQFwAQQEA2Vudgl0YWJsZUJhc2UDfwADZW52DkRZTkFNSUNUT1BfUFRSA38AA2VudghTVEFDS1RPUAN/AANlbnYJU1RBQ0tfTUFYA38ABmdsb2JhbAhJbmZpbml0eQN8AANlbnYFYWJvcnQAAQNlbnYNZW5sYXJnZU1lbW9yeQACA2Vudg5nZXRUb3RhbE1lbW9yeQACA2VudhdhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeQACA2Vudg5fX19hc3NlcnRfZmFpbAADA2VudgtfX19zZXRFcnJObwABA2VudgZfYWJvcnQABANlbnYWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwAFA3d2BgYCAQcHAQIBAQcBCAcFAAkGCQoHBgYGBgEFBgIBBgYKAAgLAAYGBgYGBgYBAAoMDAMGBQANCAoJAAwODA8OAQAGBgcEABAJEAERAAADBQwAAAMHBxIGAQAABwIFEwMOBw8HBgYQFAoVExYXFxcXFgQFBQYFAAYkB38BIwELfwEjAgt/ASMDC38BQQALfwFBAAt8ASMEC38BQQALB9MCFRBfX2dyb3dXYXNtTWVtb3J5AAgRX19fZXJybm9fbG9jYXRpb24AYwVfZnJlZQBfB19tYWxsb2MAXgdfbWVtY3B5AHkHX21lbXNldAB6BV9zYnJrAHsXX3N0Yl92b3JiaXNfanNfY2hhbm5lbHMAJhRfc3RiX3ZvcmJpc19qc19jbG9zZQAlFV9zdGJfdm9yYmlzX2pzX2RlY29kZQAoE19zdGJfdm9yYmlzX2pzX29wZW4AJBpfc3RiX3ZvcmJpc19qc19zYW1wbGVfcmF0ZQAnC2R5bkNhbGxfaWlpAHwTZXN0YWJsaXNoU3RhY2tTcGFjZQAMC2dldFRlbXBSZXQwAA8LcnVuUG9zdFNldHMAeAtzZXRUZW1wUmV0MAAOCHNldFRocmV3AA0Kc3RhY2tBbGxvYwAJDHN0YWNrUmVzdG9yZQALCXN0YWNrU2F2ZQAKCQoBACMACwR9VFl9Csb2A3YGACAAQAALGwEBfyMGIQEjBiAAaiQGIwZBD2pBcHEkBiABCwQAIwYLBgAgACQGCwoAIAAkBiABJAcLEAAjCEUEQCAAJAggASQJCwsGACAAJAsLBAAjCwsRACAABEAgABARIAAgABASCwvvBwEKfyAAQYADaiEHIAcoAgAhBQJAIAUEQCAAQfwBaiEEIAQoAgAhASABQQBKBEAgAEHwAGohCANAIAUgAkEYbGpBEGohCSAJKAIAIQEgAQRAIAgoAgAhAyAFIAJBGGxqQQ1qIQogCi0AACEGIAZB/wFxIQYgAyAGQbAQbGpBBGohAyADKAIAIQMgA0EASgRAQQAhAwNAIAEgA0ECdGohASABKAIAIQEgACABEBIgA0EBaiEDIAgoAgAhASAKLQAAIQYgBkH/AXEhBiABIAZBsBBsakEEaiEBIAEoAgAhBiAJKAIAIQEgAyAGSA0ACwsgACABEBILIAUgAkEYbGpBFGohASABKAIAIQEgACABEBIgAkEBaiECIAQoAgAhASACIAFODQMgBygCACEFDAAACwALCwsgAEHwAGohAyADKAIAIQEgAQRAIABB7ABqIQUgBSgCACECIAJBAEoEQEEAIQIDQAJAIAEgAkGwEGxqQQhqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQRxqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQSBqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQaQQaiEEIAQoAgAhBCAAIAQQEiABIAJBsBBsakGoEGohASABKAIAIQEgAUUhBCABQXxqIQFBACABIAQbIQEgACABEBIgAkEBaiECIAUoAgAhASACIAFODQAgAygCACEBDAELCyADKAIAIQELIAAgARASCyAAQfgBaiEBIAEoAgAhASAAIAEQEiAHKAIAIQEgACABEBIgAEGIA2ohAyADKAIAIQEgAQRAIABBhANqIQUgBSgCACECIAJBAEoEQEEAIQIDQCABIAJBKGxqQQRqIQEgASgCACEBIAAgARASIAJBAWohAiAFKAIAIQcgAygCACEBIAIgB0gNAAsLIAAgARASCyAAQQRqIQIgAigCACEBIAFBAEoEQEEAIQEDQCAAQZQGaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQZQHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQdgHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiABQQFqIQEgAigCACEDIAEgA0ghAyABQRBJIQUgBSADcQ0ACwtBACEBA0AgAEGgCGogAUECdGohAiACKAIAIQIgACACEBIgAEGoCGogAUECdGohAiACKAIAIQIgACACEBIgAEGwCGogAUECdGohAiACKAIAIQIgACACEBIgAEG4CGogAUECdGohAiACKAIAIQIgACACEBIgAEHACGogAUECdGohAiACKAIAIQIgACACEBIgAUEBaiEBIAFBAkcNAAsLGwAgAEHEAGohACAAKAIAIQAgAEUEQCABEF8LC3wBAX8gAEHUB2ohASABQQA2AgAgAEGAC2ohASABQQA2AgAgAEH4CmohASABQQA2AgAgAEGcCGohASABQQA2AgAgAEHVCmohASABQQA6AAAgAEH8CmohASABQQA2AgAgAEHUC2ohASABQQA2AgAgAEHYC2ohACAAQQA2AgAL8AQBB38jBiELIwZBEGokBiALQQhqIQcgC0EEaiEKIAshCCAAQSRqIQYgBiwAACEGAn8gBgR/IABBgAtqIQYgBigCACEGIAZBf0oEQCAFQQA2AgAgACABIAIQFgwCCyAAQRRqIQYgBiABNgIAIAEgAmohAiAAQRxqIQkgCSACNgIAIABB2ABqIQIgAkEANgIAIABBABAXIQkgCUUEQCAFQQA2AgBBAAwCCyAAIAcgCCAKEBghCSAJBEAgBygCACECIAgoAgAhCSAKKAIAIQggACACIAkgCBAaIQogByAKNgIAIABBBGohAiACKAIAIQggCEEASgRAQQAhAgNAIABBlAZqIAJBAnRqIQcgBygCACEHIAcgCUECdGohByAAQdQGaiACQQJ0aiEMIAwgBzYCACACQQFqIQIgAiAISA0ACwsgAwRAIAMgCDYCAAsgBSAKNgIAIABB1AZqIQAgBCAANgIAIAYoAgAhACAAIAFrDAILAkACQAJAAkACQCACKAIAIgNBIGsOBAECAgACCyACQQA2AgAgAEHUAGohAiAAEBkhAwJAIANBf0cEQANAIAIoAgAhAyADDQIgABAZIQMgA0F/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ACECIABBmAhqIQYgBigCACEHIAUgA2shCSAJIAdqIQkgAiAJSSEJIAIgB0khDSACIAdrIQJBACACIA0bIQIgAiADaiECIAIgBUohByAFIAIgBxshAiAJBEAgASACNgIAIAYoAgAhACAAIAJqIQAgBiAANgIAQQEMBgsLCyAAQfQKaiECIAIoAgAhAiADIB9rIQYgBiACaiEGIABBmAhqIQIgAiAGNgIAIAhBATYCAAwBBSAAQZgIaiECIAYNAQsMAQsgBCADayEDIAIoAgAhBCADIARqIQMgAiADNgIACyATKAIAIQIgAgRAIABByABqIQIgAigCACECIABB0ABqIQAgACgCACEAIAIgAEcEQEHTE0HEE0HkGkHnFBAECwsgASAFNgIAQQELIQAgHCQGIAALqAIBBX8gAEHoCmohBSAFKAIAIQICQCACQQBIBEBBACEABSACIAFIBEAgAUEYSgRAIABBGBAsIQIgAUFoaiEBIAAgARAsIQAgAEEYdCEAIAAgAmohACAADwsgAkUEQCAAQeQKaiECIAJBADYCAAsgAEHkCmohAwJAAkACQANAIAAQLiECIAJBf0YNASAFKAIAIQQgAiAEdCECIAMoAgAhBiAGIAJqIQIgAyACNgIAIAUgBEEIaiICNgIAIAIgAUgNAAwCAAsACyAFQX82AgBBACEADAQLIARBeEgEQEEAIQAMBAsLCyAAQeQKaiEEIAQoAgAhA0EBIAF0IQAgAEF/aiEAIAMgAHEhACADIAF2IQMgBCADNgIAIAIgAWshASAFIAE2AgALCyAAC40CAAJAIABBAEgEf0EABSAAQYCAAUgEQCAAQRBIBEAgAEGACGohACAALAAAIQAMAwsgAEGABEgEQCAAQQV2IQAgAEGACGohACAALAAAIQAgAEEFaiEABSAAQQp2IQAgAEGACGohACAALAAAIQAgAEEKaiEACwwCCyAAQYCAgAhIBH8gAEGAgCBIBH8gAEEPdiEAIABBgAhqIQAgACwAACEAIABBD2oFIABBFHYhACAAQYAIaiEAIAAsAAAhACAAQRRqCwUgAEGAgICAAkgEfyAAQRl2IQAgAEGACGohACAALAAAIQAgAEEZagUgAEEediEAIABBgAhqIQAgACwAACEAIABBHmoLCwshAAsgAAuiAQEDfyAAQdQKaiECIAIsAAAhAQJAAkAgAQ0AIABB3ApqIQEgASgCACEBIAEEQEF/IQMFIAAQLyEBIAEEQCACLAAAIQEgAQ0CQaEUQcQTQfYLQbUUEAQFQX8hAwsLDAELIAFBf2pBGHRBGHUhASACIAE6AAAgAEHsCmohASABKAIAIQIgAkEBaiECIAEgAjYCACAAEDAhACAAQf8BcSEDCyADC6wCAQd/IABB3ApqIQIgAigCACEBAkAgAUUEQCAAQdgKaiEEIAQoAgAhASABQX9GBEAgAEHQCGohASABKAIAIQEgAUF/aiEBIABB4ApqIQMgAyABNgIAIAAQMSEBIAFFBEAgAkEBNgIADAMLIABB0wpqIQEgASwAACEBIAFBAXEhASABBH8gBCgCAAUgAEEgEBUMAwshAQsgAUEBaiEHIAQgBzYCACAAQdQIaiABaiEDIAMsAAAhBiAGQf8BcSEDIAZBf0cEQCACQQE2AgAgAEHgCmohAiACIAE2AgALIABB0AhqIQEgASgCACEBIAcgAU4EQCAEQX82AgALIABB1ApqIQAgACwAACEBIAEEQEHFFEHEE0HoC0HaFBAEBSAAIAY6AAAgAyEFCwsLIAULUQEDfyAAQRRqIQMgAygCACEBIABBHGohAiACKAIAIQIgASACSQR/IAFBAWohACADIAA2AgAgASwAAAUgAEHUAGohACAAQQE2AgBBAAshACAACyABAX8gABAyIQEgAQR/IAAQMwUgAEEeEBVBAAshACAAC2ABAX8gABAwIQEgAUH/AXFBzwBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQAgAEH/AXFB0wBGIQAFQQAhAAsFQQAhAAsFQQAhAAsgAAvZAwEGfyAAEDAhAQJ/IAFB/wFxBH8gAEEfEBVBAAUgABAwIQEgAEHTCmohAiACIAE6AAAgABAjIQUgABAjIQIgABAjGiAAECMhASAAQcwIaiEDIAMgATYCACAAECMaIAAQMCEBIAFB/wFxIQEgAEHQCGohAyADIAE2AgAgAEHUCGohBCAAIAQgARAiIQEgAUUEQCAAQQoQFUEADAILIABB8ApqIQQgBEF+NgIAIAIgBXEhAQJAIAFBf0cEQCADKAIAIQEgAUEASgRAA0ACQCABQX9qIQIgAEHUCGogAmohBiAGLAAAIQYgBkF/Rw0AIAFBAUwNBCACIQEMAQsLIAQgAjYCACAAQfQKaiEBIAEgBTYCAAsLCyAAQdUKaiEBIAEsAAAhASABBEAgAygCACEDIANBAEoEf0EAIQJBACEBA0AgAEHUCGogAWohBCAELQAAIQQgBEH/AXEhBCACIARqIQIgAUEBaiEBIAEgA0gNAAsgAkEbagVBGwshASAAQShqIQIgAigCACECIAEgA2ohASABIAJqIQEgAEEsaiEDIAMgAjYCACAAQTBqIQIgAiABNgIAIABBNGohASABIAU2AgALIABB2ApqIQAgAEEANgIAQQELCyEAIAALowEBB38gAEHoCmohAyADKAIAIQECQCABQRlIBEAgAEHkCmohBCABRQRAIARBADYCAAsgAEHUCmohBSAAQdwKaiEGA0AgBigCACEBIAEEQCAFLAAAIQEgAUUNAwsgABAuIQIgAkF/Rg0CIAMoAgAhASACIAF0IQIgBCgCACEHIAcgAmohAiAEIAI2AgAgAUEIaiECIAMgAjYCACABQRFIDQALCwsLrQUBCX8gABA0IAFBIGohAiACKAIAIQUCQAJAIAVFIgNFDQAgAUGkEGohAiACKAIAIQIgAg0AQX8hAQwBCyABQQRqIQIgAigCACECAkACQCACQQhKBEAgAUGkEGohAyADKAIAIQMgAw0BBSADDQELDAELIABB5ApqIQggCCgCACEJIAkQOiEHIAFBrBBqIQIgAigCACECIAJBAUoEQCABQaQQaigCACEKQQAhAwNAIAJBAXYhBSAFIANqIQQgCiAEQQJ0aiEGIAYoAgAhBiAGIAdLIQYgAiAFayECIAMgBCAGGyEDIAUgAiAGGyECIAJBAUoNAAsFQQAhAwsgAUEXaiECIAIsAAAhAiACRQRAIAFBqBBqIQIgAigCACECIAIgA0ECdGohAiACKAIAIQMLIAFBCGohASABKAIAIQEgASADaiEBIAEtAAAhASABQf8BcSEBIABB6ApqIQIgAigCACEAIAAgAUgEf0EAIQBBfwUgACABayEAIAkgAXYhASAIIAE2AgAgAwshASACIAA2AgAMAQsgAUEXaiEDIAMsAAAhAyADBEBBgRVBxBNB6gxBjBUQBAsCQCACQQBKBEAgASgCCCEIIABB5ApqIQlBACEBA0ACQCAIIAFqIQMgAywAACEEIARB/wFxIQMgBEF/RwRAIAUgAUECdGoh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IwZBEGokBiACIQECfCAAvUIgiKdB/////wdxIgNB/MOk/wNJBHwgA0GewZryA0kEfEQAAAAAAADwPwUgAEQAAAAAAAAAABByCwUgACAAoSADQf//v/8HSw0BGgJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwgQcgwECyABKwMAIAErAwhBARBwmgwDCyABKwMAIAErAwgQcpoMAgsgASsDACABKwMIQQEQcAsLIQAgAiQGIAALywEBA38jBiECIwZBEGokBiACIQECQCAAvUIgiKdB/////wdxIgNB/MOk/wNJBEAgA0GAgMDyA08EQCAARAAAAAAAAAAAQQAQcCEACwUgA0H//7//B0sEQCAAIAChIQAMAgsCQAJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwhBARBwIQAMBQsgASsDACABKwMIEHIhAAwECyABKwMAIAErAwhBARBwmiEADAMLIAErAwAgASsDCBBymiEACwsLIAIkBiAAC5sDAwJ/AX4CfCAAvSIDQj+IpyEBAnwCfwJAIANCIIinQf////8HcSICQarGmIQESwR8IANC////////////AINCgICAgICAgPj/AFYEQCAADwsgAETvOfr+Qi6GQGQEQCAARAAAAAAAAOB/og8FIABE0rx63SsjhsBjIABEUTAt1RBJh8BjcUUNAkQAAAAAAAAAACIADwsABSACQcLc2P4DSwRAIAJBscXC/wNLDQIgAUEBcyABawwDCyACQYCAwPEDSwR8QQAhASAABSAARAAAAAAAAPA/oA8LCwwCCyAARP6CK2VHFfc/oiABQQN0QYATaisDAKCqCyEBIAAgAbciBEQAAOD+Qi7mP6KhIgAgBER2PHk17znqPaIiBaELIQQgACAEIAQgBCAEoiIAIAAgACAAIABE0KS+cmk3Zj6iRPFr0sVBvbu+oKJELN4lr2pWET+gokSTvb4WbMFmv6CiRD5VVVVVVcU/oKKhIgCiRAAAAAAAAABAIAChoyAFoaBEAAAAAAAA8D+gIQAgAUUEQCAADwsgACABEGULnwMDAn8BfgV8IAC9IgNCIIinIQECfyADQgBTIgIgAUGAgMAASXIEfyADQv///////////wCDQgBRBEBEAAAAAAAA8L8gACAAoqMPCyACRQRAIABEAAAAAAAAUEOi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mgDjqR0AXmGRAAgb5gCFmWUAoBRfAI1AaACA2P8AJ3NNAAYGMQDKVhUAyahzAHviYABrjMAAQcMSC11A+yH5PwAAAAAtRHQ+AAAAgJhG+DwAAABgUcx4OwAAAICDG/A5AAAAQCAlejgAAACAIoLjNgAAAAAd82k1AAAAAAAA4D8AAAAAAADgvwAAAAAAAPA/AAAAAAAA+D8AQagTCwgG0M9D6/1MPgBBuxMLigZAA7jiP09nZ1MuL3N0Yl92b3JiaXMuYwBmLT5hbGxvYy5hbGxvY19idWZmZXJfbGVuZ3RoX2luX2J5dGVzID09IGYtPnRlbXBfb2Zmc2V0AHZvcmJpc19kZWNvZGVfaW5pdGlhbABmLT5ieXRlc19pbl9zZWcgPiAwAGdldDhfcGFja2V0X3JhdwBmLT5ieXRlc19pbl9zZWcgPT0gMABuZXh0X3NlZ21lbnQAdm9yYmlzX2RlY29kZV9wYWNrZXRfcmVzdAAhYy0+c3BhcnNlAGNvZGVib29rX2RlY29kZV9zY2FsYXJfcmF3ACFjLT5zcGFyc2UgfHwgeiA8IGMtPnNvcnRlZF9lbnRyaWVzAGNvZGVib29rX2RlY29kZV9kZWludGVybGVhdmVfcmVwZWF0AHogPCBjLT5zb3J0ZWRfZW50cmllcwBjb2RlYm9va19kZWNvZGVfc3RhcnQAKG4gJiAzKSA9PSAwAGltZGN0X3N0ZXAzX2l0ZXIwX2xvb3AAMABnZXRfd2luZG93AGYtPnRlbXBfb2Zmc2V0ID09IGYtPmFsbG9jLmFsbG9jX2J1ZmZlcl9sZW5ndGhfaW5fYnl0ZXMAc3RhcnRfZGVjb2RlcgB2b3JiaXNjLT5zb3J0ZWRfZW50cmllcyA9PSAwAGNvbXB1dGVfY29kZXdvcmRzAHogPj0gMCAmJiB6IDwgMzIAbGVuW2ldID49IDAgJiYgbGVuW2ldIDwgMzIAYXZhaWxhYmxlW3ldID09IDAAayA9PSBjLT5zb3J0ZWRfZW50cmllcwBjb21wdXRlX3NvcnRlZF9odWZmbWFuAGMtPnNvcnRlZF9jb2Rld29yZHNbeF0gPT0gY29kZQBsZW4gIT0gTk9fQ09ERQBpbmNsdWRlX2luX3NvcnQAcG93KChmbG9hdCkgcisxLCBkaW0pID4gZW50cmllcwBsb29rdXAxX3ZhbHVlcwAoaW50KSBmbG9vcihwb3coKGZsb2F0KSByLCBkaW0pKSA8PSBlbnRyaWVzAOoPBG5hbWUB4g9+AAVhYm9ydAENZW5sYXJnZU1lbW9yeQIOZ2V0VG90YWxNZW1vcnkDF2Fib3J0T25DYW5ub3RHcm93TWVtb3J5BA5fX19hc3NlcnRfZmFpbAULX19fc2V0RXJyTm8GBl9hYm9ydAcWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwgQX19ncm93V2FzbU1lbW9yeQkKc3RhY2tBbGxvYwoJc3RhY2tTYXZlCwxzdGFja1Jlc3RvcmUME2VzdGFibGlzaFN0YWNrU3BhY2UNCHNldFRocmV3DgtzZXRUZW1wUmV0MA8LZ2V0VGVtcFJldDAQEV9zdGJfdm9yYmlzX2Nsb3NlEQ5fdm9yYmlzX2RlaW5pdBILX3NldHVwX2ZyZWUTGl9zdGJfdm9yYmlzX2ZsdXNoX3B1c2hkYXRhFCFfc3RiX3ZvcmJpc19kZWNvZGVfZnJhbWVfcHVzaGRhdGEVBl9lcnJvchYgX3ZvcmJpc19zZWFyY2hfZm9yX3BhZ2VfcHVzaGRhdGEXGF9pc193aG9sZV9wYWNrZXRfcHJlc2VudBgVX3ZvcmJpc19kZWNvZGVfcGFja2V0GQxfZ2V0OF9wYWNrZXQaFF92b3JiaXNfZmluaXNoX2ZyYW1lGxlfc3RiX3ZvcmJpc19vcGVuX3B1c2hkYXRhHAxfdm9yYmlzX2luaXQdDl9zdGFydF9kZWNvZGVyHg1fdm9yYmlzX2FsbG9jHxtfc3RiX3ZvcmJpc19nZXRfZmlsZV9vZmZzZXQgE19tYXliZV9zdGFydF9wYWNrZXQhDV9mbHVzaF9wYWNrZXQiBV9nZXRuIwZfZ2V0MzIkE19zdGJfdm9yYmlzX2pzX29wZW4lFF9zdGJfdm9yYmlzX2pzX2Nsb3NlJhdfc3RiX3ZvcmJpc19qc19jaGFubmVscycaX3N0Yl92b3JiaXNfanNfc2FtcGxlX3JhdGUoFV9zdGJfdm9yYmlzX2pzX2RlY29kZSkNX2NyYzMyX3VwZGF0ZSoWX3ZvcmJpc19kZWNvZGVfaW5pdGlhbCsaX3ZvcmJpc19kZWNvZGVfcGFja2V0X3Jlc3QsCV9nZXRfYml0cy0FX2lsb2cuEF9nZXQ4X3BhY2tldF9yYXcvDV9uZXh0X3NlZ21lbnQwBV9nZXQ4MQtfc3RhcnRfcGFnZTIQX2NhcHR1cmVfcGF0dGVybjMdX3N0YXJ0X3BhZ2Vfbm9fY2FwdHVyZXBhdHRlcm40DV9wcmVwX2h1ZmZtYW41G19jb2RlYm9va19kZWNvZGVfc2NhbGFyX3JhdzYOX3ByZWRpY3RfcG9pbnQ3D19kZWNvZGVfcmVzaWR1ZTgJX2RvX2Zsb29yOQ1faW52ZXJzZV9tZGN0OgxfYml0X3JldmVyc2U7EV9tYWtlX2Jsb2NrX2FycmF5PBJfc2V0dXBfdGVtcF9tYWxsb2M9JF9jb2RlYm9va19kZWNvZGVfZGVpbnRlcmxlYXZlX3JlcGVhdD4PX3Jlc2lkdWVfZGVjb2RlPxVfY29kZWJvb2tfZGVjb2RlX3N0ZXBAEF9jb2RlYm9va19kZWNvZGVBFl9jb2RlYm9va19kZWNvZGVfc3RhcnRCCl9kcmF3X2xpbmVDF19pbWRjdF9zdGVwM19pdGVyMF9sb29wRBlfaW1kY3Rfc3RlcDNfaW5uZXJfcl9sb29wRRlfaW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wRh9faW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wX2xkNjU0RwhfaXRlcl81NEgLX2dldF93aW5kb3dJEF92b3JiaXNfdmFsaWRhdGVKDV9zdGFydF9wYWNrZXRLBV9za2lwTAtfY3JjMzJfaW5pdE0NX3NldHVwX21hbGxvY04QX3NldHVwX3RlbXBfZnJlZU8SX2NvbXB1dGVfY29kZXdvcmRzUBdfY29tcHV0ZV9zb3J0ZWRfaHVmZm1hblEcX2NvbXB1dGVfYWNjZWxlcmF0ZWRfaHVmZm1hblIPX2Zsb2F0MzJfdW5wYWNrUw9fbG9va3VwMV92YWx1ZXNUDl9wb2ludF9jb21wYXJlVQpfbmVpZ2hib3JzVg9faW5pdF9ibG9ja3NpemVXCl9hZGRfZW50cnlYEF9pbmNsdWRlX2luX3NvcnRZD191aW50MzJfY29tcGFyZVoYX2NvbXB1dGVfdHdpZGRsZV9mYWN0b3JzWw9fY29tcHV0ZV93aW5kb3dcE19jb21wdXRlX2JpdHJldmVyc2VdB19zcXVhcmVeB19tYWxsb2NfBV9mcmVlYAhfcmVhbGxvY2ESX3RyeV9yZWFsbG9jX2NodW5rYg5fZGlzcG9zZV9jaHVua2MRX19fZXJybm9fbG9jYXRpb25kB19tZW1jbXBlB19zY2FsYm5mBl9xc29ydGcFX3NpZnRoBF9zaHJpCF90cmlua2xlagRfc2hsawVfcG50emwIX2FfY3R6X2xtBl9jeWNsZW4LX19fcmVtX3BpbzJvEV9fX3JlbV9waW8yX2xhcmdlcAZfX19zaW5xBl9sZGV4cHIGX19fY29zcwRfY29zdARfc2ludQRfZXhwdgRfbG9ndwRfcG93eAtydW5Qb3N0U2V0c3kHX21lbWNweXoHX21lbXNldHsFX3Nicmt8C2R5bkNhbGxfaWlpfQJiMA=="),function(C){return C.charCodeAt(0)});var h=h!==void 0?h:{},x={};for(o in h)h.hasOwnProperty(o)&&(x[o]=h[o]);h.arguments=[],h.thisProgram="./this.program",h.quit=function(C,p){throw p},h.preRun=[],h.postRun=[];var G=!1,U=!1,O=!1,H=!1;G=typeof window=="object",U=typeof importScripts=="function",O=typeof process=="object"&&typeof Dn=="function"&&!G&&!U,H=!G&&!O&&!U;var X="";function ie(C){return h.locateFile?h.locateFile(C,X):X+C}O?(X=__dirname+"/",h.read=function(p,Q){var b;return e||(e=void 0),t||(t=void 0),p=t.normalize(p),b=e.readFileSync(p),Q?b:b.toString()},h.readBinary=function(p){var Q=h.read(p,!0);return Q.buffer||(Q=new Uint8Array(Q)),ut(Q.buffer),Q},process.argv.length>1&&(h.thisProgram=process.argv[1].replace(/\\/g,"/")),h.arguments=process.argv.slice(2),typeof module<"u",process.on("uncaughtException",function(C){if(!(C instanceof io))throw C}),process.on("unhandledRejection",function(C,p){process.exit(1)}),h.quit=function(C){process.exit(C)},h.inspect=function(){return"[Emscripten Module object]"}):H?(typeof read<"u"&&(h.read=function(p){return read(p)}),h.readBinary=function(p){var Q;return typeof readbuffer=="function"?new Uint8Array(readbuffer(p)):(ut(typeof(Q=read(p,"binary"))=="object"),Q)},typeof scriptArgs<"u"?h.arguments=scriptArgs:typeof arguments<"u"&&(h.arguments=arguments),typeof quit=="function"&&(h.quit=function(C){quit(C)})):(G||U)&&(G?document.currentScript&&(X=document.currentScript.src):X=self.location.href,X=X.indexOf("blob:")!==0?X.split("/").slice(0,-1).join("/")+"/":"",h.read=function(p){var Q=new XMLHttpRequest;return Q.open("GET",p,!1),Q.send(null),Q.responseText},U&&(h.readBinary=function(p){var Q=new XMLHttpRequest;return Q.open("GET",p,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),h.readAsync=function(p,Q,b){var P=new XMLHttpRequest;P.open("GET",p,!0),P.responseType="arraybuffer",P.onload=function(){if(P.status==200||P.status==0&&P.response){Q(P.response);return}b()},P.onerror=b,P.send(null)},h.setWindowTitle=function(C){document.title=C});var T=h.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),K=h.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||T);for(o in x)x.hasOwnProperty(o)&&(h[o]=x[o]);function ge(C){var p=c;return c=c+C+15&-16,p}function je(C){var p=r[w>>2],Q=p+C+15&-16;return r[w>>2]=Q,Q>=ke&&!Cn()?(r[w>>2]=p,0):p}function Se(C,p){return p||(p=16),C=Math.ceil(C/p)*p}function Pt(C){switch(C){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if(C[C.length-1]==="*")return 4;if(C[0]!=="i")return 0;var p=parseInt(C.substr(1));return ut(p%8==0),p/8}}function it(C){it.shown||(it.shown={}),it.shown[C]||(it.shown[C]=1,K(C))}x=void 0;var Ot={"f64-rem":function(C,p){return C%p},debugger:function(){}},$t=[];function rn(C,p){for(var Q=0,b=Q;b<Q+0;b++)if(!$t[b])return $t[b]=C,1+b;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."}function an(C){$t[C-1]=null}var eo={};function tl(C,p){if(C){ut(p),eo[p]||(eo[p]={});var Q=eo[p];return Q[C]||(p.length===1?Q[C]=function(){return Bi(p,C)}:p.length===2?Q[C]=function(P){return Bi(p,C,[P])}:Q[C]=function(){return Bi(p,C,Array.prototype.slice.call(arguments))}),Q[C]}}function ol(C,p,Q){return Q?+(C>>>0)+4294967296*+(p>>>0):+(C>>>0)+4294967296*+(0|p)}function Bi(C,p,Q){return Q&&Q.length?h["dynCall_"+C].apply(null,[p].concat(Q)):h["dynCall_"+C].call(null,p)}var So=0,ln=0;function ut(C,p){C||lt("Assertion failed: "+p)}function cn(C){var p=h["_"+C];return ut(p,"Cannot call unknown function "+C+", make sure it is exported"),p}var gn={stackSave:function(){bi()},stackRestore:function(){Di()},arrayToC:function(C){var p,Q,b=xo(C.length);return p=C,Q=b,n.set(p,Q),b},stringToC:function(C){var p=0;if(C!=null&&C!==0){var Q=(C.length<<2)+1;p=xo(Q),In(C,p,Q)}return p}},Wr={string:gn.stringToC,array:gn.arrayToC};function dn(C,p,Q,b,P){var te=cn(C),ne=[],J=0;if(b)for(var De=0;De<b.length;De++){var me=Wr[Q[De]];me?(J===0&&(J=bi()),ne[De]=me(b[De])):ne[De]=b[De]}var Ce,he=te.apply(null,ne);return he=(Ce=he,p==="string"?wo(Ce):p==="boolean"?!!Ce:Ce),J!==0&&Di(J),he}function Zr(C,p,Q,b){switch((Q=Q||"i8").charAt(Q.length-1)==="*"&&(Q="i32"),Q){case"i1":case"i8":n[C>>0]=p;break;case"i16":A[C>>1]=p;break;case"i32":r[C>>2]=p;break;case"i64":tempI64=[p>>>0,+ta(tempDouble=p)>=1?tempDouble>0?(0|ia(+Qn(tempDouble/4294967296),4294967295))>>>0:~~+oa((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0],r[C>>2]=tempI64[0],r[C+4>>2]=tempI64[1];break;case"float":u[C>>2]=p;break;case"double":d[C>>3]=p;break;default:lt("invalid type for setValue: "+Q)}}function il(C,p,Q){switch((p=p||"i8").charAt(p.length-1)==="*"&&(p="i32"),p){case"i1":case"i8":return n[C>>0];case"i16":return A[C>>1];case"i32":case"i64":return r[C>>2];case"float":return u[C>>2];case"double":return d[C>>3];default:lt("invalid type for getValue: "+p)}return null}function nl(C,p,Q,b){typeof C=="number"?(te=!0,ne=C):(te=!1,ne=C.length);var P=typeof p=="string"?p:null;if(J=Q==4?b:[typeof vo=="function"?vo:ge,xo,ge,je][Q===void 0?2:Q](Math.max(ne,P?1:p.length)),te){for(b=J,ut((3&J)==0),De=J+(-4&ne);b<De;b+=4)r[b>>2]=0;for(De=J+ne;b<De;)n[b++>>0]=0;return J}if(P==="i8")return C.subarray||C.slice?s.set(C,J):s.set(new Uint8Array(C),J),J;for(var te,ne,J,De,me,Ce,he,ee=0;ee<ne;){var Te=C[ee];if((me=P||p[ee])===0){ee++;continue}me=="i64"&&(me="i32"),Zr(J+ee,Te,me),he!==me&&(Ce=Pt(me),he=me),ee+=Ce}return J}function sl(C){return m?wi?vo(C):je(C):ge(C)}function wo(C,p){if(p===0||!C)return"";for(var Q,b,P,te=0,ne=0;te|=b=s[C+ne>>0],(b!=0||p)&&(ne++,!p||ne!=p););p||(p=ne);var J="";if(te<128){for(;p>0;)P=String.fromCharCode.apply(String,s.subarray(C,C+Math.min(p,1024))),J=J?J+P:P,C+=1024,p-=1024;return J}return Q=C,function(me,Ce){for(var he=Ce;me[he];)++he;if(he-Ce>16&&me.subarray&&hn)return hn.decode(me.subarray(Ce,he));for(var ee,Te,Ve,Je,Ke,vt,ze="";;){if(!(ee=me[Ce++]))return ze;if(!(128&ee)){ze+=String.fromCharCode(ee);continue}if(Te=63&me[Ce++],(224&ee)==192){ze+=String.fromCharCode((31&ee)<<6|Te);continue}if(Ve=63&me[Ce++],(240&ee)==224?ee=(15&ee)<<12|Te<<6|Ve:(Je=63&me[Ce++],(248&ee)==240?ee=(7&ee)<<18|Te<<12|Ve<<6|Je:(Ke=63&me[Ce++],ee=(252&ee)==248?(3&ee)<<24|Te<<18|Ve<<12|Je<<6|Ke:(1&ee)<<30|Te<<24|Ve<<18|Je<<12|Ke<<6|(vt=63&me[Ce++]))),ee<65536)ze+=String.fromCharCode(ee);else{var no=ee-65536;ze+=String.fromCharCode(55296|no>>10,56320|1023&no)}}}(s,Q)}function Al(C){for(var p="";;){var Q=n[C++>>0];if(!Q)return p;p+=String.fromCharCode(Q)}}function rl(C,p){return function(b,P,te){for(var ne=0;ne<b.length;++ne)n[P++>>0]=b.charCodeAt(ne);te||(n[P>>0]=0)}(C,p,!1)}var hn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ko(C,p,Q,b){if(!(b>0))return 0;for(var P=Q,te=Q+b-1,ne=0;ne<C.length;++ne){var J=C.charCodeAt(ne);if(J>=55296&&J<=57343&&(J=65536+((1023&J)<<10)|1023&C.charCodeAt(++ne)),J<=127){if(Q>=te)break;p[Q++]=J}else if(J<=2047){if(Q+1>=te)break;p[Q++]=192|J>>6,p[Q++]=128|63&J}else if(J<=65535){if(Q+2>=te)break;p[Q++]=224|J>>12,p[Q++]=128|J>>6&63,p[Q++]=128|63&J}else if(J<=2097151){if(Q+3>=te)break;p[Q++]=240|J>>18,p[Q++]=128|J>>12&63,p[Q++]=128|J>>6&63,p[Q++]=128|63&J}else if(J<=67108863){if(Q+4>=te)break;p[Q++]=248|J>>24,p[Q++]=128|J>>18&63,p[Q++]=128|J>>12&63,p[Q++]=128|J>>6&63,p[Q++]=128|63&J}else{if(Q+5>=te)break;p[Q++]=252|J>>30,p[Q++]=128|J>>24&63,p[Q++]=128|J>>18&63,p[Q++]=128|J>>12&63,p[Q++]=128|J>>6&63,p[Q++]=128|63&J}}return p[Q]=0,Q-P}function In(C,p,Q){return ko(C,s,p,Q)}function Do(C){for(var p=0,Q=0;Q<C.length;++Q){var b=C.charCodeAt(Q);b>=55296&&b<=57343&&(b=65536+((1023&b)<<10)|1023&C.charCodeAt(++Q)),b<=127?++p:b<=2047?p+=2:b<=65535?p+=3:b<=2097151?p+=4:b<=67108863?p+=5:p+=6}return p}var un=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function al(C){for(var p=C,Q=p>>1;A[Q];)++Q;if((p=Q<<1)-C>32&&un)return un.decode(s.subarray(C,p));for(var b=0,P="";;){var te=A[C+2*b>>1];if(te==0)return P;++b,P+=String.fromCharCode(te)}}function ll(C,p,Q){if(Q===void 0&&(Q=2147483647),Q<2)return 0;for(var b=p,P=(Q-=2)<2*C.length?Q/2:C.length,te=0;te<P;++te){var ne=C.charCodeAt(te);A[p>>1]=ne,p+=2}return A[p>>1]=0,p-b}function cl(C){return 2*C.length}function gl(C){for(var p=0,Q="";;){var b=r[C+4*p>>2];if(b==0)return Q;if(++p,b>=65536){var P=b-65536;Q+=String.fromCharCode(55296|P>>10,56320|1023&P)}else Q+=String.fromCharCode(b)}}function dl(C,p,Q){if(Q===void 0&&(Q=2147483647),Q<4)return 0;for(var b=p,P=b+Q-4,te=0;te<C.length;++te){var ne=C.charCodeAt(te);if(ne>=55296&&ne<=57343&&(ne=65536+((1023&ne)<<10)|1023&C.charCodeAt(++te)),r[p>>2]=ne,(p+=4)+4>P)break}return r[p>>2]=0,p-b}function hl(C){for(var p=0,Q=0;Q<C.length;++Q){var b=C.charCodeAt(Q);b>=55296&&b<=57343&&++Q,p+=4}return p}function Il(C){var p=Do(C)+1,Q=vo(p);return Q&&ko(C,n,Q,p),Q}function ul(C){var p=Do(C)+1,Q=xo(p);return ko(C,n,Q,p),Q}function ml(C){return C}function Cl(){var C,p=function(){var b=Error();if(!b.stack){try{throw Error(0)}catch(P){b=P}if(!b.stack)return"(no stack trace available)"}return b.stack.toString()}();return h.extraStackTrace&&(p+=`
`+h.extraStackTrace()),(C=p).replace(/__Z[\w\d_]+/g,function(Q){var b,P=b=Q;return Q===P?Q:Q+" ["+P+"]"})}function fi(C,p){return C%p>0&&(C+=p-C%p),C}function mn(C){h.buffer=i=C}function Qi(){h.HEAP8=n=new Int8Array(i),h.HEAP16=A=new Int16Array(i),h.HEAP32=r=new Int32Array(i),h.HEAPU8=s=new Uint8Array(i),h.HEAPU16=g=new Uint16Array(i),h.HEAPU32=l=new Uint32Array(i),h.HEAPF32=u=new Float32Array(i),h.HEAPF64=d=new Float64Array(i)}function Cn(){var C=h.usingWasm?65536:16777216,p=2147483648-C;if(r[w>>2]>p)return!1;var Q=ke;for(ke=Math.max(ke,16777216);ke<r[w>>2];)ke=ke<=536870912?fi(2*ke,C):Math.min(fi((3*ke+2147483648)/4,C),p);var b=h.reallocBuffer(ke);return b&&b.byteLength==ke?(mn(b),Qi(),!0):(ke=Q,!1)}a=c=B=E=S=y=w=0,m=!1,h.reallocBuffer||(h.reallocBuffer=function(C){try{if(ArrayBuffer.transfer)p=ArrayBuffer.transfer(i,C);else{var p,Q=n;p=new ArrayBuffer(C),new Int8Array(p).set(Q)}}catch{return!1}return!!na(p)&&p});try{(k=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch{k=function(p){return p.byteLength}}var yi=h.TOTAL_STACK||5242880,ke=h.TOTAL_MEMORY||16777216;function jr(){return ke}function to(C){for(;C.length>0;){var p=C.shift();if(typeof p=="function"){p();continue}var Q=p.func;typeof Q=="number"?p.arg===void 0?h.dynCall_v(Q):h.dynCall_vi(Q,p.arg):Q(p.arg===void 0?null:p.arg)}}ke<yi&&K("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+ke+"! (TOTAL_STACK="+yi+")"),h.buffer?i=h.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(h.wasmMemory=new WebAssembly.Memory({initial:ke/65536}),i=h.wasmMemory.buffer):i=new ArrayBuffer(ke),h.buffer=i),Qi();var pn=[],Si=[],En=[],Bn=[],fn=[],wi=!1,Xr=!1;function $r(C){pn.unshift(C)}function pl(C){Si.unshift(C)}function El(C){En.unshift(C)}function Bl(C){Bn.unshift(C)}function ea(C){fn.unshift(C)}function fl(C,p,Q){var b,P;it("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),Q&&(b=n[P=p+Do(C)]),In(C,p,1/0),Q&&(n[P]=b)}function Ql(C,p,Q){return C>=0?C:p<=32?2*Math.abs(1<<p-1)+C:Math.pow(2,p)+C}function yl(C,p,Q){if(C<=0)return C;var b=p<=32?Math.abs(1<<p-1):Math.pow(2,p-1);return C>=b&&(p<=32||C>b)&&(C=-2*b+C),C}var ta=Math.abs,oa=Math.ceil,Qn=Math.floor,ia=Math.min,bt=0,ki=null,oo=null;function Sl(C){return C}h.preloadedImages={},h.preloadedAudios={};var yn="data:application/octet-stream;base64,";function bo(C){return String.prototype.startsWith?C.startsWith(yn):C.indexOf(yn)===0}(function(){var p="main.wast",Q="main.wasm",b="main.temp.asm.js";bo(p)||(p=ie(p)),bo(Q)||(Q=ie(Q)),bo(b)||(b=ie(b));var P={global:null,env:null,asm2wasm:Ot,parent:h},te=null;function ne(he){return he}function J(){try{if(h.wasmBinary)return new Uint8Array(h.wasmBinary);if(h.readBinary)return h.readBinary(Q);throw"both async and sync fetching of the wasm failed"}catch(he){lt(he)}}h.asmPreload=h.asm;var De=h.reallocBuffer,me=function(he){he=fi(he,h.usingWasm?65536:16777216);var ee=h.buffer.byteLength;if(h.usingWasm)try{var Te=h.wasmMemory.grow((he-ee)/65536);return Te!==-1?h.buffer=h.wasmMemory.buffer:null}catch{return null}};h.reallocBuffer=function(he){return Ce==="asmjs"?De(he):me(he)};var Ce="";h.asm=function(he,ee,Te){var Ve;if(!(ee=Ve=ee).table){var Je,Ke=h.wasmTableSize;Ke===void 0&&(Ke=1024);var vt=h.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?vt!==void 0?ee.table=new WebAssembly.Table({initial:Ke,maximum:vt,element:"anyfunc"}):ee.table=new WebAssembly.Table({initial:Ke,element:"anyfunc"}):ee.table=Array(Ke),h.wasmTable=ee.table}return ee.memoryBase||(ee.memoryBase=h.STATIC_BASE),ee.tableBase||(ee.tableBase=0),Je=function(no,Yt,xi){if(typeof WebAssembly!="object")return K("no native wasm support detected"),!1;if(!(h.wasmMemory instanceof WebAssembly.Memory))return K("no native wasm Memory in use"),!1;function Mo(nt,st){if((te=nt.exports).memory){var so,Mi,kn;so=te.memory,Mi=h.buffer,so.byteLength<Mi.byteLength&&K("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),kn=new Int8Array(Mi),new Int8Array(so).set(kn),mn(so),Qi()}h.asm=te,h.usingWasm=!0,function(Ml){if(bt--,h.monitorRunDependencies&&h.monitorRunDependencies(bt),bt==0&&(ki!==null&&(clearInterval(ki),ki=null),oo)){var sa=oo;oo=null,sa()}}("wasm-instantiate")}if(Yt.memory=h.wasmMemory,P.global={NaN:NaN,Infinity:1/0},P["global.Math"]=Math,P.env=Yt,bt++,h.monitorRunDependencies&&h.monitorRunDependencies(bt),h.instantiateWasm)try{return h.instantiateWasm(P,Mo)}catch(nt){return K("Module.instantiateWasm callback failed with error: "+nt),!1}function Vt(nt){Mo(nt.instance,nt.module)}function wn(nt){(!h.wasmBinary&&(G||U)&&typeof fetch=="function"?fetch(Q,{credentials:"same-origin"}).then(function(st){if(!st.ok)throw"failed to load wasm binary file at '"+Q+"'";return st.arrayBuffer()}).catch(function(){return J()}):new Promise(function(st,so){st(J())})).then(function(st){return WebAssembly.instantiate(st,P)}).then(nt).catch(function(st){K("failed to asynchronously prepare wasm: "+st),lt(st)})}return h.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||bo(Q)||typeof fetch!="function"?wn(Vt):WebAssembly.instantiateStreaming(fetch(Q,{credentials:"same-origin"}),P).then(Vt).catch(function(nt){K("wasm streaming compile failed: "+nt),K("falling back to ArrayBuffer instantiation"),wn(Vt)}),{}}(he,ee,Te),ut(Je,"no binaryen method succeeded."),Je},h.asm})(),c=(a=1024)+4816,Si.push(),h.STATIC_BASE=a,h.STATIC_BUMP=4816;var Oe=c;function wl(C){n[Oe]=n[C],n[Oe+1]=n[C+1],n[Oe+2]=n[C+2],n[Oe+3]=n[C+3]}function kl(C){n[Oe]=n[C],n[Oe+1]=n[C+1],n[Oe+2]=n[C+2],n[Oe+3]=n[C+3],n[Oe+4]=n[C+4],n[Oe+5]=n[C+5],n[Oe+6]=n[C+6],n[Oe+7]=n[C+7]}function Dl(C,p,Q){var b=Q>0?Q:Do(C)+1,P=Array(b),te=ko(C,P,0,P.length);return p&&(P.length=te),P}function bl(C){for(var p=[],Q=0;Q<C.length;Q++){var b=C[Q];b>255&&(b&=255),p.push(String.fromCharCode(b))}return p.join("")}c+=16,w=ge(4),S=(B=E=Se(c))+yi,y=Se(S),r[w>>2]=y,m=!0,h.wasmTableSize=4,h.wasmMaxTableSize=4,h.asmGlobalArg={},h.asmLibraryArg={abort:lt,assert:ut,enlargeMemory:Cn,getTotalMemory:jr,abortOnCannotGrowMemory:function(){lt("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+ke+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_iii:function(p,Q,b){var P=bi();try{return h.dynCall_iii(p,Q,b)}catch(te){if(Di(P),typeof te!="number"&&te!=="longjmp")throw te;h.setThrew(1,0)}},___assert_fail:function(p,Q,b,P){lt("Assertion failed: "+wo(p)+", at: "+[Q?wo(Q):"unknown filename",b,P?wo(P):"unknown function"])},___setErrNo:function(p){return h.___errno_location&&(r[h.___errno_location()>>2]=p),p},_abort:function(){h.abort()},_emscripten_memcpy_big:function(p,Q,b){return s.set(s.subarray(Q,Q+b),p),p},_llvm_floor_f64:Qn,DYNAMICTOP_PTR:w,tempDoublePtr:Oe,ABORT:So,STACKTOP:E,STACK_MAX:S};var Sn=h.asm(h.asmGlobalArg,h.asmLibraryArg,i);h.asm=Sn,h.___errno_location=function(){return h.asm.___errno_location.apply(null,arguments)};var na=h._emscripten_replace_memory=function(){return h.asm._emscripten_replace_memory.apply(null,arguments)};h._free=function(){return h.asm._free.apply(null,arguments)};var vo=h._malloc=function(){return h.asm._malloc.apply(null,arguments)};h._memcpy=function(){return h.asm._memcpy.apply(null,arguments)},h._memset=function(){return h.asm._memset.apply(null,arguments)},h._sbrk=function(){return h.asm._sbrk.apply(null,arguments)},h._stb_vorbis_js_channels=function(){return h.asm._stb_vorbis_js_channels.apply(null,arguments)},h._stb_vorbis_js_close=function(){return h.asm._stb_vorbis_js_close.apply(null,arguments)},h._stb_vorbis_js_decode=function(){return h.asm._stb_vorbis_js_decode.apply(null,arguments)},h._stb_vorbis_js_open=function(){return h.asm._stb_vorbis_js_open.apply(null,arguments)},h._stb_vorbis_js_sample_rate=function(){return h.asm._stb_vorbis_js_sample_rate.apply(null,arguments)},h.establishStackSpace=function(){return h.asm.establishStackSpace.apply(null,arguments)},h.getTempRet0=function(){return h.asm.getTempRet0.apply(null,arguments)},h.runPostSets=function(){return h.asm.runPostSets.apply(null,arguments)},h.setTempRet0=function(){return h.asm.setTempRet0.apply(null,arguments)},h.setThrew=function(){return h.asm.setThrew.apply(null,arguments)};var xo=h.stackAlloc=function(){return h.asm.stackAlloc.apply(null,arguments)},Di=h.stackRestore=function(){return h.asm.stackRestore.apply(null,arguments)},bi=h.stackSave=function(){return h.asm.stackSave.apply(null,arguments)};function io(C){this.name="ExitStatus",this.message="Program terminated with exit("+C+")",this.status=C}function vi(C){C=C||h.arguments,!(bt>0)&&(function(){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)$r(h.preRun.shift());to(pn)}(),!(bt>0)&&(h.calledRun||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),p()},1)):p())));function p(){!h.calledRun&&(h.calledRun=!0,So||(wi||(wi=!0,to(Si)),to(En),h.onRuntimeInitialized&&h.onRuntimeInitialized(),function(){if(h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;)ea(h.postRun.shift());to(fn)}()))}}function vl(C,p){(!p||!h.noExitRuntime||C!==0)&&(h.noExitRuntime||(So=!0,ln=C,E=D,to(Bn),Xr=!0,h.onExit&&h.onExit(C)),h.quit(C,new io(C)))}function lt(C){throw h.onAbort&&h.onAbort(C),C!==void 0?(T(C),K(C),C=JSON.stringify(C)):C="",So=!0,ln=1,"abort("+C+"). Build with -s ASSERTIONS=1 for more info."}if(h.dynCall_iii=function(){return h.asm.dynCall_iii.apply(null,arguments)},h.asm=Sn,h.ccall=dn,h.cwrap=function(p,Q,b,P){var te=(b=b||[]).every(function(ne){return ne==="number"});return Q!=="string"&&te&&!P?cn(p):function(){return dn(p,Q,b,arguments,P)}},io.prototype=Error(),io.prototype.constructor=io,oo=function C(){h.calledRun||vi(),h.calledRun||(oo=C)},h.run=vi,h.abort=lt,h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);h.preInit.length>0;)h.preInit.pop()();h.noExitRuntime=!0,vi(),h.onRuntimeInitialized=()=>{Gr=!0,Tr()},kt.decode=function(C){return function(Q){if(!Gr)throw Error("Not initialized");var b={};function P(Yt){return new Int32Array(h.HEAPU8.buffer,Yt,1)[0]}function te(Yt,xi){var Mo=new ArrayBuffer(xi*Float32Array.BYTES_PER_ELEMENT),Vt=new Float32Array(Mo);return Vt.set(new Float32Array(h.HEAPU8.buffer,Yt,xi)),Vt}b.open=h.cwrap("stb_vorbis_js_open","number",[]),b.close=h.cwrap("stb_vorbis_js_close","void",["number"]),b.channels=h.cwrap("stb_vorbis_js_channels","number",["number"]),b.sampleRate=h.cwrap("stb_vorbis_js_sample_rate","number",["number"]),b.decode=h.cwrap("stb_vorbis_js_decode","number",["number","number","number","number","number"]);var ne,J,De,me,Ce=b.open(),he=(ne=Q,J=Q.byteLength,De=h._malloc(J),(me=new Uint8Array(h.HEAPU8.buffer,De,J)).set(new Uint8Array(ne,0,J)),me),ee=h._malloc(4),Te=h._malloc(4),Ve=b.decode(Ce,he.byteOffset,he.byteLength,ee,Te);if(h._free(he.byteOffset),Ve<0)throw b.close(Ce),h._free(ee),Error("stbvorbis decode failed: "+Ve);for(var Je=b.channels(Ce),Ke=Array(Je),vt=new Int32Array(h.HEAPU32.buffer,P(ee),Je),ze=0;ze<Je;ze++)Ke[ze]=te(vt[ze],Ve),h._free(vt[ze]);var no=b.sampleRate(Ce);return b.close(Ce),h._free(P(ee)),h._free(ee),{data:Ke,sampleRate:no,eof:!0,error:null}}(C)}})();var zi=class extends Qt{constructor(e,t,i,n,s,A,g,r,l,u,d,a,c){super(e,A,g,r,l,u,n-t/2,s-t/2),this.sampleName=e,this.sampleStartIndex=t,this.sampleEndIndex=i,this.isSampleLoaded=!1,this.sampleID=a,this.sampleLength=this.sampleEndIndex-this.sampleStartIndex,this.sampleDataArray=d,this.sampleData=new Float32Array(0),this.isCompressed&&(this.sampleLoopStartIndex+=this.sampleStartIndex/2,this.sampleLoopEndIndex+=this.sampleStartIndex/2,this.sampleLength=99999999),this.isDataRaw=c}getRawData(){let e=this.sampleDataArray;if(this.isCompressed){if(this.compressedData)return this.compressedData;let t=e.currentIndex;return e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t)}else{this.isDataRaw||super.getRawData();let t=e.currentIndex;return e.slice(t+this.sampleStartIndex,t+this.sampleEndIndex)}}decodeVorbis(){if(this.sampleLength<1)return;let e=this.sampleDataArray,t=e.currentIndex,i=e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t);this.sampleData=new Float32Array(0);try{let n=kt.decode(i.buffer);this.sampleData=n.data[0]}catch(n){W(`Error decoding sample ${this.sampleName}: ${n}`),this.sampleData=new Float32Array(this.sampleLoopEndIndex+1)}}getAudioData(){return this.isSampleLoaded?this.sampleData:this.sampleLength<1?new Float32Array(1):this.isCompressed?(this.decodeVorbis(),this.isSampleLoaded=!0,this.sampleData):this.isDataRaw?this.loadUncompressedData():this.getUncompressedReadyData()}loadUncompressedData(){if(this.isCompressed)return W("Trying to load a compressed sample via loadUncompressedData()... aborting!"),new Float32Array(0);let e=new Float32Array(this.sampleLength/2),t=this.sampleDataArray.currentIndex,i=new Int16Array(this.sampleDataArray.slice(t+this.sampleStartIndex,t+this.sampleEndIndex).buffer);for(let n=0;n<i.length;n++)e[n]=i[n]/32768;return this.sampleData=e,this.isSampleLoaded=!0,e}getUncompressedReadyData(){let e=this.sampleDataArray.slice(this.sampleStartIndex/2,this.sampleEndIndex/2);return this.sampleData=e,this.isSampleLoaded=!0,e}};function Nr(o,e,t=!0){let i=[],n=0;for(;o.chunkData.length>o.chunkData.currentIndex;){let s=Pa(n,o.chunkData,e,t);i.push(s),n++}return i.length>1&&i.pop(),i}function Pa(o,e,t,i){let n=le(e,20),s=L(e,4)*2,A=L(e,4)*2,g=L(e,4),r=L(e,4),l=L(e,4),u=e[e.currentIndex++];u===255&&(u=60);let d=jn(e[e.currentIndex++]),a=L(e,2),c=L(e,2);return new zi(n,s,A,g,r,l,u,d,a,c,t,o,i)}var Wi=class extends q{constructor(e){super();let t=e.currentIndex;this.generatorType=e[t+1]<<8|e[t],this.generatorValue=mt(e[t+2],e[t+3]),e.currentIndex+=4}};function Zi(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(new Wi(o.chunkData));return e.length>1&&e.pop(),e}var ji=class extends yt{constructor(e){super(),this.instrumentName=le(e.chunkData,20).trim(),this.instrumentZoneIndex=L(e.chunkData,2),this.instrumentZonesAmount=0}getInstrumentZones(e,t){this.instrumentZonesAmount=e;for(let i=this.instrumentZoneIndex;i<this.instrumentZonesAmount+this.instrumentZoneIndex;i++)this.instrumentZones.push(t[i])}};function Ur(o,e){let t=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let i=new ji(o);if(t.length>0){let n=i.instrumentZoneIndex-t[t.length-1].instrumentZoneIndex;t[t.length-1].getInstrumentZones(n,e)}t.push(i)}return t.length>1&&t.pop(),t}var Xi=class extends Ge{constructor(e){super(),this.generatorZoneStartIndex=L(e,2),this.modulatorZoneStartIndex=L(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getSample(e){let t=this.generators.find(i=>i.generatorType===I.sampleID);t&&(this.sample=e[t.generatorValue],this.isGlobal=!1,this.sample.useCount++)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===I.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===I.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function qr(o,e,t,i){let n=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let s=new Xi(o.chunkData);if(n.length>0){let A=s.modulatorZoneStartIndex-n[n.length-1].modulatorZoneStartIndex,g=s.generatorZoneStartIndex-n[n.length-1].generatorZoneStartIndex;n[n.length-1].setZoneSize(A,g),n[n.length-1].getGenerators(e),n[n.length-1].getModulators(t),n[n.length-1].getSample(i),n[n.length-1].getKeyRange(),n[n.length-1].getVelRange()}n.push(s)}return n.length>1&&n.pop(),n}var $i=class extends ft{constructor(e){super(),this.generatorZoneStartIndex=L(e,2),this.modulatorZoneStartIndex=L(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getInstrument(e){let t=this.generators.find(i=>i.generatorType===I.instrument);t&&(this.instrument=e[t.generatorValue],this.instrument.addUseCount(),this.isGlobal=!1)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===I.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===I.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function _r(o,e,t,i){let n=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let s=new $i(o.chunkData);if(n.length>0){let A=s.modulatorZoneStartIndex-n[n.length-1].modulatorZoneStartIndex,g=s.generatorZoneStartIndex-n[n.length-1].generatorZoneStartIndex;n[n.length-1].setZoneSize(A,g),n[n.length-1].getGenerators(e),n[n.length-1].getModulators(t),n[n.length-1].getInstrument(i),n[n.length-1].getKeyRange(),n[n.length-1].getVelRange()}n.push(s)}return n.length>1&&n.pop(),n}var en=class extends St{constructor(e,t){super(t),this.presetName=le(e.chunkData,20).trim().replace(/\d{3}:\d{3}/,""),this.program=L(e.chunkData,2),this.bank=L(e.chunkData,2),this.presetZoneStartIndex=L(e.chunkData,2),this.library=L(e.chunkData,4),this.genre=L(e.chunkData,4),this.morphology=L(e.chunkData,4),this.presetZonesAmount=0}getPresetZones(e,t){this.presetZonesAmount=e;for(let i=this.presetZoneStartIndex;i<this.presetZonesAmount+this.presetZoneStartIndex;i++)this.presetZones.push(t[i])}};function Hr(o,e,t){let i=[];for(;o.chunkData.length>o.chunkData.currentIndex;){let n=new en(o,t);if(i.length>0){let s=n.presetZoneStartIndex-i[i.length-1].presetZoneStartIndex;i[i.length-1].getPresetZones(s,e)}i.push(n)}return i.length>1&&i.pop(),i}var tn=class extends Z{constructor(e){super({srcEnum:L(e,2),dest:L(e,2),amt:mt(e[e.currentIndex++],e[e.currentIndex++]),secSrcEnum:L(e,2),transform:L(e,2)})}};function mi(o){let e=[];for(;o.chunkData.length>o.chunkData.currentIndex;)e.push(new tn(o.chunkData));return e}var Ci=class extends wt{constructor(e,t=!0){super(),t&&console.warn("Using the constructor directly is deprecated. Use loadSoundFont instead."),this.dataArray=new F(e),Ne("%cParsing SoundFont...",f.info),this.dataArray||(j(),this.parsingError("No data provided!"));let i=se(this.dataArray,!1);this.verifyHeader(i,"riff");let n=le(this.dataArray,4).toLowerCase();if(n!=="sfbk"&&n!=="sfpk")throw j(),new SyntaxError(`Invalid soundFont! Expected "sfbk" or "sfpk" got "${n}"`);let s=n==="sfpk",A=se(this.dataArray);for(this.verifyHeader(A,"list"),le(A.chunkData,4);A.chunkData.length>A.chunkData.currentIndex;){let O=se(A.chunkData),H;switch(O.header.toLowerCase()){case"ifil":case"iver":H=`${L(O.chunkData,2)}.${L(O.chunkData,2)}`,this.soundFontInfo[O.header]=H;break;case"icmt":H=le(O.chunkData,O.chunkData.length,void 0,!1),this.soundFontInfo[O.header]=H;break;case"dmod":let X=mi(O);X.pop(),H=`Modulators: ${X.length}`;let ie=this.defaultModulators;this.defaultModulators=X,this.defaultModulators.push(...ie.filter(T=>!this.defaultModulators.find(K=>Z.isIdentical(T,K)))),this.soundFontInfo[O.header]=O.chunkData;break;default:H=le(O.chunkData,O.chunkData.length),this.soundFontInfo[O.header]=H}v(`%c"${O.header}": %c"${H}"`,f.info,f.recognized)}let g=se(this.dataArray,!1);this.verifyHeader(g,"list"),this.verifyText(le(this.dataArray,4),"sdta"),v("%cVerifying smpl chunk...",f.warn);let r=se(this.dataArray,!1);this.verifyHeader(r,"smpl");let l;if(s){v("%cSF2Pack detected, attempting to decode the smpl chunk...",f.info);try{l=kt.decode(this.dataArray.buffer.slice(this.dataArray.currentIndex,this.dataArray.currentIndex+g.size-12)).data[0]}catch(O){throw j(),new Error(`SF2Pack Ogg Vorbis decode error: ${O}`)}v(`%cDecoded the smpl chunk! Length: %c${l.length}`,f.info,f.value)}else l=this.dataArray,this.sampleDataStartIndex=this.dataArray.currentIndex;v(`%cSkipping sample chunk, length: %c${g.size-12}`,f.info,f.value),this.dataArray.currentIndex+=g.size-12,v("%cLoading preset data chunk...",f.warn);let u=se(this.dataArray);this.verifyHeader(u,"list"),le(u.chunkData,4);let d=se(u.chunkData);this.verifyHeader(d,"phdr");let a=se(u.chunkData);this.verifyHeader(a,"pbag");let c=se(u.chunkData);this.verifyHeader(c,"pmod");let m=se(u.chunkData);this.verifyHeader(m,"pgen");let B=se(u.chunkData);this.verifyHeader(B,"inst");let E=se(u.chunkData);this.verifyHeader(E,"ibag");let S=se(u.chunkData);this.verifyHeader(S,"imod");let y=se(u.chunkData);this.verifyHeader(y,"igen");let w=se(u.chunkData);this.verifyHeader(w,"shdr"),this.dataArray.currentIndex=this.sampleDataStartIndex,this.samples.push(...Nr(w,l,!s));let k=Zi(y),D=mi(S),h=qr(E,k,D,this.samples);this.instruments=Ur(B,h);let x=Zi(m),G=mi(c),U=_r(a,x,G,this.instruments);this.presets.push(...Hr(d,U,this.defaultModulators)),this.presets.sort((O,H)=>O.program-H.program+(O.bank-H.bank)),v(`%cParsing finished! %c"${this.soundFontInfo.INAM}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,f.info,f.recognized,f.info,f.recognized,f.info,f.recognized,f.info,f.recognized,f.info),j(),s&&delete this.dataArray}verifyHeader(e,t){e.header.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`Invalid chunk header! Expected "${t.toLowerCase()}" got "${e.header.toLowerCase()}"`))}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`Invalid FourCC: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"\``))}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};function It(o){let e=o.slice(8,12),t=new F(e);return le(t,4,void 0,!1).toLowerCase()==="dls "?new ht(o):new Ci(o,!1)}async function Pr(){let o="locale.exportAudio.formats.formats.soundfont.options.";Ae(this.localeManager.getLocaleString(o+"title"),[{type:"toggle",translatePathTitle:o+"trim",attributes:{"trim-toggle":"1",checked:"checked"}},{type:"toggle",translatePathTitle:o+"compress",attributes:{"compress-toggle":"1"}},{type:"range",translatePathTitle:o+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked,i=e.div.querySelector("input[compress-toggle='1']").checked,n=parseInt(e.div.querySelector("input[type='range']").value)/10;oe(e.id),Ne("%cExporting minified soundfont...",f.info);let s=await this.seq.getMIDI(),A=It(s.embeddedSoundFont||this.soundFont);Ct(s,await this.synth.getSynthesizerSnapshot()),t&&Xt(A,s);let g=A.write({compress:i,compressionQuality:n,compressionFunction:await this.getVorbinsEncodeFunction()}),r=new Blob([g.buffer],{type:"audio/soundfont"}),l=A.soundFontInfo.ifil.split(".")[0]==="3"?"sf3":"sf2";this.saveBlob(r,`${A.soundFontInfo.INAM||"unnamed"}.${l}`),j()}}],99999999,!0,this.localeManager)}async function Or(){let o="locale.exportAudio.formats.";Ae(this.localeManager.getLocaleString(o+"title"),[{type:"button",translatePathTitle:o+"formats.wav.button",onClick:e=>{oe(e.id),this._exportAudioData()}},{type:"button",translatePathTitle:o+"formats.midi.button",onClick:e=>{oe(e.id),this.exportMidi()}},{type:"button",translatePathTitle:o+"formats.soundfont.button",onClick:e=>{oe(e.id);try{this._exportSoundfont()}catch{Ae("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:o+"formats.dls.button",onClick:e=>{oe(e.id);try{this._exportDLS()}catch{Ae("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:o+"formats.rmidi.button",onClick:e=>{oe(e.id);try{this._exportRMIDI()}catch{Ae("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}}],999999,!0,this.localeManager,{display:"flex",flexWrap:"wrap",justifyContent:"center"})}async function Yr(){let o=(d,a,c)=>this.seq.midiData.RMIDInfo?.[d]===void 0?a:c.decode(this.seq.midiData.RMIDInfo?.[d]).replace(/\0$/,""),e=o("IENC","ascii",new TextDecoder),t=new TextDecoder(e),i=o("IPRD","",t),n=o("IART","",t),s=o("IGNR","",t),A=o("ICMT","Created using SpessaSynth: https://spessasus.github.io/SpessaSynth",t),g="locale.exportAudio.formats.formats.rmidi.options.",r="locale.exportAudio.formats.metadata.",u=Ae(this.localeManager.getLocaleString(g+"title"),[{type:"toggle",translatePathTitle:g+"compress",attributes:{"compress-toggle":"1",checked:"true"}},{type:"range",translatePathTitle:g+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"input",translatePathTitle:r+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:r+"album",attributes:{value:i,name:"album",type:"text"}},{type:"input",translatePathTitle:r+"artist",attributes:{value:n,name:"artist",type:"text"}},{type:"input",translatePathTitle:r+"genre",attributes:{value:s,name:"genre",type:"text"}},{type:"input",translatePathTitle:r+"comment",attributes:{value:A,name:"comment",type:"text"}},{type:"file",translatePathTitle:r+"albumCover",attributes:{value:this.seq.midiData.RMIDInfo?.IPIC!==void 0?this.seq.midiData.RMIDInfo.IPIC:"",name:"cover",accept:"image/*"}},{type:"input",translatePathTitle:g+"bankOffset",attributes:{value:this.seq.midiData.bankOffset,name:"bank_offset",type:"number"}},{type:"toggle",translatePathTitle:g+"adjust",attributes:{name:"adjust",checked:"checked"}},{type:"button",textContent:this.localeManager.getLocaleString(g+"confirm"),onClick:async d=>{let a=d.div.querySelector("input[compress-toggle='1']").checked,c=parseInt(d.div.querySelector("input[type='range']").value)/10,m=d.div.querySelector("input[name='album']").value,B=d.div.querySelector("input[name='artist']").value,E=d.div.querySelector("input[name='song_title']").value,S=d.div.querySelector("input[name='comment']").value,y=d.div.querySelector("input[name='genre']").value,w=parseInt(d.div.querySelector("input[name='bank_offset']").value),k=d.div.querySelector("input[name='adjust']").checked,D=d.div.querySelector("input[type='file']")?.files[0];oe(d.id),Ee("%cExporting RMIDI...",f.info);let h="locale.exportAudio.formats.formats.rmidi.progress.",x=Ae(this.localeManager.getLocaleString(h+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(h+"loading"),attributes:{class:"export_rmidi_message"}}],9999999,!1);await new Promise(K=>setTimeout(K,500));let G=x.div.getElementsByClassName("export_rmidi_message")[0],U=await this.seq.getMIDI(),O=It(U.embeddedSoundFont||this.soundFont);G.textContent=this.localeManager.getLocaleString(h+"modifyingMIDI"),await new Promise(K=>setTimeout(K,75)),Ct(U,await this.synth.getSynthesizerSnapshot()),G.textContent=this.localeManager.getLocaleString(h+"modifyingSoundfont"),await new Promise(K=>setTimeout(K,75)),Xt(O,U);let H=O.write({compress:a,compressionQuality:c,compressionFunction:await this.getVorbinsEncodeFunction()});G.textContent=this.localeManager.getLocaleString(h+"saving"),await new Promise(K=>setTimeout(K,75));let X;D?.type.split("/")[0]==="image"?X=await D.arrayBuffer():U.RMIDInfo?.IPIC!==void 0&&(X=U.RMIDInfo.IPIC.buffer);let ie=Vo(H,U,O,w,this.seqUI.encoding,{name:E,comment:S,engineer:O.soundFontInfo.IENG,picture:X,album:m.length>0?m:void 0,artist:B.length>0?B:void 0,genre:y.length>0?y:void 0,midiEncoding:this.seqUI.encoding},k),T=new Blob([ie.buffer],{type:"audio/rmid"});this.saveBlob(T,`${E||"unnamed_song"}.rmi`),G.textContent=this.localeManager.getLocaleString(h+"done"),oe(x.id),j()}}],9999999,!0,this.localeManager).div.querySelector("input[type='file']");u.oninput=()=>{u.files[0]&&(u.parentElement.firstChild.textContent=u.files[0].name)}}var Vr="synthetizer/worklet_processor.min.js";var pi=class{constructor(e,t){let i=document.getElementsByClassName("drop_prompt")[0];document.body.addEventListener("dragover",n=>{n.preventDefault(),i.classList.remove("hidden")}),document.body.addEventListener("dragend",()=>{i.classList.add("hidden")}),document.body.addEventListener("drop",async n=>{if(n.preventDefault(),i.classList.add("hidden"),!n.dataTransfer.files[0])return;let s=[];for(let A of n.dataTransfer.files){let g=A.name,r=await A.arrayBuffer(),l=r.slice(0,4),u=new TextDecoder;if(u.decode(l)==="RIFF"){let d=r.slice(8,12);if(u.decode(d)==="RMID"){s.push({binary:r,altName:g});continue}t(r);continue}s.push({binary:r,altName:g})}e(s)})}};async function Jr(){let o="locale.exportAudio.formats.formats.dls.warning.";Ae(this.localeManager.getLocaleString(o+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(o+"message"),attributes:{style:"font-weight: bold"}},{type:"toggle",translatePathTitle:"locale.exportAudio.formats.formats.soundfont.options.trim",attributes:{"trim-toggle":"1"}},{type:"button",textContent:this.localeManager.getLocaleString(o+"details"),onClick:()=>{window.open("https://github.com/spessasus/SpessaSynth/wiki/DLS-Conversion-Problem")}},{type:"button",textContent:this.localeManager.getLocaleString(o+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked;oe(e.id),Ne("%cExporting DLS...",f.info);let i=await this.seq.getMIDI(),n=It(i.embeddedSoundFont||this.soundFont);Ct(i,await this.synth.getSynthesizerSnapshot()),t&&Xt(n,i);try{let s=n.writeDLS(),A=new Blob([s.buffer],{type:"audio/dls"});this.saveBlob(A,`${n.soundFontInfo.INAM||"unnamed"}.dls`)}catch(s){W("Failed to export DLS: ",s),Ae(this.localeManager.getLocaleString("locale.error"),[{type:"text",textContent:s,attributes:{style:"font-weight: bold; color: red"}}])}j()}}],99999999,!0,this.localeManager)}document.body.classList.add("load");var Oa=!1,ot=class{channelColors=["rgba(255, 99, 71, 1)","rgba(255, 165, 0, 1)","rgba(255, 215, 0, 1)","rgba(50, 205, 50, 1)","rgba(60, 179, 113, 1)","rgba(0, 128, 0, 1)","rgba(0, 191, 255, 1)","rgba(65, 105, 225, 1)","rgba(138, 43, 226, 1)","rgba(50, 120, 125, 1)","rgba(255, 0, 255, 1)","rgba(255, 20, 147, 1)","rgba(218, 112, 214, 1)","rgba(240, 128, 128, 1)","rgba(255, 192, 203, 1)","rgba(255, 255, 0, 1)"];sfError;compressio;compressionFunction=void 0;constructor(e,t,i,n=Oa){this.localeManager=i,this.context=e,this.enableDebug=n,this.isExporting=!1;let s;this.ready=new Promise(A=>s=A),this.initializeContext(e,t).then(()=>{s()})}async getVorbinsEncodeFunction(){return this.compressionFunction!==void 0?this.compressionFunction:(this.compressionFunction=(await import("../externals/libvorbis/encode_vorbis.js")).encodeVorbis,this.compressionFunction)}saveBlob(e,t){let i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download=t,n.click(),v(n)}async initializeContext(e,t){if(!e.audioWorklet)throw alert("Audio worklet is not supported on your browser. Sorry!"),new Error("Audio worklet is not supported");for(let a of document.querySelectorAll("*[translate-path]"))this.localeManager.bindObjectProperty(a,"innerText",a.getAttribute("translate-path"));for(let a of document.querySelectorAll("*[translate-path-title]"))this.localeManager.bindObjectProperty(a,"innerText",a.getAttribute("translate-path-title")+".title"),this.localeManager.bindObjectProperty(a,"title",a.getAttribute("translate-path-title")+".description");this.soundFont=t;let n=this.enableDebug?"synthetizer/worklet_system/worklet_processor.js":Vr;this.enableDebug&&console.warn("DEBUG ENABLED! DEBUGGING ENABLED!!");let s=window.isLocalEdition?"../../../spessasynth_lib/":"../../spessasynth_lib/";this.workletPath=s+n,e.audioWorklet&&await e.audioWorklet.addModule(new URL(this.workletPath,import.meta.url));let A=new URL(s+"synthetizer/audio_effects/impulse_response_2.flac",import.meta.url),r=await(await fetch(A)).arrayBuffer();this.impulseResponseRaw=r,this.impulseResponse=await e.decodeAudioData(r.slice(0,r.byteLength)),this.audioDelay=new DelayNode(e,{delayTime:0}),this.audioDelay.connect(e.destination),this.synth=new Jt(this.audioDelay,this.soundFont,void 0,void 0,{chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:this.impulseResponse,reverbEnabled:!0}),this.synth.eventHandler.addEvent("soundfonterror","manager-sf-error",a=>{this.sfError&&this.sfError(a.message)}),await this.synth.isReady,this.midHandler=new $o,this.wml=new ei(this.synth),this.keyboard=new lo(this.channelColors,this.synth);let l=document.getElementById("note_canvas");l.width=window.innerWidth*window.devicePixelRatio,l.height=window.innerHeight*window.devicePixelRatio,this.renderer=new _e(this.channelColors,this.synth,l,window.SPESSASYNTH_VERSION),this.renderer.render(!0);let u=!1,d=()=>{if(l.width=window.innerWidth*window.devicePixelRatio,l.height=window.innerHeight*window.devicePixelRatio,this.renderer.computeColors(),qe){if(window.innerWidth/window.innerHeight>1){if(!u){let a=document.getElementById("title_wrapper"),c=document.getElementById("settings_div");u=!0,a.parentElement.insertBefore(c,a)}}else if(u){let a=document.getElementById("title_wrapper"),c=document.getElementById("settings_div");u=!1,a.parentElement.insertBefore(a,c)}}this.renderer.render(!1,!0)};d(),window.addEventListener("resize",d.bind(this)),window.addEventListener("orientationchange",d.bind(this)),qe&&(this.renderer.keyRange={min:48,max:72},this.keyboard.setKeyRange({min:48,max:72},!1)),this.synthUI=new tt(this.channelColors,document.getElementById("synthetizer_controls"),this.localeManager),this.synthUI.connectSynth(this.synth),this.synthUI.connectKeyboard(this.keyboard),this.playerUI=new si(document.getElementById("player_info"),this.localeManager),this.seqUI=new gt(document.getElementById("sequencer_controls"),this.localeManager,this.playerUI,this.renderer),this.settingsUI=new Le(document.getElementById("settings_div"),this.synthUI,this.seqUI,this.renderer,this.keyboard,this.midHandler,this.playerUI,this.localeManager,this.audioDelay),this.dropFileHandler=new pi(async a=>{if(a.length===0)return;await this.context.resume(),this.play(a);let c=a[0].altName;c>20&&(c=c.substring(0,21)+"..."),document.getElementById("file_upload").textContent=c;let m=document.getElementById("export_button");m.style.display="flex",m.onclick=this.exportSong.bind(this),window.isLocalEdition||(document.getElementById("demo_song").style.display="none")},a=>{this.reloadSf(a)}),document.addEventListener("keydown",a=>{if(!a.ctrlKey)switch(a.key.toLowerCase()){case ye.cinematicMode:this.seq&&this.seq.pause();let c=window.prompt(`Cinematic mode activated!
 Paste the link to the image for canvas (leave blank to disable)`,"");if(this.seq&&this.seq.play(),c===null)return;l.style.background=`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), center center / cover url("${c}")`,document.getElementsByClassName("top_part")[0].style.display="none",document.getElementsByClassName("bottom_part")[0].style.display="none",document.body.requestFullscreen().then();break;case ye.videoMode:this.seq&&this.seq.pause();let m=window.prompt(`Video mode!
 Paste the link to the video source (leave blank to disable)
Note: the video will be available in console as 'video'`,"");if(m===null)return;let B=document.createElement("video");B.src=m,B.classList.add("secret_video"),l.parentElement.appendChild(B),B.play(),window.video=B,this.seq&&(B.currentTime=parseFloat(window.prompt("Video offset to sync to midi, in seconds.","0")),B.play(),this.seq.currentTime=0),document.addEventListener("keydown",E=>{E.key===" "&&(B.paused?B.play():B.pause())});break}}),this.renderer.render(!1,!0)}doDLSCheck(){if(window.isLocalEdition!==!0){let e=this.soundFont.slice(8,12);le(new F(e),4).toLowerCase()==="dls "&&Ae(this.localeManager.getLocaleString("locale.convertDls.title"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.convertDls.message")},{type:"button",textContent:this.localeManager.getLocaleString("locale.yes"),onClick:i=>{oe(i.id),this.downloadDesfont()}},{type:"button",textContent:this.localeManager.getLocaleString("locale.no"),onClick:i=>{oe(i.id)}}],99999999)}}async reloadSf(e){await this.synth.soundfontManager.reloadManager(e),this.soundFont=e,setTimeout(()=>{this.doDLSCheck()},3e3)}play(e){if(this.synth){if(this.seq){this.seq.loadNewSongList(e),this.seq.play(!0);return}this.seq=new Jo(e,this.synth),this.seq.onError=t=>{document.getElementById("title").textContent=t},this.seqUI.connectSequencer(this.seq),this.playerUI.connectSequencer(this.seq),this.renderer.connectSequencer(this.seq),this.settingsUI.addSequencer(this.seq),this.seq.play(!0)}}async downloadDLSRMI(){let e=await this.seq.getMIDI(),t=It(this.soundFont),i=Vo(t.writeDLS(),e,t),n=new Blob([i.buffer],{type:"audio/rmid"});this.saveBlob(n,`${e.midiName}.rmi`)}downloadDesfont(){let e=It(this.soundFont),t=e.write(),i=new Blob([t.buffer],{type:"audio/soundfont"});this.saveBlob(i,`${e.soundFontInfo.INAM}.sf2`)}};ot.prototype.exportSong=Or;ot.prototype._exportAudioData=er;ot.prototype._doExportAudioData=$A;ot.prototype.exportMidi=tr;ot.prototype._exportSoundfont=Pr;ot.prototype._exportDLS=Jr;ot.prototype._exportRMIDI=Yr;var Ya=44100,Va="GeneralUserGS.sf3",Ei=document.getElementById("title"),Dt=document.getElementById("midi_file_input"),Ja=document.getElementById("sf_file_input"),Kr=document.getElementById("demo_song"),on=document.getElementById("export_button"),qt=document.getElementsByClassName("loading")[0],Pe=document.getElementById("loading_message"),Ka=document.getElementById("demo_download_button"),za=await(await fetch("package.json")).json();window.SPESSASYNTH_VERSION=za.version;var Wa="spessasynth-db",Ht="soundFontStore";function An(o){let e=indexedDB.open(Wa,1);e.onsuccess=()=>{let t=e.result;o(t)},e.onupgradeneeded=t=>{t.target.result.createObjectStore(Ht,{keyPath:"id"})}}async function Za(){return await new Promise(o=>{An(e=>{let n=e.transaction([Ht],"readonly").objectStore(Ht).get("buffer");n.onerror=s=>{console.error("Database error"),console.error(s),o(void 0)},n.onsuccess=async()=>{let s=n.result;if(!s){o(void 0);return}o(s.data)}})})}function _t(o,e=!0){let t=qt.getElementsByClassName("loading_icon")[0];t.innerHTML=o,t.style.animation=e?"none":""}async function zr(o){An(e=>{let i=e.transaction([Ht],"readwrite").objectStore(Ht);try{let n=i.put({id:"buffer",data:o});n.onsuccess=()=>{v("SoundFont stored successfully")},n.onerror=s=>{console.error("Error saving soundfont",s)}}catch(n){W("Failed saving soundfont:",n)}})}async function ja(o){let e=new Ai(o);try{let n=window.AudioContext||window.webkitAudioContext;window.audioContextMain=new n({sampleRate:Ya})}catch(n){throw _t(po(256)),Pe.textContent=e.getLocaleString("locale.synthInit.noWebAudio"),n}Pe.textContent=e.getLocaleString("locale.synthInit.loadingSoundfont");let t=await Za(),i=!0;if(t===void 0){W("Failed to load from db, fetching online instead"),i=!1;let n=document.getElementById("progress_bar"),s=e.getLocaleString("locale.synthInit.loadingBundledSoundfont");Pe.textContent=s,t=await Xa(`soundfonts/${Va}`,A=>{Pe.textContent=`${s} ${A}%`}),n.style.width="0"}else v("Loaded the soundfont from the database succesfully");window.soundFontParser=t,i||(Pe.textContent=e.getLocaleString("locale.synthInit.savingSoundfont"),await zr(t)),window.audioContextMain.state!=="running"&&document.addEventListener("mousedown",()=>{window.audioContextMain.state!=="running"&&window.audioContextMain.resume().then()}),Pe.textContent=e.getLocaleString("locale.synthInit.startingSynthesizer"),window.manager=new ot(audioContextMain,soundFontParser,e),window.manager.sfError=n=>{_t(po(256)),i?(W("Invalid soundfont in the database. Resetting."),An(s=>{let r=s.transaction([Ht],"readwrite").objectStore(Ht).delete("buffer");r.onsuccess=()=>{location.reload()}})):Ei.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${n}</pre>`,Pe.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${n}</pre>`},await manager.ready,Dt.files[0]?await nn(Dt.files):(Dt.onclick=void 0,Dt.onchange=()=>{Dt.files[0]&&nn(Dt.files).then()}),_t(_i(256)),Pe.textContent=e.getLocaleString("locale.synthInit.done")}async function Xa(o,e){let t=await fetch(o);if(!t.ok)throw Ei.innerText="Error downloading soundfont!",t;let i=t.headers.get("content-length"),n=await(await t.body).getReader(),s=!1,A=new Uint8Array(parseInt(i)),g=0;do{let r=await n.read();r.value&&(A.set(r.value,g),g+=r.value.length),s=r.done;let l=Math.round(g/i*100);e(l)}while(!s);return A.buffer}async function nn(o){Kr.style.display="none";let e;o[0].name.length>20?e=o[0].name.substring(0,21)+"...":e=o[0].name,o.length>1&&(e+=` and ${o.length-1} others`),document.getElementById("file_upload").innerText=e,document.getElementById("file_upload").title=o[0].name;let t=[];for(let i of o)t.push({binary:await i.arrayBuffer(),altName:i.name});manager.synth.setLogLevel(!1,!1,!1,!1),manager.seq?manager.seq.loadNewSongList(t):manager.play(t),on.style.display="flex",on.onclick=window.manager.exportSong.bind(window.manager)}function $a(o){localStorage.setItem("spessasynth-settings",JSON.stringify(o)),v("saved as",o)}window.saveSettings=$a;var yo=JSON.parse(localStorage.getItem("spessasynth-settings"));yo!==null&&(window.savedSettings=new Promise(o=>{o(yo)}));var sn;yo&&yo.interface&&yo.interface.language?sn=(await savedSettings).interface.language||navigator.language.split("-")[0].toLowerCase():sn=navigator.language.split("-")[0].toLowerCase();Dt.value="";Dt.focus();on.style.display="none";document.getElementById("sf_upload").style.display="none";document.getElementById("file_upload").style.display="none";async function el(o){Ei.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_songs/"+o);e.name=o,await nn([e])}ja(sn).then(()=>{document.getElementById("sf_upload").style.display="flex",document.getElementById("file_upload").style.display="flex",qt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{qt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll"),qe&&window.chrome&&Ae(window.manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.chromeMobile")}],7)},1e3),Ja.onchange=o=>{if(!o.target.files[0])return;let e=o.target.files[0];window.manager.seq&&window.manager.seq.pause(),document.getElementById("sf_upload").firstElementChild.innerText=e.name,qt.style.display="",setTimeout(async()=>{qt.classList.remove("done"),_t(ls(256),!1),Pe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.loadingSoundfont");let t=performance.now()/1e3,i;try{i=await e.arrayBuffer(),window.soundFontParser=i}catch(s){throw Pe.textContent=window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory"),_t(po(256)),Ae(manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),s}window.manager.sfError=s=>{Pe.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${s}</pre>`,_t(po(256)),console.error(s)},Pe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.startingSynthesizer"),await window.manager.reloadSf(i),window.manager.seq&&(window.manager.seq.currentTime-=.1),Pe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.savingSoundfont"),await zr(i);let n=performance.now()/1e3-t;await new Promise(s=>setTimeout(s,1e3-n)),_t(_i(256)),Pe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.done"),qt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{qt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll")},1e3)},75)},Kr.onclick=async()=>{let o=[{type:"button",textContent:"Bundled SoundFont Credits",onClick:()=>{window.open("https://schristiancollins.com/generaluser.php")}}];Ei.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await(await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_song_list.json")).text(),t=JSON.parse(e);for(let i of t)o.push({type:"button",textContent:i.name,onClick:n=>{oe(n.id),Ae(window.manager.localeManager.getLocaleString("locale.credits"),[{type:"text",textContent:i.credits.replace(`
`,`\r
\r
`),attributes:{style:"white-space: pre-line;"}},{type:"button",textContent:"Ok",onClick:s=>{oe(s.id)}}],999999,!0,void 0,void 0,async()=>{await el(i.fileName)})}});Ae(window.manager.localeManager.getLocaleString("locale.demoSongButton"),o,999999,!0,void 0)},Ka.onclick=()=>{Ae(window.manager.localeManager.getLocaleString("locale.demoDownload.main"),[{type:"button",translatePathTitle:"locale.demoDownload.downloadLocal",onClick:o=>{oe(o.id),window.open("https://github.com/spessasus/SpessaSynth/archive/refs/heads/master.zip")}},{type:"button",textContent:window.manager.localeManager.getLocaleString("locale.demoGithubPage"),onClick:o=>{oe(o.id),window.open("https://github.com/spessasus/SpessaSynth#readme")}}],9999999,!0,window.manager.localeManager)}});
